/*! For license information please see 592.9c32fe17.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_leather_io_extension=self.webpackChunk_leather_io_extension||[]).push([[592],{"./node_modules/.pnpm/@bitcoinerlab+secp256k1@1.0.2/node_modules/@bitcoinerlab/secp256k1/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,necc=__webpack_require__("./node_modules/.pnpm/@noble+secp256k1@1.7.1/node_modules/@noble/secp256k1/lib/index.js"),hmac=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/hmac.js"),sha256=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha256.js");function _interopNamespaceDefault(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}})),n.default=e,Object.freeze(n)}var necc__namespace=_interopNamespaceDefault(necc);necc__namespace.utils.hmacSha256Sync=(key,...msgs)=>hmac.hmac(sha256.sha256,key,necc__namespace.utils.concatBytes(...msgs)),necc__namespace.utils.sha256Sync=(...msgs)=>sha256.sha256(necc__namespace.utils.concatBytes(...msgs));const normalizePrivateKey=necc__namespace.utils._normalizePrivateKey,HASH_SIZE=32,TWEAK_SIZE=32,BN32_N=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),EXTRA_DATA_SIZE=32;function cmpBN32(data1,data2){for(let i=0;i<32;++i)if(data1[i]!==data2[i])return data1[i]<data2[i]?-1:1;return 0}function isTweak(tweak){return tweak instanceof Uint8Array&&tweak.length===TWEAK_SIZE&&!(cmpBN32(tweak,BN32_N)>=0)}function isSignature(signature){return signature instanceof Uint8Array&&64===signature.length&&cmpBN32(signature.subarray(0,32),BN32_N)<0&&cmpBN32(signature.subarray(32,64),BN32_N)<0}function isHash(h){return h instanceof Uint8Array&&h.length===HASH_SIZE}function isExtraData(e){return void 0===e||e instanceof Uint8Array&&e.length===EXTRA_DATA_SIZE}function hexToNumber(hex){if("string"!=typeof hex)throw new TypeError("hexToNumber: expected string, got "+typeof hex);return BigInt(`0x${hex}`)}function normalizeScalar(scalar){let num;if("bigint"==typeof scalar)num=scalar;else if("number"==typeof scalar&&Number.isSafeInteger(scalar)&&scalar>=0)num=BigInt(scalar);else if("string"==typeof scalar){if(64!==scalar.length)throw new Error("Expected 32 bytes of private scalar");num=hexToNumber(scalar)}else{if(!(scalar instanceof Uint8Array))throw new TypeError("Expected valid private scalar");if(32!==scalar.length)throw new Error("Expected 32 bytes of private scalar");num=function bytesToNumber(bytes){return hexToNumber(necc__namespace.utils.bytesToHex(bytes))}(scalar)}if(num<0)throw new Error("Expected private scalar >= 0");return num}const _pointAddScalar=(p,tweak,isCompressed)=>{const P=necc__namespace.Point.fromHex(p),t=normalizeScalar(tweak),Q=necc__namespace.Point.BASE.multiplyAndAddUnsafe(P,t,1n);if(!Q)throw new Error("Tweaked point at infinity");return Q.toRawBytes(isCompressed)};function assumeCompression(compressed,p){return void 0===compressed?void 0===p||isPointCompressed(p):!!compressed}function throwToNull(fn){try{return fn()}catch(e){return null}}function _isPoint(p,xOnly){if(32===p.length!==xOnly)return!1;try{return!!necc__namespace.Point.fromHex(p)}catch(e){return!1}}function isPoint(p){return _isPoint(p,!1)}function isPointCompressed(p){return _isPoint(p,!1)&&33===p.length}function isPrivate(d){return necc__namespace.utils.isValidPrivateKey(d)}function isXOnlyPoint(p){return _isPoint(p,!0)}function xOnlyPointFromPoint(p){if(!isPoint(p))throw new Error("Expected Point");return p.slice(1,33)}function pointFromScalar(sk,compressed){if(!isPrivate(sk))throw new Error("Expected Private");return throwToNull((()=>necc__namespace.getPublicKey(sk,assumeCompression(compressed))))}exports.isPoint=isPoint,exports.isPointCompressed=isPointCompressed,exports.isPrivate=isPrivate,exports.isXOnlyPoint=isXOnlyPoint,exports.pointAdd=function pointAdd(a,b,compressed){if(!isPoint(a)||!isPoint(b))throw new Error("Expected Point");return throwToNull((()=>{const A=necc__namespace.Point.fromHex(a),B=necc__namespace.Point.fromHex(b);return A.equals(B.negate())?null:A.add(B).toRawBytes(assumeCompression(compressed,a))}))},exports.pointAddScalar=function pointAddScalar(p,tweak,compressed){if(!isPoint(p))throw new Error("Expected Point");if(!isTweak(tweak))throw new Error("Expected Tweak");return throwToNull((()=>_pointAddScalar(p,tweak,assumeCompression(compressed,p))))},exports.pointCompress=function pointCompress(p,compressed){if(!isPoint(p))throw new Error("Expected Point");return necc__namespace.Point.fromHex(p).toRawBytes(assumeCompression(compressed,p))},exports.pointFromScalar=pointFromScalar,exports.pointMultiply=function pointMultiply(a,tweak,compressed){if(!isPoint(a))throw new Error("Expected Point");if(!isTweak(tweak))throw new Error("Expected Tweak");return throwToNull((()=>((p,tweak,isCompressed)=>{const P=necc__namespace.Point.fromHex(p),h="string"==typeof tweak?tweak:necc__namespace.utils.bytesToHex(tweak),t=BigInt(`0x${h}`);return P.multiply(t).toRawBytes(isCompressed)})(a,tweak,assumeCompression(compressed,a))))},exports.privateAdd=function privateAdd(d,tweak){if(!1===isPrivate(d))throw new Error("Expected Private");if(!1===isTweak(tweak))throw new Error("Expected Tweak");return throwToNull((()=>((privateKey,tweak)=>{const p=normalizePrivateKey(privateKey),t=normalizeScalar(tweak),add=necc__namespace.utils._bigintTo32Bytes(necc__namespace.utils.mod(p+t,necc__namespace.CURVE.n));return necc__namespace.utils.isValidPrivateKey(add)?add:null})(d,tweak)))},exports.privateNegate=function privateNegate(d){if(!1===isPrivate(d))throw new Error("Expected Private");return(privateKey=>{const p=normalizePrivateKey(privateKey),not=necc__namespace.utils._bigintTo32Bytes(necc__namespace.CURVE.n-p);return necc__namespace.utils.isValidPrivateKey(not)?not:null})(d)},exports.privateSub=function privateSub(d,tweak){if(!1===isPrivate(d))throw new Error("Expected Private");if(!1===isTweak(tweak))throw new Error("Expected Tweak");return throwToNull((()=>((privateKey,tweak)=>{const p=normalizePrivateKey(privateKey),t=normalizeScalar(tweak),sub=necc__namespace.utils._bigintTo32Bytes(necc__namespace.utils.mod(p-t,necc__namespace.CURVE.n));return necc__namespace.utils.isValidPrivateKey(sub)?sub:null})(d,tweak)))},exports.sign=function sign(h,d,e){if(!isPrivate(d))throw new Error("Expected Private");if(!isHash(h))throw new Error("Expected Scalar");if(!isExtraData(e))throw new Error("Expected Extra Data (32 bytes)");return necc__namespace.signSync(h,d,{der:!1,extraEntropy:e})},exports.signSchnorr=function signSchnorr(h,d,e=Buffer.alloc(32,0)){if(!isPrivate(d))throw new Error("Expected Private");if(!isHash(h))throw new Error("Expected Scalar");if(!isExtraData(e))throw new Error("Expected Extra Data (32 bytes)");return necc__namespace.schnorr.signSync(h,d,e)},exports.verify=function verify(h,Q,signature,strict){if(!isPoint(Q))throw new Error("Expected Point");if(!isSignature(signature))throw new Error("Expected Signature");if(!isHash(h))throw new Error("Expected Scalar");return necc__namespace.verify(signature,h,Q,{strict})},exports.verifySchnorr=function verifySchnorr(h,Q,signature){if(!isXOnlyPoint(Q))throw new Error("Expected Point");if(!isSignature(signature))throw new Error("Expected Signature");if(!isHash(h))throw new Error("Expected Scalar");return necc__namespace.schnorr.verifySync(signature,h,Q)},exports.xOnlyPointAddTweak=function xOnlyPointAddTweak(p,tweak){if(!isXOnlyPoint(p))throw new Error("Expected Point");if(!isTweak(tweak))throw new Error("Expected Tweak");return throwToNull((()=>{const P=_pointAddScalar(p,tweak,!0);return{parity:P[0]%2==1?1:0,xOnlyPubkey:P.slice(1)}}))},exports.xOnlyPointFromPoint=xOnlyPointFromPoint,exports.xOnlyPointFromScalar=function xOnlyPointFromScalar(d){if(!isPrivate(d))throw new Error("Expected Private");return xOnlyPointFromPoint(pointFromScalar(d))}},"./node_modules/.pnpm/@leather.io+query@0.9.0_@stacks+network@6.13.0_encoding@0.1.13__encoding@0.1.13_react@18.3.1/node_modules/@leather.io/query/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Uo:()=>useCryptoCurrencyMarketDataMeanAverage});var common_utils_namespaceObject={};__webpack_require__.r(common_utils_namespaceObject),__webpack_require__.d(common_utils_namespaceObject,{hasBrowserEnv:()=>hasBrowserEnv,hasStandardBrowserEnv:()=>hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv:()=>hasStandardBrowserWebWorkerEnv});var dist=__webpack_require__("./node_modules/.pnpm/@leather.io+constants@0.8.0/node_modules/@leather.io/constants/dist/index.js"),utils_dist=__webpack_require__("./node_modules/.pnpm/@leather.io+utils@0.9.0/node_modules/@leather.io/utils/dist/index.js"),react=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),models_dist=__webpack_require__("./node_modules/.pnpm/@leather.io+models@0.10.0/node_modules/@leather.io/models/dist/index.js"),eventemitter3=(__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),__webpack_require__("./node_modules/.pnpm/eventemitter3@5.0.1/node_modules/eventemitter3/index.js")),eventemitter3_default=__webpack_require__.n(eventemitter3);class TimeoutError extends Error{constructor(message){super(message),this.name="TimeoutError"}}class AbortError extends Error{constructor(message){super(),this.name="AbortError",this.message=message}}const getDOMException=errorMessage=>void 0===globalThis.DOMException?new AbortError(errorMessage):new DOMException(errorMessage),getAbortedReason=signal=>{const reason=void 0===signal.reason?getDOMException("This operation was aborted."):signal.reason;return reason instanceof Error?reason:getDOMException(reason)};class PriorityQueue{#queue=[];enqueue(run,options){const element={priority:(options={priority:0,...options}).priority,run};if(this.size&&this.#queue[this.size-1].priority>=options.priority)return void this.#queue.push(element);const index=function lowerBound(array,value,comparator){let first=0,count=array.length;for(;count>0;){const step=Math.trunc(count/2);let it=first+step;comparator(array[it],value)<=0?(first=++it,count-=step+1):count=step}return first}(this.#queue,element,((a,b)=>b.priority-a.priority));this.#queue.splice(index,0,element)}dequeue(){const item=this.#queue.shift();return item?.run}filter(options){return this.#queue.filter((element=>element.priority===options.priority)).map((element=>element.run))}get size(){return this.#queue.length}}class PQueue extends(eventemitter3_default()){#carryoverConcurrencyCount;#isIntervalIgnored;#intervalCount=0;#intervalCap;#interval;#intervalEnd=0;#intervalId;#timeoutId;#queue;#queueClass;#pending=0;#concurrency;#isPaused;#throwOnTimeout;timeout;constructor(options){if(super(),!("number"==typeof(options={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...options}).intervalCap&&options.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${options.intervalCap?.toString()??""}\` (${typeof options.intervalCap})`);if(void 0===options.interval||!(Number.isFinite(options.interval)&&options.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${options.interval?.toString()??""}\` (${typeof options.interval})`);this.#carryoverConcurrencyCount=options.carryoverConcurrencyCount,this.#isIntervalIgnored=options.intervalCap===Number.POSITIVE_INFINITY||0===options.interval,this.#intervalCap=options.intervalCap,this.#interval=options.interval,this.#queue=new options.queueClass,this.#queueClass=options.queueClass,this.concurrency=options.concurrency,this.timeout=options.timeout,this.#throwOnTimeout=!0===options.throwOnTimeout,this.#isPaused=!1===options.autoStart}get#doesIntervalAllowAnother(){return this.#isIntervalIgnored||this.#intervalCount<this.#intervalCap}get#doesConcurrentAllowAnother(){return this.#pending<this.#concurrency}#next(){this.#pending--,this.#tryToStartAnother(),this.emit("next")}#onResumeInterval(){this.#onInterval(),this.#initializeIntervalIfNeeded(),this.#timeoutId=void 0}get#isIntervalPaused(){const now=Date.now();if(void 0===this.#intervalId){const delay=this.#intervalEnd-now;if(!(delay<0))return void 0===this.#timeoutId&&(this.#timeoutId=setTimeout((()=>{this.#onResumeInterval()}),delay)),!0;this.#intervalCount=this.#carryoverConcurrencyCount?this.#pending:0}return!1}#tryToStartAnother(){if(0===this.#queue.size)return this.#intervalId&&clearInterval(this.#intervalId),this.#intervalId=void 0,this.emit("empty"),0===this.#pending&&this.emit("idle"),!1;if(!this.#isPaused){const canInitializeInterval=!this.#isIntervalPaused;if(this.#doesIntervalAllowAnother&&this.#doesConcurrentAllowAnother){const job=this.#queue.dequeue();return!!job&&(this.emit("active"),job(),canInitializeInterval&&this.#initializeIntervalIfNeeded(),!0)}}return!1}#initializeIntervalIfNeeded(){this.#isIntervalIgnored||void 0!==this.#intervalId||(this.#intervalId=setInterval((()=>{this.#onInterval()}),this.#interval),this.#intervalEnd=Date.now()+this.#interval)}#onInterval(){0===this.#intervalCount&&0===this.#pending&&this.#intervalId&&(clearInterval(this.#intervalId),this.#intervalId=void 0),this.#intervalCount=this.#carryoverConcurrencyCount?this.#pending:0,this.#processQueue()}#processQueue(){for(;this.#tryToStartAnother(););}get concurrency(){return this.#concurrency}set concurrency(newConcurrency){if(!("number"==typeof newConcurrency&&newConcurrency>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${newConcurrency}\` (${typeof newConcurrency})`);this.#concurrency=newConcurrency,this.#processQueue()}async#throwOnAbort(signal){return new Promise(((_resolve,reject)=>{signal.addEventListener("abort",(()=>{reject(signal.reason)}),{once:!0})}))}async add(function_,options={}){return options={timeout:this.timeout,throwOnTimeout:this.#throwOnTimeout,...options},new Promise(((resolve,reject)=>{this.#queue.enqueue((async()=>{this.#pending++,this.#intervalCount++;try{options.signal?.throwIfAborted();let operation=function_({signal:options.signal});options.timeout&&(operation=function pTimeout(promise,options){const{milliseconds,fallback,message,customTimers={setTimeout,clearTimeout}}=options;let timer;const cancelablePromise=new Promise(((resolve,reject)=>{if("number"!=typeof milliseconds||1!==Math.sign(milliseconds))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${milliseconds}\``);if(options.signal){const{signal}=options;signal.aborted&&reject(getAbortedReason(signal)),signal.addEventListener("abort",(()=>{reject(getAbortedReason(signal))}))}if(milliseconds===Number.POSITIVE_INFINITY)return void promise.then(resolve,reject);const timeoutError=new TimeoutError;timer=customTimers.setTimeout.call(void 0,(()=>{if(fallback)try{resolve(fallback())}catch(error){reject(error)}else"function"==typeof promise.cancel&&promise.cancel(),!1===message?resolve():message instanceof Error?reject(message):(timeoutError.message=message??`Promise timed out after ${milliseconds} milliseconds`,reject(timeoutError))}),milliseconds),(async()=>{try{resolve(await promise)}catch(error){reject(error)}})()})).finally((()=>{cancelablePromise.clear()}));return cancelablePromise.clear=()=>{customTimers.clearTimeout.call(void 0,timer),timer=void 0},cancelablePromise}(Promise.resolve(operation),{milliseconds:options.timeout})),options.signal&&(operation=Promise.race([operation,this.#throwOnAbort(options.signal)]));const result=await operation;resolve(result),this.emit("completed",result)}catch(error){if(error instanceof TimeoutError&&!options.throwOnTimeout)return void resolve();reject(error),this.emit("error",error)}finally{this.#next()}}),options),this.emit("add"),this.#tryToStartAnother()}))}async addAll(functions,options){return Promise.all(functions.map((async function_=>this.add(function_,options))))}start(){return this.#isPaused?(this.#isPaused=!1,this.#processQueue(),this):this}pause(){this.#isPaused=!0}clear(){this.#queue=new this.#queueClass}async onEmpty(){0!==this.#queue.size&&await this.#onEvent("empty")}async onSizeLessThan(limit){this.#queue.size<limit||await this.#onEvent("next",(()=>this.#queue.size<limit))}async onIdle(){0===this.#pending&&0===this.#queue.size||await this.#onEvent("idle")}async#onEvent(event,filter){return new Promise((resolve=>{const listener=()=>{filter&&!filter()||(this.off(event,listener),resolve())};this.on(event,listener)}))}get size(){return this.#queue.size}sizeBy(options){return this.#queue.filter(options).length}get pending(){return this.#pending}get isPaused(){return this.#isPaused}}var secp256k1_dist=__webpack_require__("./node_modules/.pnpm/@bitcoinerlab+secp256k1@1.0.2/node_modules/@bitcoinerlab/secp256k1/dist/index.js");function bytes(b,...lengths){if(!function isBytes(a){return a instanceof Uint8Array||null!=a&&"object"==typeof a&&"Uint8Array"===a.constructor.name}(b))throw new Error("Uint8Array expected");if(lengths.length>0&&!lengths.includes(b.length))throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`)}function exists(instance,checkFinished=!0){if(instance.destroyed)throw new Error("Hash instance has been destroyed");if(checkFinished&&instance.finished)throw new Error("Hash#digest() has already been called")}function output(out,instance){bytes(out);const min=instance.outputLen;if(out.length<min)throw new Error(`digestInto() expects output buffer of length at least ${min}`)}const createView=arr=>new DataView(arr.buffer,arr.byteOffset,arr.byteLength),rotr=(word,shift)=>word<<32-shift|word>>>shift;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function toBytes(data){return"string"==typeof data&&(data=function utils_utf8ToBytes(str){if("string"!=typeof str)throw new Error("utf8ToBytes expected string, got "+typeof str);return new Uint8Array((new TextEncoder).encode(str))}(data)),bytes(data),data}class Hash{clone(){return this._cloneInto()}}function utils_wrapConstructor(hashCons){const hashC=msg=>hashCons().update(toBytes(msg)).digest(),tmp=hashCons();return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=()=>hashCons(),hashC}const Maj=(a,b,c)=>a&b^a&c^b&c;class HashMD extends Hash{constructor(blockLen,outputLen,padOffset,isLE){super(),this.blockLen=blockLen,this.outputLen=outputLen,this.padOffset=padOffset,this.isLE=isLE,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(blockLen),this.view=createView(this.buffer)}update(data){exists(this);const{view,buffer,blockLen}=this,len=(data=toBytes(data)).length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);if(take!==blockLen)buffer.set(data.subarray(pos,pos+take),this.pos),this.pos+=take,pos+=take,this.pos===blockLen&&(this.process(view,0),this.pos=0);else{const dataView=createView(data);for(;blockLen<=len-pos;pos+=blockLen)this.process(dataView,pos)}}return this.length+=data.length,this.roundClean(),this}digestInto(out){exists(this),output(out,this),this.finished=!0;const{buffer,view,blockLen,isLE}=this;let{pos}=this;buffer[pos++]=128,this.buffer.subarray(pos).fill(0),this.padOffset>blockLen-pos&&(this.process(view,0),pos=0);for(let i=pos;i<blockLen;i++)buffer[i]=0;!function setBigUint64(view,byteOffset,value,isLE){if("function"==typeof view.setBigUint64)return view.setBigUint64(byteOffset,value,isLE);const _32n=BigInt(32),_u32_max=BigInt(4294967295),wh=Number(value>>_32n&_u32_max),wl=Number(value&_u32_max),h=isLE?4:0,l=isLE?0:4;view.setUint32(byteOffset+h,wh,isLE),view.setUint32(byteOffset+l,wl,isLE)}(view,blockLen-8,BigInt(8*this.length),isLE),this.process(view,0);const oview=createView(out),len=this.outputLen;if(len%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const outLen=len/4,state=this.get();if(outLen>state.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<outLen;i++)oview.setUint32(4*i,state[i],isLE)}digest(){const{buffer,outputLen}=this;this.digestInto(buffer);const res=buffer.slice(0,outputLen);return this.destroy(),res}_cloneInto(to){to||(to=new this.constructor),to.set(...this.get());const{blockLen,buffer,length,finished,destroyed,pos}=this;return to.length=length,to.pos=pos,to.finished=finished,to.destroyed=destroyed,length%blockLen&&to.buffer.set(buffer),to}}const SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(){super(64,32,8,!1),this.A=0|SHA256_IV[0],this.B=0|SHA256_IV[1],this.C=0|SHA256_IV[2],this.D=0|SHA256_IV[3],this.E=0|SHA256_IV[4],this.F=0|SHA256_IV[5],this.G=0|SHA256_IV[6],this.H=0|SHA256_IV[7]}get(){const{A,B,C,D,E,F,G,H}=this;return[A,B,C,D,E,F,G,H]}set(A,B,C,D,E,F,G,H){this.A=0|A,this.B=0|B,this.C=0|C,this.D=0|D,this.E=0|E,this.F=0|F,this.G=0|G,this.H=0|H}process(view,offset){for(let i=0;i<16;i++,offset+=4)SHA256_W[i]=view.getUint32(offset,!1);for(let i=16;i<64;i++){const W15=SHA256_W[i-15],W2=SHA256_W[i-2],s0=rotr(W15,7)^rotr(W15,18)^W15>>>3,s1=rotr(W2,17)^rotr(W2,19)^W2>>>10;SHA256_W[i]=s1+SHA256_W[i-7]+s0+SHA256_W[i-16]|0}let{A,B,C,D,E,F,G,H}=this;for(let i=0;i<64;i++){const T1=H+(rotr(E,6)^rotr(E,11)^rotr(E,25))+((a=E)&F^~a&G)+SHA256_K[i]+SHA256_W[i]|0,T2=(rotr(A,2)^rotr(A,13)^rotr(A,22))+Maj(A,B,C)|0;H=G,G=F,F=E,E=D+T1|0,D=C,C=B,B=A,A=T1+T2|0}var a;A=A+this.A|0,B=B+this.B|0,C=C+this.C|0,D=D+this.D|0,E=E+this.E|0,F=F+this.F|0,G=G+this.G|0,H=H+this.H|0,this.set(A,B,C,D,E,F,G,H)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256_sha256=utils_wrapConstructor((()=>new SHA256));function utils_intToBigInt(value,signed){let parsedValue=value;if("number"==typeof parsedValue){if(!Number.isInteger(parsedValue))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(parsedValue>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(parsedValue)}if("string"==typeof parsedValue)if(parsedValue.toLowerCase().startsWith("0x")){let hex=parsedValue.slice(2);hex=hex.padStart(hex.length+hex.length%2,"0"),parsedValue=esm_utils_hexToBytes(hex)}else try{return BigInt(parsedValue)}catch(error){if(error instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${parsedValue}' is not finite.`)}if("bigint"==typeof parsedValue)return parsedValue;if(parsedValue instanceof Uint8Array){if(signed){const bn=function fromTwos(value,width){if(function nthBit(value,n){return value&BigInt(1)<<n}(value,width-BigInt(1)))return value-(BigInt(1)<<width);return value}(BigInt(`0x${esm_utils_bytesToHex(parsedValue)}`),BigInt(8*parsedValue.byteLength));return BigInt(bn.toString())}return BigInt(`0x${esm_utils_bytesToHex(parsedValue)}`)}if(null!=parsedValue&&"object"==typeof parsedValue&&"BN"===parsedValue.constructor.name)return BigInt(parsedValue.toString());throw new TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.")}function utils_intToHex(integer,lengthBytes=8){return("bigint"==typeof integer?integer:utils_intToBigInt(integer,!1)).toString(16).padStart(2*lengthBytes,"0")}function utils_hexToInt(hex){return parseInt(hex,16)}function bigIntToBytes(value,length=16){return esm_utils_hexToBytes(utils_intToHex(value,length))}const utils_hexes=Array.from({length:256},((_,i)=>i.toString(16).padStart(2,"0")));function esm_utils_bytesToHex(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Uint8Array expected");let hex="";for(const u of uint8a)hex+=utils_hexes[u];return hex}function esm_utils_hexToBytes(hex){if("string"!=typeof hex)throw new TypeError("hexToBytes: expected string, got "+typeof hex);const paddedHex=hex.length%2?`0${hex}`:hex,array=new Uint8Array(paddedHex.length/2);for(let i=0;i<array.length;i++){const j=2*i,hexByte=paddedHex.slice(j,j+2),byte=Number.parseInt(hexByte,16);if(Number.isNaN(byte)||byte<0)throw new Error("Invalid byte sequence");array[i]=byte}return array}function esm_utils_utf8ToBytes(str){return(new TextEncoder).encode(str)}function utils_bytesToUtf8(arr){return(new TextDecoder).decode(arr)}function isNotOctet(octet){return!Number.isInteger(octet)||octet<0||octet>255}function octetsToBytes(numbers){if(numbers.some(isNotOctet))throw new Error("Some values are invalid bytes.");return new Uint8Array(numbers)}function esm_utils_concatBytes(...arrays){if(!arrays.every((a=>a instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===arrays.length)return arrays[0];const length=arrays.reduce(((a,arr)=>a+arr.length),0),result=new Uint8Array(length);for(let i=0,pad=0;i<arrays.length;i++){const arr=arrays[i];result.set(arr,pad),pad+=arr.length}return result}function utils_concatArray(elements){return esm_utils_concatBytes(...elements.map((e=>"number"==typeof e?octetsToBytes([e]):e instanceof Array?octetsToBytes(e):e)))}var src=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/index.js"),ecpair_src=__webpack_require__("./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/index.js"),dist_DerivationPathDepth=(__webpack_require__("./node_modules/.pnpm/varuint-bitcoin@1.1.2/node_modules/varuint-bitcoin/index.js"),(DerivationPathDepth2=>(DerivationPathDepth2[DerivationPathDepth2.Root=0]="Root",DerivationPathDepth2[DerivationPathDepth2.Purpose=1]="Purpose",DerivationPathDepth2[DerivationPathDepth2.CoinType=2]="CoinType",DerivationPathDepth2[DerivationPathDepth2.Account=3]="Account",DerivationPathDepth2[DerivationPathDepth2.ChangeReceive=4]="ChangeReceive",DerivationPathDepth2[DerivationPathDepth2.AddressIndex=5]="AddressIndex",DerivationPathDepth2))(dist_DerivationPathDepth||{}));function extractSectionFromDerivationPath(depth){return path=>{const segments=path.split("/"),accountNum=parseInt(segments[depth].replaceAll("'",""),10);if(isNaN(accountNum))throw new Error(`Cannot parse ${dist_DerivationPathDepth[depth]} from path`);return accountNum}}extractSectionFromDerivationPath(3),extractSectionFromDerivationPath(5);__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;src.o8.bitcoin,src.o8.testnet,src.o8.regtest,src.o8.testnet;(0,ecpair_src.dg)(secp256k1_dist);src.f0(secp256k1_dist);Uint8Array.from([...sha256_sha256(esm_utils_utf8ToBytes("BIP0322-signed-message")),...sha256_sha256(esm_utils_utf8ToBytes("BIP0322-signed-message"))]);esm_utils_hexToBytes("0000000000000000000000000000000000000000000000000000000000000000");__webpack_require__("./node_modules/.pnpm/lodash.get@4.4.2/node_modules/lodash.get/index.js");var bignumber=__webpack_require__("./node_modules/.pnpm/bignumber.js@9.1.2/node_modules/bignumber.js/bignumber.mjs"),property_expr=__webpack_require__("./node_modules/.pnpm/property-expr@2.0.6/node_modules/property-expr/index.js"),tiny_case=__webpack_require__("./node_modules/.pnpm/tiny-case@1.0.3/node_modules/tiny-case/index.js"),toposort=__webpack_require__("./node_modules/.pnpm/toposort@2.0.2/node_modules/toposort/index.js"),toposort_default=__webpack_require__.n(toposort);const index_esm_toString=Object.prototype.toString,errorToString=Error.prototype.toString,regExpToString=RegExp.prototype.toString,symbolToString="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",SYMBOL_REGEXP=/^Symbol\((.*)\)(.*)$/;function printSimpleValue(val,quoteStrings=!1){if(null==val||!0===val||!1===val)return""+val;const typeOf=typeof val;if("number"===typeOf)return function printNumber(val){return val!=+val?"NaN":0===val&&1/val<0?"-0":""+val}(val);if("string"===typeOf)return quoteStrings?`"${val}"`:val;if("function"===typeOf)return"[Function "+(val.name||"anonymous")+"]";if("symbol"===typeOf)return symbolToString.call(val).replace(SYMBOL_REGEXP,"Symbol($1)");const tag=index_esm_toString.call(val).slice(8,-1);return"Date"===tag?isNaN(val.getTime())?""+val:val.toISOString(val):"Error"===tag||val instanceof Error?"["+errorToString.call(val)+"]":"RegExp"===tag?regExpToString.call(val):null}function printValue(value,quoteStrings){let result=printSimpleValue(value,quoteStrings);return null!==result?result:JSON.stringify(value,(function(key,value){let result=printSimpleValue(this[key],quoteStrings);return null!==result?result:value}),2)}function toArray(value){return null==value?[]:[].concat(value)}let _Symbol$toStringTag,strReg=/\$\{\s*(\w+)\s*\}/g;_Symbol$toStringTag=Symbol.toStringTag;class ValidationError extends Error{static formatError(message,params){const path=params.label||params.path||"this";return path!==params.path&&(params=Object.assign({},params,{path})),"string"==typeof message?message.replace(strReg,((_,key)=>printValue(params[key]))):"function"==typeof message?message(params):message}static isError(err){return err&&"ValidationError"===err.name}constructor(errorOrErrors,value,field,type,disableStack){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this[_Symbol$toStringTag]="Error",this.name="ValidationError",this.value=value,this.path=field,this.type=type,this.errors=[],this.inner=[],toArray(errorOrErrors).forEach((err=>{if(ValidationError.isError(err)){this.errors.push(...err.errors);const innerErrors=err.inner.length?err.inner:[err];this.inner.push(...innerErrors)}else this.errors.push(err)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],!disableStack&&Error.captureStackTrace&&Error.captureStackTrace(this,ValidationError)}}let mixed={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path,type,value,originalValue})=>{const castMsg=null!=originalValue&&originalValue!==value?` (cast from the value \`${printValue(originalValue,!0)}\`).`:".";return"mixed"!==type?`${path} must be a \`${type}\` type, but the final value was: \`${printValue(value,!0)}\``+castMsg:`${path} must match the configured type. The validated value was: \`${printValue(value,!0)}\``+castMsg}},string={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},index_esm_number={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},index_esm_boolean={isValue:"${path} field must be ${value}"},object={noUnknown:"${path} field has unspecified keys: ${unknown}"},array={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},tuple={notType:params=>{const{path,value,spec}=params,typeLen=spec.types.length;if(Array.isArray(value)){if(value.length<typeLen)return`${path} tuple value has too few items, expected a length of ${typeLen} but got ${value.length} for value: \`${printValue(value,!0)}\``;if(value.length>typeLen)return`${path} tuple value has too many items, expected a length of ${typeLen} but got ${value.length} for value: \`${printValue(value,!0)}\``}return ValidationError.formatError(mixed.notType,params)}};Object.assign(Object.create(null),{mixed,string,number:index_esm_number,date,object,array,boolean:index_esm_boolean,tuple});const isSchema=obj=>obj&&obj.__isYupSchema__;class Condition{static fromOptions(refs,config){if(!config.then&&!config.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is,then,otherwise}=config,check="function"==typeof is?is:(...values)=>values.every((value=>value===is));return new Condition(refs,((values,schema)=>{var _branch;let branch=check(...values)?then:otherwise;return null!=(_branch=null==branch?void 0:branch(schema))?_branch:schema}))}constructor(refs,builder){this.fn=void 0,this.refs=refs,this.refs=refs,this.fn=builder}resolve(base,options){let values=this.refs.map((ref=>ref.getValue(null==options?void 0:options.value,null==options?void 0:options.parent,null==options?void 0:options.context))),schema=this.fn(values,base,options);if(void 0===schema||schema===base)return base;if(!isSchema(schema))throw new TypeError("conditions must return a schema object");return schema.resolve(options)}}const prefixes_context="$",prefixes_value=".";class Reference{constructor(key,options={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof key)throw new TypeError("ref must be a string, got: "+key);if(this.key=key.trim(),""===key)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===prefixes_context,this.isValue=this.key[0]===prefixes_value,this.isSibling=!this.isContext&&!this.isValue;let prefix=this.isContext?prefixes_context:this.isValue?prefixes_value:"";this.path=this.key.slice(prefix.length),this.getter=this.path&&(0,property_expr.getter)(this.path,!0),this.map=options.map}getValue(value,parent,context){let result=this.isContext?context:this.isValue?value:parent;return this.getter&&(result=this.getter(result||{})),this.map&&(result=this.map(result)),result}cast(value,options){return this.getValue(value,null==options?void 0:options.parent,null==options?void 0:options.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(value){return value&&value.__isYupRef}}Reference.prototype.__isYupRef=!0;const isAbsent=value=>null==value;function createValidation(config){function validate({value,path="",options,originalValue,schema},panic,next){const{name,test,params,message,skipAbsent}=config;let{parent,context,abortEarly=schema.spec.abortEarly,disableStackTrace=schema.spec.disableStackTrace}=options;function resolve(item){return Reference.isRef(item)?item.getValue(value,parent,context):item}function createError(overrides={}){var _overrides$disableSta;const nextParams=Object.assign({value,originalValue,label:schema.spec.label,path:overrides.path||path,spec:schema.spec},params,overrides.params);for(const key of Object.keys(nextParams))nextParams[key]=resolve(nextParams[key]);const error=new ValidationError(ValidationError.formatError(overrides.message||message,nextParams),value,nextParams.path,overrides.type||name,null!=(_overrides$disableSta=overrides.disableStackTrace)?_overrides$disableSta:disableStackTrace);return error.params=nextParams,error}const invalid=abortEarly?panic:next;let ctx={path,parent,type:name,from:options.from,createError,resolve,options,originalValue,schema};const handleResult=validOrError=>{ValidationError.isError(validOrError)?invalid(validOrError):validOrError?next(null):invalid(createError())},handleError=err=>{ValidationError.isError(err)?invalid(err):panic(err)};if(skipAbsent&&isAbsent(value))return handleResult(!0);let result;try{var _result;if(result=test.call(ctx,value,ctx),"function"==typeof(null==(_result=result)?void 0:_result.then)){if(options.sync)throw new Error(`Validation test of type: "${ctx.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(result).then(handleResult,handleError)}}catch(err){return void handleError(err)}handleResult(result)}return validate.OPTIONS=config,validate}function getIn(schema,path,value,context=value){let parent,lastPart,lastPartDebug;return path?((0,property_expr.forEach)(path,((_part,isBracket,isArray)=>{let part=isBracket?_part.slice(1,_part.length-1):_part,isTuple="tuple"===(schema=schema.resolve({context,parent,value})).type,idx=isArray?parseInt(part,10):0;if(schema.innerType||isTuple){if(isTuple&&!isArray)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${lastPartDebug}" must contain an index to the tuple element, e.g. "${lastPartDebug}[0]"`);if(value&&idx>=value.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${_part}, in the path: ${path}. because there is no value at that index. `);parent=value,value=value&&value[idx],schema=isTuple?schema.spec.types[idx]:schema.innerType}if(!isArray){if(!schema.fields||!schema.fields[part])throw new Error(`The schema does not contain the path: ${path}. (failed at: ${lastPartDebug} which is a type: "${schema.type}")`);parent=value,value=value&&value[part],schema=schema.fields[part]}lastPart=part,lastPartDebug=isBracket?"["+_part+"]":"."+_part})),{schema,parent,parentPath:lastPart}):{parent,parentPath:path,schema}}class ReferenceSet extends Set{describe(){const description=[];for(const item of this.values())description.push(Reference.isRef(item)?item.describe():item);return description}resolveAll(resolve){let result=[];for(const item of this.values())result.push(resolve(item));return result}clone(){return new ReferenceSet(this.values())}merge(newItems,removeItems){const next=this.clone();return newItems.forEach((value=>next.add(value))),removeItems.forEach((value=>next.delete(value))),next}}function clone(src,seen=new Map){if(isSchema(src)||!src||"object"!=typeof src)return src;if(seen.has(src))return seen.get(src);let copy;if(src instanceof Date)copy=new Date(src.getTime()),seen.set(src,copy);else if(src instanceof RegExp)copy=new RegExp(src),seen.set(src,copy);else if(Array.isArray(src)){copy=new Array(src.length),seen.set(src,copy);for(let i=0;i<src.length;i++)copy[i]=clone(src[i],seen)}else if(src instanceof Map){copy=new Map,seen.set(src,copy);for(const[k,v]of src.entries())copy.set(k,clone(v,seen))}else if(src instanceof Set){copy=new Set,seen.set(src,copy);for(const v of src)copy.add(clone(v,seen))}else{if(!(src instanceof Object))throw Error(`Unable to clone ${src}`);copy={},seen.set(src,copy);for(const[k,v]of Object.entries(src))copy[k]=clone(v,seen)}return copy}class Schema{constructor(options){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new ReferenceSet,this._blacklist=new ReferenceSet,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(mixed.notType)})),this.type=options.type,this._typeCheck=options.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==options?void 0:options.spec),this.withMutation((s=>{s.nonNullable()}))}get _type(){return this.type}clone(spec){if(this._mutate)return spec&&Object.assign(this.spec,spec),this;const next=Object.create(Object.getPrototypeOf(this));return next.type=this.type,next._typeCheck=this._typeCheck,next._whitelist=this._whitelist.clone(),next._blacklist=this._blacklist.clone(),next.internalTests=Object.assign({},this.internalTests),next.exclusiveTests=Object.assign({},this.exclusiveTests),next.deps=[...this.deps],next.conditions=[...this.conditions],next.tests=[...this.tests],next.transforms=[...this.transforms],next.spec=clone(Object.assign({},this.spec,spec)),next}label(label){let next=this.clone();return next.spec.label=label,next}meta(...args){if(0===args.length)return this.spec.meta;let next=this.clone();return next.spec.meta=Object.assign(next.spec.meta||{},args[0]),next}withMutation(fn){let before=this._mutate;this._mutate=!0;let result=fn(this);return this._mutate=before,result}concat(schema){if(!schema||schema===this)return this;if(schema.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${schema.type}`);let combined=schema.clone();const mergedSpec=Object.assign({},this.spec,combined.spec);return combined.spec=mergedSpec,combined.internalTests=Object.assign({},this.internalTests,combined.internalTests),combined._whitelist=this._whitelist.merge(schema._whitelist,schema._blacklist),combined._blacklist=this._blacklist.merge(schema._blacklist,schema._whitelist),combined.tests=this.tests,combined.exclusiveTests=this.exclusiveTests,combined.withMutation((next=>{schema.tests.forEach((fn=>{next.test(fn.OPTIONS)}))})),combined.transforms=[...this.transforms,...combined.transforms],combined}isType(v){return null==v?!(!this.spec.nullable||null!==v)||!(!this.spec.optional||void 0!==v):this._typeCheck(v)}resolve(options){let schema=this;if(schema.conditions.length){let conditions=schema.conditions;schema=schema.clone(),schema.conditions=[],schema=conditions.reduce(((prevSchema,condition)=>condition.resolve(prevSchema,options)),schema),schema=schema.resolve(options)}return schema}resolveOptions(options){var _options$strict,_options$abortEarly,_options$recursive,_options$disableStack;return Object.assign({},options,{from:options.from||[],strict:null!=(_options$strict=options.strict)?_options$strict:this.spec.strict,abortEarly:null!=(_options$abortEarly=options.abortEarly)?_options$abortEarly:this.spec.abortEarly,recursive:null!=(_options$recursive=options.recursive)?_options$recursive:this.spec.recursive,disableStackTrace:null!=(_options$disableStack=options.disableStackTrace)?_options$disableStack:this.spec.disableStackTrace})}cast(value,options={}){let resolvedSchema=this.resolve(Object.assign({value},options)),allowOptionality="ignore-optionality"===options.assert,result=resolvedSchema._cast(value,options);if(!1!==options.assert&&!resolvedSchema.isType(result)){if(allowOptionality&&isAbsent(result))return result;let formattedValue=printValue(value),formattedResult=printValue(result);throw new TypeError(`The value of ${options.path||"field"} could not be cast to a value that satisfies the schema type: "${resolvedSchema.type}". \n\nattempted value: ${formattedValue} \n`+(formattedResult!==formattedValue?`result of cast: ${formattedResult}`:""))}return result}_cast(rawValue,options){let value=void 0===rawValue?rawValue:this.transforms.reduce(((prevValue,fn)=>fn.call(this,prevValue,rawValue,this)),rawValue);return void 0===value&&(value=this.getDefault(options)),value}_validate(_value,options={},panic,next){let{path,originalValue=_value,strict=this.spec.strict}=options,value=_value;strict||(value=this._cast(value,Object.assign({assert:!1},options)));let initialTests=[];for(let test of Object.values(this.internalTests))test&&initialTests.push(test);this.runTests({path,value,originalValue,options,tests:initialTests},panic,(initialErrors=>{if(initialErrors.length)return next(initialErrors,value);this.runTests({path,value,originalValue,options,tests:this.tests},panic,next)}))}runTests(runOptions,panic,next){let fired=!1,{tests,value,originalValue,path,options}=runOptions,panicOnce=arg=>{fired||(fired=!0,panic(arg,value))},nextOnce=arg=>{fired||(fired=!0,next(arg,value))},count=tests.length,nestedErrors=[];if(!count)return nextOnce([]);let args={value,originalValue,path,options,schema:this};for(let i=0;i<tests.length;i++){(0,tests[i])(args,panicOnce,(function finishTestRun(err){err&&(Array.isArray(err)?nestedErrors.push(...err):nestedErrors.push(err)),--count<=0&&nextOnce(nestedErrors)}))}}asNestedTest({key,index,parent,parentPath,originalParent,options}){const k=null!=key?key:index;if(null==k)throw TypeError("Must include `key` or `index` for nested validations");const isIndex="number"==typeof k;let value=parent[k];const testOptions=Object.assign({},options,{strict:!0,parent,value,originalValue:originalParent[k],key:void 0,[isIndex?"index":"key"]:k,path:isIndex||k.includes(".")?`${parentPath||""}[${value?k:`"${k}"`}]`:(parentPath?`${parentPath}.`:"")+key});return(_,panic,next)=>this.resolve(testOptions)._validate(value,testOptions,panic,next)}validate(value,options){var _options$disableStack2;let schema=this.resolve(Object.assign({},options,{value})),disableStackTrace=null!=(_options$disableStack2=null==options?void 0:options.disableStackTrace)?_options$disableStack2:schema.spec.disableStackTrace;return new Promise(((resolve,reject)=>schema._validate(value,options,((error,parsed)=>{ValidationError.isError(error)&&(error.value=parsed),reject(error)}),((errors,validated)=>{errors.length?reject(new ValidationError(errors,validated,void 0,void 0,disableStackTrace)):resolve(validated)}))))}validateSync(value,options){var _options$disableStack3;let result,schema=this.resolve(Object.assign({},options,{value})),disableStackTrace=null!=(_options$disableStack3=null==options?void 0:options.disableStackTrace)?_options$disableStack3:schema.spec.disableStackTrace;return schema._validate(value,Object.assign({},options,{sync:!0}),((error,parsed)=>{throw ValidationError.isError(error)&&(error.value=parsed),error}),((errors,validated)=>{if(errors.length)throw new ValidationError(errors,value,void 0,void 0,disableStackTrace);result=validated})),result}isValid(value,options){return this.validate(value,options).then((()=>!0),(err=>{if(ValidationError.isError(err))return!1;throw err}))}isValidSync(value,options){try{return this.validateSync(value,options),!0}catch(err){if(ValidationError.isError(err))return!1;throw err}}_getDefault(options){let defaultValue=this.spec.default;return null==defaultValue?defaultValue:"function"==typeof defaultValue?defaultValue.call(this,options):clone(defaultValue)}getDefault(options){return this.resolve(options||{})._getDefault(options)}default(def){if(0===arguments.length)return this._getDefault();return this.clone({default:def})}strict(isStrict=!0){return this.clone({strict:isStrict})}nullability(nullable,message){const next=this.clone({nullable});return next.internalTests.nullable=createValidation({message,name:"nullable",test(value){return null!==value||this.schema.spec.nullable}}),next}optionality(optional,message){const next=this.clone({optional});return next.internalTests.optionality=createValidation({message,name:"optionality",test(value){return void 0!==value||this.schema.spec.optional}}),next}optional(){return this.optionality(!0)}defined(message=mixed.defined){return this.optionality(!1,message)}nullable(){return this.nullability(!0)}nonNullable(message=mixed.notNull){return this.nullability(!1,message)}required(message=mixed.required){return this.clone().withMutation((next=>next.nonNullable(message).defined(message)))}notRequired(){return this.clone().withMutation((next=>next.nullable().optional()))}transform(fn){let next=this.clone();return next.transforms.push(fn),next}test(...args){let opts;if(opts=1===args.length?"function"==typeof args[0]?{test:args[0]}:args[0]:2===args.length?{name:args[0],test:args[1]}:{name:args[0],message:args[1],test:args[2]},void 0===opts.message&&(opts.message=mixed.default),"function"!=typeof opts.test)throw new TypeError("`test` is a required parameters");let next=this.clone(),validate=createValidation(opts),isExclusive=opts.exclusive||opts.name&&!0===next.exclusiveTests[opts.name];if(opts.exclusive&&!opts.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return opts.name&&(next.exclusiveTests[opts.name]=!!opts.exclusive),next.tests=next.tests.filter((fn=>{if(fn.OPTIONS.name===opts.name){if(isExclusive)return!1;if(fn.OPTIONS.test===validate.OPTIONS.test)return!1}return!0})),next.tests.push(validate),next}when(keys,options){Array.isArray(keys)||"string"==typeof keys||(options=keys,keys=".");let next=this.clone(),deps=toArray(keys).map((key=>new Reference(key)));return deps.forEach((dep=>{dep.isSibling&&next.deps.push(dep.key)})),next.conditions.push("function"==typeof options?new Condition(deps,options):Condition.fromOptions(deps,options)),next}typeError(message){let next=this.clone();return next.internalTests.typeError=createValidation({message,name:"typeError",skipAbsent:!0,test(value){return!!this.schema._typeCheck(value)||this.createError({params:{type:this.schema.type}})}}),next}oneOf(enums,message=mixed.oneOf){let next=this.clone();return enums.forEach((val=>{next._whitelist.add(val),next._blacklist.delete(val)})),next.internalTests.whiteList=createValidation({message,name:"oneOf",skipAbsent:!0,test(value){let valids=this.schema._whitelist,resolved=valids.resolveAll(this.resolve);return!!resolved.includes(value)||this.createError({params:{values:Array.from(valids).join(", "),resolved}})}}),next}notOneOf(enums,message=mixed.notOneOf){let next=this.clone();return enums.forEach((val=>{next._blacklist.add(val),next._whitelist.delete(val)})),next.internalTests.blacklist=createValidation({message,name:"notOneOf",test(value){let invalids=this.schema._blacklist,resolved=invalids.resolveAll(this.resolve);return!resolved.includes(value)||this.createError({params:{values:Array.from(invalids).join(", "),resolved}})}}),next}strip(strip=!0){let next=this.clone();return next.spec.strip=strip,next}describe(options){const next=(options?this.resolve(options):this).clone(),{label,meta,optional,nullable}=next.spec;return{meta,label,optional,nullable,default:next.getDefault(options),type:next.type,oneOf:next._whitelist.describe(),notOneOf:next._blacklist.describe(),tests:next.tests.map((fn=>({name:fn.OPTIONS.name,params:fn.OPTIONS.params}))).filter(((n,idx,list)=>list.findIndex((c=>c.name===n.name))===idx))}}}Schema.prototype.__isYupSchema__=!0;for(const method of["validate","validateSync"])Schema.prototype[`${method}At`]=function(path,value,options={}){const{parent,parentPath,schema}=getIn(this,path,value,options.context);return schema[method](parent&&parent[parentPath],Object.assign({},options,{parent,path}))};for(const alias of["equals","is"])Schema.prototype[alias]=Schema.prototype.oneOf;for(const alias of["not","nope"])Schema.prototype[alias]=Schema.prototype.notOneOf;let rEmail=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rUrl=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,rUUID=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,isTrimmed=value=>isAbsent(value)||value===value.trim(),objStringTag={}.toString();function create$6(){return new StringSchema}class StringSchema extends Schema{constructor(){super({type:"string",check:value=>(value instanceof String&&(value=value.valueOf()),"string"==typeof value)}),this.withMutation((()=>{this.transform(((value,_raw,ctx)=>{if(!ctx.spec.coerce||ctx.isType(value))return value;if(Array.isArray(value))return value;const strValue=null!=value&&value.toString?value.toString():value;return strValue===objStringTag?value:strValue}))}))}required(message){return super.required(message).withMutation((schema=>schema.test({message:message||mixed.required,name:"required",skipAbsent:!0,test:value=>!!value.length})))}notRequired(){return super.notRequired().withMutation((schema=>(schema.tests=schema.tests.filter((t=>"required"!==t.OPTIONS.name)),schema)))}length(length,message=string.length){return this.test({message,name:"length",exclusive:!0,params:{length},skipAbsent:!0,test(value){return value.length===this.resolve(length)}})}min(min,message=string.min){return this.test({message,name:"min",exclusive:!0,params:{min},skipAbsent:!0,test(value){return value.length>=this.resolve(min)}})}max(max,message=string.max){return this.test({name:"max",exclusive:!0,message,params:{max},skipAbsent:!0,test(value){return value.length<=this.resolve(max)}})}matches(regex,options){let message,name,excludeEmptyString=!1;return options&&("object"==typeof options?({excludeEmptyString=!1,message,name}=options):message=options),this.test({name:name||"matches",message:message||string.matches,params:{regex},skipAbsent:!0,test:value=>""===value&&excludeEmptyString||-1!==value.search(regex)})}email(message=string.email){return this.matches(rEmail,{name:"email",message,excludeEmptyString:!0})}url(message=string.url){return this.matches(rUrl,{name:"url",message,excludeEmptyString:!0})}uuid(message=string.uuid){return this.matches(rUUID,{name:"uuid",message,excludeEmptyString:!1})}ensure(){return this.default("").transform((val=>null===val?"":val))}trim(message=string.trim){return this.transform((val=>null!=val?val.trim():val)).test({message,name:"trim",test:isTrimmed})}lowercase(message=string.lowercase){return this.transform((value=>isAbsent(value)?value:value.toLowerCase())).test({message,name:"string_case",exclusive:!0,skipAbsent:!0,test:value=>isAbsent(value)||value===value.toLowerCase()})}uppercase(message=string.uppercase){return this.transform((value=>isAbsent(value)?value:value.toUpperCase())).test({message,name:"string_case",exclusive:!0,skipAbsent:!0,test:value=>isAbsent(value)||value===value.toUpperCase()})}}create$6.prototype=StringSchema.prototype;const isoReg=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function toNumber(str,defaultValue=0){return Number(str)||defaultValue}let invalidDate=new Date("");function create$4(){return new DateSchema}class DateSchema extends Schema{constructor(){super({type:"date",check(v){return obj=v,"[object Date]"===Object.prototype.toString.call(obj)&&!isNaN(v.getTime());var obj}}),this.withMutation((()=>{this.transform(((value,_raw,ctx)=>!ctx.spec.coerce||ctx.isType(value)||null===value?value:(value=function parseIsoDate(date){const regexResult=isoReg.exec(date);if(!regexResult)return Date.parse?Date.parse(date):Number.NaN;const struct={year:toNumber(regexResult[1]),month:toNumber(regexResult[2],1)-1,day:toNumber(regexResult[3],1),hour:toNumber(regexResult[4]),minute:toNumber(regexResult[5]),second:toNumber(regexResult[6]),millisecond:regexResult[7]?toNumber(regexResult[7].substring(0,3)):0,z:regexResult[8]||void 0,plusMinus:regexResult[9]||void 0,hourOffset:toNumber(regexResult[10]),minuteOffset:toNumber(regexResult[11])};if(void 0===struct.z&&void 0===struct.plusMinus)return new Date(struct.year,struct.month,struct.day,struct.hour,struct.minute,struct.second,struct.millisecond).valueOf();let totalMinutesOffset=0;return"Z"!==struct.z&&void 0!==struct.plusMinus&&(totalMinutesOffset=60*struct.hourOffset+struct.minuteOffset,"+"===struct.plusMinus&&(totalMinutesOffset=0-totalMinutesOffset)),Date.UTC(struct.year,struct.month,struct.day,struct.hour,struct.minute+totalMinutesOffset,struct.second,struct.millisecond)}(value),isNaN(value)?DateSchema.INVALID_DATE:new Date(value))))}))}prepareParam(ref,name){let param;if(Reference.isRef(ref))param=ref;else{let cast=this.cast(ref);if(!this._typeCheck(cast))throw new TypeError(`\`${name}\` must be a Date or a value that can be \`cast()\` to a Date`);param=cast}return param}min(min,message=date.min){let limit=this.prepareParam(min,"min");return this.test({message,name:"min",exclusive:!0,params:{min},skipAbsent:!0,test(value){return value>=this.resolve(limit)}})}max(max,message=date.max){let limit=this.prepareParam(max,"max");return this.test({message,name:"max",exclusive:!0,params:{max},skipAbsent:!0,test(value){return value<=this.resolve(limit)}})}}function findIndex(arr,err){let idx=1/0;return arr.some(((key,ii)=>{var _err$path;if(null!=(_err$path=err.path)&&_err$path.includes(key))return idx=ii,!0})),idx}function sortByKeyOrder(keys){return(a,b)=>findIndex(keys,a)-findIndex(keys,b)}DateSchema.INVALID_DATE=invalidDate,create$4.prototype=DateSchema.prototype,create$4.INVALID_DATE=invalidDate;const parseJson=(value,_,ctx)=>{if("string"!=typeof value)return value;let parsed=value;try{parsed=JSON.parse(value)}catch(err){}return ctx.isType(parsed)?parsed:value};function deepPartial(schema){if("fields"in schema){const partial={};for(const[key,fieldSchema]of Object.entries(schema.fields))partial[key]=deepPartial(fieldSchema);return schema.setFields(partial)}if("array"===schema.type){const nextArray=schema.optional();return nextArray.innerType&&(nextArray.innerType=deepPartial(nextArray.innerType)),nextArray}return"tuple"===schema.type?schema.optional().clone({types:schema.spec.types.map(deepPartial)}):"optional"in schema?schema.optional():schema}let isObject=obj=>"[object Object]"===Object.prototype.toString.call(obj);const defaultSort=sortByKeyOrder([]);function create$3(spec){return new ObjectSchema(spec)}class ObjectSchema extends Schema{constructor(spec){super({type:"object",check:value=>isObject(value)||"function"==typeof value}),this.fields=Object.create(null),this._sortErrors=defaultSort,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{spec&&this.shape(spec)}))}_cast(_value,options={}){var _options$stripUnknown;let value=super._cast(_value,options);if(void 0===value)return this.getDefault(options);if(!this._typeCheck(value))return value;let fields=this.fields,strip=null!=(_options$stripUnknown=options.stripUnknown)?_options$stripUnknown:this.spec.noUnknown,props=[].concat(this._nodes,Object.keys(value).filter((v=>!this._nodes.includes(v)))),intermediateValue={},innerOptions=Object.assign({},options,{parent:intermediateValue,__validating:options.__validating||!1}),isChanged=!1;for(const prop of props){let field=fields[prop],exists=prop in value;if(field){let fieldValue,inputValue=value[prop];innerOptions.path=(options.path?`${options.path}.`:"")+prop,field=field.resolve({value:inputValue,context:options.context,parent:intermediateValue});let fieldSpec=field instanceof Schema?field.spec:void 0,strict=null==fieldSpec?void 0:fieldSpec.strict;if(null!=fieldSpec&&fieldSpec.strip){isChanged=isChanged||prop in value;continue}fieldValue=options.__validating&&strict?value[prop]:field.cast(value[prop],innerOptions),void 0!==fieldValue&&(intermediateValue[prop]=fieldValue)}else exists&&!strip&&(intermediateValue[prop]=value[prop]);exists===prop in intermediateValue&&intermediateValue[prop]===value[prop]||(isChanged=!0)}return isChanged?intermediateValue:value}_validate(_value,options={},panic,next){let{from=[],originalValue=_value,recursive=this.spec.recursive}=options;options.from=[{schema:this,value:originalValue},...from],options.__validating=!0,options.originalValue=originalValue,super._validate(_value,options,panic,((objectErrors,value)=>{if(!recursive||!isObject(value))return void next(objectErrors,value);originalValue=originalValue||value;let tests=[];for(let key of this._nodes){let field=this.fields[key];field&&!Reference.isRef(field)&&tests.push(field.asNestedTest({options,key,parent:value,parentPath:options.path,originalParent:originalValue}))}this.runTests({tests,value,originalValue,options},panic,(fieldErrors=>{next(fieldErrors.sort(this._sortErrors).concat(objectErrors),value)}))}))}clone(spec){const next=super.clone(spec);return next.fields=Object.assign({},this.fields),next._nodes=this._nodes,next._excludedEdges=this._excludedEdges,next._sortErrors=this._sortErrors,next}concat(schema){let next=super.concat(schema),nextFields=next.fields;for(let[field,schemaOrRef]of Object.entries(this.fields)){const target=nextFields[field];nextFields[field]=void 0===target?schemaOrRef:target}return next.withMutation((s=>s.setFields(nextFields,[...this._excludedEdges,...schema._excludedEdges])))}_getDefault(options){if("default"in this.spec)return super._getDefault(options);if(!this._nodes.length)return;let dft={};return this._nodes.forEach((key=>{var _innerOptions;const field=this.fields[key];let innerOptions=options;null!=(_innerOptions=innerOptions)&&_innerOptions.value&&(innerOptions=Object.assign({},innerOptions,{parent:innerOptions.value,value:innerOptions.value[key]})),dft[key]=field&&"getDefault"in field?field.getDefault(innerOptions):void 0})),dft}setFields(shape,excludedEdges){let next=this.clone();return next.fields=shape,next._nodes=function sortFields(fields,excludedEdges=[]){let edges=[],nodes=new Set,excludes=new Set(excludedEdges.map((([a,b])=>`${a}-${b}`)));function addNode(depPath,key){let node=(0,property_expr.split)(depPath)[0];nodes.add(node),excludes.has(`${key}-${node}`)||edges.push([key,node])}for(const key of Object.keys(fields)){let value=fields[key];nodes.add(key),Reference.isRef(value)&&value.isSibling?addNode(value.path,key):isSchema(value)&&"deps"in value&&value.deps.forEach((path=>addNode(path,key)))}return toposort_default().array(Array.from(nodes),edges).reverse()}(shape,excludedEdges),next._sortErrors=sortByKeyOrder(Object.keys(shape)),excludedEdges&&(next._excludedEdges=excludedEdges),next}shape(additions,excludes=[]){return this.clone().withMutation((next=>{let edges=next._excludedEdges;return excludes.length&&(Array.isArray(excludes[0])||(excludes=[excludes]),edges=[...next._excludedEdges,...excludes]),next.setFields(Object.assign(next.fields,additions),edges)}))}partial(){const partial={};for(const[key,schema]of Object.entries(this.fields))partial[key]="optional"in schema&&schema.optional instanceof Function?schema.optional():schema;return this.setFields(partial)}deepPartial(){return deepPartial(this)}pick(keys){const picked={};for(const key of keys)this.fields[key]&&(picked[key]=this.fields[key]);return this.setFields(picked,this._excludedEdges.filter((([a,b])=>keys.includes(a)&&keys.includes(b))))}omit(keys){const remaining=[];for(const key of Object.keys(this.fields))keys.includes(key)||remaining.push(key);return this.pick(remaining)}from(from,to,alias){let fromGetter=(0,property_expr.getter)(from,!0);return this.transform((obj=>{if(!obj)return obj;let newObj=obj;return((obj,p)=>{const path=[...(0,property_expr.normalizePath)(p)];if(1===path.length)return path[0]in obj;let last=path.pop(),parent=(0,property_expr.getter)((0,property_expr.join)(path),!0)(obj);return!(!parent||!(last in parent))})(obj,from)&&(newObj=Object.assign({},obj),alias||delete newObj[from],newObj[to]=fromGetter(obj)),newObj}))}json(){return this.transform(parseJson)}noUnknown(noAllow=!0,message=object.noUnknown){"boolean"!=typeof noAllow&&(message=noAllow,noAllow=!0);let next=this.test({name:"noUnknown",exclusive:!0,message,test(value){if(null==value)return!0;const unknownKeys=function unknown(ctx,value){let known=Object.keys(ctx.fields);return Object.keys(value).filter((key=>-1===known.indexOf(key)))}(this.schema,value);return!noAllow||0===unknownKeys.length||this.createError({params:{unknown:unknownKeys.join(", ")}})}});return next.spec.noUnknown=noAllow,next}unknown(allow=!0,message=object.noUnknown){return this.noUnknown(!allow,message)}transformKeys(fn){return this.transform((obj=>{if(!obj)return obj;const result={};for(const key of Object.keys(obj))result[fn(key)]=obj[key];return result}))}camelCase(){return this.transformKeys(tiny_case.camelCase)}snakeCase(){return this.transformKeys(tiny_case.snakeCase)}constantCase(){return this.transformKeys((key=>(0,tiny_case.snakeCase)(key).toUpperCase()))}describe(options){const next=(options?this.resolve(options):this).clone(),base=super.describe(options);base.fields={};for(const[key,value]of Object.entries(next.fields)){var _innerOptions2;let innerOptions=options;null!=(_innerOptions2=innerOptions)&&_innerOptions2.value&&(innerOptions=Object.assign({},innerOptions,{parent:innerOptions.value,value:innerOptions.value[key]})),base.fields[key]=value.describe(innerOptions)}return base}}create$3.prototype=ObjectSchema.prototype;var util,objectUtil;!function(util){util.assertEqual=val=>val,util.assertIs=function assertIs(_arg){},util.assertNever=function assertNever(_x){throw new Error},util.arrayToEnum=items=>{const obj={};for(const item of items)obj[item]=item;return obj},util.getValidEnumValues=obj=>{const validKeys=util.objectKeys(obj).filter((k=>"number"!=typeof obj[obj[k]])),filtered={};for(const k of validKeys)filtered[k]=obj[k];return util.objectValues(filtered)},util.objectValues=obj=>util.objectKeys(obj).map((function(e){return obj[e]})),util.objectKeys="function"==typeof Object.keys?obj=>Object.keys(obj):object=>{const keys=[];for(const key in object)Object.prototype.hasOwnProperty.call(object,key)&&keys.push(key);return keys},util.find=(arr,checker)=>{for(const item of arr)if(checker(item))return item},util.isInteger="function"==typeof Number.isInteger?val=>Number.isInteger(val):val=>"number"==typeof val&&isFinite(val)&&Math.floor(val)===val,util.joinValues=function joinValues(array,separator=" | "){return array.map((val=>"string"==typeof val?`'${val}'`:val)).join(separator)},util.jsonStringifyReplacer=(_,value)=>"bigint"==typeof value?value.toString():value}(util||(util={})),function(objectUtil){objectUtil.mergeShapes=(first,second)=>({...first,...second})}(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=data=>{switch(typeof data){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(data)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(data)?ZodParsedType.array:null===data?ZodParsedType.null:data.then&&"function"==typeof data.then&&data.catch&&"function"==typeof data.catch?ZodParsedType.promise:"undefined"!=typeof Map&&data instanceof Map?ZodParsedType.map:"undefined"!=typeof Set&&data instanceof Set?ZodParsedType.set:"undefined"!=typeof Date&&data instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class lib_ZodError extends Error{constructor(issues){super(),this.issues=[],this.addIssue=sub=>{this.issues=[...this.issues,sub]},this.addIssues=(subs=[])=>{this.issues=[...this.issues,...subs]};const actualProto=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,actualProto):this.__proto__=actualProto,this.name="ZodError",this.issues=issues}get errors(){return this.issues}format(_mapper){const mapper=_mapper||function(issue){return issue.message},fieldErrors={_errors:[]},processError=error=>{for(const issue of error.issues)if("invalid_union"===issue.code)issue.unionErrors.map(processError);else if("invalid_return_type"===issue.code)processError(issue.returnTypeError);else if("invalid_arguments"===issue.code)processError(issue.argumentsError);else if(0===issue.path.length)fieldErrors._errors.push(mapper(issue));else{let curr=fieldErrors,i=0;for(;i<issue.path.length;){const el=issue.path[i];i===issue.path.length-1?(curr[el]=curr[el]||{_errors:[]},curr[el]._errors.push(mapper(issue))):curr[el]=curr[el]||{_errors:[]},curr=curr[el],i++}}};return processError(this),fieldErrors}static assert(value){if(!(value instanceof lib_ZodError))throw new Error(`Not a ZodError: ${value}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(mapper=(issue=>issue.message)){const fieldErrors={},formErrors=[];for(const sub of this.issues)sub.path.length>0?(fieldErrors[sub.path[0]]=fieldErrors[sub.path[0]]||[],fieldErrors[sub.path[0]].push(mapper(sub))):formErrors.push(mapper(sub));return{formErrors,fieldErrors}}get formErrors(){return this.flatten()}}lib_ZodError.create=issues=>new lib_ZodError(issues);const errorMap=(issue,_ctx)=>{let message;switch(issue.code){case ZodIssueCode.invalid_type:message=issue.received===ZodParsedType.undefined?"Required":`Expected ${issue.expected}, received ${issue.received}`;break;case ZodIssueCode.invalid_literal:message=`Invalid literal value, expected ${JSON.stringify(issue.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:message=`Unrecognized key(s) in object: ${util.joinValues(issue.keys,", ")}`;break;case ZodIssueCode.invalid_union:message="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:message=`Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;break;case ZodIssueCode.invalid_enum_value:message=`Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;break;case ZodIssueCode.invalid_arguments:message="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:message="Invalid function return type";break;case ZodIssueCode.invalid_date:message="Invalid date";break;case ZodIssueCode.invalid_string:"object"==typeof issue.validation?"includes"in issue.validation?(message=`Invalid input: must include "${issue.validation.includes}"`,"number"==typeof issue.validation.position&&(message=`${message} at one or more positions greater than or equal to ${issue.validation.position}`)):"startsWith"in issue.validation?message=`Invalid input: must start with "${issue.validation.startsWith}"`:"endsWith"in issue.validation?message=`Invalid input: must end with "${issue.validation.endsWith}"`:util.assertNever(issue.validation):message="regex"!==issue.validation?`Invalid ${issue.validation}`:"Invalid";break;case ZodIssueCode.too_small:message="array"===issue.type?`Array must contain ${issue.exact?"exactly":issue.inclusive?"at least":"more than"} ${issue.minimum} element(s)`:"string"===issue.type?`String must contain ${issue.exact?"exactly":issue.inclusive?"at least":"over"} ${issue.minimum} character(s)`:"number"===issue.type?`Number must be ${issue.exact?"exactly equal to ":issue.inclusive?"greater than or equal to ":"greater than "}${issue.minimum}`:"date"===issue.type?`Date must be ${issue.exact?"exactly equal to ":issue.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(issue.minimum))}`:"Invalid input";break;case ZodIssueCode.too_big:message="array"===issue.type?`Array must contain ${issue.exact?"exactly":issue.inclusive?"at most":"less than"} ${issue.maximum} element(s)`:"string"===issue.type?`String must contain ${issue.exact?"exactly":issue.inclusive?"at most":"under"} ${issue.maximum} character(s)`:"number"===issue.type?`Number must be ${issue.exact?"exactly":issue.inclusive?"less than or equal to":"less than"} ${issue.maximum}`:"bigint"===issue.type?`BigInt must be ${issue.exact?"exactly":issue.inclusive?"less than or equal to":"less than"} ${issue.maximum}`:"date"===issue.type?`Date must be ${issue.exact?"exactly":issue.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(issue.maximum))}`:"Invalid input";break;case ZodIssueCode.custom:message="Invalid input";break;case ZodIssueCode.invalid_intersection_types:message="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:message=`Number must be a multiple of ${issue.multipleOf}`;break;case ZodIssueCode.not_finite:message="Number must be finite";break;default:message=_ctx.defaultError,util.assertNever(issue)}return{message}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=params=>{const{data,path,errorMaps,issueData}=params,fullPath=[...path,...issueData.path||[]],fullIssue={...issueData,path:fullPath};if(void 0!==issueData.message)return{...issueData,path:fullPath,message:issueData.message};let errorMessage="";const maps=errorMaps.filter((m=>!!m)).slice().reverse();for(const map of maps)errorMessage=map(fullIssue,{data,defaultError:errorMessage}).message;return{...issueData,path:fullPath,message:errorMessage}};function addIssueToContext(ctx,issueData){const overrideMap=getErrorMap(),issue=makeIssue({issueData,data:ctx.data,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,overrideMap,overrideMap===errorMap?void 0:errorMap].filter((x=>!!x))});ctx.common.issues.push(issue)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(status,results){const arrayValue=[];for(const s of results){if("aborted"===s.status)return INVALID;"dirty"===s.status&&status.dirty(),arrayValue.push(s.value)}return{status:status.value,value:arrayValue}}static async mergeObjectAsync(status,pairs){const syncPairs=[];for(const pair of pairs){const key=await pair.key,value=await pair.value;syncPairs.push({key,value})}return ParseStatus.mergeObjectSync(status,syncPairs)}static mergeObjectSync(status,pairs){const finalObject={};for(const pair of pairs){const{key,value}=pair;if("aborted"===key.status)return INVALID;if("aborted"===value.status)return INVALID;"dirty"===key.status&&status.dirty(),"dirty"===value.status&&status.dirty(),"__proto__"===key.value||void 0===value.value&&!pair.alwaysSet||(finalObject[key.value]=value.value)}return{status:status.value,value:finalObject}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=value=>({status:"dirty",value}),OK=value=>({status:"valid",value}),isAborted=x=>"aborted"===x.status,isDirty=x=>"dirty"===x.status,isValid=x=>"valid"===x.status,isAsync=x=>"undefined"!=typeof Promise&&x instanceof Promise;function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}var errorUtil,_ZodEnum_cache,_ZodNativeEnum_cache;"function"==typeof SuppressedError&&SuppressedError,function(errorUtil){errorUtil.errToObj=message=>"string"==typeof message?{message}:message||{},errorUtil.toString=message=>"string"==typeof message?message:null==message?void 0:message.message}(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(parent,value,path,key){this._cachedPath=[],this.parent=parent,this.data=value,this._path=path,this._key=key}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(ctx,result)=>{if(isValid(result))return{success:!0,data:result.value};if(!ctx.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const error=new lib_ZodError(ctx.common.issues);return this._error=error,this._error}}};function processCreateParams(params){if(!params)return{};const{errorMap,invalid_type_error,required_error,description}=params;if(errorMap&&(invalid_type_error||required_error))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(errorMap)return{errorMap,description};return{errorMap:(iss,ctx)=>{var _a,_b;const{message}=params;return"invalid_enum_value"===iss.code?{message:null!=message?message:ctx.defaultError}:void 0===ctx.data?{message:null!==(_a=null!=message?message:required_error)&&void 0!==_a?_a:ctx.defaultError}:"invalid_type"!==iss.code?{message:ctx.defaultError}:{message:null!==(_b=null!=message?message:invalid_type_error)&&void 0!==_b?_b:ctx.defaultError}},description}}class ZodType{constructor(def){this.spa=this.safeParseAsync,this._def=def,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(input){return getParsedType(input.data)}_getOrReturnCtx(input,ctx){return ctx||{common:input.parent.common,data:input.data,parsedType:getParsedType(input.data),schemaErrorMap:this._def.errorMap,path:input.path,parent:input.parent}}_processInputParams(input){return{status:new ParseStatus,ctx:{common:input.parent.common,data:input.data,parsedType:getParsedType(input.data),schemaErrorMap:this._def.errorMap,path:input.path,parent:input.parent}}}_parseSync(input){const result=this._parse(input);if(isAsync(result))throw new Error("Synchronous parse encountered promise.");return result}_parseAsync(input){const result=this._parse(input);return Promise.resolve(result)}parse(data,params){const result=this.safeParse(data,params);if(result.success)return result.data;throw result.error}safeParse(data,params){var _a;const ctx={common:{issues:[],async:null!==(_a=null==params?void 0:params.async)&&void 0!==_a&&_a,contextualErrorMap:null==params?void 0:params.errorMap},path:(null==params?void 0:params.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data,parsedType:getParsedType(data)},result=this._parseSync({data,path:ctx.path,parent:ctx});return handleResult(ctx,result)}async parseAsync(data,params){const result=await this.safeParseAsync(data,params);if(result.success)return result.data;throw result.error}async safeParseAsync(data,params){const ctx={common:{issues:[],contextualErrorMap:null==params?void 0:params.errorMap,async:!0},path:(null==params?void 0:params.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data,parsedType:getParsedType(data)},maybeAsyncResult=this._parse({data,path:ctx.path,parent:ctx}),result=await(isAsync(maybeAsyncResult)?maybeAsyncResult:Promise.resolve(maybeAsyncResult));return handleResult(ctx,result)}refine(check,message){const getIssueProperties=val=>"string"==typeof message||void 0===message?{message}:"function"==typeof message?message(val):message;return this._refinement(((val,ctx)=>{const result=check(val),setError=()=>ctx.addIssue({code:ZodIssueCode.custom,...getIssueProperties(val)});return"undefined"!=typeof Promise&&result instanceof Promise?result.then((data=>!!data||(setError(),!1))):!!result||(setError(),!1)}))}refinement(check,refinementData){return this._refinement(((val,ctx)=>!!check(val)||(ctx.addIssue("function"==typeof refinementData?refinementData(val,ctx):refinementData),!1)))}_refinement(refinement){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement}})}superRefine(refinement){return this._refinement(refinement)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(option){return ZodUnion.create([this,option],this._def)}and(incoming){return ZodIntersection.create(this,incoming,this._def)}transform(transform){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform}})}default(def){const defaultValueFunc="function"==typeof def?def:()=>def;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:defaultValueFunc,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(def){const catchValueFunc="function"==typeof def?def:()=>def;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:catchValueFunc,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(description){return new(0,this.constructor)({...this._def,description})}pipe(target){return ZodPipeline.create(this,target)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(args){let regex="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return args.precision?regex=`${regex}\\.\\d{${args.precision}}`:null==args.precision&&(regex=`${regex}(\\.\\d+)?`),regex}function datetimeRegex(args){let regex=`${dateRegexSource}T${timeRegexSource(args)}`;const opts=[];return opts.push(args.local?"Z?":"Z"),args.offset&&opts.push("([+-]\\d{2}:?\\d{2})"),regex=`${regex}(${opts.join("|")})`,new RegExp(`^${regex}$`)}class ZodString extends ZodType{_parse(input){this._def.coerce&&(input.data=String(input.data));if(this._getType(input)!==ZodParsedType.string){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:ctx.parsedType}),INVALID}const status=new ParseStatus;let ctx;for(const check of this._def.checks)if("min"===check.kind)input.data.length<check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"string",inclusive:!0,exact:!1,message:check.message}),status.dirty());else if("max"===check.kind)input.data.length>check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"string",inclusive:!0,exact:!1,message:check.message}),status.dirty());else if("length"===check.kind){const tooBig=input.data.length>check.value,tooSmall=input.data.length<check.value;(tooBig||tooSmall)&&(ctx=this._getOrReturnCtx(input,ctx),tooBig?addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"string",inclusive:!0,exact:!0,message:check.message}):tooSmall&&addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"string",inclusive:!0,exact:!0,message:check.message}),status.dirty())}else if("email"===check.kind)emailRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"email",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("emoji"===check.kind)emojiRegex||(emojiRegex=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"emoji",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("uuid"===check.kind)uuidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"uuid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("nanoid"===check.kind)nanoidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("cuid"===check.kind)cuidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"cuid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("cuid2"===check.kind)cuid2Regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("ulid"===check.kind)ulidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"ulid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("url"===check.kind)try{new URL(input.data)}catch(_a){ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"url",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()}else if("regex"===check.kind){check.regex.lastIndex=0;check.regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"regex",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty())}else if("trim"===check.kind)input.data=input.data.trim();else if("includes"===check.kind)input.data.includes(check.value,check.position)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{includes:check.value,position:check.position},message:check.message}),status.dirty());else if("toLowerCase"===check.kind)input.data=input.data.toLowerCase();else if("toUpperCase"===check.kind)input.data=input.data.toUpperCase();else if("startsWith"===check.kind)input.data.startsWith(check.value)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{startsWith:check.value},message:check.message}),status.dirty());else if("endsWith"===check.kind)input.data.endsWith(check.value)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{endsWith:check.value},message:check.message}),status.dirty());else if("datetime"===check.kind){datetimeRegex(check).test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"datetime",message:check.message}),status.dirty())}else if("date"===check.kind){dateRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"date",message:check.message}),status.dirty())}else if("time"===check.kind){new RegExp(`^${timeRegexSource(check)}$`).test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"time",message:check.message}),status.dirty())}else"duration"===check.kind?durationRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"duration",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):"ip"===check.kind?(ip=input.data,("v4"!==(version=check.version)&&version||!ipv4Regex.test(ip))&&("v6"!==version&&version||!ipv6Regex.test(ip))&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"ip",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty())):"base64"===check.kind?base64Regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"base64",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):util.assertNever(check);var ip,version;return{status:status.value,value:input.data}}_regex(regex,validation,message){return this.refinement((data=>regex.test(data)),{validation,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(message)})}_addCheck(check){return new ZodString({...this._def,checks:[...this._def.checks,check]})}email(message){return this._addCheck({kind:"email",...errorUtil.errToObj(message)})}url(message){return this._addCheck({kind:"url",...errorUtil.errToObj(message)})}emoji(message){return this._addCheck({kind:"emoji",...errorUtil.errToObj(message)})}uuid(message){return this._addCheck({kind:"uuid",...errorUtil.errToObj(message)})}nanoid(message){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(message)})}cuid(message){return this._addCheck({kind:"cuid",...errorUtil.errToObj(message)})}cuid2(message){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(message)})}ulid(message){return this._addCheck({kind:"ulid",...errorUtil.errToObj(message)})}base64(message){return this._addCheck({kind:"base64",...errorUtil.errToObj(message)})}ip(options){return this._addCheck({kind:"ip",...errorUtil.errToObj(options)})}datetime(options){var _a,_b;return"string"==typeof options?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:options}):this._addCheck({kind:"datetime",precision:void 0===(null==options?void 0:options.precision)?null:null==options?void 0:options.precision,offset:null!==(_a=null==options?void 0:options.offset)&&void 0!==_a&&_a,local:null!==(_b=null==options?void 0:options.local)&&void 0!==_b&&_b,...errorUtil.errToObj(null==options?void 0:options.message)})}date(message){return this._addCheck({kind:"date",message})}time(options){return"string"==typeof options?this._addCheck({kind:"time",precision:null,message:options}):this._addCheck({kind:"time",precision:void 0===(null==options?void 0:options.precision)?null:null==options?void 0:options.precision,...errorUtil.errToObj(null==options?void 0:options.message)})}duration(message){return this._addCheck({kind:"duration",...errorUtil.errToObj(message)})}regex(regex,message){return this._addCheck({kind:"regex",regex,...errorUtil.errToObj(message)})}includes(value,options){return this._addCheck({kind:"includes",value,position:null==options?void 0:options.position,...errorUtil.errToObj(null==options?void 0:options.message)})}startsWith(value,message){return this._addCheck({kind:"startsWith",value,...errorUtil.errToObj(message)})}endsWith(value,message){return this._addCheck({kind:"endsWith",value,...errorUtil.errToObj(message)})}min(minLength,message){return this._addCheck({kind:"min",value:minLength,...errorUtil.errToObj(message)})}max(maxLength,message){return this._addCheck({kind:"max",value:maxLength,...errorUtil.errToObj(message)})}length(len,message){return this._addCheck({kind:"length",value:len,...errorUtil.errToObj(message)})}nonempty(message){return this.min(1,errorUtil.errToObj(message))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((ch=>"datetime"===ch.kind))}get isDate(){return!!this._def.checks.find((ch=>"date"===ch.kind))}get isTime(){return!!this._def.checks.find((ch=>"time"===ch.kind))}get isDuration(){return!!this._def.checks.find((ch=>"duration"===ch.kind))}get isEmail(){return!!this._def.checks.find((ch=>"email"===ch.kind))}get isURL(){return!!this._def.checks.find((ch=>"url"===ch.kind))}get isEmoji(){return!!this._def.checks.find((ch=>"emoji"===ch.kind))}get isUUID(){return!!this._def.checks.find((ch=>"uuid"===ch.kind))}get isNANOID(){return!!this._def.checks.find((ch=>"nanoid"===ch.kind))}get isCUID(){return!!this._def.checks.find((ch=>"cuid"===ch.kind))}get isCUID2(){return!!this._def.checks.find((ch=>"cuid2"===ch.kind))}get isULID(){return!!this._def.checks.find((ch=>"ulid"===ch.kind))}get isIP(){return!!this._def.checks.find((ch=>"ip"===ch.kind))}get isBase64(){return!!this._def.checks.find((ch=>"base64"===ch.kind))}get minLength(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxLength(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}}function floatSafeRemainder(val,step){const valDecCount=(val.toString().split(".")[1]||"").length,stepDecCount=(step.toString().split(".")[1]||"").length,decCount=valDecCount>stepDecCount?valDecCount:stepDecCount;return parseInt(val.toFixed(decCount).replace(".",""))%parseInt(step.toFixed(decCount).replace(".",""))/Math.pow(10,decCount)}ZodString.create=params=>{var _a;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:null!==(_a=null==params?void 0:params.coerce)&&void 0!==_a&&_a,...processCreateParams(params)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(input){this._def.coerce&&(input.data=Number(input.data));if(this._getType(input)!==ZodParsedType.number){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:ctx.parsedType}),INVALID}let ctx;const status=new ParseStatus;for(const check of this._def.checks)if("int"===check.kind)util.isInteger(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:check.message}),status.dirty());else if("min"===check.kind){(check.inclusive?input.data<check.value:input.data<=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"number",inclusive:check.inclusive,exact:!1,message:check.message}),status.dirty())}else if("max"===check.kind){(check.inclusive?input.data>check.value:input.data>=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"number",inclusive:check.inclusive,exact:!1,message:check.message}),status.dirty())}else"multipleOf"===check.kind?0!==floatSafeRemainder(input.data,check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_multiple_of,multipleOf:check.value,message:check.message}),status.dirty()):"finite"===check.kind?Number.isFinite(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_finite,message:check.message}),status.dirty()):util.assertNever(check);return{status:status.value,value:input.data}}gte(value,message){return this.setLimit("min",value,!0,errorUtil.toString(message))}gt(value,message){return this.setLimit("min",value,!1,errorUtil.toString(message))}lte(value,message){return this.setLimit("max",value,!0,errorUtil.toString(message))}lt(value,message){return this.setLimit("max",value,!1,errorUtil.toString(message))}setLimit(kind,value,inclusive,message){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind,value,inclusive,message:errorUtil.toString(message)}]})}_addCheck(check){return new ZodNumber({...this._def,checks:[...this._def.checks,check]})}int(message){return this._addCheck({kind:"int",message:errorUtil.toString(message)})}positive(message){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(message)})}negative(message){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(message)})}nonpositive(message){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(message)})}nonnegative(message){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(message)})}multipleOf(value,message){return this._addCheck({kind:"multipleOf",value,message:errorUtil.toString(message)})}finite(message){return this._addCheck({kind:"finite",message:errorUtil.toString(message)})}safe(message){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(message)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(message)})}get minValue(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxValue(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}get isInt(){return!!this._def.checks.find((ch=>"int"===ch.kind||"multipleOf"===ch.kind&&util.isInteger(ch.value)))}get isFinite(){let max=null,min=null;for(const ch of this._def.checks){if("finite"===ch.kind||"int"===ch.kind||"multipleOf"===ch.kind)return!0;"min"===ch.kind?(null===min||ch.value>min)&&(min=ch.value):"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value)}return Number.isFinite(min)&&Number.isFinite(max)}}ZodNumber.create=params=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(null==params?void 0:params.coerce)||!1,...processCreateParams(params)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(input){this._def.coerce&&(input.data=BigInt(input.data));if(this._getType(input)!==ZodParsedType.bigint){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:ctx.parsedType}),INVALID}let ctx;const status=new ParseStatus;for(const check of this._def.checks)if("min"===check.kind){(check.inclusive?input.data<check.value:input.data<=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,type:"bigint",minimum:check.value,inclusive:check.inclusive,message:check.message}),status.dirty())}else if("max"===check.kind){(check.inclusive?input.data>check.value:input.data>=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,type:"bigint",maximum:check.value,inclusive:check.inclusive,message:check.message}),status.dirty())}else"multipleOf"===check.kind?input.data%check.value!==BigInt(0)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_multiple_of,multipleOf:check.value,message:check.message}),status.dirty()):util.assertNever(check);return{status:status.value,value:input.data}}gte(value,message){return this.setLimit("min",value,!0,errorUtil.toString(message))}gt(value,message){return this.setLimit("min",value,!1,errorUtil.toString(message))}lte(value,message){return this.setLimit("max",value,!0,errorUtil.toString(message))}lt(value,message){return this.setLimit("max",value,!1,errorUtil.toString(message))}setLimit(kind,value,inclusive,message){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind,value,inclusive,message:errorUtil.toString(message)}]})}_addCheck(check){return new ZodBigInt({...this._def,checks:[...this._def.checks,check]})}positive(message){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(message)})}negative(message){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(message)})}nonpositive(message){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(message)})}nonnegative(message){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(message)})}multipleOf(value,message){return this._addCheck({kind:"multipleOf",value,message:errorUtil.toString(message)})}get minValue(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxValue(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}}ZodBigInt.create=params=>{var _a;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:null!==(_a=null==params?void 0:params.coerce)&&void 0!==_a&&_a,...processCreateParams(params)})};class ZodBoolean extends ZodType{_parse(input){this._def.coerce&&(input.data=Boolean(input.data));if(this._getType(input)!==ZodParsedType.boolean){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodBoolean.create=params=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(null==params?void 0:params.coerce)||!1,...processCreateParams(params)});class ZodDate extends ZodType{_parse(input){this._def.coerce&&(input.data=new Date(input.data));if(this._getType(input)!==ZodParsedType.date){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:ctx.parsedType}),INVALID}if(isNaN(input.data.getTime())){return addIssueToContext(this._getOrReturnCtx(input),{code:ZodIssueCode.invalid_date}),INVALID}const status=new ParseStatus;let ctx;for(const check of this._def.checks)"min"===check.kind?input.data.getTime()<check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,message:check.message,inclusive:!0,exact:!1,minimum:check.value,type:"date"}),status.dirty()):"max"===check.kind?input.data.getTime()>check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,message:check.message,inclusive:!0,exact:!1,maximum:check.value,type:"date"}),status.dirty()):util.assertNever(check);return{status:status.value,value:new Date(input.data.getTime())}}_addCheck(check){return new ZodDate({...this._def,checks:[...this._def.checks,check]})}min(minDate,message){return this._addCheck({kind:"min",value:minDate.getTime(),message:errorUtil.toString(message)})}max(maxDate,message){return this._addCheck({kind:"max",value:maxDate.getTime(),message:errorUtil.toString(message)})}get minDate(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return null!=min?new Date(min):null}get maxDate(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return null!=max?new Date(max):null}}ZodDate.create=params=>new ZodDate({checks:[],coerce:(null==params?void 0:params.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(params)});class ZodSymbol extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.symbol){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodSymbol.create=params=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(params)});class ZodUndefined extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.undefined){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodUndefined.create=params=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(params)});class ZodNull extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.null){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodNull.create=params=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(params)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(input){return OK(input.data)}}ZodAny.create=params=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(params)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(input){return OK(input.data)}}ZodUnknown.create=params=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(params)});class ZodNever extends ZodType{_parse(input){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:ctx.parsedType}),INVALID}}ZodNever.create=params=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(params)});class ZodVoid extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.undefined){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodVoid.create=params=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(params)});class ZodArray extends ZodType{_parse(input){const{ctx,status}=this._processInputParams(input),def=this._def;if(ctx.parsedType!==ZodParsedType.array)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:ctx.parsedType}),INVALID;if(null!==def.exactLength){const tooBig=ctx.data.length>def.exactLength.value,tooSmall=ctx.data.length<def.exactLength.value;(tooBig||tooSmall)&&(addIssueToContext(ctx,{code:tooBig?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:tooSmall?def.exactLength.value:void 0,maximum:tooBig?def.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:def.exactLength.message}),status.dirty())}if(null!==def.minLength&&ctx.data.length<def.minLength.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:def.minLength.value,type:"array",inclusive:!0,exact:!1,message:def.minLength.message}),status.dirty()),null!==def.maxLength&&ctx.data.length>def.maxLength.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:def.maxLength.value,type:"array",inclusive:!0,exact:!1,message:def.maxLength.message}),status.dirty()),ctx.common.async)return Promise.all([...ctx.data].map(((item,i)=>def.type._parseAsync(new ParseInputLazyPath(ctx,item,ctx.path,i))))).then((result=>ParseStatus.mergeArray(status,result)));const result=[...ctx.data].map(((item,i)=>def.type._parseSync(new ParseInputLazyPath(ctx,item,ctx.path,i))));return ParseStatus.mergeArray(status,result)}get element(){return this._def.type}min(minLength,message){return new ZodArray({...this._def,minLength:{value:minLength,message:errorUtil.toString(message)}})}max(maxLength,message){return new ZodArray({...this._def,maxLength:{value:maxLength,message:errorUtil.toString(message)}})}length(len,message){return new ZodArray({...this._def,exactLength:{value:len,message:errorUtil.toString(message)}})}nonempty(message){return this.min(1,message)}}function deepPartialify(schema){if(schema instanceof ZodObject){const newShape={};for(const key in schema.shape){const fieldSchema=schema.shape[key];newShape[key]=ZodOptional.create(deepPartialify(fieldSchema))}return new ZodObject({...schema._def,shape:()=>newShape})}return schema instanceof ZodArray?new ZodArray({...schema._def,type:deepPartialify(schema.element)}):schema instanceof ZodOptional?ZodOptional.create(deepPartialify(schema.unwrap())):schema instanceof ZodNullable?ZodNullable.create(deepPartialify(schema.unwrap())):schema instanceof ZodTuple?ZodTuple.create(schema.items.map((item=>deepPartialify(item)))):schema}ZodArray.create=(schema,params)=>new ZodArray({type:schema,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(params)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const shape=this._def.shape(),keys=util.objectKeys(shape);return this._cached={shape,keys}}_parse(input){if(this._getType(input)!==ZodParsedType.object){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx.parsedType}),INVALID}const{status,ctx}=this._processInputParams(input),{shape,keys:shapeKeys}=this._getCached(),extraKeys=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const key in ctx.data)shapeKeys.includes(key)||extraKeys.push(key);const pairs=[];for(const key of shapeKeys){const keyValidator=shape[key],value=ctx.data[key];pairs.push({key:{status:"valid",value:key},value:keyValidator._parse(new ParseInputLazyPath(ctx,value,ctx.path,key)),alwaysSet:key in ctx.data})}if(this._def.catchall instanceof ZodNever){const unknownKeys=this._def.unknownKeys;if("passthrough"===unknownKeys)for(const key of extraKeys)pairs.push({key:{status:"valid",value:key},value:{status:"valid",value:ctx.data[key]}});else if("strict"===unknownKeys)extraKeys.length>0&&(addIssueToContext(ctx,{code:ZodIssueCode.unrecognized_keys,keys:extraKeys}),status.dirty());else if("strip"!==unknownKeys)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const catchall=this._def.catchall;for(const key of extraKeys){const value=ctx.data[key];pairs.push({key:{status:"valid",value:key},value:catchall._parse(new ParseInputLazyPath(ctx,value,ctx.path,key)),alwaysSet:key in ctx.data})}}return ctx.common.async?Promise.resolve().then((async()=>{const syncPairs=[];for(const pair of pairs){const key=await pair.key,value=await pair.value;syncPairs.push({key,value,alwaysSet:pair.alwaysSet})}return syncPairs})).then((syncPairs=>ParseStatus.mergeObjectSync(status,syncPairs))):ParseStatus.mergeObjectSync(status,pairs)}get shape(){return this._def.shape()}strict(message){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==message?{errorMap:(issue,ctx)=>{var _a,_b,_c,_d;const defaultError=null!==(_c=null===(_b=(_a=this._def).errorMap)||void 0===_b?void 0:_b.call(_a,issue,ctx).message)&&void 0!==_c?_c:ctx.defaultError;return"unrecognized_keys"===issue.code?{message:null!==(_d=errorUtil.errToObj(message).message)&&void 0!==_d?_d:defaultError}:{message:defaultError}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(augmentation){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...augmentation})})}merge(merging){return new ZodObject({unknownKeys:merging._def.unknownKeys,catchall:merging._def.catchall,shape:()=>({...this._def.shape(),...merging._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(key,schema){return this.augment({[key]:schema})}catchall(index){return new ZodObject({...this._def,catchall:index})}pick(mask){const shape={};return util.objectKeys(mask).forEach((key=>{mask[key]&&this.shape[key]&&(shape[key]=this.shape[key])})),new ZodObject({...this._def,shape:()=>shape})}omit(mask){const shape={};return util.objectKeys(this.shape).forEach((key=>{mask[key]||(shape[key]=this.shape[key])})),new ZodObject({...this._def,shape:()=>shape})}deepPartial(){return deepPartialify(this)}partial(mask){const newShape={};return util.objectKeys(this.shape).forEach((key=>{const fieldSchema=this.shape[key];mask&&!mask[key]?newShape[key]=fieldSchema:newShape[key]=fieldSchema.optional()})),new ZodObject({...this._def,shape:()=>newShape})}required(mask){const newShape={};return util.objectKeys(this.shape).forEach((key=>{if(mask&&!mask[key])newShape[key]=this.shape[key];else{let newField=this.shape[key];for(;newField instanceof ZodOptional;)newField=newField._def.innerType;newShape[key]=newField}})),new ZodObject({...this._def,shape:()=>newShape})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(shape,params)=>new ZodObject({shape:()=>shape,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)}),ZodObject.strictCreate=(shape,params)=>new ZodObject({shape:()=>shape,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)}),ZodObject.lazycreate=(shape,params)=>new ZodObject({shape,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)});class ZodUnion extends ZodType{_parse(input){const{ctx}=this._processInputParams(input),options=this._def.options;if(ctx.common.async)return Promise.all(options.map((async option=>{const childCtx={...ctx,common:{...ctx.common,issues:[]},parent:null};return{result:await option._parseAsync({data:ctx.data,path:ctx.path,parent:childCtx}),ctx:childCtx}}))).then((function handleResults(results){for(const result of results)if("valid"===result.result.status)return result.result;for(const result of results)if("dirty"===result.result.status)return ctx.common.issues.push(...result.ctx.common.issues),result.result;const unionErrors=results.map((result=>new lib_ZodError(result.ctx.common.issues)));return addIssueToContext(ctx,{code:ZodIssueCode.invalid_union,unionErrors}),INVALID}));{let dirty;const issues=[];for(const option of options){const childCtx={...ctx,common:{...ctx.common,issues:[]},parent:null},result=option._parseSync({data:ctx.data,path:ctx.path,parent:childCtx});if("valid"===result.status)return result;"dirty"!==result.status||dirty||(dirty={result,ctx:childCtx}),childCtx.common.issues.length&&issues.push(childCtx.common.issues)}if(dirty)return ctx.common.issues.push(...dirty.ctx.common.issues),dirty.result;const unionErrors=issues.map((issues=>new lib_ZodError(issues)));return addIssueToContext(ctx,{code:ZodIssueCode.invalid_union,unionErrors}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(types,params)=>new ZodUnion({options:types,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(params)});const getDiscriminator=type=>type instanceof ZodLazy?getDiscriminator(type.schema):type instanceof ZodEffects?getDiscriminator(type.innerType()):type instanceof ZodLiteral?[type.value]:type instanceof ZodEnum?type.options:type instanceof ZodNativeEnum?util.objectValues(type.enum):type instanceof ZodDefault?getDiscriminator(type._def.innerType):type instanceof ZodUndefined?[void 0]:type instanceof ZodNull?[null]:type instanceof ZodOptional?[void 0,...getDiscriminator(type.unwrap())]:type instanceof ZodNullable?[null,...getDiscriminator(type.unwrap())]:type instanceof ZodBranded||type instanceof ZodReadonly?getDiscriminator(type.unwrap()):type instanceof ZodCatch?getDiscriminator(type._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(input){const{ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.object)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx.parsedType}),INVALID;const discriminator=this.discriminator,discriminatorValue=ctx.data[discriminator],option=this.optionsMap.get(discriminatorValue);return option?ctx.common.async?option._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}):option._parseSync({data:ctx.data,path:ctx.path,parent:ctx}):(addIssueToContext(ctx,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[discriminator]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(discriminator,options,params){const optionsMap=new Map;for(const type of options){const discriminatorValues=getDiscriminator(type.shape[discriminator]);if(!discriminatorValues.length)throw new Error(`A discriminator value for key \`${discriminator}\` could not be extracted from all schema options`);for(const value of discriminatorValues){if(optionsMap.has(value))throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);optionsMap.set(value,type)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator,options,optionsMap,...processCreateParams(params)})}}function mergeValues(a,b){const aType=getParsedType(a),bType=getParsedType(b);if(a===b)return{valid:!0,data:a};if(aType===ZodParsedType.object&&bType===ZodParsedType.object){const bKeys=util.objectKeys(b),sharedKeys=util.objectKeys(a).filter((key=>-1!==bKeys.indexOf(key))),newObj={...a,...b};for(const key of sharedKeys){const sharedValue=mergeValues(a[key],b[key]);if(!sharedValue.valid)return{valid:!1};newObj[key]=sharedValue.data}return{valid:!0,data:newObj}}if(aType===ZodParsedType.array&&bType===ZodParsedType.array){if(a.length!==b.length)return{valid:!1};const newArray=[];for(let index=0;index<a.length;index++){const sharedValue=mergeValues(a[index],b[index]);if(!sharedValue.valid)return{valid:!1};newArray.push(sharedValue.data)}return{valid:!0,data:newArray}}return aType===ZodParsedType.date&&bType===ZodParsedType.date&&+a==+b?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input),handleParsed=(parsedLeft,parsedRight)=>{if(isAborted(parsedLeft)||isAborted(parsedRight))return INVALID;const merged=mergeValues(parsedLeft.value,parsedRight.value);return merged.valid?((isDirty(parsedLeft)||isDirty(parsedRight))&&status.dirty(),{status:status.value,value:merged.data}):(addIssueToContext(ctx,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return ctx.common.async?Promise.all([this._def.left._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}),this._def.right._parseAsync({data:ctx.data,path:ctx.path,parent:ctx})]).then((([left,right])=>handleParsed(left,right))):handleParsed(this._def.left._parseSync({data:ctx.data,path:ctx.path,parent:ctx}),this._def.right._parseSync({data:ctx.data,path:ctx.path,parent:ctx}))}}ZodIntersection.create=(left,right,params)=>new ZodIntersection({left,right,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(params)});class ZodTuple extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.array)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:ctx.parsedType}),INVALID;if(ctx.data.length<this._def.items.length)return addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&ctx.data.length>this._def.items.length&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),status.dirty());const items=[...ctx.data].map(((item,itemIndex)=>{const schema=this._def.items[itemIndex]||this._def.rest;return schema?schema._parse(new ParseInputLazyPath(ctx,item,ctx.path,itemIndex)):null})).filter((x=>!!x));return ctx.common.async?Promise.all(items).then((results=>ParseStatus.mergeArray(status,results))):ParseStatus.mergeArray(status,items)}get items(){return this._def.items}rest(rest){return new ZodTuple({...this._def,rest})}}ZodTuple.create=(schemas,params)=>{if(!Array.isArray(schemas))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:schemas,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(params)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.object)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx.parsedType}),INVALID;const pairs=[],keyType=this._def.keyType,valueType=this._def.valueType;for(const key in ctx.data)pairs.push({key:keyType._parse(new ParseInputLazyPath(ctx,key,ctx.path,key)),value:valueType._parse(new ParseInputLazyPath(ctx,ctx.data[key],ctx.path,key)),alwaysSet:key in ctx.data});return ctx.common.async?ParseStatus.mergeObjectAsync(status,pairs):ParseStatus.mergeObjectSync(status,pairs)}get element(){return this._def.valueType}static create(first,second,third){return new ZodRecord(second instanceof ZodType?{keyType:first,valueType:second,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(third)}:{keyType:ZodString.create(),valueType:first,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(second)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.map)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:ctx.parsedType}),INVALID;const keyType=this._def.keyType,valueType=this._def.valueType,pairs=[...ctx.data.entries()].map((([key,value],index)=>({key:keyType._parse(new ParseInputLazyPath(ctx,key,ctx.path,[index,"key"])),value:valueType._parse(new ParseInputLazyPath(ctx,value,ctx.path,[index,"value"]))})));if(ctx.common.async){const finalMap=new Map;return Promise.resolve().then((async()=>{for(const pair of pairs){const key=await pair.key,value=await pair.value;if("aborted"===key.status||"aborted"===value.status)return INVALID;"dirty"!==key.status&&"dirty"!==value.status||status.dirty(),finalMap.set(key.value,value.value)}return{status:status.value,value:finalMap}}))}{const finalMap=new Map;for(const pair of pairs){const key=pair.key,value=pair.value;if("aborted"===key.status||"aborted"===value.status)return INVALID;"dirty"!==key.status&&"dirty"!==value.status||status.dirty(),finalMap.set(key.value,value.value)}return{status:status.value,value:finalMap}}}}ZodMap.create=(keyType,valueType,params)=>new ZodMap({valueType,keyType,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(params)});class ZodSet extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.set)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:ctx.parsedType}),INVALID;const def=this._def;null!==def.minSize&&ctx.data.size<def.minSize.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:def.minSize.value,type:"set",inclusive:!0,exact:!1,message:def.minSize.message}),status.dirty()),null!==def.maxSize&&ctx.data.size>def.maxSize.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:def.maxSize.value,type:"set",inclusive:!0,exact:!1,message:def.maxSize.message}),status.dirty());const valueType=this._def.valueType;function finalizeSet(elements){const parsedSet=new Set;for(const element of elements){if("aborted"===element.status)return INVALID;"dirty"===element.status&&status.dirty(),parsedSet.add(element.value)}return{status:status.value,value:parsedSet}}const elements=[...ctx.data.values()].map(((item,i)=>valueType._parse(new ParseInputLazyPath(ctx,item,ctx.path,i))));return ctx.common.async?Promise.all(elements).then((elements=>finalizeSet(elements))):finalizeSet(elements)}min(minSize,message){return new ZodSet({...this._def,minSize:{value:minSize,message:errorUtil.toString(message)}})}max(maxSize,message){return new ZodSet({...this._def,maxSize:{value:maxSize,message:errorUtil.toString(message)}})}size(size,message){return this.min(size,message).max(size,message)}nonempty(message){return this.min(1,message)}}ZodSet.create=(valueType,params)=>new ZodSet({valueType,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(params)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(input){const{ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.function)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:ctx.parsedType}),INVALID;function makeArgsIssue(args,error){return makeIssue({data:args,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,getErrorMap(),errorMap].filter((x=>!!x)),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:error}})}function makeReturnsIssue(returns,error){return makeIssue({data:returns,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,getErrorMap(),errorMap].filter((x=>!!x)),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:error}})}const params={errorMap:ctx.common.contextualErrorMap},fn=ctx.data;if(this._def.returns instanceof ZodPromise){const me=this;return OK((async function(...args){const error=new lib_ZodError([]),parsedArgs=await me._def.args.parseAsync(args,params).catch((e=>{throw error.addIssue(makeArgsIssue(args,e)),error})),result=await Reflect.apply(fn,this,parsedArgs);return await me._def.returns._def.type.parseAsync(result,params).catch((e=>{throw error.addIssue(makeReturnsIssue(result,e)),error}))}))}{const me=this;return OK((function(...args){const parsedArgs=me._def.args.safeParse(args,params);if(!parsedArgs.success)throw new lib_ZodError([makeArgsIssue(args,parsedArgs.error)]);const result=Reflect.apply(fn,this,parsedArgs.data),parsedReturns=me._def.returns.safeParse(result,params);if(!parsedReturns.success)throw new lib_ZodError([makeReturnsIssue(result,parsedReturns.error)]);return parsedReturns.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...items){return new ZodFunction({...this._def,args:ZodTuple.create(items).rest(ZodUnknown.create())})}returns(returnType){return new ZodFunction({...this._def,returns:returnType})}implement(func){return this.parse(func)}strictImplement(func){return this.parse(func)}static create(args,returns,params){return new ZodFunction({args:args||ZodTuple.create([]).rest(ZodUnknown.create()),returns:returns||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(params)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(input){const{ctx}=this._processInputParams(input);return this._def.getter()._parse({data:ctx.data,path:ctx.path,parent:ctx})}}ZodLazy.create=(getter,params)=>new ZodLazy({getter,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(params)});class ZodLiteral extends ZodType{_parse(input){if(input.data!==this._def.value){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:input.data}}get value(){return this._def.value}}function createZodEnum(values,params){return new ZodEnum({values,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(params)})}ZodLiteral.create=(value,params)=>new ZodLiteral({value,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(params)});class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(input){if("string"!=typeof input.data){const ctx=this._getOrReturnCtx(input),expectedValues=this._def.values;return addIssueToContext(ctx,{expected:util.joinValues(expectedValues),received:ctx.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache,"f")||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values),"f"),!__classPrivateFieldGet(this,_ZodEnum_cache,"f").has(input.data)){const ctx=this._getOrReturnCtx(input),expectedValues=this._def.values;return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_enum_value,options:expectedValues}),INVALID}return OK(input.data)}get options(){return this._def.values}get enum(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}get Values(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}get Enum(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}extract(values,newDef=this._def){return ZodEnum.create(values,{...this._def,...newDef})}exclude(values,newDef=this._def){return ZodEnum.create(this.options.filter((opt=>!values.includes(opt))),{...this._def,...newDef})}}_ZodEnum_cache=new WeakMap,ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(input){const nativeEnumValues=util.getValidEnumValues(this._def.values),ctx=this._getOrReturnCtx(input);if(ctx.parsedType!==ZodParsedType.string&&ctx.parsedType!==ZodParsedType.number){const expectedValues=util.objectValues(nativeEnumValues);return addIssueToContext(ctx,{expected:util.joinValues(expectedValues),received:ctx.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache,"f")||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values)),"f"),!__classPrivateFieldGet(this,_ZodNativeEnum_cache,"f").has(input.data)){const expectedValues=util.objectValues(nativeEnumValues);return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_enum_value,options:expectedValues}),INVALID}return OK(input.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap,ZodNativeEnum.create=(values,params)=>new ZodNativeEnum({values,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(params)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(input){const{ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.promise&&!1===ctx.common.async)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:ctx.parsedType}),INVALID;const promisified=ctx.parsedType===ZodParsedType.promise?ctx.data:Promise.resolve(ctx.data);return OK(promisified.then((data=>this._def.type.parseAsync(data,{path:ctx.path,errorMap:ctx.common.contextualErrorMap}))))}}ZodPromise.create=(schema,params)=>new ZodPromise({type:schema,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(params)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(input){const{status,ctx}=this._processInputParams(input),effect=this._def.effect||null,checkCtx={addIssue:arg=>{addIssueToContext(ctx,arg),arg.fatal?status.abort():status.dirty()},get path(){return ctx.path}};if(checkCtx.addIssue=checkCtx.addIssue.bind(checkCtx),"preprocess"===effect.type){const processed=effect.transform(ctx.data,checkCtx);if(ctx.common.async)return Promise.resolve(processed).then((async processed=>{if("aborted"===status.value)return INVALID;const result=await this._def.schema._parseAsync({data:processed,path:ctx.path,parent:ctx});return"aborted"===result.status?INVALID:"dirty"===result.status||"dirty"===status.value?DIRTY(result.value):result}));{if("aborted"===status.value)return INVALID;const result=this._def.schema._parseSync({data:processed,path:ctx.path,parent:ctx});return"aborted"===result.status?INVALID:"dirty"===result.status||"dirty"===status.value?DIRTY(result.value):result}}if("refinement"===effect.type){const executeRefinement=acc=>{const result=effect.refinement(acc,checkCtx);if(ctx.common.async)return Promise.resolve(result);if(result instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return acc};if(!1===ctx.common.async){const inner=this._def.schema._parseSync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inner.status?INVALID:("dirty"===inner.status&&status.dirty(),executeRefinement(inner.value),{status:status.value,value:inner.value})}return this._def.schema._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}).then((inner=>"aborted"===inner.status?INVALID:("dirty"===inner.status&&status.dirty(),executeRefinement(inner.value).then((()=>({status:status.value,value:inner.value}))))))}if("transform"===effect.type){if(!1===ctx.common.async){const base=this._def.schema._parseSync({data:ctx.data,path:ctx.path,parent:ctx});if(!isValid(base))return base;const result=effect.transform(base.value,checkCtx);if(result instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:status.value,value:result}}return this._def.schema._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}).then((base=>isValid(base)?Promise.resolve(effect.transform(base.value,checkCtx)).then((result=>({status:status.value,value:result}))):base))}util.assertNever(effect)}}ZodEffects.create=(schema,effect,params)=>new ZodEffects({schema,typeName:ZodFirstPartyTypeKind.ZodEffects,effect,...processCreateParams(params)}),ZodEffects.createWithPreprocess=(preprocess,schema,params)=>new ZodEffects({schema,effect:{type:"preprocess",transform:preprocess},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(params)});class ZodOptional extends ZodType{_parse(input){return this._getType(input)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(input)}unwrap(){return this._def.innerType}}ZodOptional.create=(type,params)=>new ZodOptional({innerType:type,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(params)});class ZodNullable extends ZodType{_parse(input){return this._getType(input)===ZodParsedType.null?OK(null):this._def.innerType._parse(input)}unwrap(){return this._def.innerType}}ZodNullable.create=(type,params)=>new ZodNullable({innerType:type,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(params)});class ZodDefault extends ZodType{_parse(input){const{ctx}=this._processInputParams(input);let data=ctx.data;return ctx.parsedType===ZodParsedType.undefined&&(data=this._def.defaultValue()),this._def.innerType._parse({data,path:ctx.path,parent:ctx})}removeDefault(){return this._def.innerType}}ZodDefault.create=(type,params)=>new ZodDefault({innerType:type,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:"function"==typeof params.default?params.default:()=>params.default,...processCreateParams(params)});class ZodCatch extends ZodType{_parse(input){const{ctx}=this._processInputParams(input),newCtx={...ctx,common:{...ctx.common,issues:[]}},result=this._def.innerType._parse({data:newCtx.data,path:newCtx.path,parent:{...newCtx}});return isAsync(result)?result.then((result=>({status:"valid",value:"valid"===result.status?result.value:this._def.catchValue({get error(){return new lib_ZodError(newCtx.common.issues)},input:newCtx.data})}))):{status:"valid",value:"valid"===result.status?result.value:this._def.catchValue({get error(){return new lib_ZodError(newCtx.common.issues)},input:newCtx.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(type,params)=>new ZodCatch({innerType:type,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:"function"==typeof params.catch?params.catch:()=>params.catch,...processCreateParams(params)});class ZodNaN extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.nan){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:ctx.parsedType}),INVALID}return{status:"valid",value:input.data}}}ZodNaN.create=params=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(params)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(input){const{ctx}=this._processInputParams(input),data=ctx.data;return this._def.type._parse({data,path:ctx.path,parent:ctx})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.common.async){return(async()=>{const inResult=await this._def.in._parseAsync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inResult.status?INVALID:"dirty"===inResult.status?(status.dirty(),DIRTY(inResult.value)):this._def.out._parseAsync({data:inResult.value,path:ctx.path,parent:ctx})})()}{const inResult=this._def.in._parseSync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inResult.status?INVALID:"dirty"===inResult.status?(status.dirty(),{status:"dirty",value:inResult.value}):this._def.out._parseSync({data:inResult.value,path:ctx.path,parent:ctx})}}static create(a,b){return new ZodPipeline({in:a,out:b,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(input){const result=this._def.innerType._parse(input),freeze=data=>(isValid(data)&&(data.value=Object.freeze(data.value)),data);return isAsync(result)?result.then((data=>freeze(data))):freeze(result)}unwrap(){return this._def.innerType}}function custom(check,params={},fatal){return check?ZodAny.create().superRefine(((data,ctx)=>{var _a,_b;if(!check(data)){const p="function"==typeof params?params(data):"string"==typeof params?{message:params}:params,_fatal=null===(_b=null!==(_a=p.fatal)&&void 0!==_a?_a:fatal)||void 0===_b||_b,p2="string"==typeof p?{message:p}:p;ctx.addIssue({code:"custom",...p2,fatal:_fatal})}})):ZodAny.create()}ZodReadonly.create=(type,params)=>new ZodReadonly({innerType:type,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(params)});const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;!function(ZodFirstPartyTypeKind){ZodFirstPartyTypeKind.ZodString="ZodString",ZodFirstPartyTypeKind.ZodNumber="ZodNumber",ZodFirstPartyTypeKind.ZodNaN="ZodNaN",ZodFirstPartyTypeKind.ZodBigInt="ZodBigInt",ZodFirstPartyTypeKind.ZodBoolean="ZodBoolean",ZodFirstPartyTypeKind.ZodDate="ZodDate",ZodFirstPartyTypeKind.ZodSymbol="ZodSymbol",ZodFirstPartyTypeKind.ZodUndefined="ZodUndefined",ZodFirstPartyTypeKind.ZodNull="ZodNull",ZodFirstPartyTypeKind.ZodAny="ZodAny",ZodFirstPartyTypeKind.ZodUnknown="ZodUnknown",ZodFirstPartyTypeKind.ZodNever="ZodNever",ZodFirstPartyTypeKind.ZodVoid="ZodVoid",ZodFirstPartyTypeKind.ZodArray="ZodArray",ZodFirstPartyTypeKind.ZodObject="ZodObject",ZodFirstPartyTypeKind.ZodUnion="ZodUnion",ZodFirstPartyTypeKind.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ZodFirstPartyTypeKind.ZodIntersection="ZodIntersection",ZodFirstPartyTypeKind.ZodTuple="ZodTuple",ZodFirstPartyTypeKind.ZodRecord="ZodRecord",ZodFirstPartyTypeKind.ZodMap="ZodMap",ZodFirstPartyTypeKind.ZodSet="ZodSet",ZodFirstPartyTypeKind.ZodFunction="ZodFunction",ZodFirstPartyTypeKind.ZodLazy="ZodLazy",ZodFirstPartyTypeKind.ZodLiteral="ZodLiteral",ZodFirstPartyTypeKind.ZodEnum="ZodEnum",ZodFirstPartyTypeKind.ZodEffects="ZodEffects",ZodFirstPartyTypeKind.ZodNativeEnum="ZodNativeEnum",ZodFirstPartyTypeKind.ZodOptional="ZodOptional",ZodFirstPartyTypeKind.ZodNullable="ZodNullable",ZodFirstPartyTypeKind.ZodDefault="ZodDefault",ZodFirstPartyTypeKind.ZodCatch="ZodCatch",ZodFirstPartyTypeKind.ZodPromise="ZodPromise",ZodFirstPartyTypeKind.ZodBranded="ZodBranded",ZodFirstPartyTypeKind.ZodPipeline="ZodPipeline",ZodFirstPartyTypeKind.ZodReadonly="ZodReadonly"}(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,coerce={string:arg=>ZodString.create({...arg,coerce:!0}),number:arg=>ZodNumber.create({...arg,coerce:!0}),boolean:arg=>ZodBoolean.create({...arg,coerce:!0}),bigint:arg=>ZodBigInt.create({...arg,coerce:!0}),date:arg=>ZodDate.create({...arg,coerce:!0})},NEVER=INVALID;var constants_ClarityType,z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap:function setErrorMap(map){overrideErrorMap=map},getErrorMap,makeIssue,EMPTY_PATH:[],addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:(cls,params={message:`Input not instance of ${cls.name}`})=>custom((data=>data instanceof cls),params),intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean:()=>booleanType().optional(),onumber:()=>numberType().optional(),optional:optionalType,ostring:()=>stringType().optional(),pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson:obj=>JSON.stringify(obj,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:lib_ZodError});function defineContract(contracts){return contracts}!function(ClarityType){ClarityType[ClarityType.Int=0]="Int",ClarityType[ClarityType.UInt=1]="UInt",ClarityType[ClarityType.Buffer=2]="Buffer",ClarityType[ClarityType.BoolTrue=3]="BoolTrue",ClarityType[ClarityType.BoolFalse=4]="BoolFalse",ClarityType[ClarityType.PrincipalStandard=5]="PrincipalStandard",ClarityType[ClarityType.PrincipalContract=6]="PrincipalContract",ClarityType[ClarityType.ResponseOk=7]="ResponseOk",ClarityType[ClarityType.ResponseErr=8]="ResponseErr",ClarityType[ClarityType.OptionalNone=9]="OptionalNone",ClarityType[ClarityType.OptionalSome=10]="OptionalSome",ClarityType[ClarityType.List=11]="List",ClarityType[ClarityType.Tuple=12]="Tuple",ClarityType[ClarityType.StringASCII=13]="StringASCII",ClarityType[ClarityType.StringUTF8=14]="StringUTF8"}(constants_ClarityType||(constants_ClarityType={}));const stringAsciiCV=data=>({type:constants_ClarityType.StringASCII,data}),stringUtf8CV=data=>({type:constants_ClarityType.StringUTF8,data}),bufferCV_bufferCV=buffer=>{if(buffer.byteLength>1048576)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:constants_ClarityType.Buffer,buffer}};function noneCV(){return{type:constants_ClarityType.OptionalNone}}function someCV(value){return{type:constants_ClarityType.OptionalSome,value}}var lib=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/index.js");function common_addressToString(address){return(0,lib.bJ)(address.version,address.hash160)}class ClarityError extends Error{code;constructor(code){super(`ClarityError: ${code}`),this.code=code}}const addressResult=result=>{if(result.type===constants_ClarityType.PrincipalStandard)return common_addressToString(result.address);throw new Error(`Expected principal, got ${result.type}`)},contractResult=result=>{if(result.type===constants_ClarityType.PrincipalContract)return`${common_addressToString(result.address)}.${result.contractName.content}`;throw new Error(`Expected principal, got ${result.type}`)},intResult=result=>{if(result.type===constants_ClarityType.Int||result.type===constants_ClarityType.UInt)return result.value;throw new Error(`Expected integer, got ${result.type}`)},stringResult=result=>{if(result.type===constants_ClarityType.StringASCII||result.type===constants_ClarityType.StringUTF8)return result.data;throw new Error(`Expected string, got ${result.type}`)},defaultErrorDecoder=value=>value.type===constants_ClarityType.StringASCII||value.type===constants_ClarityType.StringUTF8?new Error(value.data):value.type===constants_ClarityType.UInt||value.type===constants_ClarityType.Int?new ClarityError(Number(value.value)):new Error("Unknown error");function responseSimpleDecoder(success,failure=defaultErrorDecoder){return value=>{if(value.type===constants_ClarityType.ResponseErr)return{type:"error",error:failure(value.value)};if(value.type===constants_ClarityType.ResponseOk)return{type:"success",value:success(value.value)};throw new Error(`Expected response, got ${value.type}`)}}function _assert_number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function _assert_bytes(b,...lengths){if(!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(lengths.length>0&&!lengths.includes(b.length))throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`)}const _assert_assert={number:_assert_number,bool:function _assert_bool(b){if("boolean"!=typeof b)throw new Error(`Expected boolean, not ${b}`)},bytes:_assert_bytes,hash:function _assert_hash(hash){if("function"!=typeof hash||"function"!=typeof hash.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");_assert_number(hash.outputLen),_assert_number(hash.blockLen)},exists:function _assert_exists(instance,checkFinished=!0){if(instance.destroyed)throw new Error("Hash instance has been destroyed");if(checkFinished&&instance.finished)throw new Error("Hash#digest() has already been called")},output:function _assert_output(out,instance){_assert_bytes(out);const min=instance.outputLen;if(out.length<min)throw new Error(`digestInto() expects output buffer of length at least ${min}`)}},esm_assert=_assert_assert,utils_createView=("object"==typeof self&&"crypto"in self&&self.crypto,arr=>new DataView(arr.buffer,arr.byteOffset,arr.byteLength)),utils_rotr=(word,shift)=>word<<32-shift|word>>>shift;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((v,i)=>i.toString(16).padStart(2,"0")));function utils_toBytes(data){if("string"==typeof data&&(data=function hashes_esm_utils_utf8ToBytes(str){if("string"!=typeof str)throw new TypeError("utf8ToBytes expected string, got "+typeof str);return(new TextEncoder).encode(str)}(data)),!(data instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);return data}class utils_Hash{clone(){return this._cloneInto()}}function esm_utils_wrapConstructor(hashConstructor){const hashC=message=>hashConstructor().update(utils_toBytes(message)).digest(),tmp=hashConstructor();return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=()=>hashConstructor(),hashC}class SHA2 extends utils_Hash{constructor(blockLen,outputLen,padOffset,isLE){super(),this.blockLen=blockLen,this.outputLen=outputLen,this.padOffset=padOffset,this.isLE=isLE,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(blockLen),this.view=utils_createView(this.buffer)}update(data){esm_assert.exists(this);const{view,buffer,blockLen}=this,len=(data=utils_toBytes(data)).length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);if(take!==blockLen)buffer.set(data.subarray(pos,pos+take),this.pos),this.pos+=take,pos+=take,this.pos===blockLen&&(this.process(view,0),this.pos=0);else{const dataView=utils_createView(data);for(;blockLen<=len-pos;pos+=blockLen)this.process(dataView,pos)}}return this.length+=data.length,this.roundClean(),this}digestInto(out){esm_assert.exists(this),esm_assert.output(out,this),this.finished=!0;const{buffer,view,blockLen,isLE}=this;let{pos}=this;buffer[pos++]=128,this.buffer.subarray(pos).fill(0),this.padOffset>blockLen-pos&&(this.process(view,0),pos=0);for(let i=pos;i<blockLen;i++)buffer[i]=0;!function _sha2_setBigUint64(view,byteOffset,value,isLE){if("function"==typeof view.setBigUint64)return view.setBigUint64(byteOffset,value,isLE);const _32n=BigInt(32),_u32_max=BigInt(4294967295),wh=Number(value>>_32n&_u32_max),wl=Number(value&_u32_max),h=isLE?4:0,l=isLE?0:4;view.setUint32(byteOffset+h,wh,isLE),view.setUint32(byteOffset+l,wl,isLE)}(view,blockLen-8,BigInt(8*this.length),isLE),this.process(view,0);const oview=utils_createView(out),len=this.outputLen;if(len%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const outLen=len/4,state=this.get();if(outLen>state.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<outLen;i++)oview.setUint32(4*i,state[i],isLE)}digest(){const{buffer,outputLen}=this;this.digestInto(buffer);const res=buffer.slice(0,outputLen);return this.destroy(),res}_cloneInto(to){to||(to=new this.constructor),to.set(...this.get());const{blockLen,buffer,length,finished,destroyed,pos}=this;return to.length=length,to.pos=pos,to.finished=finished,to.destroyed=destroyed,length%blockLen&&to.buffer.set(buffer),to}}const Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id=Uint8Array.from({length:16},((_,i)=>i)),Pi=Id.map((i=>(9*i+5)%16));let idxL=[Id],idxR=[Pi];for(let i=0;i<4;i++)for(let j of[idxL,idxR])j.push(j[i].map((k=>Rho[k])));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((i=>new Uint8Array(i))),shiftsL=idxL.map(((idx,i)=>idx.map((j=>shifts[i][j])))),shiftsR=idxR.map(((idx,i)=>idx.map((j=>shifts[i][j])))),Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),ripemd160_rotl=(word,shift)=>word<<shift|word>>>32-shift;function f(group,x,y,z){return 0===group?x^y^z:1===group?x&y|~x&z:2===group?(x|~y)^z:3===group?x&z|y&~z:x^(y|~z)}const BUF=new Uint32Array(16);class RIPEMD160 extends SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0,h1,h2,h3,h4}=this;return[h0,h1,h2,h3,h4]}set(h0,h1,h2,h3,h4){this.h0=0|h0,this.h1=0|h1,this.h2=0|h2,this.h3=0|h3,this.h4=0|h4}process(view,offset){for(let i=0;i<16;i++,offset+=4)BUF[i]=view.getUint32(offset,!0);let al=0|this.h0,ar=al,bl=0|this.h1,br=bl,cl=0|this.h2,cr=cl,dl=0|this.h3,dr=dl,el=0|this.h4,er=el;for(let group=0;group<5;group++){const rGroup=4-group,hbl=Kl[group],hbr=Kr[group],rl=idxL[group],rr=idxR[group],sl=shiftsL[group],sr=shiftsR[group];for(let i=0;i<16;i++){const tl=ripemd160_rotl(al+f(group,bl,cl,dl)+BUF[rl[i]]+hbl,sl[i])+el|0;al=el,el=dl,dl=0|ripemd160_rotl(cl,10),cl=bl,bl=tl}for(let i=0;i<16;i++){const tr=ripemd160_rotl(ar+f(rGroup,br,cr,dr)+BUF[rr[i]]+hbr,sr[i])+er|0;ar=er,er=dr,dr=0|ripemd160_rotl(cr,10),cr=br,br=tr}}this.set(this.h1+cl+dr|0,this.h2+dl+er|0,this.h3+el+ar|0,this.h4+al+br|0,this.h0+bl+cr|0)}roundClean(){BUF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}esm_utils_wrapConstructor((()=>new RIPEMD160));const sha256_Maj=(a,b,c)=>a&b^a&c^b&c,sha256_SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sha256_SHA256_W=new Uint32Array(64);class sha256_SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=0|IV[0],this.B=0|IV[1],this.C=0|IV[2],this.D=0|IV[3],this.E=0|IV[4],this.F=0|IV[5],this.G=0|IV[6],this.H=0|IV[7]}get(){const{A,B,C,D,E,F,G,H}=this;return[A,B,C,D,E,F,G,H]}set(A,B,C,D,E,F,G,H){this.A=0|A,this.B=0|B,this.C=0|C,this.D=0|D,this.E=0|E,this.F=0|F,this.G=0|G,this.H=0|H}process(view,offset){for(let i=0;i<16;i++,offset+=4)sha256_SHA256_W[i]=view.getUint32(offset,!1);for(let i=16;i<64;i++){const W15=sha256_SHA256_W[i-15],W2=sha256_SHA256_W[i-2],s0=utils_rotr(W15,7)^utils_rotr(W15,18)^W15>>>3,s1=utils_rotr(W2,17)^utils_rotr(W2,19)^W2>>>10;sha256_SHA256_W[i]=s1+sha256_SHA256_W[i-7]+s0+sha256_SHA256_W[i-16]|0}let{A,B,C,D,E,F,G,H}=this;for(let i=0;i<64;i++){const T1=H+(utils_rotr(E,6)^utils_rotr(E,11)^utils_rotr(E,25))+((a=E)&F^~a&G)+sha256_SHA256_K[i]+sha256_SHA256_W[i]|0,T2=(utils_rotr(A,2)^utils_rotr(A,13)^utils_rotr(A,22))+sha256_Maj(A,B,C)|0;H=G,G=F,F=E,E=D+T1|0,D=C,C=B,B=A,A=T1+T2|0}var a;A=A+this.A|0,B=B+this.B|0,C=C+this.C|0,D=D+this.D|0,E=E+this.E|0,F=F+this.F|0,G=G+this.G|0,H=H+this.H|0,this.set(A,B,C,D,E,F,G,H)}roundClean(){sha256_SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class sha256_SHA224 extends sha256_SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}esm_utils_wrapConstructor((()=>new sha256_SHA256)),esm_utils_wrapConstructor((()=>new sha256_SHA224));const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(n,le=!1){return le?{h:Number(n&U32_MASK64),l:Number(n>>_32n&U32_MASK64)}:{h:0|Number(n>>_32n&U32_MASK64),l:0|Number(n&U32_MASK64)}}const _u64={fromBig,split:function split(lst,le=!1){let Ah=new Uint32Array(lst.length),Al=new Uint32Array(lst.length);for(let i=0;i<lst.length;i++){const{h,l}=fromBig(lst[i],le);[Ah[i],Al[i]]=[h,l]}return[Ah,Al]},toBig:(h,l)=>BigInt(h>>>0)<<_32n|BigInt(l>>>0),shrSH:(h,l,s)=>h>>>s,shrSL:(h,l,s)=>h<<32-s|l>>>s,rotrSH:(h,l,s)=>h>>>s|l<<32-s,rotrSL:(h,l,s)=>h<<32-s|l>>>s,rotrBH:(h,l,s)=>h<<64-s|l>>>s-32,rotrBL:(h,l,s)=>h>>>s-32|l<<64-s,rotr32H:(h,l)=>l,rotr32L:(h,l)=>h,rotlSH:(h,l,s)=>h<<s|l>>>32-s,rotlSL:(h,l,s)=>l<<s|h>>>32-s,rotlBH:(h,l,s)=>l<<s-32|h>>>64-s,rotlBL:(h,l,s)=>h<<s-32|l>>>64-s,add:function add(Ah,Al,Bh,Bl){const l=(Al>>>0)+(Bl>>>0);return{h:Ah+Bh+(l/2**32|0)|0,l:0|l}},add3L:(Al,Bl,Cl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0),add3H:(low,Ah,Bh,Ch)=>Ah+Bh+Ch+(low/2**32|0)|0,add4L:(Al,Bl,Cl,Dl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0),add4H:(low,Ah,Bh,Ch,Dh)=>Ah+Bh+Ch+Dh+(low/2**32|0)|0,add5H:(low,Ah,Bh,Ch,Dh,Eh)=>Ah+Bh+Ch+Dh+Eh+(low/2**32|0)|0,add5L:(Al,Bl,Cl,Dl,El)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0)+(El>>>0)},[SHA512_Kh,SHA512_Kl]=_u64.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((n=>BigInt(n)))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl}=this;return[Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl]}set(Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl){this.Ah=0|Ah,this.Al=0|Al,this.Bh=0|Bh,this.Bl=0|Bl,this.Ch=0|Ch,this.Cl=0|Cl,this.Dh=0|Dh,this.Dl=0|Dl,this.Eh=0|Eh,this.El=0|El,this.Fh=0|Fh,this.Fl=0|Fl,this.Gh=0|Gh,this.Gl=0|Gl,this.Hh=0|Hh,this.Hl=0|Hl}process(view,offset){for(let i=0;i<16;i++,offset+=4)SHA512_W_H[i]=view.getUint32(offset),SHA512_W_L[i]=view.getUint32(offset+=4);for(let i=16;i<80;i++){const W15h=0|SHA512_W_H[i-15],W15l=0|SHA512_W_L[i-15],s0h=_u64.rotrSH(W15h,W15l,1)^_u64.rotrSH(W15h,W15l,8)^_u64.shrSH(W15h,W15l,7),s0l=_u64.rotrSL(W15h,W15l,1)^_u64.rotrSL(W15h,W15l,8)^_u64.shrSL(W15h,W15l,7),W2h=0|SHA512_W_H[i-2],W2l=0|SHA512_W_L[i-2],s1h=_u64.rotrSH(W2h,W2l,19)^_u64.rotrBH(W2h,W2l,61)^_u64.shrSH(W2h,W2l,6),s1l=_u64.rotrSL(W2h,W2l,19)^_u64.rotrBL(W2h,W2l,61)^_u64.shrSL(W2h,W2l,6),SUMl=_u64.add4L(s0l,s1l,SHA512_W_L[i-7],SHA512_W_L[i-16]),SUMh=_u64.add4H(SUMl,s0h,s1h,SHA512_W_H[i-7],SHA512_W_H[i-16]);SHA512_W_H[i]=0|SUMh,SHA512_W_L[i]=0|SUMl}let{Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl}=this;for(let i=0;i<80;i++){const sigma1h=_u64.rotrSH(Eh,El,14)^_u64.rotrSH(Eh,El,18)^_u64.rotrBH(Eh,El,41),sigma1l=_u64.rotrSL(Eh,El,14)^_u64.rotrSL(Eh,El,18)^_u64.rotrBL(Eh,El,41),CHIh=Eh&Fh^~Eh&Gh,CHIl=El&Fl^~El&Gl,T1ll=_u64.add5L(Hl,sigma1l,CHIl,SHA512_Kl[i],SHA512_W_L[i]),T1h=_u64.add5H(T1ll,Hh,sigma1h,CHIh,SHA512_Kh[i],SHA512_W_H[i]),T1l=0|T1ll,sigma0h=_u64.rotrSH(Ah,Al,28)^_u64.rotrBH(Ah,Al,34)^_u64.rotrBH(Ah,Al,39),sigma0l=_u64.rotrSL(Ah,Al,28)^_u64.rotrBL(Ah,Al,34)^_u64.rotrBL(Ah,Al,39),MAJh=Ah&Bh^Ah&Ch^Bh&Ch,MAJl=Al&Bl^Al&Cl^Bl&Cl;Hh=0|Gh,Hl=0|Gl,Gh=0|Fh,Gl=0|Fl,Fh=0|Eh,Fl=0|El,({h:Eh,l:El}=_u64.add(0|Dh,0|Dl,0|T1h,0|T1l)),Dh=0|Ch,Dl=0|Cl,Ch=0|Bh,Cl=0|Bl,Bh=0|Ah,Bl=0|Al;const All=_u64.add3L(T1l,sigma0l,MAJl);Ah=_u64.add3H(All,T1h,sigma0h,MAJh),Al=0|All}({h:Ah,l:Al}=_u64.add(0|this.Ah,0|this.Al,0|Ah,0|Al)),({h:Bh,l:Bl}=_u64.add(0|this.Bh,0|this.Bl,0|Bh,0|Bl)),({h:Ch,l:Cl}=_u64.add(0|this.Ch,0|this.Cl,0|Ch,0|Cl)),({h:Dh,l:Dl}=_u64.add(0|this.Dh,0|this.Dl,0|Dh,0|Dl)),({h:Eh,l:El}=_u64.add(0|this.Eh,0|this.El,0|Eh,0|El)),({h:Fh,l:Fl}=_u64.add(0|this.Fh,0|this.Fl,0|Fh,0|Fl)),({h:Gh,l:Gl}=_u64.add(0|this.Gh,0|this.Gl,0|Gh,0|Gl)),({h:Hh,l:Hl}=_u64.add(0|this.Hh,0|this.Hl,0|Hh,0|Hl)),this.set(Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class SHA512_224 extends SHA512{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class SHA512_256 extends SHA512{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class SHA384 extends SHA512{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}esm_utils_wrapConstructor((()=>new SHA512)),esm_utils_wrapConstructor((()=>new SHA512_224)),esm_utils_wrapConstructor((()=>new SHA512_256)),esm_utils_wrapConstructor((()=>new SHA384));var crypto_ignored_=__webpack_require__("?c692");const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE=Object.freeze({a:_0n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(a,b)=>(a+b/_2n)/b,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(k){const{n}=CURVE,a1=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2=a1,POW_2_128=BigInt("0x100000000000000000000000000000000"),c1=divNearest(b2*k,n),c2=divNearest(-b1*k,n);let k1=mod(k-c1*a1-c2*a2,n),k2=mod(-c1*b1-c2*b2,n);const k1neg=k1>POW_2_128,k2neg=k2>POW_2_128;if(k1neg&&(k1=n-k1),k2neg&&(k2=n-k2),k1>POW_2_128||k2>POW_2_128)throw new Error("splitScalarEndo: Endomorphism failed, k="+k);return{k1neg,k1,k2neg,k2}}},fieldLen=32,groupLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(x){const{a,b}=CURVE,x2=mod(x*x),x3=mod(x2*x);return mod(x3+a*x+b)}const USE_ENDOMORPHISM=CURVE.a===_0n;class ShaError extends Error{constructor(message){super(message)}}function assertJacPoint(other){if(!(other instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(x,y,z){this.x=x,this.y=y,this.z=z}static fromAffine(p){if(!(p instanceof Point))throw new TypeError("JacobianPoint#fromAffine: expected Point");return p.equals(Point.ZERO)?JacobianPoint.ZERO:new JacobianPoint(p.x,p.y,_1n)}static toAffineBatch(points){const toInv=function invertBatch(nums,p=CURVE.P){const scratch=new Array(nums.length),inverted=invert(nums.reduce(((acc,num,i)=>num===_0n?acc:(scratch[i]=acc,mod(acc*num,p))),_1n),p);return nums.reduceRight(((acc,num,i)=>num===_0n?acc:(scratch[i]=mod(acc*scratch[i],p),mod(acc*num,p))),inverted),scratch}(points.map((p=>p.z)));return points.map(((p,i)=>p.toAffine(toInv[i])))}static normalizeZ(points){return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine)}equals(other){assertJacPoint(other);const{x:X1,y:Y1,z:Z1}=this,{x:X2,y:Y2,z:Z2}=other,Z1Z1=mod(Z1*Z1),Z2Z2=mod(Z2*Z2),U1=mod(X1*Z2Z2),U2=mod(X2*Z1Z1),S1=mod(mod(Y1*Z2)*Z2Z2),S2=mod(mod(Y2*Z1)*Z1Z1);return U1===U2&&S1===S2}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:X1,y:Y1,z:Z1}=this,A=mod(X1*X1),B=mod(Y1*Y1),C=mod(B*B),x1b=X1+B,D=mod(_2n*(mod(x1b*x1b)-A-C)),E=mod(_3n*A),F=mod(E*E),X3=mod(F-_2n*D),Y3=mod(E*(D-X3)-_8n*C),Z3=mod(_2n*Y1*Z1);return new JacobianPoint(X3,Y3,Z3)}add(other){assertJacPoint(other);const{x:X1,y:Y1,z:Z1}=this,{x:X2,y:Y2,z:Z2}=other;if(X2===_0n||Y2===_0n)return this;if(X1===_0n||Y1===_0n)return other;const Z1Z1=mod(Z1*Z1),Z2Z2=mod(Z2*Z2),U1=mod(X1*Z2Z2),U2=mod(X2*Z1Z1),S1=mod(mod(Y1*Z2)*Z2Z2),S2=mod(mod(Y2*Z1)*Z1Z1),H=mod(U2-U1),r=mod(S2-S1);if(H===_0n)return r===_0n?this.double():JacobianPoint.ZERO;const HH=mod(H*H),HHH=mod(H*HH),V=mod(U1*HH),X3=mod(r*r-HHH-_2n*V),Y3=mod(r*(V-X3)-S1*HHH),Z3=mod(Z1*Z2*H);return new JacobianPoint(X3,Y3,Z3)}subtract(other){return this.add(other.negate())}multiplyUnsafe(scalar){const P0=JacobianPoint.ZERO;if("bigint"==typeof scalar&&scalar===_0n)return P0;let n=normalizeScalar(scalar);if(n===_1n)return this;if(!USE_ENDOMORPHISM){let p=P0,d=this;for(;n>_0n;)n&_1n&&(p=p.add(d)),d=d.double(),n>>=_1n;return p}let{k1neg,k1,k2neg,k2}=endo.splitScalar(n),k1p=P0,k2p=P0,d=this;for(;k1>_0n||k2>_0n;)k1&_1n&&(k1p=k1p.add(d)),k2&_1n&&(k2p=k2p.add(d)),d=d.double(),k1>>=_1n,k2>>=_1n;return k1neg&&(k1p=k1p.negate()),k2neg&&(k2p=k2p.negate()),k2p=new JacobianPoint(mod(k2p.x*endo.beta),k2p.y,k2p.z),k1p.add(k2p)}precomputeWindow(W){const windows=USE_ENDOMORPHISM?128/W+1:256/W+1,points=[];let p=this,base=p;for(let window=0;window<windows;window++){base=p,points.push(base);for(let i=1;i<2**(W-1);i++)base=base.add(p),points.push(base);p=base.double()}return points}wNAF(n,affinePoint){!affinePoint&&this.equals(JacobianPoint.BASE)&&(affinePoint=Point.BASE);const W=affinePoint&&affinePoint._WINDOW_SIZE||1;if(256%W)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let precomputes=affinePoint&&pointPrecomputes.get(affinePoint);precomputes||(precomputes=this.precomputeWindow(W),affinePoint&&1!==W&&(precomputes=JacobianPoint.normalizeZ(precomputes),pointPrecomputes.set(affinePoint,precomputes)));let p=JacobianPoint.ZERO,f=JacobianPoint.BASE;const windows=1+(USE_ENDOMORPHISM?128/W:256/W),windowSize=2**(W-1),mask=BigInt(2**W-1),maxNumber=2**W,shiftBy=BigInt(W);for(let window=0;window<windows;window++){const offset=window*windowSize;let wbits=Number(n&mask);n>>=shiftBy,wbits>windowSize&&(wbits-=maxNumber,n+=_1n);const offset1=offset,offset2=offset+Math.abs(wbits)-1,cond1=window%2!=0,cond2=wbits<0;0===wbits?f=f.add(constTimeNegate(cond1,precomputes[offset1])):p=p.add(constTimeNegate(cond2,precomputes[offset2]))}return{p,f}}multiply(scalar,affinePoint){let point,fake,n=normalizeScalar(scalar);if(USE_ENDOMORPHISM){const{k1neg,k1,k2neg,k2}=endo.splitScalar(n);let{p:k1p,f:f1p}=this.wNAF(k1,affinePoint),{p:k2p,f:f2p}=this.wNAF(k2,affinePoint);k1p=constTimeNegate(k1neg,k1p),k2p=constTimeNegate(k2neg,k2p),k2p=new JacobianPoint(mod(k2p.x*endo.beta),k2p.y,k2p.z),point=k1p.add(k2p),fake=f1p.add(f2p)}else{const{p,f}=this.wNAF(n,affinePoint);point=p,fake=f}return JacobianPoint.normalizeZ([point,fake])[0]}toAffine(invZ){const{x,y,z}=this,is0=this.equals(JacobianPoint.ZERO);null==invZ&&(invZ=is0?_8n:invert(z));const iz1=invZ,iz2=mod(iz1*iz1),iz3=mod(iz2*iz1),ax=mod(x*iz2),ay=mod(y*iz3),zz=mod(z*iz1);if(is0)return Point.ZERO;if(zz!==_1n)throw new Error("invZ was invalid");return new Point(ax,ay)}}function constTimeNegate(condition,item){const neg=item.negate();return condition?neg:item}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n),JacobianPoint.ZERO=new JacobianPoint(_0n,_1n,_0n);const pointPrecomputes=new WeakMap;class Point{constructor(x,y){this.x=x,this.y=y}_setWindowSize(windowSize){this._WINDOW_SIZE=windowSize,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n===_0n}static fromCompressedHex(bytes){const isShort=32===bytes.length,x=bytesToNumber(isShort?bytes:bytes.subarray(1));if(!isValidFieldElement(x))throw new Error("Point is not on curve");let y=function sqrtMod(x){const{P}=CURVE,_6n=BigInt(6),_11n=BigInt(11),_22n=BigInt(22),_23n=BigInt(23),_44n=BigInt(44),_88n=BigInt(88),b2=x*x*x%P,b3=b2*b2*x%P,b6=pow2(b3,_3n)*b3%P,b9=pow2(b6,_3n)*b3%P,b11=pow2(b9,_2n)*b2%P,b22=pow2(b11,_11n)*b11%P,b44=pow2(b22,_22n)*b22%P,b88=pow2(b44,_44n)*b44%P,b176=pow2(b88,_88n)*b88%P,b220=pow2(b176,_44n)*b44%P,b223=pow2(b220,_3n)*b3%P,t1=pow2(b223,_23n)*b22%P,t2=pow2(t1,_6n)*b2%P,rt=pow2(t2,_2n);if(rt*rt%P!==x)throw new Error("Cannot find square root");return rt}(weierstrass(x));const isYOdd=(y&_1n)===_1n;if(isShort)isYOdd&&(y=mod(-y));else{1==(1&bytes[0])!==isYOdd&&(y=mod(-y))}const point=new Point(x,y);return point.assertValidity(),point}static fromUncompressedHex(bytes){const x=bytesToNumber(bytes.subarray(1,fieldLen+1)),y=bytesToNumber(bytes.subarray(fieldLen+1,2*fieldLen+1)),point=new Point(x,y);return point.assertValidity(),point}static fromHex(hex){const bytes=ensureBytes(hex),len=bytes.length,header=bytes[0];if(len===fieldLen)return this.fromCompressedHex(bytes);if(len===compressedLen&&(2===header||3===header))return this.fromCompressedHex(bytes);if(len===uncompressedLen&&4===header)return this.fromUncompressedHex(bytes);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`)}static fromPrivateKey(privateKey){return Point.BASE.multiply(normalizePrivateKey(privateKey))}static fromSignature(msgHash,signature,recovery){const{r,s}=normalizeSignature(signature);if(![0,1,2,3].includes(recovery))throw new Error("Cannot recover: invalid recovery bit");const h=truncateHash(ensureBytes(msgHash)),{n}=CURVE,radj=2===recovery||3===recovery?r+n:r,rinv=invert(radj,n),u1=mod(-h*rinv,n),u2=mod(s*rinv,n),prefix=1&recovery?"03":"02",R=Point.fromHex(prefix+numTo32bStr(radj)),Q=Point.BASE.multiplyAndAddUnsafe(R,u1,u2);if(!Q)throw new Error("Cannot recover signature: point at infinify");return Q.assertValidity(),Q}toRawBytes(isCompressed=!1){return esm_hexToBytes(this.toHex(isCompressed))}toHex(isCompressed=!1){const x=numTo32bStr(this.x);if(isCompressed){return`${this.hasEvenY()?"02":"03"}${x}`}return`04${x}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const msg="Point is not on elliptic curve",{x,y}=this;if(!isValidFieldElement(x)||!isValidFieldElement(y))throw new Error(msg);const left=mod(y*y);if(mod(left-weierstrass(x))!==_0n)throw new Error(msg)}equals(other){return this.x===other.x&&this.y===other.y}negate(){return new Point(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(other){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine()}subtract(other){return this.add(other.negate())}multiply(scalar){return JacobianPoint.fromAffine(this).multiply(scalar,this).toAffine()}multiplyAndAddUnsafe(Q,a,b){const P=JacobianPoint.fromAffine(this),aP=a===_0n||a===_1n||this!==Point.BASE?P.multiplyUnsafe(a):P.multiply(a),bQ=JacobianPoint.fromAffine(Q).multiplyUnsafe(b),sum=aP.add(bQ);return sum.equals(JacobianPoint.ZERO)?void 0:sum.toAffine()}}function sliceDER(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function parseDERInt(data){if(data.length<2||2!==data[0])throw new Error(`Invalid signature integer tag: ${esm_bytesToHex(data)}`);const len=data[1],res=data.subarray(2,len+2);if(!len||res.length!==len)throw new Error("Invalid signature integer: wrong length");if(0===res[0]&&res[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(res),left:data.subarray(len+2)}}Point.BASE=new Point(CURVE.Gx,CURVE.Gy),Point.ZERO=new Point(_0n,_0n);class Signature{constructor(r,s){this.r=r,this.s=s,this.assertValidity()}static fromCompact(hex){const arr=hex instanceof Uint8Array,name="Signature.fromCompact";if("string"!=typeof hex&&!arr)throw new TypeError(`${name}: Expected string or Uint8Array`);const str=arr?esm_bytesToHex(hex):hex;if(128!==str.length)throw new Error(`${name}: Expected 64-byte hex`);return new Signature(hexToNumber(str.slice(0,64)),hexToNumber(str.slice(64,128)))}static fromDER(hex){const arr=hex instanceof Uint8Array;if("string"!=typeof hex&&!arr)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=function parseDERSignature(data){if(data.length<2||48!=data[0])throw new Error(`Invalid signature tag: ${esm_bytesToHex(data)}`);if(data[1]!==data.length-2)throw new Error("Invalid signature: incorrect length");const{data:r,left:sBytes}=parseDERInt(data.subarray(2)),{data:s,left:rBytesLeft}=parseDERInt(sBytes);if(rBytesLeft.length)throw new Error(`Invalid signature: left bytes after parsing: ${esm_bytesToHex(rBytesLeft)}`);return{r,s}}(arr?hex:esm_hexToBytes(hex));return new Signature(r,s)}static fromHex(hex){return this.fromDER(hex)}assertValidity(){const{r,s}=this;if(!isWithinCurveOrder(r))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(s))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const HALF=CURVE.n>>_1n;return this.s>HALF}normalizeS(){return this.hasHighS()?new Signature(this.r,mod(-this.s,CURVE.n)):this}toDERRawBytes(){return esm_hexToBytes(this.toDERHex())}toDERHex(){const sHex=sliceDER(numberToHexUnpadded(this.s)),rHex=sliceDER(numberToHexUnpadded(this.r)),sHexL=sHex.length/2,rHexL=rHex.length/2,sLen=numberToHexUnpadded(sHexL),rLen=numberToHexUnpadded(rHexL);return`30${numberToHexUnpadded(rHexL+sHexL+4)}02${rLen}${rHex}02${sLen}${sHex}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return esm_hexToBytes(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}}function esm_concatBytes(...arrays){if(!arrays.every((b=>b instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===arrays.length)return arrays[0];const length=arrays.reduce(((a,arr)=>a+arr.length),0),result=new Uint8Array(length);for(let i=0,pad=0;i<arrays.length;i++){const arr=arrays[i];result.set(arr,pad),pad+=arr.length}return result}const esm_hexes=Array.from({length:256},((v,i)=>i.toString(16).padStart(2,"0")));function esm_bytesToHex(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Expected Uint8Array");let hex="";for(let i=0;i<uint8a.length;i++)hex+=esm_hexes[uint8a[i]];return hex}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(num){if("bigint"!=typeof num)throw new Error("Expected bigint");if(!(_0n<=num&&num<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return num.toString(16).padStart(64,"0")}function numTo32b(num){const b=esm_hexToBytes(numTo32bStr(num));if(32!==b.length)throw new Error("Error: expected 32 bytes");return b}function numberToHexUnpadded(num){const hex=num.toString(16);return 1&hex.length?`0${hex}`:hex}function hexToNumber(hex){if("string"!=typeof hex)throw new TypeError("hexToNumber: expected string, got "+typeof hex);return BigInt(`0x${hex}`)}function esm_hexToBytes(hex){if("string"!=typeof hex)throw new TypeError("hexToBytes: expected string, got "+typeof hex);if(hex.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+hex.length);const array=new Uint8Array(hex.length/2);for(let i=0;i<array.length;i++){const j=2*i,hexByte=hex.slice(j,j+2),byte=Number.parseInt(hexByte,16);if(Number.isNaN(byte)||byte<0)throw new Error("Invalid byte sequence");array[i]=byte}return array}function bytesToNumber(bytes){return hexToNumber(esm_bytesToHex(bytes))}function ensureBytes(hex){return hex instanceof Uint8Array?Uint8Array.from(hex):esm_hexToBytes(hex)}function normalizeScalar(num){if("number"==typeof num&&Number.isSafeInteger(num)&&num>0)return BigInt(num);if("bigint"==typeof num&&isWithinCurveOrder(num))return num;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(a,b=CURVE.P){const result=a%b;return result>=_0n?result:b+result}function pow2(x,power){const{P}=CURVE;let res=x;for(;power-- >_0n;)res*=res,res%=P;return res}function invert(number,modulo=CURVE.P){if(number===_0n||modulo<=_0n)throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);let a=mod(number,modulo),b=modulo,x=_0n,y=_1n,u=_1n,v=_0n;for(;a!==_0n;){const q=b/a,r=b%a,m=x-u*q,n=y-v*q;b=a,a=r,x=u,y=v,u=m,v=n}if(b!==_1n)throw new Error("invert: does not exist");return mod(x,modulo)}function truncateHash(hash,truncateOnly=!1){const h=function bits2int_2(bytes){const delta=8*bytes.length-8*groupLen,num=bytesToNumber(bytes);return delta>0?num>>BigInt(delta):num}(hash);if(truncateOnly)return h;const{n}=CURVE;return h>=n?h-n:h}let _sha256Sync,_hmacSha256Sync;function isWithinCurveOrder(num){return _0n<num&&num<CURVE.n}function isValidFieldElement(num){return _0n<num&&num<CURVE.P}function normalizePrivateKey(key){let num;if("bigint"==typeof key)num=key;else if("number"==typeof key&&Number.isSafeInteger(key)&&key>0)num=BigInt(key);else if("string"==typeof key){if(key.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");num=hexToNumber(key)}else{if(!(key instanceof Uint8Array))throw new TypeError("Expected valid private key");if(key.length!==groupLen)throw new Error("Expected 32 bytes of private key");num=bytesToNumber(key)}if(!isWithinCurveOrder(num))throw new Error("Expected private key: 0 < key < n");return num}function normalizeSignature(signature){if(signature instanceof Signature)return signature.assertValidity(),signature;try{return Signature.fromDER(signature)}catch(error){return Signature.fromCompact(signature)}}Point.BASE._setWindowSize(8);const esm_crypto={node:crypto_ignored_,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},esm_utils={bytesToHex:esm_bytesToHex,hexToBytes:esm_hexToBytes,concatBytes:esm_concatBytes,mod,invert,isValidPrivateKey(privateKey){try{return normalizePrivateKey(privateKey),!0}catch(error){return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:hash=>{hash=ensureBytes(hash);const minLen=groupLen+8;if(hash.length<minLen||hash.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return numTo32b(mod(bytesToNumber(hash),CURVE.n-_1n)+_1n)},randomBytes:(bytesLength=32)=>{if(esm_crypto.web)return esm_crypto.web.getRandomValues(new Uint8Array(bytesLength));if(esm_crypto.node){const{randomBytes}=esm_crypto.node;return Uint8Array.from(randomBytes(bytesLength))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>esm_utils.hashToPrivateKey(esm_utils.randomBytes(groupLen+8)),precompute(windowSize=8,point=Point.BASE){const cached=point===Point.BASE?point:new Point(point.x,point.y);return cached._setWindowSize(windowSize),cached.multiply(_3n),cached},sha256:async(...messages)=>{if(esm_crypto.web){const buffer=await esm_crypto.web.subtle.digest("SHA-256",esm_concatBytes(...messages));return new Uint8Array(buffer)}if(esm_crypto.node){const{createHash}=esm_crypto.node,hash=createHash("sha256");return messages.forEach((m=>hash.update(m))),Uint8Array.from(hash.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(key,...messages)=>{if(esm_crypto.web){const ckey=await esm_crypto.web.subtle.importKey("raw",key,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),message=esm_concatBytes(...messages),buffer=await esm_crypto.web.subtle.sign("HMAC",ckey,message);return new Uint8Array(buffer)}if(esm_crypto.node){const{createHmac}=esm_crypto.node,hash=createHmac("sha256",key);return messages.forEach((m=>hash.update(m))),Uint8Array.from(hash.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(tag,...messages)=>{let tagP=TAGGED_HASH_PREFIXES[tag];if(void 0===tagP){const tagH=await esm_utils.sha256(Uint8Array.from(tag,(c=>c.charCodeAt(0))));tagP=esm_concatBytes(tagH,tagH),TAGGED_HASH_PREFIXES[tag]=tagP}return esm_utils.sha256(tagP,...messages)},taggedHashSync:(tag,...messages)=>{if("function"!=typeof _sha256Sync)throw new ShaError("sha256Sync is undefined, you need to set it");let tagP=TAGGED_HASH_PREFIXES[tag];if(void 0===tagP){const tagH=_sha256Sync(Uint8Array.from(tag,(c=>c.charCodeAt(0))));tagP=esm_concatBytes(tagH,tagH),TAGGED_HASH_PREFIXES[tag]=tagP}return _sha256Sync(tagP,...messages)},_JacobianPoint:JacobianPoint};Object.defineProperties(esm_utils,{sha256Sync:{configurable:!1,get:()=>_sha256Sync,set(val){_sha256Sync||(_sha256Sync=val)}},hmacSha256Sync:{configurable:!1,get:()=>_hmacSha256Sync,set(val){_hmacSha256Sync||(_hmacSha256Sync=val)}}});var constants_ChainID;__webpack_require__("./node_modules/.pnpm/lodash.clonedeep@4.5.0/node_modules/lodash.clonedeep/index.js");function writeUInt32BE(destination,value,offset=0){return destination[offset+3]=value,value>>>=8,destination[offset+2]=value,value>>>=8,destination[offset+1]=value,value>>>=8,destination[offset]=value,destination}!function(ChainID){ChainID[ChainID.Testnet=2147483648]="Testnet",ChainID[ChainID.Mainnet=1]="Mainnet"}(constants_ChainID||(constants_ChainID={}));constants_ChainID.Mainnet;const MAX_STRING_LENGTH_BYTES=128,CLARITY_INT_SIZE=128,CLARITY_INT_BYTE_SIZE=16;var constants_StacksMessageType,constants_PayloadType,constants_ClarityVersion,AnchorMode;!function(StacksMessageType){StacksMessageType[StacksMessageType.Address=0]="Address",StacksMessageType[StacksMessageType.Principal=1]="Principal",StacksMessageType[StacksMessageType.LengthPrefixedString=2]="LengthPrefixedString",StacksMessageType[StacksMessageType.MemoString=3]="MemoString",StacksMessageType[StacksMessageType.AssetInfo=4]="AssetInfo",StacksMessageType[StacksMessageType.PostCondition=5]="PostCondition",StacksMessageType[StacksMessageType.PublicKey=6]="PublicKey",StacksMessageType[StacksMessageType.LengthPrefixedList=7]="LengthPrefixedList",StacksMessageType[StacksMessageType.Payload=8]="Payload",StacksMessageType[StacksMessageType.MessageSignature=9]="MessageSignature",StacksMessageType[StacksMessageType.StructuredDataSignature=10]="StructuredDataSignature",StacksMessageType[StacksMessageType.TransactionAuthField=11]="TransactionAuthField"}(constants_StacksMessageType||(constants_StacksMessageType={})),function(PayloadType){PayloadType[PayloadType.TokenTransfer=0]="TokenTransfer",PayloadType[PayloadType.SmartContract=1]="SmartContract",PayloadType[PayloadType.VersionedSmartContract=6]="VersionedSmartContract",PayloadType[PayloadType.ContractCall=2]="ContractCall",PayloadType[PayloadType.PoisonMicroblock=3]="PoisonMicroblock",PayloadType[PayloadType.Coinbase=4]="Coinbase",PayloadType[PayloadType.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",PayloadType[PayloadType.TenureChange=7]="TenureChange",PayloadType[PayloadType.NakamotoCoinbase=8]="NakamotoCoinbase"}(constants_PayloadType||(constants_PayloadType={})),function(ClarityVersion){ClarityVersion[ClarityVersion.Clarity1=1]="Clarity1",ClarityVersion[ClarityVersion.Clarity2=2]="Clarity2"}(constants_ClarityVersion||(constants_ClarityVersion={})),function(AnchorMode){AnchorMode[AnchorMode.OnChainOnly=1]="OnChainOnly",AnchorMode[AnchorMode.OffChainOnly=2]="OffChainOnly",AnchorMode[AnchorMode.Any=3]="Any"}(AnchorMode||(AnchorMode={}));const AnchorModeNames=["onChainOnly","offChainOnly","any"];AnchorModeNames[0],AnchorMode.OnChainOnly,AnchorModeNames[1],AnchorMode.OffChainOnly,AnchorModeNames[2],AnchorMode.Any,AnchorMode.OnChainOnly,AnchorMode.OnChainOnly,AnchorMode.OffChainOnly,AnchorMode.OffChainOnly,AnchorMode.Any,AnchorMode.Any;var constants_TransactionVersion;!function(TransactionVersion){TransactionVersion[TransactionVersion.Mainnet=0]="Mainnet",TransactionVersion[TransactionVersion.Testnet=128]="Testnet"}(constants_TransactionVersion||(constants_TransactionVersion={}));constants_TransactionVersion.Mainnet;var constants_PostConditionMode,constants_PostConditionType,AuthType,constants_AddressHashMode,constants_AddressVersion,PubKeyEncoding,constants_FungibleConditionCode,constants_NonFungibleConditionCode,constants_PostConditionPrincipalID,AssetType,TxRejectedReason;function postcondition_types_parseAssetInfoString(id){const[assetAddress,assetContractName,assetTokenName]=id.split(/\.|::/);return function createAssetInfo(addressString,contractName,assetName){return{type:constants_StacksMessageType.AssetInfo,address:createAddress(addressString),contractName:postcondition_types_createLPString(contractName),assetName:postcondition_types_createLPString(assetName)}}(assetAddress,assetContractName,assetTokenName)}function postcondition_types_createLPString(content,lengthPrefixBytes,maxLengthBytes){const prefixLength=lengthPrefixBytes||1,maxLength=maxLengthBytes||MAX_STRING_LENGTH_BYTES;if(utils_exceedsMaxLengthBytes(content,maxLength))throw new Error(`String length exceeds maximum bytes ${maxLength}`);return{type:constants_StacksMessageType.LengthPrefixedString,content,lengthPrefixBytes:prefixLength,maxLengthBytes:maxLength}}function createAddress(c32AddressString){const addressData=(0,lib.ns)(c32AddressString);return{type:constants_StacksMessageType.Address,version:addressData[0],hash160:addressData[1]}}function postcondition_types_parsePrincipalString(principalString){if(principalString.includes(".")){const[address,contractName]=principalString.split(".");return function postcondition_types_createContractPrincipal(addressString,contractName){const addr=createAddress(addressString),name=postcondition_types_createLPString(contractName);return{type:constants_StacksMessageType.Principal,prefix:constants_PostConditionPrincipalID.Contract,address:addr,contractName:name}}(address,contractName)}return function postcondition_types_createStandardPrincipal(addressString){const addr=createAddress(addressString);return{type:constants_StacksMessageType.Principal,prefix:constants_PostConditionPrincipalID.Standard,address:addr}}(principalString)}function serializeAddress(address){const bytesArray=[];return bytesArray.push(esm_utils_hexToBytes(utils_intToHex(address.version,1))),bytesArray.push(esm_utils_hexToBytes(address.hash160)),utils_concatArray(bytesArray)}function deserializeAddress(bytesReader){const version=utils_hexToInt(esm_utils_bytesToHex(bytesReader.readBytes(1))),data=esm_utils_bytesToHex(bytesReader.readBytes(20));return{type:constants_StacksMessageType.Address,version,hash160:data}}function serializeLPString(lps){const bytesArray=[],contentBytes=esm_utils_utf8ToBytes(lps.content),length=contentBytes.byteLength;return bytesArray.push(esm_utils_hexToBytes(utils_intToHex(length,lps.lengthPrefixBytes))),bytesArray.push(contentBytes),utils_concatArray(bytesArray)}function deserializeLPString(bytesReader,prefixBytes,maxLength){prefixBytes=prefixBytes||1;const length=utils_hexToInt(esm_utils_bytesToHex(bytesReader.readBytes(prefixBytes)));return postcondition_types_createLPString(utils_bytesToUtf8(bytesReader.readBytes(length)),prefixBytes,maxLength??128)}!function(PostConditionMode){PostConditionMode[PostConditionMode.Allow=1]="Allow",PostConditionMode[PostConditionMode.Deny=2]="Deny"}(constants_PostConditionMode||(constants_PostConditionMode={})),function(PostConditionType){PostConditionType[PostConditionType.STX=0]="STX",PostConditionType[PostConditionType.Fungible=1]="Fungible",PostConditionType[PostConditionType.NonFungible=2]="NonFungible"}(constants_PostConditionType||(constants_PostConditionType={})),function(AuthType){AuthType[AuthType.Standard=4]="Standard",AuthType[AuthType.Sponsored=5]="Sponsored"}(AuthType||(AuthType={})),function(AddressHashMode){AddressHashMode[AddressHashMode.SerializeP2PKH=0]="SerializeP2PKH",AddressHashMode[AddressHashMode.SerializeP2SH=1]="SerializeP2SH",AddressHashMode[AddressHashMode.SerializeP2WPKH=2]="SerializeP2WPKH",AddressHashMode[AddressHashMode.SerializeP2WSH=3]="SerializeP2WSH"}(constants_AddressHashMode||(constants_AddressHashMode={})),function(AddressVersion){AddressVersion[AddressVersion.MainnetSingleSig=22]="MainnetSingleSig",AddressVersion[AddressVersion.MainnetMultiSig=20]="MainnetMultiSig",AddressVersion[AddressVersion.TestnetSingleSig=26]="TestnetSingleSig",AddressVersion[AddressVersion.TestnetMultiSig=21]="TestnetMultiSig"}(constants_AddressVersion||(constants_AddressVersion={})),function(PubKeyEncoding){PubKeyEncoding[PubKeyEncoding.Compressed=0]="Compressed",PubKeyEncoding[PubKeyEncoding.Uncompressed=1]="Uncompressed"}(PubKeyEncoding||(PubKeyEncoding={})),function(FungibleConditionCode){FungibleConditionCode[FungibleConditionCode.Equal=1]="Equal",FungibleConditionCode[FungibleConditionCode.Greater=2]="Greater",FungibleConditionCode[FungibleConditionCode.GreaterEqual=3]="GreaterEqual",FungibleConditionCode[FungibleConditionCode.Less=4]="Less",FungibleConditionCode[FungibleConditionCode.LessEqual=5]="LessEqual"}(constants_FungibleConditionCode||(constants_FungibleConditionCode={})),function(NonFungibleConditionCode){NonFungibleConditionCode[NonFungibleConditionCode.Sends=16]="Sends",NonFungibleConditionCode[NonFungibleConditionCode.DoesNotSend=17]="DoesNotSend"}(constants_NonFungibleConditionCode||(constants_NonFungibleConditionCode={})),function(PostConditionPrincipalID){PostConditionPrincipalID[PostConditionPrincipalID.Origin=1]="Origin",PostConditionPrincipalID[PostConditionPrincipalID.Standard=2]="Standard",PostConditionPrincipalID[PostConditionPrincipalID.Contract=3]="Contract"}(constants_PostConditionPrincipalID||(constants_PostConditionPrincipalID={})),function(AssetType){AssetType[AssetType.STX=0]="STX",AssetType[AssetType.Fungible=1]="Fungible",AssetType[AssetType.NonFungible=2]="NonFungible"}(AssetType||(AssetType={})),function(TxRejectedReason){TxRejectedReason.Serialization="Serialization",TxRejectedReason.Deserialization="Deserialization",TxRejectedReason.SignatureValidation="SignatureValidation",TxRejectedReason.FeeTooLow="FeeTooLow",TxRejectedReason.BadNonce="BadNonce",TxRejectedReason.NotEnoughFunds="NotEnoughFunds",TxRejectedReason.NoSuchContract="NoSuchContract",TxRejectedReason.NoSuchPublicFunction="NoSuchPublicFunction",TxRejectedReason.BadFunctionArgument="BadFunctionArgument",TxRejectedReason.ContractAlreadyExists="ContractAlreadyExists",TxRejectedReason.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",TxRejectedReason.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",TxRejectedReason.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",TxRejectedReason.BadAddressVersionByte="BadAddressVersionByte",TxRejectedReason.NoCoinbaseViaMempool="NoCoinbaseViaMempool",TxRejectedReason.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",TxRejectedReason.TooMuchChaining="TooMuchChaining",TxRejectedReason.ConflictingNonceInMempool="ConflictingNonceInMempool",TxRejectedReason.BadTransactionVersion="BadTransactionVersion",TxRejectedReason.TransferRecipientCannotEqualSender="TransferRecipientCannotEqualSender",TxRejectedReason.TransferAmountMustBePositive="TransferAmountMustBePositive",TxRejectedReason.ServerFailureDatabase="ServerFailureDatabase",TxRejectedReason.EstimatorError="EstimatorError",TxRejectedReason.TemporarilyBlacklisted="TemporarilyBlacklisted",TxRejectedReason.ServerFailureOther="ServerFailureOther"}(TxRejectedReason||(TxRejectedReason={}));class TransactionError extends Error{constructor(message){super(message),this.message=message,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class errors_SerializationError extends TransactionError{constructor(message){super(message)}}class errors_DeserializationError extends TransactionError{constructor(message){super(message)}}function bytesWithTypeID(typeId,bytes){return utils_concatArray([typeId,bytes])}function serializeIntCV(cv){const bytes=bigIntToBytes(function toTwos(value,width){if(value<-(BigInt(1)<<width-BigInt(1))||(BigInt(1)<<width-BigInt(1))-BigInt(1)<value)throw`Unable to represent integer in width: ${width}`;return value>=BigInt(0)?BigInt(value):value+(BigInt(1)<<width)}(cv.value,BigInt(CLARITY_INT_SIZE)),CLARITY_INT_BYTE_SIZE);return bytesWithTypeID(cv.type,bytes)}function serializeStringCV(cv,encoding){const bytesArray=[],str="ascii"==encoding?function utils_asciiToBytes(str){const byteArray=[];for(let i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return new Uint8Array(byteArray)}(cv.data):esm_utils_utf8ToBytes(cv.data),len=new Uint8Array(4);return writeUInt32BE(len,str.length,0),bytesArray.push(len),bytesArray.push(str),bytesWithTypeID(cv.type,utils_concatArray(bytesArray))}function serialize_serializeCV(value){switch(value.type){case constants_ClarityType.BoolTrue:case constants_ClarityType.BoolFalse:return function serializeBoolCV(value){return new Uint8Array([value.type])}(value);case constants_ClarityType.OptionalNone:case constants_ClarityType.OptionalSome:return function serializeOptionalCV(cv){return cv.type===constants_ClarityType.OptionalNone?new Uint8Array([cv.type]):bytesWithTypeID(cv.type,serialize_serializeCV(cv.value))}(value);case constants_ClarityType.Buffer:return function serializeBufferCV(cv){const length=new Uint8Array(4);return writeUInt32BE(length,cv.buffer.length,0),bytesWithTypeID(cv.type,esm_utils_concatBytes(length,cv.buffer))}(value);case constants_ClarityType.UInt:return function serializeUIntCV(cv){const bytes=bigIntToBytes(cv.value,CLARITY_INT_BYTE_SIZE);return bytesWithTypeID(cv.type,bytes)}(value);case constants_ClarityType.Int:return serializeIntCV(value);case constants_ClarityType.PrincipalStandard:return function serializeStandardPrincipalCV(cv){return bytesWithTypeID(cv.type,serializeAddress(cv.address))}(value);case constants_ClarityType.PrincipalContract:return function serializeContractPrincipalCV(cv){return bytesWithTypeID(cv.type,esm_utils_concatBytes(serializeAddress(cv.address),serializeLPString(cv.contractName)))}(value);case constants_ClarityType.ResponseOk:case constants_ClarityType.ResponseErr:return function serializeResponseCV(cv){return bytesWithTypeID(cv.type,serialize_serializeCV(cv.value))}(value);case constants_ClarityType.List:return function serializeListCV(cv){const bytesArray=[],length=new Uint8Array(4);writeUInt32BE(length,cv.list.length,0),bytesArray.push(length);for(const value of cv.list){const serializedValue=serialize_serializeCV(value);bytesArray.push(serializedValue)}return bytesWithTypeID(cv.type,utils_concatArray(bytesArray))}(value);case constants_ClarityType.Tuple:return function serializeTupleCV(cv){const bytesArray=[],length=new Uint8Array(4);writeUInt32BE(length,Object.keys(cv.data).length,0),bytesArray.push(length);const lexicographicOrder=Object.keys(cv.data).sort(((a,b)=>a.localeCompare(b)));for(const key of lexicographicOrder){const nameWithLength=postcondition_types_createLPString(key);bytesArray.push(serializeLPString(nameWithLength));const serializedValue=serialize_serializeCV(cv.data[key]);bytesArray.push(serializedValue)}return bytesWithTypeID(cv.type,utils_concatArray(bytesArray))}(value);case constants_ClarityType.StringASCII:return function serializeStringAsciiCV(cv){return serializeStringCV(cv,"ascii")}(value);case constants_ClarityType.StringUTF8:return function serializeStringUtf8CV(cv){return serializeStringCV(cv,"utf8")}(value);default:throw new errors_SerializationError("Unable to serialize. Invalid Clarity Value.")}}const MAX_U128=BigInt("0xffffffffffffffffffffffffffffffff"),MIN_U128=BigInt(0),MAX_I128=BigInt("0x7fffffffffffffffffffffffffffffff"),MIN_I128=BigInt("-170141183460469231731687303715884105728"),intCV=value=>{const bigInt=utils_intToBigInt(value,!0);if(bigInt>MAX_I128)throw new RangeError(`Cannot construct clarity integer from value greater than ${MAX_I128}`);if(bigInt<MIN_I128)throw new RangeError(`Cannot construct clarity integer form value less than ${MIN_I128}`);return{type:constants_ClarityType.Int,value:bigInt}},uintCV=value=>{const bigInt=utils_intToBigInt(value,!1);if(bigInt<MIN_U128)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(bigInt>MAX_U128)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${MAX_U128}`);return{type:constants_ClarityType.UInt,value:bigInt}},trueCV=()=>({type:constants_ClarityType.BoolTrue}),falseCV=()=>({type:constants_ClarityType.BoolFalse});function principalCV_standardPrincipalCV(addressString){const addr=createAddress(addressString);return{type:constants_ClarityType.PrincipalStandard,address:addr}}function principalCV_contractPrincipalCV(addressString,contractName){return contractPrincipalCVFromAddress(createAddress(addressString),postcondition_types_createLPString(contractName))}function contractPrincipalCVFromAddress(address,contractName){if(esm_utils_utf8ToBytes(contractName.content).byteLength>=128)throw new Error("Contract name must be less than 128 bytes");return{type:constants_ClarityType.PrincipalContract,address,contractName}}function responseErrorCV(value){return{type:constants_ClarityType.ResponseErr,value}}function responseOkCV(value){return{type:constants_ClarityType.ResponseOk,value}}function listCV(values){return{type:constants_ClarityType.List,list:values}}const enumCheckFunctions=new Map;function isEnum(enumVariable,value){const checker=enumCheckFunctions.get(enumVariable);if(void 0!==checker)return checker(value);const newChecker=function createEnumChecker(enumVariable){const enumValues=Object.values(enumVariable).filter((v=>"number"==typeof v)),enumValueSet=new Set(enumValues);return value=>enumValueSet.has(value)}(enumVariable);return enumCheckFunctions.set(enumVariable,newChecker),isEnum(enumVariable,value)}class BytesReader{constructor(arr){this.consumed=0,this.source=arr}readBytes(length){const view=this.source.subarray(this.consumed,this.consumed+length);return this.consumed+=length,view}readUInt32BE(){return function readUInt32BE(source,offset){return source[offset]*2**24+65536*source[offset+1]+256*source[offset+2]+source[offset+3]}(this.readBytes(4),0)}readUInt8(){return function readUInt8(source,offset){return source[offset]}(this.readBytes(1),0)}readUInt16BE(){return function readUInt16BE(source,offset){return(source[offset+0]<<8|source[offset+1])>>>0}(this.readBytes(2),0)}readBigUIntLE(length){const hex=esm_utils_bytesToHex(this.readBytes(length).slice().reverse());return BigInt(`0x${hex}`)}readBigUIntBE(length){const hex=esm_utils_bytesToHex(this.readBytes(length));return BigInt(`0x${hex}`)}get readOffset(){return this.consumed}set readOffset(val){this.consumed=val}get internalBytes(){return this.source}readUInt8Enum(enumVariable,invalidEnumErrorFormatter){const num=this.readUInt8();if(isEnum(enumVariable,num))return num;throw invalidEnumErrorFormatter(num)}}function deserialize_deserializeCV(serializedClarityValue){let bytesReader;if("string"==typeof serializedClarityValue){const hasHexPrefix="0x"===serializedClarityValue.slice(0,2).toLowerCase();bytesReader=new BytesReader(esm_utils_hexToBytes(hasHexPrefix?serializedClarityValue.slice(2):serializedClarityValue))}else bytesReader=serializedClarityValue instanceof Uint8Array?new BytesReader(serializedClarityValue):serializedClarityValue;switch(bytesReader.readUInt8Enum(constants_ClarityType,(n=>{throw new errors_DeserializationError(`Cannot recognize Clarity Type: ${n}`)}))){case constants_ClarityType.Int:return intCV(bytesReader.readBytes(16));case constants_ClarityType.UInt:return uintCV(bytesReader.readBytes(16));case constants_ClarityType.Buffer:const bufferLength=bytesReader.readUInt32BE();return bufferCV_bufferCV(bytesReader.readBytes(bufferLength));case constants_ClarityType.BoolTrue:return trueCV();case constants_ClarityType.BoolFalse:return falseCV();case constants_ClarityType.PrincipalStandard:return function standardPrincipalCVFromAddress(address){return{type:constants_ClarityType.PrincipalStandard,address}}(deserializeAddress(bytesReader));case constants_ClarityType.PrincipalContract:return contractPrincipalCVFromAddress(deserializeAddress(bytesReader),deserializeLPString(bytesReader));case constants_ClarityType.ResponseOk:return responseOkCV(deserialize_deserializeCV(bytesReader));case constants_ClarityType.ResponseErr:return responseErrorCV(deserialize_deserializeCV(bytesReader));case constants_ClarityType.OptionalNone:return noneCV();case constants_ClarityType.OptionalSome:return someCV(deserialize_deserializeCV(bytesReader));case constants_ClarityType.List:const listLength=bytesReader.readUInt32BE(),listContents=[];for(let i=0;i<listLength;i++)listContents.push(deserialize_deserializeCV(bytesReader));return listCV(listContents);case constants_ClarityType.Tuple:const tupleLength=bytesReader.readUInt32BE(),tupleContents={};for(let i=0;i<tupleLength;i++){const clarityName=deserializeLPString(bytesReader).content;if(void 0===clarityName)throw new errors_DeserializationError('"content" is undefined');tupleContents[clarityName]=deserialize_deserializeCV(bytesReader)}return tupleCV_tupleCV(tupleContents);case constants_ClarityType.StringASCII:const asciiStrLen=bytesReader.readUInt32BE(),asciiStr=function utils_bytesToAscii(arr){return String.fromCharCode.apply(null,arr)}(bytesReader.readBytes(asciiStrLen));return stringAsciiCV(asciiStr);case constants_ClarityType.StringUTF8:const utf8StrLen=bytesReader.readUInt32BE(),utf8Str=utils_bytesToUtf8(bytesReader.readBytes(utf8StrLen));return stringUtf8CV(utf8Str);default:throw new errors_DeserializationError("Unable to deserialize Clarity Value from Uint8Array. Could not find valid Clarity Type.")}}const utils_exceedsMaxLengthBytes=(string,maxLengthBytes)=>!!string&&esm_utils_utf8ToBytes(string).length>maxLengthBytes;const parseReadOnlyResponse=response=>{if(response.okay)return function utils_hexToCV(hex){return deserialize_deserializeCV(hex)}(response.result);throw new Error(response.cause)};function tupleCV_tupleCV(data){for(const key in data)if(!(/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(name=key)&&name.length<128))throw new Error(`"${key}" is not a valid Clarity name`);var name;return{type:constants_ClarityType.Tuple,data}}function mapValues(obj,mapping){return Object.keys(obj).reduce(((acc,key)=>(acc[key]=mapping(obj[key],key),acc)),{})}const unwrapResponse=response=>{if("success"===response.type)return response.value;throw response.error};function transcoders(constructOptions){return constructOptions}const uintT={encode:input=>uintCV(input),decode:intResult},stringT={encode:stringUtf8CV,decode:stringResult},stringAsciiT={encode:stringAsciiCV,decode:stringResult},booleanT={encode:value=>value?trueCV():falseCV(),decode:result=>{if(result.type===constants_ClarityType.BoolTrue)return!0;if(result.type===constants_ClarityType.BoolFalse)return!1;throw new Error(`Expected integer, got ${result.type}`)}},bufferT={encode:bufferCV_bufferCV,decode:result=>{if(result.type===constants_ClarityType.Buffer)return result.buffer;throw new Error(`Expected buffer, got ${result.type}`)}},listT=listItemTranscoder=>{return{encode:(encoder=listItemTranscoder.encode,value=>listCV(value.map(encoder))),decode:(decoder=listItemTranscoder.decode,value=>{if(value.type===constants_ClarityType.List)return value.list.map(decoder);throw new Error(`Expected list, got ${value.type}`)})};var decoder,encoder},tupleT=transcoderObj=>({encode:function tupleEncoder(decorators){return input=>{const result={};for(const key of Object.keys(decorators))result[key]=decorators[key](input[key]);return tupleCV_tupleCV(result)}}(mapValues(transcoderObj,(o=>o.encode))),decode:function tupleDecoder(decorators){return input=>{if(input.type!==constants_ClarityType.Tuple)throw new Error(`Expected tuple, got ${input.type}`);const result={};for(const key of Object.keys(decorators))result[key]=decorators[key](input.data[key]);return result}}(mapValues(transcoderObj,(o=>o.decode)))}),optionalT=someTranscoder=>{return{encode:(encoder=someTranscoder.encode,value=>void 0===value?noneCV():someCV(encoder(value))),decode:(decoder=someTranscoder.decode,value=>{if(value.type!==constants_ClarityType.OptionalNone)return value.type===constants_ClarityType.OptionalSome?decoder(value.value):decoder(value)})};var decoder,encoder},noneT={encode:noneCV,decode:result=>{if(result.type===constants_ClarityType.OptionalNone)return null;throw new Error(`Expected none, got ${result.type}`)}},responseSimpleT=okValueTransducer=>{return{encode:(success=okValueTransducer.encode,value=>"success"===value.type?responseOkCV(success(value.value)):value.error instanceof ClarityError?responseErrorCV(uintCV(value.error.code)):responseErrorCV(stringUtf8CV(value.error.message))),decode:responseSimpleDecoder(okValueTransducer.decode)};var success};var esm_constants_ChainID,esm_constants_TransactionVersion,PeerNetworkID;!function(ChainID){ChainID[ChainID.Testnet=2147483648]="Testnet",ChainID[ChainID.Mainnet=1]="Mainnet"}(esm_constants_ChainID||(esm_constants_ChainID={})),function(TransactionVersion){TransactionVersion[TransactionVersion.Mainnet=0]="Mainnet",TransactionVersion[TransactionVersion.Testnet=128]="Testnet"}(esm_constants_TransactionVersion||(esm_constants_TransactionVersion={})),function(PeerNetworkID){PeerNetworkID[PeerNetworkID.Mainnet=385875968]="Mainnet",PeerNetworkID[PeerNetworkID.Testnet=4278190080]="Testnet"}(PeerNetworkID||(PeerNetworkID={}));__webpack_require__("./node_modules/.pnpm/cross-fetch@3.1.8_encoding@0.1.13/node_modules/cross-fetch/dist/browser-polyfill.js");const defaultFetchOpts={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function fetchWrapper(input,init){const fetchOpts={};Object.assign(fetchOpts,defaultFetchOpts,init);return await fetch(input,fetchOpts)}function fetch_createFetchFn(...args){const{fetchLib,middlewares}=function argsForCreateFetchFn(args){let fetchLib=fetchWrapper,middlewares=[];return args.length>0&&"function"==typeof args[0]&&(fetchLib=args.shift()),args.length>0&&(middlewares=args),{fetchLib,middlewares}}(args);return async(url,init)=>{let fetchParams={url,init:init??{}};for(const middleware of middlewares)if("function"==typeof middleware.pre){fetchParams=await Promise.resolve(middleware.pre({fetch:fetchLib,...fetchParams}))??fetchParams}let response=await fetchLib(fetchParams.url,fetchParams.init);for(const middleware of middlewares)if("function"==typeof middleware.post){const result=await Promise.resolve(middleware.post({fetch:fetchLib,url:fetchParams.url,init:fetchParams.init,response:response?.clone()??response}));response=result??response}return response}}const StacksNetworks=["mainnet","testnet","devnet","mocknet"];class network_StacksNetwork{constructor(networkConfig){this.version=esm_constants_TransactionVersion.Mainnet,this.chainId=esm_constants_ChainID.Mainnet,this.bnsLookupUrl="https://api.mainnet.hiro.so",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===esm_constants_TransactionVersion.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=address=>`${this.coreApiUrl}${this.accountEndpoint}/${address}?proof=0`,this.getAccountExtendedBalancesApiUrl=address=>`${this.coreApiUrl}/extended/v1/address/${address}/balances`,this.getAbiApiUrl=(address,contract)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${address}/${contract}`,this.getReadOnlyFunctionCallApiUrl=(contractAddress,contractName,functionName)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${contractAddress}/${contractName}/${encodeURIComponent(functionName)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(address,options)=>{let url=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}`;return options&&(url=`${url}?limit=${options.limit}&offset=${options.offset}`),url},this.getRewardsTotalUrl=address=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}/total`,this.getRewardHoldersUrl=(address,options)=>{let url=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${address}`;return options&&(url=`${url}?limit=${options.limit}&offset=${options.offset}`),url},this.getStackerInfoUrl=(contractAddress,contractName)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${contractAddress}/${contractName}/get-stacker-info`,this.getDataVarUrl=(contractAddress,contractName,dataVarName)=>`${this.coreApiUrl}/v2/data_var/${contractAddress}/${contractName}/${dataVarName}?proof=0`,this.getMapEntryUrl=(contractAddress,contractName,mapName)=>`${this.coreApiUrl}/v2/map_entry/${contractAddress}/${contractName}/${mapName}?proof=0`,this.coreApiUrl=networkConfig.url,this.fetchFn=networkConfig.fetchFn??fetch_createFetchFn()}getNameInfo(fullyQualifiedName){const nameLookupURL=`${this.bnsLookupUrl}/v1/names/${fullyQualifiedName}`;return this.fetchFn(nameLookupURL).then((resp=>{if(404===resp.status)throw new Error("Name not found");if(200!==resp.status)throw new Error(`Bad response status: ${resp.status}`);return resp.json()})).then((nameInfo=>nameInfo.address?Object.assign({},nameInfo,{address:nameInfo.address}):nameInfo))}}network_StacksNetwork.fromName=networkName=>{switch(networkName){case"mainnet":return new network_StacksMainnet;case"testnet":return new network_StacksTestnet;case"devnet":return new StacksDevnet;case"mocknet":return new StacksMocknet;default:throw new Error(`Invalid network name provided. Must be one of the following: ${StacksNetworks.join(", ")}`)}},network_StacksNetwork.fromNameOrNetwork=network=>"string"!=typeof network&&"version"in network?network:network_StacksNetwork.fromName(network);class network_StacksMainnet extends network_StacksNetwork{constructor(opts){super({url:opts?.url??"https://api.mainnet.hiro.so",fetchFn:opts?.fetchFn}),this.version=esm_constants_TransactionVersion.Mainnet,this.chainId=esm_constants_ChainID.Mainnet}}class network_StacksTestnet extends network_StacksNetwork{constructor(opts){super({url:opts?.url??"https://api.testnet.hiro.so",fetchFn:opts?.fetchFn}),this.version=esm_constants_TransactionVersion.Testnet,this.chainId=esm_constants_ChainID.Testnet}}class StacksMocknet extends network_StacksNetwork{constructor(opts){super({url:opts?.url??"http://localhost:3999",fetchFn:opts?.fetchFn}),this.version=esm_constants_TransactionVersion.Testnet,this.chainId=esm_constants_ChainID.Testnet}}const StacksDevnet=StacksMocknet;async function callReadOnlyFunction(readOnlyFunctionOptions){const defaultOptions={network:new network_StacksMainnet},options=Object.assign(defaultOptions,readOnlyFunctionOptions),{contractName,contractAddress,functionName,functionArgs,senderAddress}=options,network=network_StacksNetwork.fromNameOrNetwork(options.network),url=network.getReadOnlyFunctionCallApiUrl(contractAddress,contractName,functionName),args=functionArgs.map((arg=>function utils_cvToHex(cv){return`0x${esm_utils_bytesToHex(serialize_serializeCV(cv))}`}(arg))),body=JSON.stringify({sender:senderAddress,arguments:args}),response=await network.fetchFn(url,{method:"POST",body,headers:{"Content-Type":"application/json"}});if(!response.ok){const msg=await response.text().catch((()=>""));throw new Error(`Error calling read-only function. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: "${msg}"`)}return response.json().then((responseJson=>parseReadOnlyResponse(responseJson)))}var alex_sdk_esm_Currency,AMMSwapPool,_NATIVE_TOKEN_MAPPING;function _regeneratorRuntime(){_regeneratorRuntime=function(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _construct(Parent,args,Class){return _construct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function isNotNull(input){return null!=input}function alex_sdk_esm_assertNever(x){throw new Error("Unexpected object: "+x)}function neighbours(token,pools){return pools.map((function(pool){var _AMMSwapPool$breakDow=AMMSwapPool.breakDown(pool),x=_AMMSwapPool$breakDow[0],y=_AMMSwapPool$breakDow[1];return x===token?{neighbour:y,pool}:y===token?{neighbour:x,pool}:null})).filter(isNotNull)}function bridgeHelperResolver(from,to,ammPools){var bridgingToken=[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.ALEX];if(bridgingToken.includes(from)||bridgingToken.includes(to))return{type:"none"};if(bridgingToken.includes(from)||bridgingToken.includes(to))return{type:"none"};var fromPool=ammPools.find((function(a){if(!AMMSwapPool.breakDown(a).includes(from))return!1;var _AMMSwapPool$breakDow=AMMSwapPool.breakDown(a),x=_AMMSwapPool$breakDow[0],y=_AMMSwapPool$breakDow[1];return bridgingToken.includes(x===from?y:x)}));if(fromPool){var _AMMSwapPool$breakDow2=AMMSwapPool.breakDown(fromPool),x=_AMMSwapPool$breakDow2[0],y=_AMMSwapPool$breakDow2[1];return{pool:fromPool,type:"fromAmm",tokenX:from,tokenY:x===from?y:x,factorX:AMMSwapPool.getFactor(fromPool),tokenZ:to}}var toPool=ammPools.find((function(a){if(!AMMSwapPool.breakDown(a).includes(to))return!1;var _AMMSwapPool$breakDow3=AMMSwapPool.breakDown(a),x=_AMMSwapPool$breakDow3[0],y=_AMMSwapPool$breakDow3[1];return bridgingToken.includes(x===to?y:x)}));if(toPool){var _AMMSwapPool$breakDow4=AMMSwapPool.breakDown(toPool),_x=_AMMSwapPool$breakDow4[0],_y=_AMMSwapPool$breakDow4[1];return{pool:toPool,type:"toAmm",tokenX:from,tokenY:_x===to?_y:_x,factorY:AMMSwapPool.getFactor(toPool),tokenZ:to}}return{type:"none"}}!function(Currency){Currency.ALEX="age000-governance-token",Currency.USDA="token-wusda",Currency.STX="token-wstx",Currency.BANANA="token-wban",Currency.XBTC="token-wbtc",Currency.DIKO="token-wdiko",Currency.SLIME="token-wslm",Currency.XUSD="token-wxusd",Currency.MIA="token-wmia",Currency.NYCC="token-wnycc",Currency.CORGI="token-wcorgi",Currency.ATALEXV2="auto-alex-v2",Currency.sUSDT="token-susdt",Currency.VIBES="token-wvibes",Currency.BRC20_DB20="brc20-db20",Currency.aBTC="token-abtc",Currency.sLUNR="token-slunr",Currency.BRC20_CHAX="brc20-chax",Currency.LEO="token-wleo",Currency.MEGA="token-wmega-v2",Currency.GUS="token-wgus",Currency.BRC20_ORDG="brc20-ordg",Currency.BRC20_ORMM="brc20-ormm"}(alex_sdk_esm_Currency||(alex_sdk_esm_Currency={})),function(AMMSwapPool){var Pool;!function(Pool){Pool.AMM_SWAP_POOL_WXUSD_WUSDA="token-amm-swap-pool:token-wxusd,token-wusda,0.0001e8",Pool.AMM_SWAP_POOL_WXUSD_WUSDA_2="token-amm-swap-pool:token-wxusd,token-wusda,0.005e8",Pool.AMM_SWAP_POOL_ALEX_WDIKO="token-amm-swap-pool:age000-governance-token,token-wdiko,1e8",Pool.AMM_SWAP_POOL_WSTX_WCORGI="token-amm-swap-pool:token-wstx,token-wcorgi,1e8",Pool.AMM_SWAP_POOL_WSTX_SUSDT="token-amm-swap-pool:token-wstx,token-susdt,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_XBTC="token-amm-swap-pool-v1-1:token-wstx,token-wbtc,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_SUSDT="token-amm-swap-pool-v1-1:token-wstx,token-susdt,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_ALEX="token-amm-swap-pool-v1-1:token-wstx,age000-governance-token,1e8",Pool.AMM_SWAP_POOL_V1_1_ALEX_DIKO="token-amm-swap-pool-v1-1:age000-governance-token,token-wdiko,1e8",Pool.AMM_SWAP_POOL_V1_1_ALEX_ATALEXV2="token-amm-swap-pool-v1-1:age000-governance-token,auto-alex-v2,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_WVIBES="token-amm-swap-pool-v1-1:token-wstx,token-wvibes,1e8",Pool.AMM_SWAP_POOL_V1_1_ALEX_BRC20DB20="token-amm-swap-pool-v1-1:age000-governance-token,brc20-db20,1e8",Pool.AMM_SWAP_POOL_V1_1_SUSDT_XUSD="token-amm-swap-pool-v1-1:token-susdt,token-wxusd,0.05e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_LUNAR="token-amm-swap-pool-v1-1:token-wstx,token-slunr,1e8",Pool.AMM_SWAP_POOL_V1_1_SUSDT_CHAX="token-amm-swap-pool-v1-1:token-susdt,brc20-chax,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_ABTC="token-amm-swap-pool-v1-1:token-wstx,token-abtc,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_WLEO="token-amm-swap-pool-v1-1:token-wstx,token-wleo,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_WMEGA="token-amm-swap-pool-v1-1:token-wstx,token-wmega-v2,1e8",Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORDG="token-amm-swap-pool-v1-1:token-abtc,brc20-ordg,1e8",Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORMM="token-amm-swap-pool-v1-1:token-abtc,brc20-ormm,1e8",Pool.AMM_SWAP_POOL_V1_1_WSTX_WGUS="token-amm-swap-pool-v1-1:token-wstx,token-wgues,1e8"}(Pool=AMMSwapPool.Pool||(AMMSwapPool.Pool={})),AMMSwapPool.getRoute=function(tokenX,tokenY,ammPools){return function resolveAmmRoute(tokenX,tokenY,pools){var _visited;if(0===pools.length)return[];for(var visited=((_visited={})[tokenX]=[],_visited),i=0;i<4;i++)if(Object.keys(visited).map((function(a){return a})).forEach((function(a){neighbours(a,pools).forEach((function(b){var _visited$a,_visited$a2;b.neighbour===tokenX||null!=(_visited$a=visited[a])&&_visited$a.some((function(c){return c.neighbour===b.neighbour}))||(visited[b.neighbour]=[].concat(null!=(_visited$a2=visited[a])?_visited$a2:[],[b]))}))})),tokenY in visited)return visited[tokenY];return[]}(tokenX,tokenY,ammPools.includes(Pool.AMM_SWAP_POOL_WXUSD_WUSDA_2)?ammPools.filter((function(a){return a!==Pool.AMM_SWAP_POOL_WXUSD_WUSDA})):ammPools)},AMMSwapPool.reachableInAMM=function(){return bridgeHelperResolver.apply(void 0,arguments)},AMMSwapPool.ammTokens=[Pool.AMM_SWAP_POOL_WXUSD_WUSDA,Pool.AMM_SWAP_POOL_WXUSD_WUSDA_2,Pool.AMM_SWAP_POOL_ALEX_WDIKO,Pool.AMM_SWAP_POOL_WSTX_WCORGI,Pool.AMM_SWAP_POOL_WSTX_SUSDT],AMMSwapPool.ammV1_1Tokens=[Pool.AMM_SWAP_POOL_V1_1_WSTX_SUSDT,Pool.AMM_SWAP_POOL_V1_1_WSTX_XBTC,Pool.AMM_SWAP_POOL_V1_1_WSTX_ALEX,Pool.AMM_SWAP_POOL_V1_1_ALEX_DIKO,Pool.AMM_SWAP_POOL_V1_1_ALEX_ATALEXV2,Pool.AMM_SWAP_POOL_V1_1_WSTX_WVIBES,Pool.AMM_SWAP_POOL_V1_1_ALEX_BRC20DB20,Pool.AMM_SWAP_POOL_V1_1_SUSDT_XUSD,Pool.AMM_SWAP_POOL_V1_1_WSTX_LUNAR,Pool.AMM_SWAP_POOL_V1_1_SUSDT_CHAX,Pool.AMM_SWAP_POOL_V1_1_WSTX_ABTC,Pool.AMM_SWAP_POOL_V1_1_WSTX_WLEO,Pool.AMM_SWAP_POOL_V1_1_WSTX_WMEGA,Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORDG,Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORMM,Pool.AMM_SWAP_POOL_V1_1_WSTX_WGUS],AMMSwapPool.isPoolV1Token=function(token){return AMMSwapPool.ammTokens.includes(token)},AMMSwapPool.isPoolV1_1Token=function(token){return AMMSwapPool.ammV1_1Tokens.includes(token)},AMMSwapPool.fromXY=function(x,y,factor){if(x===alex_sdk_esm_Currency.XUSD&&y===alex_sdk_esm_Currency.USDA&&1e4===factor)return Pool.AMM_SWAP_POOL_WXUSD_WUSDA;throw new Error("Invalid AMM token: "+x+" "+y)},AMMSwapPool.breakDown=function breakDown(poolToken){switch(poolToken){case Pool.AMM_SWAP_POOL_WXUSD_WUSDA:case Pool.AMM_SWAP_POOL_WXUSD_WUSDA_2:return[alex_sdk_esm_Currency.XUSD,alex_sdk_esm_Currency.USDA];case Pool.AMM_SWAP_POOL_ALEX_WDIKO:return[alex_sdk_esm_Currency.ALEX,alex_sdk_esm_Currency.DIKO];case Pool.AMM_SWAP_POOL_WSTX_WCORGI:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.CORGI];case Pool.AMM_SWAP_POOL_WSTX_SUSDT:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.sUSDT];case Pool.AMM_SWAP_POOL_V1_1_WSTX_XBTC:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.XBTC];case Pool.AMM_SWAP_POOL_V1_1_WSTX_ALEX:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.ALEX];case Pool.AMM_SWAP_POOL_V1_1_WSTX_SUSDT:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.sUSDT];case Pool.AMM_SWAP_POOL_V1_1_ALEX_DIKO:return[alex_sdk_esm_Currency.ALEX,alex_sdk_esm_Currency.DIKO];case Pool.AMM_SWAP_POOL_V1_1_ALEX_ATALEXV2:return[alex_sdk_esm_Currency.ALEX,alex_sdk_esm_Currency.ATALEXV2];case Pool.AMM_SWAP_POOL_V1_1_WSTX_WVIBES:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.VIBES];case Pool.AMM_SWAP_POOL_V1_1_ALEX_BRC20DB20:return[alex_sdk_esm_Currency.ALEX,alex_sdk_esm_Currency.BRC20_DB20];case Pool.AMM_SWAP_POOL_V1_1_SUSDT_XUSD:return[alex_sdk_esm_Currency.sUSDT,alex_sdk_esm_Currency.XUSD];case Pool.AMM_SWAP_POOL_V1_1_WSTX_LUNAR:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.sLUNR];case Pool.AMM_SWAP_POOL_V1_1_SUSDT_CHAX:return[alex_sdk_esm_Currency.sUSDT,alex_sdk_esm_Currency.BRC20_CHAX];case Pool.AMM_SWAP_POOL_V1_1_WSTX_ABTC:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.aBTC];case Pool.AMM_SWAP_POOL_V1_1_WSTX_WLEO:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.LEO];case Pool.AMM_SWAP_POOL_V1_1_WSTX_WMEGA:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.MEGA];case Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORDG:return[alex_sdk_esm_Currency.aBTC,alex_sdk_esm_Currency.BRC20_ORDG];case Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORMM:return[alex_sdk_esm_Currency.aBTC,alex_sdk_esm_Currency.BRC20_ORMM];case Pool.AMM_SWAP_POOL_V1_1_WSTX_WGUS:return[alex_sdk_esm_Currency.STX,alex_sdk_esm_Currency.GUS];default:alex_sdk_esm_assertNever(poolToken)}},AMMSwapPool.getFactor=function getFactor(poolToken){switch(poolToken){case Pool.AMM_SWAP_POOL_WXUSD_WUSDA:return BigInt(1e4);case Pool.AMM_SWAP_POOL_WXUSD_WUSDA_2:return BigInt(5e5);case Pool.AMM_SWAP_POOL_ALEX_WDIKO:case Pool.AMM_SWAP_POOL_WSTX_WCORGI:case Pool.AMM_SWAP_POOL_WSTX_SUSDT:case Pool.AMM_SWAP_POOL_V1_1_WSTX_XBTC:case Pool.AMM_SWAP_POOL_V1_1_WSTX_ALEX:case Pool.AMM_SWAP_POOL_V1_1_WSTX_SUSDT:case Pool.AMM_SWAP_POOL_V1_1_ALEX_DIKO:case Pool.AMM_SWAP_POOL_V1_1_ALEX_ATALEXV2:case Pool.AMM_SWAP_POOL_V1_1_WSTX_WVIBES:case Pool.AMM_SWAP_POOL_V1_1_ALEX_BRC20DB20:case Pool.AMM_SWAP_POOL_V1_1_WSTX_LUNAR:case Pool.AMM_SWAP_POOL_V1_1_SUSDT_CHAX:case Pool.AMM_SWAP_POOL_V1_1_WSTX_ABTC:case Pool.AMM_SWAP_POOL_V1_1_WSTX_WLEO:case Pool.AMM_SWAP_POOL_V1_1_WSTX_WMEGA:case Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORDG:case Pool.AMM_SWAP_POOL_V1_1_ABTC_BRC20ORMM:case Pool.AMM_SWAP_POOL_V1_1_WSTX_WGUS:return BigInt(1e8);case Pool.AMM_SWAP_POOL_V1_1_SUSDT_XUSD:return BigInt(5e6);default:alex_sdk_esm_assertNever(poolToken)}}}(AMMSwapPool||(AMMSwapPool={}));var NATIVE_TOKEN_MAPPING=((_NATIVE_TOKEN_MAPPING={})[alex_sdk_esm_Currency.ALEX]={assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.age000-governance-token::alex",decimals:1e8},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.sUSDT]={assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.token-susdt::bridged-usdt",decimals:1e8},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.ATALEXV2]={assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.auto-alex-v2::auto-alex-v2",decimals:1e8},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.XUSD]={assetIdentifier:"SP2TZK01NKDC89J6TA56SA47SDF7RTHYEQ79AAB9A.Wrapped-USD::wrapped-usd",decimals:1e8},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.XBTC]={assetIdentifier:"SP3DX3H4FEYZJZ586MFBS25ZW3HZDMEW92260R2PR.Wrapped-Bitcoin::wrapped-bitcoin",decimals:1e8},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.DIKO]={assetIdentifier:"SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR.arkadiko-token::diko",decimals:1e6},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.USDA]={assetIdentifier:"SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR.usda-token::usda",decimals:1e6},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.BANANA]={assetIdentifier:"SP2KAF9RF86PVX3NEE27DFV1CQX0T4WGR41X3S45C.btc-monkeys-bananas::BANANA",decimals:1e6},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.SLIME]={assetIdentifier:"SP125J1ADVYWGWB9NQRCVGKYAG73R17ZNMV17XEJ7.slime-token::SLIME",decimals:1e6},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.MIA]={assetIdentifier:"SP1H1733V5MZ3SZ9XRW9FKYGEZT0JDGEB8Y634C7R.miamicoin-token-v2::miamicoin",decimals:1e6},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.NYCC]={assetIdentifier:"SPSCWDV3RKV5ZRN1FQD84YE1NQFEDJ9R1F4DYQ11.newyorkcitycoin-token-v2::newyorkcitycoin",decimals:1e6},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.CORGI]={decimals:1e6,assetIdentifier:"SP3NE50GEXFG9SZGTT51P40X2CKYSZ5CC4ZTZ7A2G.welshcorgicoin-token::welshcorgicoin"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.VIBES]={decimals:1e8,assetIdentifier:"SP27BB1Y2DGSXZHS7G9YHKTSH6KQ6BD3QG0AN3CR9.vibes-token::vibes-token"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.BRC20_DB20]={decimals:1e8,assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.brc20-db20::brc20-db20"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.aBTC]={decimals:1e8,assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.token-abtc::bridged-btc"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.sLUNR]={decimals:1e8,assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.token-slunr::bridged-lunr"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.BRC20_CHAX]={decimals:1e8,assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.brc20-chax::brc20-chax"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.LEO]={decimals:1e6,assetIdentifier:"SP1AY6K3PQV5MRT6R4S671NWW2FRVPKM0BR162CT6.leo-token::leo"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.MEGA]={decimals:100,assetIdentifier:"SP3D6PV2ACBPEKYJTCMH7HEN02KP87QSP8KTEH335.mega::mega"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.GUS]={decimals:1e6,assetIdentifier:"SP1JFFSYTSH7VBM54K29ZFS9H4SVB67EA8VT2MYJ9.gus-token::gus"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.BRC20_ORMM]={decimals:1e8,assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.brc20-ormm::brc20-ormm"},_NATIVE_TOKEN_MAPPING[alex_sdk_esm_Currency.BRC20_ORDG]={decimals:1e8,assetIdentifier:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9.brc20-ordg::brc20-ordg"},_NATIVE_TOKEN_MAPPING),configs={IS_MAINNET:!0,CONTRACT_DEPLOYER:"SP3K8BC0PPEVCV7NZ6QSRWPQ2JE9E5B6N3PA0KBR9",API_HOST:"https://stacks-blockchain-lb.alexlab.co",NATIVE_TOKEN_MAPPING,SPONSORED_TX_EXECUTOR:"https://sponsor-tx.alexlab.co/v1/graphql"};var alex_sdk_esm_principalT=transcoders({encode:function alex_sdk_esm_principalCV(principal){if(principal.includes(".")){var _principal$split=principal.split(".");return principalCV_contractPrincipalCV(_principal$split[0],_principal$split[1])}return principal.startsWith("SP")||principal.startsWith("ST")?principalCV_standardPrincipalCV(principal):principalCV_contractPrincipalCV(configs.CONTRACT_DEPLOYER,principal)},decode:function principleResult(result){if(result.type===constants_ClarityType.PrincipalStandard)return addressResult(result);if(result.type===constants_ClarityType.PrincipalContract)return contractResult(result).split(".")[1];throw new Error("Expected principal, got "+result.type)}}),AlexContracts=defineContract(_extends({},defineContract({"swap-helper-v1-02":{"swap-helper":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"dx",type:uintT},{name:"min-dy",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"fee-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"get-given-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"dy",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-instant-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-resilient-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"route-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(listT(alex_sdk_esm_principalT)),mode:"readonly"},"fwp-oracle-resilient-map":{input:tupleT({"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT}),output:optionalT(uintT),mode:"mapEntry"}}}),defineContract({"swap-helper-v1-03":{"swap-helper":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"dx",type:uintT},{name:"min-dy",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"fee-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"get-given-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"dy",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-instant-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-resilient-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"route-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT}],output:responseSimpleT(listT(alex_sdk_esm_principalT)),mode:"readonly"},"fwp-oracle-resilient-map":{input:tupleT({"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT}),output:optionalT(uintT),mode:"mapEntry"},"simple-oracle-resilient-map":{input:tupleT({"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT}),output:optionalT(uintT),mode:"mapEntry"}}}),defineContract({"amm-swap-pool":{"add-to-position":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"max-dy",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT,supply:uintT})),mode:"public"},"create-pool":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"pool-owner",type:alex_sdk_esm_principalT},{name:"dx",type:uintT},{name:"dy",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},pause:{input:[{name:"new-paused",type:booleanT}],output:responseSimpleT(booleanT),mode:"public"},"reduce-position":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"percent",type:uintT}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"public"},"set-contract-owner":{input:[{name:"owner",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"set-end-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-end-block",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-fee-rate-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"fee-rate-x",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-fee-rate-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"fee-rate-y",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-fee-rebate":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"fee-rebate",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-max-in-ratio":{input:[{name:"new-max-in-ratio",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-max-out-ratio":{input:[{name:"new-max-out-ratio",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-oracle-average":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-oracle-average",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-oracle-enabled":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"enabled",type:booleanT}],output:responseSimpleT(booleanT),mode:"public"},"set-pool-owner":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"pool-owner",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"set-start-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-start-block",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-switch-threshold":{input:[{name:"new-threshold",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-threshold-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-threshold",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-threshold-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-threshold",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"swap-helper":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"min-dy",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-a":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"dx",type:uintT},{name:"min-dz",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-b":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"token-w-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"dx",type:uintT},{name:"min-dw",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-c":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"token-w-trait",type:alex_sdk_esm_principalT},{name:"token-v-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"factor-w",type:uintT},{name:"dx",type:uintT},{name:"min-dv",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-x-for-y":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"min-dy",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"public"},"swap-y-for-x":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dy",type:uintT},{name:"min-dx",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"public"},"check-pool-status":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(booleanT),mode:"readonly"},"fee-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-a":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-b":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-c":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"token-v",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"factor-w",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-balances":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(tupleT({"balance-x":uintT,"balance-y":uintT})),mode:"readonly"},"get-contract-owner":{input:[],output:responseSimpleT(alex_sdk_esm_principalT),mode:"readonly"},"get-end-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-fee-rate-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-fee-rate-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-fee-rebate":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-a":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-b":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-c":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"token-v",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"factor-w",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-invariant":{input:[{name:"balance-x",type:uintT},{name:"balance-y",type:uintT},{name:"t",type:uintT}],output:uintT,mode:"readonly"},"get-max-in-ratio":{input:[],output:uintT,mode:"readonly"},"get-max-out-ratio":{input:[],output:uintT,mode:"readonly"},"get-oracle-average":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-oracle-enabled":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(booleanT),mode:"readonly"},"get-oracle-instant":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-oracle-resilient":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-pool-details":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(tupleT({"balance-x":uintT,"balance-y":uintT,"end-block":uintT,"fee-rate-x":uintT,"fee-rate-y":uintT,"fee-rebate":uintT,"oracle-average":uintT,"oracle-enabled":booleanT,"oracle-resilient":uintT,"pool-id":uintT,"pool-owner":alex_sdk_esm_principalT,"start-block":uintT,"threshold-x":uintT,"threshold-y":uintT,"total-supply":uintT})),mode:"readonly"},"get-pool-details-by-id":{input:[{name:"pool-id",type:uintT}],output:responseSimpleT(tupleT({factor:uintT,"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT})),mode:"readonly"},"get-pool-exists":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:optionalT(tupleT({"balance-x":uintT,"balance-y":uintT,"end-block":uintT,"fee-rate-x":uintT,"fee-rate-y":uintT,"fee-rebate":uintT,"oracle-average":uintT,"oracle-enabled":booleanT,"oracle-resilient":uintT,"pool-id":uintT,"pool-owner":alex_sdk_esm_principalT,"start-block":uintT,"threshold-x":uintT,"threshold-y":uintT,"total-supply":uintT})),mode:"readonly"},"get-pool-owner":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(alex_sdk_esm_principalT),mode:"readonly"},"get-position-given-burn":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"token",type:uintT}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"readonly"},"get-position-given-mint":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"token",type:uintT}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"readonly"},"get-price":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-start-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-switch-threshold":{input:[],output:uintT,mode:"readonly"},"get-threshold-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-threshold-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-token-given-position":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"max-dy",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dy:uintT,token:uintT})),mode:"readonly"},"get-x-given-price":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"price",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-x-given-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dy",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-x-in-given-y-out":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dy",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-y-given-price":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"price",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-y-given-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-y-in-given-x-out":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"is-paused":{input:[],output:booleanT,mode:"readonly"},"pools-data-map":{input:tupleT({factor:uintT,"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT}),output:optionalT(tupleT({"balance-x":uintT,"balance-y":uintT,"end-block":uintT,"fee-rate-x":uintT,"fee-rate-y":uintT,"fee-rebate":uintT,"oracle-average":uintT,"oracle-enabled":booleanT,"oracle-resilient":uintT,"pool-id":uintT,"pool-owner":alex_sdk_esm_principalT,"start-block":uintT,"threshold-x":uintT,"threshold-y":uintT,"total-supply":uintT})),mode:"mapEntry"},"pools-id-map":{input:uintT,output:optionalT(tupleT({factor:uintT,"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT})),mode:"mapEntry"},"MAX-IN-RATIO":{input:noneT,output:uintT,mode:"variable"},"MAX-OUT-RATIO":{input:noneT,output:uintT,mode:"variable"},"contract-owner":{input:noneT,output:alex_sdk_esm_principalT,mode:"variable"},paused:{input:noneT,output:booleanT,mode:"variable"},"pool-nonce":{input:noneT,output:uintT,mode:"variable"},"switch-threshold":{input:noneT,output:uintT,mode:"variable"}}}),defineContract({"amm-swap-pool-v1-1":{"add-to-position":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"max-dy",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT,supply:uintT})),mode:"public"},"create-pool":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"pool-owner",type:alex_sdk_esm_principalT},{name:"dx",type:uintT},{name:"dy",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},pause:{input:[{name:"new-paused",type:booleanT}],output:responseSimpleT(booleanT),mode:"public"},"reduce-position":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"percent",type:uintT}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"public"},"set-contract-owner":{input:[{name:"owner",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"set-end-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-end-block",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-fee-rate-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"fee-rate-x",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-fee-rate-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"fee-rate-y",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-fee-rebate":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"fee-rebate",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-max-in-ratio":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-max-in-ratio",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-max-out-ratio":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-max-out-ratio",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-oracle-average":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-oracle-average",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-oracle-enabled":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"enabled",type:booleanT}],output:responseSimpleT(booleanT),mode:"public"},"set-pool-owner":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"pool-owner",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"set-start-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-start-block",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-switch-threshold":{input:[{name:"new-threshold",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-threshold-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-threshold",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-threshold-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"new-threshold",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"swap-helper":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"min-dy",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-a":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"dx",type:uintT},{name:"min-dz",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-b":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"token-w-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"dx",type:uintT},{name:"min-dw",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-c":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"token-w-trait",type:alex_sdk_esm_principalT},{name:"token-v-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"factor-w",type:uintT},{name:"dx",type:uintT},{name:"min-dv",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-x-for-y":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"min-dy",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"public"},"swap-y-for-x":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dy",type:uintT},{name:"min-dx",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"public"},"check-pool-status":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(booleanT),mode:"readonly"},"fee-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-a":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-b":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-c":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"token-v",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"factor-w",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-balances":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(tupleT({"balance-x":uintT,"balance-y":uintT})),mode:"readonly"},"get-contract-owner":{input:[],output:responseSimpleT(alex_sdk_esm_principalT),mode:"readonly"},"get-end-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-fee-rate-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-fee-rate-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-fee-rebate":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-a":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-b":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-c":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"token-w",type:alex_sdk_esm_principalT},{name:"token-v",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"factor-y",type:uintT},{name:"factor-z",type:uintT},{name:"factor-w",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-invariant":{input:[{name:"balance-x",type:uintT},{name:"balance-y",type:uintT},{name:"t",type:uintT}],output:uintT,mode:"readonly"},"get-max-in-ratio":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-max-out-ratio":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-oracle-average":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-oracle-enabled":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(booleanT),mode:"readonly"},"get-oracle-instant":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-oracle-resilient":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-pool-details":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(tupleT({"balance-x":uintT,"balance-y":uintT,"end-block":uintT,"fee-rate-x":uintT,"fee-rate-y":uintT,"fee-rebate":uintT,"max-in-ratio":uintT,"max-out-ratio":uintT,"oracle-average":uintT,"oracle-enabled":booleanT,"oracle-resilient":uintT,"pool-id":uintT,"pool-owner":alex_sdk_esm_principalT,"start-block":uintT,"threshold-x":uintT,"threshold-y":uintT,"total-supply":uintT})),mode:"readonly"},"get-pool-details-by-id":{input:[{name:"pool-id",type:uintT}],output:responseSimpleT(tupleT({factor:uintT,"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT})),mode:"readonly"},"get-pool-exists":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:optionalT(tupleT({"balance-x":uintT,"balance-y":uintT,"end-block":uintT,"fee-rate-x":uintT,"fee-rate-y":uintT,"fee-rebate":uintT,"max-in-ratio":uintT,"max-out-ratio":uintT,"oracle-average":uintT,"oracle-enabled":booleanT,"oracle-resilient":uintT,"pool-id":uintT,"pool-owner":alex_sdk_esm_principalT,"start-block":uintT,"threshold-x":uintT,"threshold-y":uintT,"total-supply":uintT})),mode:"readonly"},"get-pool-owner":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(alex_sdk_esm_principalT),mode:"readonly"},"get-position-given-burn":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"token-amount",type:uintT}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"readonly"},"get-position-given-mint":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"token-amount",type:uintT}],output:responseSimpleT(tupleT({dx:uintT,dy:uintT})),mode:"readonly"},"get-price":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-start-block":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-switch-threshold":{input:[],output:uintT,mode:"readonly"},"get-threshold-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-threshold-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-token-given-position":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT},{name:"max-dy",type:optionalT(uintT)}],output:responseSimpleT(tupleT({dy:uintT,token:uintT})),mode:"readonly"},"get-x-given-price":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"price",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-x-given-y":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dy",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-x-in-given-y-out":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dy",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-y-given-price":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"price",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-y-given-x":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-y-in-given-x-out":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"factor",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"is-paused":{input:[],output:booleanT,mode:"readonly"},"pools-data-map":{input:tupleT({factor:uintT,"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT}),output:optionalT(tupleT({"balance-x":uintT,"balance-y":uintT,"end-block":uintT,"fee-rate-x":uintT,"fee-rate-y":uintT,"fee-rebate":uintT,"max-in-ratio":uintT,"max-out-ratio":uintT,"oracle-average":uintT,"oracle-enabled":booleanT,"oracle-resilient":uintT,"pool-id":uintT,"pool-owner":alex_sdk_esm_principalT,"start-block":uintT,"threshold-x":uintT,"threshold-y":uintT,"total-supply":uintT})),mode:"mapEntry"},"pools-id-map":{input:uintT,output:optionalT(tupleT({factor:uintT,"token-x":alex_sdk_esm_principalT,"token-y":alex_sdk_esm_principalT})),mode:"mapEntry"},"contract-owner":{input:noneT,output:alex_sdk_esm_principalT,mode:"variable"},paused:{input:noneT,output:booleanT,mode:"variable"},"pool-nonce":{input:noneT,output:uintT,mode:"variable"},"switch-threshold":{input:noneT,output:uintT,mode:"variable"}}}),defineContract({"token-amm-swap-pool":{"add-approved-contract":{input:[{name:"new-approved-contract",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},burn:{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"sender",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"burn-fixed":{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"sender",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},mint:{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"recipient",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"mint-fixed":{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"recipient",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"set-approved-contract":{input:[{name:"owner",type:alex_sdk_esm_principalT},{name:"approved",type:booleanT}],output:responseSimpleT(booleanT),mode:"public"},"set-contract-owner":{input:[{name:"owner",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"set-decimals":{input:[{name:"new-decimals",type:uintT}],output:responseSimpleT(booleanT),mode:"public"},"set-name":{input:[{name:"new-name",type:stringAsciiT}],output:responseSimpleT(booleanT),mode:"public"},"set-symbol":{input:[{name:"new-symbol",type:stringAsciiT}],output:responseSimpleT(booleanT),mode:"public"},"set-token-uri":{input:[{name:"new-uri",type:optionalT(stringT)}],output:responseSimpleT(booleanT),mode:"public"},"set-transferrable":{input:[{name:"new-transferrable",type:booleanT}],output:responseSimpleT(booleanT),mode:"public"},transfer:{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"sender",type:alex_sdk_esm_principalT},{name:"recipient",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"transfer-fixed":{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"sender",type:alex_sdk_esm_principalT},{name:"recipient",type:alex_sdk_esm_principalT}],output:responseSimpleT(booleanT),mode:"public"},"transfer-many":{input:[{name:"transfers",type:listT(tupleT({amount:uintT,recipient:alex_sdk_esm_principalT,sender:alex_sdk_esm_principalT,"token-id":uintT}))}],output:responseSimpleT(booleanT),mode:"public"},"transfer-many-fixed":{input:[{name:"transfers",type:listT(tupleT({amount:uintT,recipient:alex_sdk_esm_principalT,sender:alex_sdk_esm_principalT,"token-id":uintT}))}],output:responseSimpleT(booleanT),mode:"public"},"transfer-many-memo":{input:[{name:"transfers",type:listT(tupleT({amount:uintT,memo:bufferT,recipient:alex_sdk_esm_principalT,sender:alex_sdk_esm_principalT,"token-id":uintT}))}],output:responseSimpleT(booleanT),mode:"public"},"transfer-many-memo-fixed":{input:[{name:"transfers",type:listT(tupleT({amount:uintT,memo:bufferT,recipient:alex_sdk_esm_principalT,sender:alex_sdk_esm_principalT,"token-id":uintT}))}],output:responseSimpleT(booleanT),mode:"public"},"transfer-memo":{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"sender",type:alex_sdk_esm_principalT},{name:"recipient",type:alex_sdk_esm_principalT},{name:"memo",type:bufferT}],output:responseSimpleT(booleanT),mode:"public"},"transfer-memo-fixed":{input:[{name:"token-id",type:uintT},{name:"amount",type:uintT},{name:"sender",type:alex_sdk_esm_principalT},{name:"recipient",type:alex_sdk_esm_principalT},{name:"memo",type:bufferT}],output:responseSimpleT(booleanT),mode:"public"},"fixed-to-decimals":{input:[{name:"amount",type:uintT}],output:uintT,mode:"readonly"},"get-balance":{input:[{name:"token-id",type:uintT},{name:"who",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"get-balance-fixed":{input:[{name:"token-id",type:uintT},{name:"who",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"get-contract-owner":{input:[],output:responseSimpleT(alex_sdk_esm_principalT),mode:"readonly"},"get-decimals":{input:[{name:"token-id",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-name":{input:[{name:"token-id",type:uintT}],output:responseSimpleT(stringAsciiT),mode:"readonly"},"get-overall-balance":{input:[{name:"who",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"get-overall-balance-fixed":{input:[{name:"who",type:alex_sdk_esm_principalT}],output:responseSimpleT(uintT),mode:"readonly"},"get-overall-supply":{input:[],output:responseSimpleT(uintT),mode:"readonly"},"get-overall-supply-fixed":{input:[],output:responseSimpleT(uintT),mode:"readonly"},"get-symbol":{input:[{name:"token-id",type:uintT}],output:responseSimpleT(stringAsciiT),mode:"readonly"},"get-token-balance-owned-in-fixed":{input:[{name:"owner",type:alex_sdk_esm_principalT}],output:listT(tupleT({balance:uintT,"token-id":uintT})),mode:"readonly"},"get-token-owned":{input:[{name:"owner",type:alex_sdk_esm_principalT}],output:listT(uintT),mode:"readonly"},"get-token-uri":{input:[{name:"token-id",type:uintT}],output:responseSimpleT(optionalT(stringT)),mode:"readonly"},"get-total-supply":{input:[{name:"token-id",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-total-supply-fixed":{input:[{name:"token-id",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-transferrable":{input:[],output:responseSimpleT(booleanT),mode:"readonly"},"approved-contracts":{input:alex_sdk_esm_principalT,output:optionalT(booleanT),mode:"mapEntry"},"token-balances":{input:tupleT({owner:alex_sdk_esm_principalT,"token-id":uintT}),output:optionalT(uintT),mode:"mapEntry"},"token-owned":{input:alex_sdk_esm_principalT,output:optionalT(listT(uintT)),mode:"mapEntry"},"token-supplies":{input:uintT,output:optionalT(uintT),mode:"mapEntry"},"contract-owner":{input:noneT,output:alex_sdk_esm_principalT,mode:"variable"},"token-decimals":{input:noneT,output:uintT,mode:"variable"},"token-name":{input:noneT,output:stringAsciiT,mode:"variable"},"token-symbol":{input:noneT,output:stringAsciiT,mode:"variable"},"token-uri":{input:noneT,output:optionalT(stringT),mode:"variable"},transferrable:{input:noneT,output:booleanT,mode:"variable"}}}),defineContract({"swap-helper-bridged":{"swap-helper-from-amm":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"dx",type:uintT},{name:"min-dz",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-to-amm":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT},{name:"dx",type:uintT},{name:"min-dz",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"fee-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-instant-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-instant-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-resilient-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-resilient-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"route-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(listT(alex_sdk_esm_principalT)),mode:"readonly"},"route-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(listT(alex_sdk_esm_principalT)),mode:"readonly"}}}),defineContract({"swap-helper-bridged-v1-1":{"swap-helper-from-amm":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"dx",type:uintT},{name:"min-dz",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"swap-helper-to-amm":{input:[{name:"token-x-trait",type:alex_sdk_esm_principalT},{name:"token-y-trait",type:alex_sdk_esm_principalT},{name:"token-z-trait",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT},{name:"dx",type:uintT},{name:"min-dz",type:optionalT(uintT)}],output:responseSimpleT(uintT),mode:"public"},"fee-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"fee-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"get-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT},{name:"dx",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-instant-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-instant-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-resilient-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"oracle-resilient-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(uintT),mode:"readonly"},"route-helper-from-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-x",type:uintT}],output:responseSimpleT(listT(alex_sdk_esm_principalT)),mode:"readonly"},"route-helper-to-amm":{input:[{name:"token-x",type:alex_sdk_esm_principalT},{name:"token-y",type:alex_sdk_esm_principalT},{name:"token-z",type:alex_sdk_esm_principalT},{name:"factor-y",type:uintT}],output:responseSimpleT(listT(alex_sdk_esm_principalT)),mode:"readonly"}}}))),defaultReadonlyCallExecutor=function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(options){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",callReadOnlyFunction(_extends({},options,{senderAddress:configs.CONTRACT_DEPLOYER,network:configs.IS_MAINNET?new network_StacksMainnet({url:configs.API_HOST}):new network_StacksTestnet({url:configs.API_HOST})})));case 1:case"end":return _context.stop()}}),_callee)})));return function defaultReadonlyCallExecutor(_x){return _ref.apply(this,arguments)}}();function readonlyCall(_x2,_x3,_x4){return _readonlyCall.apply(this,arguments)}function _readonlyCall(){return(_readonlyCall=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(contractName,functionName,args){var functionDescriptor,clarityArgs,result;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return functionDescriptor=AlexContracts[contractName][functionName],clarityArgs=functionDescriptor.input.map((function(arg){return arg.type.encode(args[arg.name])})),_context2.next=4,defaultReadonlyCallExecutor({contractName,functionName:String(functionName),functionArgs:clarityArgs,contractAddress:configs.CONTRACT_DEPLOYER});case 4:return result=_context2.sent,_context2.abrupt("return",functionDescriptor.output.decode(result));case 6:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function _getLiquidityProviderFee(){return(_getLiquidityProviderFee=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(tokenX,tokenY,ammPools,ammV1_1Pools){var ammV1_1Route,ammRoute,reachableInAmm1_1,reachableInAmm;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(1!==(ammV1_1Route=AMMSwapPool.getRoute(tokenX,tokenY,ammV1_1Pools)).length){_context.next=5;break}return _context.next=4,readonlyCall("amm-swap-pool-v1-1","fee-helper",{"token-x":tokenX,"token-y":tokenY,factor:AMMSwapPool.getFactor(ammV1_1Route[0].pool)}).then(unwrapResponse);case 4:case 8:case 12:case 16:case 21:case 25:case 29:case 33:case 38:case 42:case 47:case 51:case 54:return _context.abrupt("return",_context.sent);case 5:if(2!==ammV1_1Route.length){_context.next=9;break}return _context.next=8,readonlyCall("amm-swap-pool-v1-1","fee-helper-a",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,"token-z":ammV1_1Route[1].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool)}).then(unwrapResponse);case 9:if(3!==ammV1_1Route.length){_context.next=13;break}return _context.next=12,readonlyCall("amm-swap-pool-v1-1","fee-helper-b",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,"token-z":ammV1_1Route[1].neighbour,"token-w":ammV1_1Route[2].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),"factor-z":AMMSwapPool.getFactor(ammV1_1Route[2].pool)}).then(unwrapResponse);case 13:if(4!==ammV1_1Route.length){_context.next=17;break}return _context.next=16,readonlyCall("amm-swap-pool-v1-1","fee-helper-c",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,"token-z":ammV1_1Route[1].neighbour,"token-w":ammV1_1Route[2].neighbour,"token-v":ammV1_1Route[3].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),"factor-z":AMMSwapPool.getFactor(ammV1_1Route[2].pool),"factor-w":AMMSwapPool.getFactor(ammV1_1Route[3].pool)}).then(unwrapResponse);case 17:if(1!==(ammRoute=AMMSwapPool.getRoute(tokenX,tokenY,ammPools)).length){_context.next=22;break}return _context.next=21,readonlyCall("amm-swap-pool","fee-helper",{"token-x":tokenX,"token-y":tokenY,factor:AMMSwapPool.getFactor(ammRoute[0].pool)}).then(unwrapResponse);case 22:if(2!==ammRoute.length){_context.next=26;break}return _context.next=25,readonlyCall("amm-swap-pool","fee-helper-a",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,"token-z":ammRoute[1].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool)}).then(unwrapResponse);case 26:if(3!==ammRoute.length){_context.next=30;break}return _context.next=29,readonlyCall("amm-swap-pool","fee-helper-b",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,"token-z":ammRoute[1].neighbour,"token-w":ammRoute[2].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),"factor-z":AMMSwapPool.getFactor(ammRoute[2].pool)}).then(unwrapResponse);case 30:if(4!==ammRoute.length){_context.next=34;break}return _context.next=33,readonlyCall("amm-swap-pool","fee-helper-c",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,"token-z":ammRoute[1].neighbour,"token-w":ammRoute[2].neighbour,"token-v":ammRoute[3].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),"factor-z":AMMSwapPool.getFactor(ammRoute[2].pool),"factor-w":AMMSwapPool.getFactor(ammRoute[3].pool)}).then(unwrapResponse);case 34:if("fromAmm"!==(reachableInAmm1_1=AMMSwapPool.reachableInAMM(tokenX,tokenY,ammV1_1Pools)).type){_context.next=39;break}return _context.next=38,readonlyCall("swap-helper-bridged-v1-1","fee-helper-from-amm",{"token-x":reachableInAmm1_1.tokenX,"token-y":reachableInAmm1_1.tokenY,"token-z":reachableInAmm1_1.tokenZ,"factor-x":reachableInAmm1_1.factorX}).then(unwrapResponse);case 39:if("toAmm"!==reachableInAmm1_1.type){_context.next=43;break}return _context.next=42,readonlyCall("swap-helper-bridged-v1-1","fee-helper-to-amm",{"token-x":reachableInAmm1_1.tokenX,"token-y":reachableInAmm1_1.tokenY,"token-z":reachableInAmm1_1.tokenZ,"factor-y":reachableInAmm1_1.factorY}).then(unwrapResponse);case 43:if("fromAmm"!==(reachableInAmm=AMMSwapPool.reachableInAMM(tokenX,tokenY,ammPools)).type){_context.next=48;break}return _context.next=47,readonlyCall("swap-helper-bridged","fee-helper-from-amm",{"token-x":reachableInAmm.tokenX,"token-y":reachableInAmm.tokenY,"token-z":reachableInAmm.tokenZ,"factor-x":reachableInAmm.factorX}).then(unwrapResponse);case 48:if("toAmm"!==reachableInAmm.type){_context.next=52;break}return _context.next=51,readonlyCall("swap-helper-bridged","fee-helper-to-amm",{"token-x":reachableInAmm.tokenX,"token-y":reachableInAmm.tokenY,"token-z":reachableInAmm.tokenZ,"factor-y":reachableInAmm.factorY}).then(unwrapResponse);case 52:return _context.next=54,readonlyCall("swap-helper-v1-03","fee-helper",{"token-x":tokenX,"token-y":tokenY}).then(unwrapResponse);case 55:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function _getRoute(){return(_getRoute=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(from,to,ammPools,ammV1_1Tokens){var ammV1_1Route,ammRoute,reachableInAmmV1_1,_result,_result2,reachableInAmm,_result3,_result4,result;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!((ammV1_1Route=AMMSwapPool.getRoute(from,to,ammV1_1Tokens)).length>0)){_context.next=3;break}return _context.abrupt("return",[from].concat(ammV1_1Route.map((function(a){return a.neighbour}))));case 3:if(!((ammRoute=AMMSwapPool.getRoute(from,to,ammPools)).length>0)){_context.next=6;break}return _context.abrupt("return",[from].concat(ammRoute.map((function(a){return a.neighbour}))));case 6:if("fromAmm"!==(reachableInAmmV1_1=AMMSwapPool.reachableInAMM(from,to,ammV1_1Tokens)).type){_context.next=12;break}return _context.next=10,readonlyCall("swap-helper-bridged-v1-1","route-helper-from-amm",{"token-x":reachableInAmmV1_1.tokenX,"token-y":reachableInAmmV1_1.tokenY,"token-z":reachableInAmmV1_1.tokenZ,"factor-x":reachableInAmmV1_1.factorX}).then(unwrapResponse);case 10:return _result=_context.sent,_context.abrupt("return",_result.map((function(x){return x})));case 12:if("toAmm"!==reachableInAmmV1_1.type){_context.next=17;break}return _context.next=15,readonlyCall("swap-helper-bridged-v1-1","route-helper-to-amm",{"token-x":reachableInAmmV1_1.tokenX,"token-y":reachableInAmmV1_1.tokenY,"token-z":reachableInAmmV1_1.tokenZ,"factor-y":reachableInAmmV1_1.factorY}).then(unwrapResponse);case 15:return _result2=_context.sent,_context.abrupt("return",_result2.map((function(x){return x})));case 17:if("fromAmm"!==(reachableInAmm=AMMSwapPool.reachableInAMM(from,to,ammPools)).type){_context.next=23;break}return _context.next=21,readonlyCall("swap-helper-bridged","route-helper-from-amm",{"token-x":reachableInAmm.tokenX,"token-y":reachableInAmm.tokenY,"token-z":reachableInAmm.tokenZ,"factor-x":reachableInAmm.factorX}).then(unwrapResponse);case 21:return _result3=_context.sent,_context.abrupt("return",_result3.map((function(x){return x})));case 23:if("toAmm"!==reachableInAmm.type){_context.next=28;break}return _context.next=26,readonlyCall("swap-helper-bridged","route-helper-to-amm",{"token-x":reachableInAmm.tokenX,"token-y":reachableInAmm.tokenY,"token-z":reachableInAmm.tokenZ,"factor-y":reachableInAmm.factorY}).then(unwrapResponse);case 26:return _result4=_context.sent,_context.abrupt("return",_result4.map((function(x){return x})));case 28:return _context.next=30,readonlyCall("swap-helper-v1-03","route-helper",{"token-x":from,"token-y":to}).then(unwrapResponse);case 30:return result=_context.sent,_context.abrupt("return",result.map((function(x){return x})));case 32:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var getYAmountFromXAmount=function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(tokenX,tokenY,fromAmount,ammPools,ammV1_1Tokens){var ammV1_1Route,ammRoute,reachableInAMMV1_1,reachableInAMM;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(1!==(ammV1_1Route=AMMSwapPool.getRoute(tokenX,tokenY,ammV1_1Tokens)).length){_context.next=5;break}return _context.next=4,readonlyCall("amm-swap-pool-v1-1","get-helper",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,dx:fromAmount,factor:AMMSwapPool.getFactor(ammV1_1Route[0].pool)}).then(unwrapResponse);case 4:case 8:case 12:case 16:case 21:case 25:case 29:case 33:case 38:case 42:case 47:case 51:case 54:return _context.abrupt("return",_context.sent);case 5:if(2!==ammV1_1Route.length){_context.next=9;break}return _context.next=8,readonlyCall("amm-swap-pool-v1-1","get-helper-a",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,"token-z":ammV1_1Route[1].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),dx:fromAmount}).then(unwrapResponse);case 9:if(3!==ammV1_1Route.length){_context.next=13;break}return _context.next=12,readonlyCall("amm-swap-pool-v1-1","get-helper-b",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,"token-z":ammV1_1Route[1].neighbour,"token-w":ammV1_1Route[2].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),"factor-z":AMMSwapPool.getFactor(ammV1_1Route[2].pool),dx:fromAmount}).then(unwrapResponse);case 13:if(4!==ammV1_1Route.length){_context.next=17;break}return _context.next=16,readonlyCall("amm-swap-pool-v1-1","get-helper-c",{"token-x":tokenX,"token-y":ammV1_1Route[0].neighbour,"token-z":ammV1_1Route[1].neighbour,"token-w":ammV1_1Route[2].neighbour,"token-v":ammV1_1Route[3].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),"factor-z":AMMSwapPool.getFactor(ammV1_1Route[2].pool),"factor-w":AMMSwapPool.getFactor(ammV1_1Route[3].pool),dx:fromAmount}).then(unwrapResponse);case 17:if(1!==(ammRoute=AMMSwapPool.getRoute(tokenX,tokenY,ammPools)).length){_context.next=22;break}return _context.next=21,readonlyCall("amm-swap-pool","get-helper",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,dx:fromAmount,factor:AMMSwapPool.getFactor(ammRoute[0].pool)}).then(unwrapResponse);case 22:if(2!==ammRoute.length){_context.next=26;break}return _context.next=25,readonlyCall("amm-swap-pool","get-helper-a",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,"token-z":ammRoute[1].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),dx:fromAmount}).then(unwrapResponse);case 26:if(3!==ammRoute.length){_context.next=30;break}return _context.next=29,readonlyCall("amm-swap-pool","get-helper-b",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,"token-z":ammRoute[1].neighbour,"token-w":ammRoute[2].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),"factor-z":AMMSwapPool.getFactor(ammRoute[2].pool),dx:fromAmount}).then(unwrapResponse);case 30:if(4!==ammRoute.length){_context.next=34;break}return _context.next=33,readonlyCall("amm-swap-pool","get-helper-c",{"token-x":tokenX,"token-y":ammRoute[0].neighbour,"token-z":ammRoute[1].neighbour,"token-w":ammRoute[2].neighbour,"token-v":ammRoute[3].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),"factor-z":AMMSwapPool.getFactor(ammRoute[2].pool),"factor-w":AMMSwapPool.getFactor(ammRoute[3].pool),dx:fromAmount}).then(unwrapResponse);case 34:if("fromAmm"!==(reachableInAMMV1_1=AMMSwapPool.reachableInAMM(tokenX,tokenY,ammV1_1Tokens)).type){_context.next=39;break}return _context.next=38,readonlyCall("swap-helper-bridged-v1-1","get-helper-from-amm",{dx:fromAmount,"token-x":reachableInAMMV1_1.tokenX,"token-y":reachableInAMMV1_1.tokenY,"token-z":reachableInAMMV1_1.tokenZ,"factor-x":reachableInAMMV1_1.factorX}).then(unwrapResponse);case 39:if("toAmm"!==reachableInAMMV1_1.type){_context.next=43;break}return _context.next=42,readonlyCall("swap-helper-bridged-v1-1","get-helper-to-amm",{dx:fromAmount,"token-x":reachableInAMMV1_1.tokenX,"token-y":reachableInAMMV1_1.tokenY,"token-z":reachableInAMMV1_1.tokenZ,"factor-y":reachableInAMMV1_1.factorY}).then(unwrapResponse);case 43:if("fromAmm"!==(reachableInAMM=AMMSwapPool.reachableInAMM(tokenX,tokenY,ammPools)).type){_context.next=48;break}return _context.next=47,readonlyCall("swap-helper-bridged","get-helper-from-amm",{dx:fromAmount,"token-x":reachableInAMM.tokenX,"token-y":reachableInAMM.tokenY,"token-z":reachableInAMM.tokenZ,"factor-x":reachableInAMM.factorX}).then(unwrapResponse);case 48:if("toAmm"!==reachableInAMM.type){_context.next=52;break}return _context.next=51,readonlyCall("swap-helper-bridged","get-helper-to-amm",{dx:fromAmount,"token-x":reachableInAMM.tokenX,"token-y":reachableInAMM.tokenY,"token-z":reachableInAMM.tokenZ,"factor-y":reachableInAMM.factorY}).then(unwrapResponse);case 52:return _context.next=54,readonlyCall("swap-helper-v1-03","get-helper",{"token-x":tokenX,"token-y":tokenY,dx:fromAmount}).then(unwrapResponse);case 55:case"end":return _context.stop()}}),_callee)})));return function getYAmountFromXAmount(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}();function getCurrencyNativeScale(currency){return currency===alex_sdk_esm_Currency.STX?1e6:configs.NATIVE_TOKEN_MAPPING[currency].decimals}function getCurrencyNativeAddress(currency){if(currency===alex_sdk_esm_Currency.STX)throw new Error("STX does not have an address");return configs.NATIVE_TOKEN_MAPPING[currency].assetIdentifier}function _fetchBalanceForAccount(){return(_fetchBalanceForAccount=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(stxAddress){var response,allCurrencies,balances;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetch(configs.API_HOST+"/extended/v1/address/"+stxAddress+"/balances").then((function(a){return a.json()}));case 2:return response=_context.sent,allCurrencies=Object.values(alex_sdk_esm_Currency),balances=allCurrencies.map((function(a){var _response$fungible_to;if(a===alex_sdk_esm_Currency.STX)return BigInt(response.stx.balance)*BigInt(100);var fungibleToken=null==(_response$fungible_to=response.fungible_tokens[getCurrencyNativeAddress(a)])?void 0:_response$fungible_to.balance;return null==fungibleToken?BigInt(0):BigInt(fungibleToken)*BigInt(1e8)/BigInt(getCurrencyNativeScale(a))})),_context.abrupt("return",Object.fromEntries(allCurrencies.map((function(a,i){return[a,balances[i]]}))));case 6:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function transfer(senderAddress,currency,amount,compare){void 0===compare&&(compare=constants_FungibleConditionCode.Equal);var scale=getCurrencyNativeScale(currency),nativeAmount=amount*BigInt(scale)/BigInt(1e8);return currency===alex_sdk_esm_Currency.STX?function postcondition_createSTXPostCondition(principal,conditionCode,amount){return"string"==typeof principal&&(principal=postcondition_types_parsePrincipalString(principal)),{type:constants_StacksMessageType.PostCondition,conditionType:constants_PostConditionType.STX,principal,conditionCode,amount:utils_intToBigInt(amount,!1)}}(senderAddress,compare,nativeAmount):function postcondition_createFungiblePostCondition(principal,conditionCode,amount,assetInfo){return"string"==typeof principal&&(principal=postcondition_types_parsePrincipalString(principal)),"string"==typeof assetInfo&&(assetInfo=postcondition_types_parseAssetInfoString(assetInfo)),{type:constants_StacksMessageType.PostCondition,conditionType:constants_PostConditionType.Fungible,principal,conditionCode,amount:utils_intToBigInt(amount,!1),assetInfo}}(senderAddress,compare,nativeAmount,getCurrencyNativeAddress(currency))}var SponsoredTxErrorCode,composeTx=function composeTx(contractName,functionName,args,postConditions){var clarityArgs=AlexContracts[contractName][functionName].input.map((function(arg){return arg.type.encode(args[arg.name])}));return{contractName,functionName:String(functionName),functionArgs:clarityArgs,contractAddress:configs.CONTRACT_DEPLOYER,postConditions}};function _fetchLatestPrices(){return(_fetchLatestPrices=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var res,result,_loop,_i,_Object$values;return _regeneratorRuntime().wrap((function _callee$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,fetch("https://gql.alexlab.co/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        query FetchLatestPrices {\n          laplace_current_token_price {\n            avg_price_usd\n            token\n          }\n        }\n      "})}).then((function(a){return a.json()}));case 2:res=_context2.sent,result={},_loop=_regeneratorRuntime().mark((function _loop(){var value,external,nonExternal;return _regeneratorRuntime().wrap((function _loop$(_context){for(;;)switch(_context.prev=_context.next){case 0:value=_Object$values[_i],(external=res.data.laplace_current_token_price.find((function(a){return a.token===value+"-external"&&null!=a.avg_price_usd})))?result[value]=external.avg_price_usd:(nonExternal=res.data.laplace_current_token_price.find((function(a){return a.token===value&&null!=a.avg_price_usd})))&&(result[value]=nonExternal.avg_price_usd);case 3:case"end":return _context.stop()}}),_loop)})),_i=0,_Object$values=Object.values(alex_sdk_esm_Currency);case 6:if(!(_i<_Object$values.length)){_context2.next=11;break}return _context2.delegateYield(_loop(),"t0",8);case 8:_i++,_context2.next=6;break;case 11:return _context2.abrupt("return",result);case 12:case"end":return _context2.stop()}}),_callee)})))).apply(this,arguments)}!function(SponsoredTxErrorCode){SponsoredTxErrorCode.invalid_tx="invalid_tx",SponsoredTxErrorCode.operation_not_supported="operation_not_supported",SponsoredTxErrorCode.pending_operation_exists="pending_operation_exists",SponsoredTxErrorCode.capacity_exceed="capacity_exceed",SponsoredTxErrorCode.invalid_nonce="invalid_nonce",SponsoredTxErrorCode.broadcast_error="broadcast_error",SponsoredTxErrorCode.unknown_error="unknown_error"}(SponsoredTxErrorCode||(SponsoredTxErrorCode={}));var SponsoredTxError=function(_Error){function SponsoredTxError(code,message){var _this;return(_this=_Error.call(this,message)||this).code=code,_this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(SponsoredTxError,_Error),SponsoredTxError}(_wrapNativeSuper(Error));function _broadcastSponsoredTx(){return(_broadcastSponsoredTx=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(tx){var response,result,_result$errors$0$mess,_result$errors,_result$errors$,_result$errors2,_result$errors2$,_result$errors2$$exte,message,errorCode,code,txId;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetch(configs.SPONSORED_TX_EXECUTOR,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"mutation run($tx:String!) {\n  execute(tx:$tx)\n}",variables:{tx}})});case 2:if((response=_context.sent).ok){_context.next=5;break}throw new SponsoredTxError(SponsoredTxErrorCode.unknown_error,response.statusText);case 5:return _context.next=7,response.json();case 7:if(null!=(result=_context.sent).data){_context.next=13;break}throw message=null!=(_result$errors$0$mess=null==(_result$errors=result.errors)||null==(_result$errors$=_result$errors[0])?void 0:_result$errors$.message)?_result$errors$0$mess:"Unknown Error",errorCode=null==(_result$errors2=result.errors)||null==(_result$errors2$=_result$errors2[0])||null==(_result$errors2$$exte=_result$errors2$.extensions)?void 0:_result$errors2$$exte.code,code=Object.values(SponsoredTxErrorCode).includes(errorCode)?errorCode:SponsoredTxErrorCode.unknown_error,new SponsoredTxError(code,message);case 13:return txId=result.data.execute,_context.next=16,retry((function(){return tryToFetchTxId(txId)}),10);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function tryToFetchTxId(_x2){return _tryToFetchTxId.apply(this,arguments)}function _tryToFetchTxId(){return(_tryToFetchTxId=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(txId){var response,_yield$response$json,user_operations,operation;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,fetch(configs.SPONSORED_TX_EXECUTOR,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"query checkStatus($txId: bytea!) {\n  user_operations(where:{tx_id:{_eq:$txId}}) {\n    sponsor_tx_id\n    error\n  }\n}",variables:{txId:(input=txId,"\\x"+input)}})});case 2:if((response=_context2.sent).ok){_context2.next=5;break}throw new SponsoredTxError(SponsoredTxErrorCode.unknown_error,response.statusText);case 5:return _context2.next=7,response.json();case 7:if(_yield$response$json=_context2.sent,0!==(user_operations=_yield$response$json.data.user_operations).length){_context2.next=11;break}return _context2.abrupt("return",null);case 11:if(!(operation=user_operations[0]).error){_context2.next=16;break}throw new SponsoredTxError(SponsoredTxErrorCode.broadcast_error,operation.error);case 16:if(!operation.sponsor_tx_id){_context2.next=18;break}return _context2.abrupt("return",hasuraAddressToHex(operation.sponsor_tx_id));case 18:return _context2.abrupt("return",null);case 19:case"end":return _context2.stop()}var input}),_callee2)})))).apply(this,arguments)}function retry(_x3,_x4){return _retry.apply(this,arguments)}function _retry(){return(_retry=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(action,count){var i,result;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:void 0===count&&(count=20),i=0;case 2:if(!(i<count)){_context3.next=14;break}return _context3.next=5,action();case 5:if(null!==(result=_context3.sent)){_context3.next=10;break}return _context3.next=9,new Promise((function(resolve){return setTimeout(resolve,1e3)}));case 9:return _context3.abrupt("continue",11);case 10:return _context3.abrupt("return",result);case 11:i++,_context3.next=2;break;case 14:throw new SponsoredTxError(SponsoredTxErrorCode.broadcast_error,"Timeout waiting for broadcast");case 15:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function hasuraAddressToHex(input){return input.replace(/\\x/,"0x").toLowerCase()}function _isSponsoredSwapEnabled(){return(_isSponsoredSwapEnabled=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var response,result;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,fetch(configs.SPONSORED_TX_EXECUTOR,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"query {\n  isSwapServiceAvailable {\n    status\n  }\n}"})});case 2:if((response=_context4.sent).ok){_context4.next=5;break}return _context4.abrupt("return",!1);case 5:return _context4.next=7,response.json();case 7:return result=_context4.sent,_context4.abrupt("return","ok"===(null==result?void 0:result.data.isSwapServiceAvailable.status));case 9:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}function fetchTokenList(){return fetch("https://token-list.alexlab.co",{mode:"cors"}).then((function(res){return res.json()})).then((function(data){return data.tokens}))}function _fetchSwappableCurrency(){return(_fetchSwappableCurrency=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var tokens;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetchTokenList();case 2:return tokens=_context.sent,_context.abrupt("return",tokens.filter((function(x){return x.availableInSwap&&Object.values(alex_sdk_esm_Currency).includes(x.id)})));case 4:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var AlexSDK=function(){function AlexSDK(){}AlexSDK.configure=function configure(config){!function assignConfig(newConfigs){Object.assign(configs,newConfigs,{NATIVE_TOKEN_MAPPING:_extends({},NATIVE_TOKEN_MAPPING,newConfigs.NATIVE_TOKEN_MAPPING)})}(config)};var _proto=AlexSDK.prototype;return _proto.getBalances=function getBalances(stxAddress){return function fetchBalanceForAccount(_x){return _fetchBalanceForAccount.apply(this,arguments)}(stxAddress)},_proto.getFeeRate=function getFeeRate(from,to){return function getLiquidityProviderFee(_x,_x2,_x3,_x4){return _getLiquidityProviderFee.apply(this,arguments)}(from,to,AMMSwapPool.ammTokens,AMMSwapPool.ammV1_1Tokens)},_proto.getRouter=function getRouter(from,to){return function getRoute(_x,_x2,_x3,_x4){return _getRoute.apply(this,arguments)}(from,to,AMMSwapPool.ammTokens,AMMSwapPool.ammV1_1Tokens)},_proto.getAmountTo=function getAmountTo(from,fromAmount,to){return getYAmountFromXAmount(from,to,fromAmount,AMMSwapPool.ammTokens,AMMSwapPool.ammV1_1Tokens)},_proto.runSwap=function runSwap(stxAddress,currencyX,currencyY,fromAmount,minDy,router){return function runSpot(stxAddress,currencyX,currencyY,fromAmount,minDy,router,ammPools,ammV1_1Pools){var middleSteps=router.slice(1,-1),AlexVault=configs.CONTRACT_DEPLOYER+".alex-vault",AlexVaultV1_1=configs.CONTRACT_DEPLOYER+".alex-vault-v1-1",ammV1_1Route=AMMSwapPool.getRoute(currencyX,currencyY,ammV1_1Pools);if(1===ammV1_1Route.length)return composeTx("amm-swap-pool-v1-1","swap-helper",{"token-x-trait":currencyX,"token-y-trait":ammV1_1Route[0].neighbour,factor:AMMSwapPool.getFactor(ammV1_1Route[0].pool),dx:fromAmount,"min-dy":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVaultV1_1,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);if(2===ammV1_1Route.length)return composeTx("amm-swap-pool-v1-1","swap-helper-a",{"token-x-trait":currencyX,"token-y-trait":ammV1_1Route[0].neighbour,"token-z-trait":ammV1_1Route[1].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),dx:fromAmount,"min-dz":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVaultV1_1,ammV1_1Route[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammV1_1Route[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVaultV1_1,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);if(3===ammV1_1Route.length)return composeTx("amm-swap-pool-v1-1","swap-helper-b",{"token-x-trait":currencyX,"token-y-trait":ammV1_1Route[0].neighbour,"token-z-trait":ammV1_1Route[1].neighbour,"token-w-trait":ammV1_1Route[2].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),"factor-z":AMMSwapPool.getFactor(ammV1_1Route[2].pool),dx:fromAmount,"min-dw":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVaultV1_1,ammV1_1Route[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammV1_1Route[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVaultV1_1,ammV1_1Route[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammV1_1Route[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVaultV1_1,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);if(4===ammV1_1Route.length)return composeTx("amm-swap-pool-v1-1","swap-helper-c",{"token-x-trait":currencyX,"token-y-trait":ammV1_1Route[0].neighbour,"token-z-trait":ammV1_1Route[1].neighbour,"token-w-trait":ammV1_1Route[2].neighbour,"token-v-trait":ammV1_1Route[3].neighbour,"factor-x":AMMSwapPool.getFactor(ammV1_1Route[0].pool),"factor-y":AMMSwapPool.getFactor(ammV1_1Route[1].pool),"factor-z":AMMSwapPool.getFactor(ammV1_1Route[2].pool),"factor-w":AMMSwapPool.getFactor(ammV1_1Route[3].pool),dx:fromAmount,"min-dv":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVaultV1_1,ammV1_1Route[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammV1_1Route[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVaultV1_1,ammV1_1Route[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammV1_1Route[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVaultV1_1,ammV1_1Route[2].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammV1_1Route[2].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVaultV1_1,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);var ammRoute=AMMSwapPool.getRoute(currencyX,currencyY,ammPools);if(1===ammRoute.length)return composeTx("amm-swap-pool","swap-helper",{"token-x-trait":currencyX,"token-y-trait":ammRoute[0].neighbour,factor:AMMSwapPool.getFactor(ammRoute[0].pool),dx:fromAmount,"min-dy":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);if(2===ammRoute.length)return composeTx("amm-swap-pool","swap-helper-a",{"token-x-trait":currencyX,"token-y-trait":ammRoute[0].neighbour,"token-z-trait":ammRoute[1].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),dx:fromAmount,"min-dz":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVault,ammRoute[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammRoute[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);if(3===ammRoute.length)return composeTx("amm-swap-pool","swap-helper-b",{"token-x-trait":currencyX,"token-y-trait":ammRoute[0].neighbour,"token-z-trait":ammRoute[1].neighbour,"token-w-trait":ammRoute[2].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),"factor-z":AMMSwapPool.getFactor(ammRoute[2].pool),dx:fromAmount,"min-dw":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVault,ammRoute[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammRoute[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVault,ammRoute[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammRoute[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);if(4===ammRoute.length)return composeTx("amm-swap-pool","swap-helper-c",{"token-x-trait":currencyX,"token-y-trait":ammRoute[0].neighbour,"token-z-trait":ammRoute[1].neighbour,"token-w-trait":ammRoute[2].neighbour,"token-v-trait":ammRoute[3].neighbour,"factor-x":AMMSwapPool.getFactor(ammRoute[0].pool),"factor-y":AMMSwapPool.getFactor(ammRoute[1].pool),"factor-z":AMMSwapPool.getFactor(ammRoute[2].pool),"factor-w":AMMSwapPool.getFactor(ammRoute[3].pool),dx:fromAmount,"min-dv":minDy},[transfer(stxAddress,currencyX,fromAmount),transfer(AlexVault,ammRoute[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammRoute[0].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVault,ammRoute[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammRoute[1].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVault,ammRoute[2].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,ammRoute[2].neighbour,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]);var reachableInAMMV1_1=AMMSwapPool.reachableInAMM(currencyX,currencyY,ammPools);if("fromAmm"===reachableInAMMV1_1.type)return composeTx("swap-helper-bridged-v1-1","swap-helper-from-amm",{"token-x-trait":reachableInAMMV1_1.tokenX,"token-y-trait":reachableInAMMV1_1.tokenY,"token-z-trait":reachableInAMMV1_1.tokenZ,dx:fromAmount,"min-dz":minDy,"factor-x":reachableInAMMV1_1.factorX},[transfer(stxAddress,currencyX,fromAmount)].concat(middleSteps.flatMap((function(middle,index){return[transfer(0===index?AlexVaultV1_1:AlexVault,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual)]})),[transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]));if("toAmm"===reachableInAMMV1_1.type)return composeTx("swap-helper-bridged-v1-1","swap-helper-to-amm",{"token-x-trait":reachableInAMMV1_1.tokenX,"token-y-trait":reachableInAMMV1_1.tokenY,"token-z-trait":reachableInAMMV1_1.tokenZ,dx:fromAmount,"min-dz":minDy,"factor-y":reachableInAMMV1_1.factorY},[transfer(stxAddress,currencyX,fromAmount)].concat(middleSteps.flatMap((function(middle){return[transfer(AlexVault,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual)]})),[transfer(AlexVaultV1_1,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]));var reachableInAMM=AMMSwapPool.reachableInAMM(currencyX,currencyY,ammPools);return"fromAmm"===reachableInAMM.type?composeTx("swap-helper-bridged","swap-helper-from-amm",{"token-x-trait":reachableInAMM.tokenX,"token-y-trait":reachableInAMM.tokenY,"token-z-trait":reachableInAMM.tokenZ,dx:fromAmount,"min-dz":minDy,"factor-x":reachableInAMM.factorX},[transfer(stxAddress,currencyX,fromAmount)].concat(middleSteps.flatMap((function(middle,index){return[transfer(0===index?AlexVaultV1_1:AlexVault,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual)]})),[transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)])):"toAmm"===reachableInAMM.type?composeTx("swap-helper-bridged","swap-helper-to-amm",{"token-x-trait":reachableInAMM.tokenX,"token-y-trait":reachableInAMM.tokenY,"token-z-trait":reachableInAMM.tokenZ,dx:fromAmount,"min-dz":minDy,"factor-y":reachableInAMM.factorY},[transfer(stxAddress,currencyX,fromAmount)].concat(middleSteps.flatMap((function(middle){return[transfer(AlexVault,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual)]})),[transfer(AlexVaultV1_1,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)])):composeTx("swap-helper-v1-03","swap-helper",{"token-x-trait":currencyX,"token-y-trait":currencyY,dx:fromAmount,"min-dy":minDy},[transfer(stxAddress,currencyX,fromAmount)].concat(middleSteps.flatMap((function(middle){return[transfer(AlexVault,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual),transfer(stxAddress,middle,BigInt(0),constants_FungibleConditionCode.GreaterEqual)]})),[transfer(AlexVault,currencyY,minDy,constants_FungibleConditionCode.GreaterEqual)]))}(stxAddress,currencyX,currencyY,fromAmount,minDy,router,AMMSwapPool.ammTokens,AMMSwapPool.ammV1_1Tokens)},_proto.getCurrencyFrom=function getCurrencyFrom(address){return function findCurrencyByNativeAddress(address){return Object.values(alex_sdk_esm_Currency).filter((function(a){return a!==alex_sdk_esm_Currency.STX})).find((function(a){return getCurrencyNativeAddress(a).split("::")[0]===address.split("::")[0]}))}(address)},_proto.getAddressFrom=function getAddressFrom(currency){return getCurrencyNativeAddress(currency)},_proto.getLatestPrices=function getLatestPrices(){return function fetchLatestPrices(){return _fetchLatestPrices.apply(this,arguments)}()},_proto.isAlexSwapTransaction=function isAlexSwapTransaction(deployer,contractName,functionName){return deployer===configs.CONTRACT_DEPLOYER&&null!=AlexContracts[contractName][functionName]},_proto.broadcastSponsoredTx=function broadcastSponsoredTx$1(txRaw){return function broadcastSponsoredTx(_x){return _broadcastSponsoredTx.apply(this,arguments)}(txRaw)},_proto.isSponsoredSwapEnabled=function isSponsoredSwapEnabled$1(){return function isSponsoredSwapEnabled(){return _isSponsoredSwapEnabled.apply(this,arguments)}().catch((function(){return!1}))},_proto.fetchTokenList=function fetchTokenList$1(){return fetchTokenList()},_proto.fetchSwappableCurrency=function fetchSwappableCurrency$1(){return function fetchSwappableCurrency(){return _fetchSwappableCurrency.apply(this,arguments)}()},AlexSDK}(),modern_utils=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),notifyManager=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/notifyManager.js"),focusManager=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/focusManager.js"),subscribable=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/subscribable.js"),modern_query=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/query.js"),QueryObserver=class extends subscribable.Q{constructor(client,options){super(),this.options=options,this.#client=client,this.#selectError=null,this.bindMethods(),this.setOptions(options)}#client;#currentQuery=void 0;#currentQueryInitialState=void 0;#currentResult=void 0;#currentResultState;#currentResultOptions;#selectError;#selectFn;#selectResult;#lastQueryWithDefinedData;#staleTimeoutId;#refetchIntervalId;#currentRefetchInterval;#trackedProps=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#currentQuery.addObserver(this),shouldFetchOnMount(this.#currentQuery,this.options)?this.#executeFetch():this.updateResult(),this.#updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#clearStaleTimeout(),this.#clearRefetchInterval(),this.#currentQuery.removeObserver(this)}setOptions(options,notifyOptions){const prevOptions=this.options,prevQuery=this.#currentQuery;if(this.options=this.#client.defaultQueryOptions(options),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.#updateQuery(),this.#currentQuery.setOptions(this.options),prevOptions._defaulted&&!(0,modern_utils.f8)(this.options,prevOptions)&&this.#client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#currentQuery,observer:this});const mounted=this.hasListeners();mounted&&shouldFetchOptionally(this.#currentQuery,prevQuery,this.options,prevOptions)&&this.#executeFetch(),this.updateResult(notifyOptions),!mounted||this.#currentQuery===prevQuery&&this.options.enabled===prevOptions.enabled&&(0,modern_utils.d2)(this.options.staleTime,this.#currentQuery)===(0,modern_utils.d2)(prevOptions.staleTime,this.#currentQuery)||this.#updateStaleTimeout();const nextRefetchInterval=this.#computeRefetchInterval();!mounted||this.#currentQuery===prevQuery&&this.options.enabled===prevOptions.enabled&&nextRefetchInterval===this.#currentRefetchInterval||this.#updateRefetchInterval(nextRefetchInterval)}getOptimisticResult(options){const query=this.#client.getQueryCache().build(this.#client,options),result=this.createResult(query,options);return function shouldAssignObserverCurrentProperties(observer,optimisticResult){if(!(0,modern_utils.f8)(observer.getCurrentResult(),optimisticResult))return!0;return!1}(this,result)&&(this.#currentResult=result,this.#currentResultOptions=this.options,this.#currentResultState=this.#currentQuery.state),result}getCurrentResult(){return this.#currentResult}trackResult(result,onPropTracked){const trackedResult={};return Object.keys(result).forEach((key=>{Object.defineProperty(trackedResult,key,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(key),onPropTracked?.(key),result[key])})})),trackedResult}trackProp(key){this.#trackedProps.add(key)}getCurrentQuery(){return this.#currentQuery}refetch({...options}={}){return this.fetch({...options})}fetchOptimistic(options){const defaultedOptions=this.#client.defaultQueryOptions(options),query=this.#client.getQueryCache().build(this.#client,defaultedOptions);return query.isFetchingOptimistic=!0,query.fetch().then((()=>this.createResult(query,defaultedOptions)))}fetch(fetchOptions){return this.#executeFetch({...fetchOptions,cancelRefetch:fetchOptions.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#currentResult)))}#executeFetch(fetchOptions){this.#updateQuery();let promise=this.#currentQuery.fetch(this.options,fetchOptions);return fetchOptions?.throwOnError||(promise=promise.catch(modern_utils.lQ)),promise}#updateStaleTimeout(){this.#clearStaleTimeout();const staleTime=(0,modern_utils.d2)(this.options.staleTime,this.#currentQuery);if(modern_utils.S$||this.#currentResult.isStale||!(0,modern_utils.gn)(staleTime))return;const timeout=(0,modern_utils.j3)(this.#currentResult.dataUpdatedAt,staleTime)+1;this.#staleTimeoutId=setTimeout((()=>{this.#currentResult.isStale||this.updateResult()}),timeout)}#computeRefetchInterval(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#currentQuery):this.options.refetchInterval)??!1}#updateRefetchInterval(nextInterval){this.#clearRefetchInterval(),this.#currentRefetchInterval=nextInterval,!modern_utils.S$&&!1!==this.options.enabled&&(0,modern_utils.gn)(this.#currentRefetchInterval)&&0!==this.#currentRefetchInterval&&(this.#refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||focusManager.m.isFocused())&&this.#executeFetch()}),this.#currentRefetchInterval))}#updateTimers(){this.#updateStaleTimeout(),this.#updateRefetchInterval(this.#computeRefetchInterval())}#clearStaleTimeout(){this.#staleTimeoutId&&(clearTimeout(this.#staleTimeoutId),this.#staleTimeoutId=void 0)}#clearRefetchInterval(){this.#refetchIntervalId&&(clearInterval(this.#refetchIntervalId),this.#refetchIntervalId=void 0)}createResult(query,options){const prevQuery=this.#currentQuery,prevOptions=this.options,prevResult=this.#currentResult,prevResultState=this.#currentResultState,prevResultOptions=this.#currentResultOptions,queryInitialState=query!==prevQuery?query.state:this.#currentQueryInitialState,{state}=query;let data,newState={...state},isPlaceholderData=!1;if(options._optimisticResults){const mounted=this.hasListeners(),fetchOnMount=!mounted&&shouldFetchOnMount(query,options),fetchOptionally=mounted&&shouldFetchOptionally(query,prevQuery,options,prevOptions);(fetchOnMount||fetchOptionally)&&(newState={...newState,...(0,modern_query.k)(state.data,query.options)}),"isRestoring"===options._optimisticResults&&(newState.fetchStatus="idle")}let{error,errorUpdatedAt,status}=newState;if(options.select&&void 0!==newState.data)if(prevResult&&newState.data===prevResultState?.data&&options.select===this.#selectFn)data=this.#selectResult;else try{this.#selectFn=options.select,data=options.select(newState.data),data=(0,modern_utils.pl)(prevResult?.data,data,options),this.#selectResult=data,this.#selectError=null}catch(selectError){this.#selectError=selectError}else data=newState.data;if(void 0!==options.placeholderData&&void 0===data&&"pending"===status){let placeholderData;if(prevResult?.isPlaceholderData&&options.placeholderData===prevResultOptions?.placeholderData)placeholderData=prevResult.data;else if(placeholderData="function"==typeof options.placeholderData?options.placeholderData(this.#lastQueryWithDefinedData?.state.data,this.#lastQueryWithDefinedData):options.placeholderData,options.select&&void 0!==placeholderData)try{placeholderData=options.select(placeholderData),this.#selectError=null}catch(selectError){this.#selectError=selectError}void 0!==placeholderData&&(status="success",data=(0,modern_utils.pl)(prevResult?.data,placeholderData,options),isPlaceholderData=!0)}this.#selectError&&(error=this.#selectError,data=this.#selectResult,errorUpdatedAt=Date.now(),status="error");const isFetching="fetching"===newState.fetchStatus,isPending="pending"===status,isError="error"===status,isLoading=isPending&&isFetching,hasData=void 0!==data;return{status,fetchStatus:newState.fetchStatus,isPending,isSuccess:"success"===status,isError,isInitialLoading:isLoading,isLoading,data,dataUpdatedAt:newState.dataUpdatedAt,error,errorUpdatedAt,failureCount:newState.fetchFailureCount,failureReason:newState.fetchFailureReason,errorUpdateCount:newState.errorUpdateCount,isFetched:newState.dataUpdateCount>0||newState.errorUpdateCount>0,isFetchedAfterMount:newState.dataUpdateCount>queryInitialState.dataUpdateCount||newState.errorUpdateCount>queryInitialState.errorUpdateCount,isFetching,isRefetching:isFetching&&!isPending,isLoadingError:isError&&!hasData,isPaused:"paused"===newState.fetchStatus,isPlaceholderData,isRefetchError:isError&&hasData,isStale:isStale(query,options),refetch:this.refetch}}updateResult(notifyOptions){const prevResult=this.#currentResult,nextResult=this.createResult(this.#currentQuery,this.options);if(this.#currentResultState=this.#currentQuery.state,this.#currentResultOptions=this.options,void 0!==this.#currentResultState.data&&(this.#lastQueryWithDefinedData=this.#currentQuery),(0,modern_utils.f8)(nextResult,prevResult))return;this.#currentResult=nextResult;const defaultNotifyOptions={};!1!==notifyOptions?.listeners&&(()=>{if(!prevResult)return!0;const{notifyOnChangeProps}=this.options,notifyOnChangePropsValue="function"==typeof notifyOnChangeProps?notifyOnChangeProps():notifyOnChangeProps;if("all"===notifyOnChangePropsValue||!notifyOnChangePropsValue&&!this.#trackedProps.size)return!0;const includedProps=new Set(notifyOnChangePropsValue??this.#trackedProps);return this.options.throwOnError&&includedProps.add("error"),Object.keys(this.#currentResult).some((key=>{const typedKey=key;return this.#currentResult[typedKey]!==prevResult[typedKey]&&includedProps.has(typedKey)}))})()&&(defaultNotifyOptions.listeners=!0),this.#notify({...defaultNotifyOptions,...notifyOptions})}#updateQuery(){const query=this.#client.getQueryCache().build(this.#client,this.options);if(query===this.#currentQuery)return;const prevQuery=this.#currentQuery;this.#currentQuery=query,this.#currentQueryInitialState=query.state,this.hasListeners()&&(prevQuery?.removeObserver(this),query.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#updateTimers()}#notify(notifyOptions){notifyManager.j.batch((()=>{notifyOptions.listeners&&this.listeners.forEach((listener=>{listener(this.#currentResult)})),this.#client.getQueryCache().notify({query:this.#currentQuery,type:"observerResultsUpdated"})}))}};function shouldFetchOnMount(query,options){return function shouldLoadOnMount(query,options){return!1!==options.enabled&&void 0===query.state.data&&!("error"===query.state.status&&!1===options.retryOnMount)}(query,options)||void 0!==query.state.data&&shouldFetchOn(query,options,options.refetchOnMount)}function shouldFetchOn(query,options,field){if(!1!==options.enabled){const value="function"==typeof field?field(query):field;return"always"===value||!1!==value&&isStale(query,options)}return!1}function shouldFetchOptionally(query,prevQuery,options,prevOptions){return(query!==prevQuery||!1===prevOptions.enabled)&&(!options.suspense||"error"!==query.state.status)&&isStale(query,options)}function isStale(query,options){return!1!==options.enabled&&query.isStaleByTime((0,modern_utils.d2)(options.staleTime,query))}function createValue(){let isReset=!1;return{clearReset:()=>{isReset=!1},reset:()=>{isReset=!0},isReset:()=>isReset}}var QueryErrorResetBoundaryContext=react.createContext(createValue()),useQueryErrorResetBoundary=()=>react.useContext(QueryErrorResetBoundaryContext),modern_QueryClientProvider=__webpack_require__("./node_modules/.pnpm/@tanstack+react-query@5.45.1_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),IsRestoringContext=react.createContext(!1),useIsRestoring=()=>react.useContext(IsRestoringContext);IsRestoringContext.Provider;var ensurePreventErrorBoundaryRetry=(options,errorResetBoundary)=>{(options.suspense||options.throwOnError)&&(errorResetBoundary.isReset()||(options.retryOnMount=!1))},useClearResetErrorBoundary=errorResetBoundary=>{react.useEffect((()=>{errorResetBoundary.clearReset()}),[errorResetBoundary])},getHasError=({result,errorResetBoundary,throwOnError,query})=>result.isError&&!errorResetBoundary.isReset()&&!result.isFetching&&query&&function shouldThrowError(throwError,params){return"function"==typeof throwError?throwError(...params):!!throwError}(throwOnError,[result.error,query]),ensureStaleTime=defaultedOptions=>{defaultedOptions.suspense&&"number"!=typeof defaultedOptions.staleTime&&(defaultedOptions.staleTime=1e3)},shouldSuspend=(defaultedOptions,result)=>defaultedOptions?.suspense&&result.isPending,fetchOptimistic=(defaultedOptions,observer,errorResetBoundary)=>observer.fetchOptimistic(defaultedOptions).catch((()=>{errorResetBoundary.clearReset()}));function useQuery_useQuery(options,queryClient){return function useBaseQuery(options,Observer,queryClient){const client=(0,modern_QueryClientProvider.jE)(queryClient),isRestoring=useIsRestoring(),errorResetBoundary=useQueryErrorResetBoundary(),defaultedOptions=client.defaultQueryOptions(options);defaultedOptions._optimisticResults=isRestoring?"isRestoring":"optimistic",ensureStaleTime(defaultedOptions),ensurePreventErrorBoundaryRetry(defaultedOptions,errorResetBoundary),useClearResetErrorBoundary(errorResetBoundary);const[observer]=react.useState((()=>new Observer(client,defaultedOptions))),result=observer.getOptimisticResult(defaultedOptions);if(react.useSyncExternalStore(react.useCallback((onStoreChange=>{const unsubscribe=isRestoring?()=>{}:observer.subscribe(notifyManager.j.batchCalls(onStoreChange));return observer.updateResult(),unsubscribe}),[observer,isRestoring]),(()=>observer.getCurrentResult()),(()=>observer.getCurrentResult())),react.useEffect((()=>{observer.setOptions(defaultedOptions,{listeners:!1})}),[defaultedOptions,observer]),shouldSuspend(defaultedOptions,result))throw fetchOptimistic(defaultedOptions,observer,errorResetBoundary);if(getHasError({result,errorResetBoundary,throwOnError:defaultedOptions.throwOnError,query:client.getQueryCache().get(defaultedOptions.queryHash)}))throw result.error;return defaultedOptions.notifyOnChangeProps?result:observer.trackResult(result)}(options,QueryObserver,queryClient)}function bind(fn,thisArg){return function wrap(){return fn.apply(thisArg,arguments)}}const{toString:utils_toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(cache=Object.create(null),thing=>{const str=utils_toString.call(thing);return cache[str]||(cache[str]=str.slice(8,-1).toLowerCase())});var cache;const kindOfTest=type=>(type=type.toLowerCase(),thing=>kindOf(thing)===type),typeOfTest=type=>thing=>typeof thing===type,{isArray}=Array,utils_isUndefined=typeOfTest("undefined");const isArrayBuffer=kindOfTest("ArrayBuffer");const utils_isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),utils_isObject=thing=>null!==thing&&"object"==typeof thing,utils_isPlainObject=val=>{if("object"!==kindOf(val))return!1;const prototype=getPrototypeOf(val);return!(null!==prototype&&prototype!==Object.prototype&&null!==Object.getPrototypeOf(prototype)||Symbol.toStringTag in val||Symbol.iterator in val)},utils_isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isURLSearchParams=kindOfTest("URLSearchParams");function forEach(obj,fn,{allOwnKeys=!1}={}){if(null==obj)return;let i,l;if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else{const keys=allOwnKeys?Object.getOwnPropertyNames(obj):Object.keys(obj),len=keys.length;let key;for(i=0;i<len;i++)key=keys[i],fn.call(null,obj[key],key,obj)}}function findKey(obj,key){key=key.toLowerCase();const keys=Object.keys(obj);let _key,i=keys.length;for(;i-- >0;)if(_key=keys[i],key===_key.toLowerCase())return _key;return null}const _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:__webpack_require__.g,isContextDefined=context=>!utils_isUndefined(context)&&context!==_global;const isTypedArray=(TypedArray="undefined"!=typeof Uint8Array&&getPrototypeOf(Uint8Array),thing=>TypedArray&&thing instanceof TypedArray);var TypedArray;const isHTMLForm=kindOfTest("HTMLFormElement"),utils_hasOwnProperty=(({hasOwnProperty})=>(obj,prop)=>hasOwnProperty.call(obj,prop))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(obj,reducer)=>{const descriptors=Object.getOwnPropertyDescriptors(obj),reducedDescriptors={};forEach(descriptors,((descriptor,name)=>{let ret;!1!==(ret=reducer(descriptor,name,obj))&&(reducedDescriptors[name]=ret||descriptor)})),Object.defineProperties(obj,reducedDescriptors)},ALPHA="abcdefghijklmnopqrstuvwxyz",ALPHABET={DIGIT:"0123456789",ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+"0123456789"};const isAsyncFn=kindOfTest("AsyncFunction"),lib_utils={isArray,isArrayBuffer,isBuffer:function isBuffer(val){return null!==val&&!utils_isUndefined(val)&&null!==val.constructor&&!utils_isUndefined(val.constructor)&&isFunction(val.constructor.isBuffer)&&val.constructor.isBuffer(val)},isFormData:thing=>{let kind;return thing&&("function"==typeof FormData&&thing instanceof FormData||isFunction(thing.append)&&("formdata"===(kind=kindOf(thing))||"object"===kind&&isFunction(thing.toString)&&"[object FormData]"===thing.toString()))},isArrayBufferView:function isArrayBufferView(val){let result;return result="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&isArrayBuffer(val.buffer),result},isString:utils_isString,isNumber,isBoolean:thing=>!0===thing||!1===thing,isObject:utils_isObject,isPlainObject:utils_isPlainObject,isUndefined:utils_isUndefined,isDate:utils_isDate,isFile,isBlob,isRegExp,isFunction,isStream:val=>utils_isObject(val)&&isFunction(val.pipe),isURLSearchParams,isTypedArray,isFileList,forEach,merge:function merge(){const{caseless}=isContextDefined(this)&&this||{},result={},assignValue=(val,key)=>{const targetKey=caseless&&findKey(result,key)||key;utils_isPlainObject(result[targetKey])&&utils_isPlainObject(val)?result[targetKey]=merge(result[targetKey],val):utils_isPlainObject(val)?result[targetKey]=merge({},val):isArray(val)?result[targetKey]=val.slice():result[targetKey]=val};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&forEach(arguments[i],assignValue);return result},extend:(a,b,thisArg,{allOwnKeys}={})=>(forEach(b,((val,key)=>{thisArg&&isFunction(val)?a[key]=bind(val,thisArg):a[key]=val}),{allOwnKeys}),a),trim:str=>str.trim?str.trim():str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:content=>(65279===content.charCodeAt(0)&&(content=content.slice(1)),content),inherits:(constructor,superConstructor,props,descriptors)=>{constructor.prototype=Object.create(superConstructor.prototype,descriptors),constructor.prototype.constructor=constructor,Object.defineProperty(constructor,"super",{value:superConstructor.prototype}),props&&Object.assign(constructor.prototype,props)},toFlatObject:(sourceObj,destObj,filter,propFilter)=>{let props,i,prop;const merged={};if(destObj=destObj||{},null==sourceObj)return destObj;do{for(props=Object.getOwnPropertyNames(sourceObj),i=props.length;i-- >0;)prop=props[i],propFilter&&!propFilter(prop,sourceObj,destObj)||merged[prop]||(destObj[prop]=sourceObj[prop],merged[prop]=!0);sourceObj=!1!==filter&&getPrototypeOf(sourceObj)}while(sourceObj&&(!filter||filter(sourceObj,destObj))&&sourceObj!==Object.prototype);return destObj},kindOf,kindOfTest,endsWith:(str,searchString,position)=>{str=String(str),(void 0===position||position>str.length)&&(position=str.length),position-=searchString.length;const lastIndex=str.indexOf(searchString,position);return-1!==lastIndex&&lastIndex===position},toArray:thing=>{if(!thing)return null;if(isArray(thing))return thing;let i=thing.length;if(!isNumber(i))return null;const arr=new Array(i);for(;i-- >0;)arr[i]=thing[i];return arr},forEachEntry:(obj,fn)=>{const iterator=(obj&&obj[Symbol.iterator]).call(obj);let result;for(;(result=iterator.next())&&!result.done;){const pair=result.value;fn.call(obj,pair[0],pair[1])}},matchAll:(regExp,str)=>{let matches;const arr=[];for(;null!==(matches=regExp.exec(str));)arr.push(matches);return arr},isHTMLForm,hasOwnProperty:utils_hasOwnProperty,hasOwnProp:utils_hasOwnProperty,reduceDescriptors,freezeMethods:obj=>{reduceDescriptors(obj,((descriptor,name)=>{if(isFunction(obj)&&-1!==["arguments","caller","callee"].indexOf(name))return!1;const value=obj[name];isFunction(value)&&(descriptor.enumerable=!1,"writable"in descriptor?descriptor.writable=!1:descriptor.set||(descriptor.set=()=>{throw Error("Can not rewrite read-only method '"+name+"'")}))}))},toObjectSet:(arrayOrString,delimiter)=>{const obj={},define=arr=>{arr.forEach((value=>{obj[value]=!0}))};return isArray(arrayOrString)?define(arrayOrString):define(String(arrayOrString).split(delimiter)),obj},toCamelCase:str=>str.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function replacer(m,p1,p2){return p1.toUpperCase()+p2})),noop:()=>{},toFiniteNumber:(value,defaultValue)=>(value=+value,Number.isFinite(value)?value:defaultValue),findKey,global:_global,isContextDefined,ALPHABET,generateString:(size=16,alphabet=ALPHABET.ALPHA_DIGIT)=>{let str="";const{length}=alphabet;for(;size--;)str+=alphabet[Math.random()*length|0];return str},isSpecCompliantForm:function isSpecCompliantForm(thing){return!!(thing&&isFunction(thing.append)&&"FormData"===thing[Symbol.toStringTag]&&thing[Symbol.iterator])},toJSONObject:obj=>{const stack=new Array(10),visit=(source,i)=>{if(utils_isObject(source)){if(stack.indexOf(source)>=0)return;if(!("toJSON"in source)){stack[i]=source;const target=isArray(source)?[]:{};return forEach(source,((value,key)=>{const reducedValue=visit(value,i+1);!utils_isUndefined(reducedValue)&&(target[key]=reducedValue)})),stack[i]=void 0,target}}return source};return visit(obj,0)},isAsyncFn,isThenable:thing=>thing&&(utils_isObject(thing)||isFunction(thing))&&isFunction(thing.then)&&isFunction(thing.catch)};function AxiosError(message,code,config,request,response){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=message,this.name="AxiosError",code&&(this.code=code),config&&(this.config=config),request&&(this.request=request),response&&(this.response=response)}lib_utils.inherits(AxiosError,Error,{toJSON:function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lib_utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const AxiosError_prototype=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((code=>{descriptors[code]={value:code}})),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(AxiosError_prototype,"isAxiosError",{value:!0}),AxiosError.from=(error,code,config,request,response,customProps)=>{const axiosError=Object.create(AxiosError_prototype);return lib_utils.toFlatObject(error,axiosError,(function filter(obj){return obj!==Error.prototype}),(prop=>"isAxiosError"!==prop)),AxiosError.call(axiosError,error.message,code,config,request,response),axiosError.cause=error,axiosError.name=error.name,customProps&&Object.assign(axiosError,customProps),axiosError};const core_AxiosError=AxiosError;var toFormData_Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;function isVisitable(thing){return lib_utils.isPlainObject(thing)||lib_utils.isArray(thing)}function removeBrackets(key){return lib_utils.endsWith(key,"[]")?key.slice(0,-2):key}function renderKey(path,key,dots){return path?path.concat(key).map((function each(token,i){return token=removeBrackets(token),!dots&&i?"["+token+"]":token})).join(dots?".":""):key}const predicates=lib_utils.toFlatObject(lib_utils,{},null,(function filter(prop){return/^is[A-Z]/.test(prop)}));const helpers_toFormData=function toFormData(obj,formData,options){if(!lib_utils.isObject(obj))throw new TypeError("target must be an object");formData=formData||new FormData;const metaTokens=(options=lib_utils.toFlatObject(options,{metaTokens:!0,dots:!1,indexes:!1},!1,(function defined(option,source){return!lib_utils.isUndefined(source[option])}))).metaTokens,visitor=options.visitor||defaultVisitor,dots=options.dots,indexes=options.indexes,useBlob=(options.Blob||"undefined"!=typeof Blob&&Blob)&&lib_utils.isSpecCompliantForm(formData);if(!lib_utils.isFunction(visitor))throw new TypeError("visitor must be a function");function convertValue(value){if(null===value)return"";if(lib_utils.isDate(value))return value.toISOString();if(!useBlob&&lib_utils.isBlob(value))throw new core_AxiosError("Blob is not supported. Use a Buffer instead.");return lib_utils.isArrayBuffer(value)||lib_utils.isTypedArray(value)?useBlob&&"function"==typeof Blob?new Blob([value]):toFormData_Buffer.from(value):value}function defaultVisitor(value,key,path){let arr=value;if(value&&!path&&"object"==typeof value)if(lib_utils.endsWith(key,"{}"))key=metaTokens?key:key.slice(0,-2),value=JSON.stringify(value);else if(lib_utils.isArray(value)&&function isFlatArray(arr){return lib_utils.isArray(arr)&&!arr.some(isVisitable)}(value)||(lib_utils.isFileList(value)||lib_utils.endsWith(key,"[]"))&&(arr=lib_utils.toArray(value)))return key=removeBrackets(key),arr.forEach((function each(el,index){!lib_utils.isUndefined(el)&&null!==el&&formData.append(!0===indexes?renderKey([key],index,dots):null===indexes?key:key+"[]",convertValue(el))})),!1;return!!isVisitable(value)||(formData.append(renderKey(path,key,dots),convertValue(value)),!1)}const stack=[],exposedHelpers=Object.assign(predicates,{defaultVisitor,convertValue,isVisitable});if(!lib_utils.isObject(obj))throw new TypeError("data must be an object");return function build(value,path){if(!lib_utils.isUndefined(value)){if(-1!==stack.indexOf(value))throw Error("Circular reference detected in "+path.join("."));stack.push(value),lib_utils.forEach(value,(function each(el,key){!0===(!(lib_utils.isUndefined(el)||null===el)&&visitor.call(formData,el,lib_utils.isString(key)?key.trim():key,path,exposedHelpers))&&build(el,path?path.concat(key):[key])})),stack.pop()}}(obj),formData};function AxiosURLSearchParams_encode(str){const charMap={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g,(function replacer(match){return charMap[match]}))}function AxiosURLSearchParams(params,options){this._pairs=[],params&&helpers_toFormData(params,this,options)}const AxiosURLSearchParams_prototype=AxiosURLSearchParams.prototype;AxiosURLSearchParams_prototype.append=function append(name,value){this._pairs.push([name,value])},AxiosURLSearchParams_prototype.toString=function toString(encoder){const _encode=encoder?function(value){return encoder.call(this,value,AxiosURLSearchParams_encode)}:AxiosURLSearchParams_encode;return this._pairs.map((function each(pair){return _encode(pair[0])+"="+_encode(pair[1])}),"").join("&")};const helpers_AxiosURLSearchParams=AxiosURLSearchParams;function buildURL_encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(url,params,options){if(!params)return url;const _encode=options&&options.encode||buildURL_encode,serializeFn=options&&options.serialize;let serializedParams;if(serializedParams=serializeFn?serializeFn(params,options):lib_utils.isURLSearchParams(params)?params.toString():new helpers_AxiosURLSearchParams(params,options).toString(_encode),serializedParams){const hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}const core_InterceptorManager=class InterceptorManager{constructor(){this.handlers=[]}use(fulfilled,rejected,options){return this.handlers.push({fulfilled,rejected,synchronous:!!options&&options.synchronous,runWhen:options?options.runWhen:null}),this.handlers.length-1}eject(id){this.handlers[id]&&(this.handlers[id]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(fn){lib_utils.forEach(this.handlers,(function forEachHandler(h){null!==h&&fn(h)}))}},defaults_transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},browser={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:helpers_AxiosURLSearchParams,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv="undefined"!=typeof window&&"undefined"!=typeof document,hasStandardBrowserEnv=(product="undefined"!=typeof navigator&&navigator.product,hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(product)<0);var product;const hasStandardBrowserWebWorkerEnv="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,platform={...common_utils_namespaceObject,...browser};const helpers_formDataToJSON=function formDataToJSON(formData){function buildPath(path,value,target,index){let name=path[index++];if("__proto__"===name)return!0;const isNumericKey=Number.isFinite(+name),isLast=index>=path.length;if(name=!name&&lib_utils.isArray(target)?target.length:name,isLast)return lib_utils.hasOwnProp(target,name)?target[name]=[target[name],value]:target[name]=value,!isNumericKey;target[name]&&lib_utils.isObject(target[name])||(target[name]=[]);return buildPath(path,value,target[name],index)&&lib_utils.isArray(target[name])&&(target[name]=function arrayToObject(arr){const obj={},keys=Object.keys(arr);let i;const len=keys.length;let key;for(i=0;i<len;i++)key=keys[i],obj[key]=arr[key];return obj}(target[name])),!isNumericKey}if(lib_utils.isFormData(formData)&&lib_utils.isFunction(formData.entries)){const obj={};return lib_utils.forEachEntry(formData,((name,value)=>{buildPath(function parsePropPath(name){return lib_utils.matchAll(/\w+|\[(\w*)]/g,name).map((match=>"[]"===match[0]?"":match[1]||match[0]))}(name),value,obj,0)})),obj}return null};const defaults={transitional:defaults_transitional,adapter:["xhr","http"],transformRequest:[function transformRequest(data,headers){const contentType=headers.getContentType()||"",hasJSONContentType=contentType.indexOf("application/json")>-1,isObjectPayload=lib_utils.isObject(data);isObjectPayload&&lib_utils.isHTMLForm(data)&&(data=new FormData(data));if(lib_utils.isFormData(data))return hasJSONContentType?JSON.stringify(helpers_formDataToJSON(data)):data;if(lib_utils.isArrayBuffer(data)||lib_utils.isBuffer(data)||lib_utils.isStream(data)||lib_utils.isFile(data)||lib_utils.isBlob(data))return data;if(lib_utils.isArrayBufferView(data))return data.buffer;if(lib_utils.isURLSearchParams(data))return headers.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),data.toString();let isFileList;if(isObjectPayload){if(contentType.indexOf("application/x-www-form-urlencoded")>-1)return function toURLEncodedForm(data,options){return helpers_toFormData(data,new platform.classes.URLSearchParams,Object.assign({visitor:function(value,key,path,helpers){return platform.isNode&&lib_utils.isBuffer(value)?(this.append(key,value.toString("base64")),!1):helpers.defaultVisitor.apply(this,arguments)}},options))}(data,this.formSerializer).toString();if((isFileList=lib_utils.isFileList(data))||contentType.indexOf("multipart/form-data")>-1){const _FormData=this.env&&this.env.FormData;return helpers_toFormData(isFileList?{"files[]":data}:data,_FormData&&new _FormData,this.formSerializer)}}return isObjectPayload||hasJSONContentType?(headers.setContentType("application/json",!1),function stringifySafely(rawValue,parser,encoder){if(lib_utils.isString(rawValue))try{return(parser||JSON.parse)(rawValue),lib_utils.trim(rawValue)}catch(e){if("SyntaxError"!==e.name)throw e}return(encoder||JSON.stringify)(rawValue)}(data)):data}],transformResponse:[function transformResponse(data){const transitional=this.transitional||defaults.transitional,forcedJSONParsing=transitional&&transitional.forcedJSONParsing,JSONRequested="json"===this.responseType;if(data&&lib_utils.isString(data)&&(forcedJSONParsing&&!this.responseType||JSONRequested)){const strictJSONParsing=!(transitional&&transitional.silentJSONParsing)&&JSONRequested;try{return JSON.parse(data)}catch(e){if(strictJSONParsing){if("SyntaxError"===e.name)throw core_AxiosError.from(e,core_AxiosError.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function validateStatus(status){return status>=200&&status<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lib_utils.forEach(["delete","get","head","post","put","patch"],(method=>{defaults.headers[method]={}}));const lib_defaults=defaults,ignoreDuplicateOf=lib_utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$internals=Symbol("internals");function normalizeHeader(header){return header&&String(header).trim().toLowerCase()}function normalizeValue(value){return!1===value||null==value?value:lib_utils.isArray(value)?value.map(normalizeValue):String(value)}function matchHeaderValue(context,value,header,filter,isHeaderNameFilter){return lib_utils.isFunction(filter)?filter.call(this,value,header):(isHeaderNameFilter&&(value=header),lib_utils.isString(value)?lib_utils.isString(filter)?-1!==value.indexOf(filter):lib_utils.isRegExp(filter)?filter.test(value):void 0:void 0)}class AxiosHeaders{constructor(headers){headers&&this.set(headers)}set(header,valueOrRewrite,rewrite){const self=this;function setHeader(_value,_header,_rewrite){const lHeader=normalizeHeader(_header);if(!lHeader)throw new Error("header name must be a non-empty string");const key=lib_utils.findKey(self,lHeader);(!key||void 0===self[key]||!0===_rewrite||void 0===_rewrite&&!1!==self[key])&&(self[key||_header]=normalizeValue(_value))}const setHeaders=(headers,_rewrite)=>lib_utils.forEach(headers,((_value,_header)=>setHeader(_value,_header,_rewrite)));return lib_utils.isPlainObject(header)||header instanceof this.constructor?setHeaders(header,valueOrRewrite):lib_utils.isString(header)&&(header=header.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(header.trim())?setHeaders((rawHeaders=>{const parsed={};let key,val,i;return rawHeaders&&rawHeaders.split("\n").forEach((function parser(line){i=line.indexOf(":"),key=line.substring(0,i).trim().toLowerCase(),val=line.substring(i+1).trim(),!key||parsed[key]&&ignoreDuplicateOf[key]||("set-cookie"===key?parsed[key]?parsed[key].push(val):parsed[key]=[val]:parsed[key]=parsed[key]?parsed[key]+", "+val:val)})),parsed})(header),valueOrRewrite):null!=header&&setHeader(valueOrRewrite,header,rewrite),this}get(header,parser){if(header=normalizeHeader(header)){const key=lib_utils.findKey(this,header);if(key){const value=this[key];if(!parser)return value;if(!0===parser)return function parseTokens(str){const tokens=Object.create(null),tokensRE=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let match;for(;match=tokensRE.exec(str);)tokens[match[1]]=match[2];return tokens}(value);if(lib_utils.isFunction(parser))return parser.call(this,value,key);if(lib_utils.isRegExp(parser))return parser.exec(value);throw new TypeError("parser must be boolean|regexp|function")}}}has(header,matcher){if(header=normalizeHeader(header)){const key=lib_utils.findKey(this,header);return!(!key||void 0===this[key]||matcher&&!matchHeaderValue(0,this[key],key,matcher))}return!1}delete(header,matcher){const self=this;let deleted=!1;function deleteHeader(_header){if(_header=normalizeHeader(_header)){const key=lib_utils.findKey(self,_header);!key||matcher&&!matchHeaderValue(0,self[key],key,matcher)||(delete self[key],deleted=!0)}}return lib_utils.isArray(header)?header.forEach(deleteHeader):deleteHeader(header),deleted}clear(matcher){const keys=Object.keys(this);let i=keys.length,deleted=!1;for(;i--;){const key=keys[i];matcher&&!matchHeaderValue(0,this[key],key,matcher,!0)||(delete this[key],deleted=!0)}return deleted}normalize(format){const self=this,headers={};return lib_utils.forEach(this,((value,header)=>{const key=lib_utils.findKey(headers,header);if(key)return self[key]=normalizeValue(value),void delete self[header];const normalized=format?function formatHeader(header){return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((w,char,str)=>char.toUpperCase()+str))}(header):String(header).trim();normalized!==header&&delete self[header],self[normalized]=normalizeValue(value),headers[normalized]=!0})),this}concat(...targets){return this.constructor.concat(this,...targets)}toJSON(asStrings){const obj=Object.create(null);return lib_utils.forEach(this,((value,header)=>{null!=value&&!1!==value&&(obj[header]=asStrings&&lib_utils.isArray(value)?value.join(", "):value)})),obj}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([header,value])=>header+": "+value)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(thing){return thing instanceof this?thing:new this(thing)}static concat(first,...targets){const computed=new this(first);return targets.forEach((target=>computed.set(target))),computed}static accessor(header){const accessors=(this[$internals]=this[$internals]={accessors:{}}).accessors,prototype=this.prototype;function defineAccessor(_header){const lHeader=normalizeHeader(_header);accessors[lHeader]||(!function buildAccessors(obj,header){const accessorName=lib_utils.toCamelCase(" "+header);["get","set","has"].forEach((methodName=>{Object.defineProperty(obj,methodName+accessorName,{value:function(arg1,arg2,arg3){return this[methodName].call(this,header,arg1,arg2,arg3)},configurable:!0})}))}(prototype,_header),accessors[lHeader]=!0)}return lib_utils.isArray(header)?header.forEach(defineAccessor):defineAccessor(header),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),lib_utils.reduceDescriptors(AxiosHeaders.prototype,(({value},key)=>{let mapped=key[0].toUpperCase()+key.slice(1);return{get:()=>value,set(headerValue){this[mapped]=headerValue}}})),lib_utils.freezeMethods(AxiosHeaders);const core_AxiosHeaders=AxiosHeaders;function transformData(fns,response){const config=this||lib_defaults,context=response||config,headers=core_AxiosHeaders.from(context.headers);let data=context.data;return lib_utils.forEach(fns,(function transform(fn){data=fn.call(config,data,headers.normalize(),response?response.status:void 0)})),headers.normalize(),data}function isCancel(value){return!(!value||!value.__CANCEL__)}function CanceledError(message,config,request){core_AxiosError.call(this,null==message?"canceled":message,core_AxiosError.ERR_CANCELED,config,request),this.name="CanceledError"}lib_utils.inherits(CanceledError,core_AxiosError,{__CANCEL__:!0});const cancel_CanceledError=CanceledError;const cookies=platform.hasStandardBrowserEnv?{write(name,value,expires,path,domain,secure){const cookie=[name+"="+encodeURIComponent(value)];lib_utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),lib_utils.isString(path)&&cookie.push("path="+path),lib_utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read(name){const match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove(name){this.write(name,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function buildFullPath(baseURL,requestedURL){return baseURL&&!function isAbsoluteURL(url){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(url)}(requestedURL)?function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/?\/$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}(baseURL,requestedURL):requestedURL}const isURLSameOrigin=platform.hasStandardBrowserEnv?function standardBrowserEnv(){const msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");let originURL;function resolveURL(url){let href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}return originURL=resolveURL(window.location.href),function isURLSameOrigin(requestURL){const parsed=lib_utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function isURLSameOrigin(){return!0};const helpers_speedometer=function speedometer(samplesCount,min){samplesCount=samplesCount||10;const bytes=new Array(samplesCount),timestamps=new Array(samplesCount);let firstSampleTS,head=0,tail=0;return min=void 0!==min?min:1e3,function push(chunkLength){const now=Date.now(),startedAt=timestamps[tail];firstSampleTS||(firstSampleTS=now),bytes[head]=chunkLength,timestamps[head]=now;let i=tail,bytesCount=0;for(;i!==head;)bytesCount+=bytes[i++],i%=samplesCount;if(head=(head+1)%samplesCount,head===tail&&(tail=(tail+1)%samplesCount),now-firstSampleTS<min)return;const passed=startedAt&&now-startedAt;return passed?Math.round(1e3*bytesCount/passed):void 0}};function progressEventReducer(listener,isDownloadStream){let bytesNotified=0;const _speedometer=helpers_speedometer(50,250);return e=>{const loaded=e.loaded,total=e.lengthComputable?e.total:void 0,progressBytes=loaded-bytesNotified,rate=_speedometer(progressBytes);bytesNotified=loaded;const data={loaded,total,progress:total?loaded/total:void 0,bytes:progressBytes,rate:rate||void 0,estimated:rate&&total&&loaded<=total?(total-loaded)/rate:void 0,event:e};data[isDownloadStream?"download":"upload"]=!0,listener(data)}}const knownAdapters={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(config){return new Promise((function dispatchXhrRequest(resolve,reject){let requestData=config.data;const requestHeaders=core_AxiosHeaders.from(config.headers).normalize();let onCanceled,contentType,{responseType,withXSRFToken}=config;function done(){config.cancelToken&&config.cancelToken.unsubscribe(onCanceled),config.signal&&config.signal.removeEventListener("abort",onCanceled)}if(lib_utils.isFormData(requestData))if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)requestHeaders.setContentType(!1);else if(!1!==(contentType=requestHeaders.getContentType())){const[type,...tokens]=contentType?contentType.split(";").map((token=>token.trim())).filter(Boolean):[];requestHeaders.setContentType([type||"multipart/form-data",...tokens].join("; "))}let request=new XMLHttpRequest;if(config.auth){const username=config.auth.username||"",password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.set("Authorization","Basic "+btoa(username+":"+password))}const fullPath=buildFullPath(config.baseURL,config.url);function onloadend(){if(!request)return;const responseHeaders=core_AxiosHeaders.from("getAllResponseHeaders"in request&&request.getAllResponseHeaders());!function settle(resolve,reject,response){const validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(new core_AxiosError("Request failed with status code "+response.status,[core_AxiosError.ERR_BAD_REQUEST,core_AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status/100)-4],response.config,response.request,response)):resolve(response)}((function _resolve(value){resolve(value),done()}),(function _reject(err){reject(err),done()}),{data:responseType&&"text"!==responseType&&"json"!==responseType?request.response:request.responseText,status:request.status,statusText:request.statusText,headers:responseHeaders,config,request}),request=null}if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,"onloadend"in request?request.onloadend=onloadend:request.onreadystatechange=function handleLoad(){request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))&&setTimeout(onloadend)},request.onabort=function handleAbort(){request&&(reject(new core_AxiosError("Request aborted",core_AxiosError.ECONNABORTED,config,request)),request=null)},request.onerror=function handleError(){reject(new core_AxiosError("Network Error",core_AxiosError.ERR_NETWORK,config,request)),request=null},request.ontimeout=function handleTimeout(){let timeoutErrorMessage=config.timeout?"timeout of "+config.timeout+"ms exceeded":"timeout exceeded";const transitional=config.transitional||defaults_transitional;config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(new core_AxiosError(timeoutErrorMessage,transitional.clarifyTimeoutError?core_AxiosError.ETIMEDOUT:core_AxiosError.ECONNABORTED,config,request)),request=null},platform.hasStandardBrowserEnv&&(withXSRFToken&&lib_utils.isFunction(withXSRFToken)&&(withXSRFToken=withXSRFToken(config)),withXSRFToken||!1!==withXSRFToken&&isURLSameOrigin(fullPath))){const xsrfValue=config.xsrfHeaderName&&config.xsrfCookieName&&cookies.read(config.xsrfCookieName);xsrfValue&&requestHeaders.set(config.xsrfHeaderName,xsrfValue)}void 0===requestData&&requestHeaders.setContentType(null),"setRequestHeader"in request&&lib_utils.forEach(requestHeaders.toJSON(),(function setRequestHeader(val,key){request.setRequestHeader(key,val)})),lib_utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),responseType&&"json"!==responseType&&(request.responseType=config.responseType),"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",progressEventReducer(config.onDownloadProgress,!0)),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",progressEventReducer(config.onUploadProgress)),(config.cancelToken||config.signal)&&(onCanceled=cancel=>{request&&(reject(!cancel||cancel.type?new cancel_CanceledError(null,config,request):cancel),request.abort(),request=null)},config.cancelToken&&config.cancelToken.subscribe(onCanceled),config.signal&&(config.signal.aborted?onCanceled():config.signal.addEventListener("abort",onCanceled)));const protocol=function parseProtocol(url){const match=/^([-+\w]{1,25})(:?\/\/|:)/.exec(url);return match&&match[1]||""}(fullPath);protocol&&-1===platform.protocols.indexOf(protocol)?reject(new core_AxiosError("Unsupported protocol "+protocol+":",core_AxiosError.ERR_BAD_REQUEST,config)):request.send(requestData||null)}))}};lib_utils.forEach(knownAdapters,((fn,value)=>{if(fn){try{Object.defineProperty(fn,"name",{value})}catch(e){}Object.defineProperty(fn,"adapterName",{value})}}));const renderReason=reason=>`- ${reason}`,isResolvedHandle=adapter=>lib_utils.isFunction(adapter)||null===adapter||!1===adapter,adapters_getAdapter=adapters=>{adapters=lib_utils.isArray(adapters)?adapters:[adapters];const{length}=adapters;let nameOrAdapter,adapter;const rejectedReasons={};for(let i=0;i<length;i++){let id;if(nameOrAdapter=adapters[i],adapter=nameOrAdapter,!isResolvedHandle(nameOrAdapter)&&(adapter=knownAdapters[(id=String(nameOrAdapter)).toLowerCase()],void 0===adapter))throw new core_AxiosError(`Unknown adapter '${id}'`);if(adapter)break;rejectedReasons[id||"#"+i]=adapter}if(!adapter){const reasons=Object.entries(rejectedReasons).map((([id,state])=>`adapter ${id} `+(!1===state?"is not supported by the environment":"is not available in the build")));let s=length?reasons.length>1?"since :\n"+reasons.map(renderReason).join("\n"):" "+renderReason(reasons[0]):"as no adapter specified";throw new core_AxiosError("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return adapter};function throwIfCancellationRequested(config){if(config.cancelToken&&config.cancelToken.throwIfRequested(),config.signal&&config.signal.aborted)throw new cancel_CanceledError(null,config)}function dispatchRequest(config){throwIfCancellationRequested(config),config.headers=core_AxiosHeaders.from(config.headers),config.data=transformData.call(config,config.transformRequest),-1!==["post","put","patch"].indexOf(config.method)&&config.headers.setContentType("application/x-www-form-urlencoded",!1);return adapters_getAdapter(config.adapter||lib_defaults.adapter)(config).then((function onAdapterResolution(response){return throwIfCancellationRequested(config),response.data=transformData.call(config,config.transformResponse,response),response.headers=core_AxiosHeaders.from(response.headers),response}),(function onAdapterRejection(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData.call(config,config.transformResponse,reason.response),reason.response.headers=core_AxiosHeaders.from(reason.response.headers))),Promise.reject(reason)}))}const headersToObject=thing=>thing instanceof core_AxiosHeaders?thing.toJSON():thing;function mergeConfig(config1,config2){config2=config2||{};const config={};function getMergedValue(target,source,caseless){return lib_utils.isPlainObject(target)&&lib_utils.isPlainObject(source)?lib_utils.merge.call({caseless},target,source):lib_utils.isPlainObject(source)?lib_utils.merge({},source):lib_utils.isArray(source)?source.slice():source}function mergeDeepProperties(a,b,caseless){return lib_utils.isUndefined(b)?lib_utils.isUndefined(a)?void 0:getMergedValue(void 0,a,caseless):getMergedValue(a,b,caseless)}function valueFromConfig2(a,b){if(!lib_utils.isUndefined(b))return getMergedValue(void 0,b)}function defaultToConfig2(a,b){return lib_utils.isUndefined(b)?lib_utils.isUndefined(a)?void 0:getMergedValue(void 0,a):getMergedValue(void 0,b)}function mergeDirectKeys(a,b,prop){return prop in config2?getMergedValue(a,b):prop in config1?getMergedValue(void 0,a):void 0}const mergeMap={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:(a,b)=>mergeDeepProperties(headersToObject(a),headersToObject(b),!0)};return lib_utils.forEach(Object.keys(Object.assign({},config1,config2)),(function computeConfigValue(prop){const merge=mergeMap[prop]||mergeDeepProperties,configValue=merge(config1[prop],config2[prop],prop);lib_utils.isUndefined(configValue)&&merge!==mergeDirectKeys||(config[prop]=configValue)})),config}const validators={};["object","boolean","number","function","string","symbol"].forEach(((type,i)=>{validators[type]=function validator(thing){return typeof thing===type||"a"+(i<1?"n ":" ")+type}}));const deprecatedWarnings={};validators.transitional=function transitional(validator,version,message){function formatMessage(opt,desc){return"[Axios v1.6.7] Transitional option '"+opt+"'"+desc+(message?". "+message:"")}return(value,opt,opts)=>{if(!1===validator)throw new core_AxiosError(formatMessage(opt," has been removed"+(version?" in "+version:"")),core_AxiosError.ERR_DEPRECATED);return version&&!deprecatedWarnings[opt]&&(deprecatedWarnings[opt]=!0,console.warn(formatMessage(opt," has been deprecated since v"+version+" and will be removed in the near future"))),!validator||validator(value,opt,opts)}};const validator={assertOptions:function assertOptions(options,schema,allowUnknown){if("object"!=typeof options)throw new core_AxiosError("options must be an object",core_AxiosError.ERR_BAD_OPTION_VALUE);const keys=Object.keys(options);let i=keys.length;for(;i-- >0;){const opt=keys[i],validator=schema[opt];if(validator){const value=options[opt],result=void 0===value||validator(value,opt,options);if(!0!==result)throw new core_AxiosError("option "+opt+" must be "+result,core_AxiosError.ERR_BAD_OPTION_VALUE)}else if(!0!==allowUnknown)throw new core_AxiosError("Unknown option "+opt,core_AxiosError.ERR_BAD_OPTION)}},validators},Axios_validators=validator.validators;class Axios{constructor(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new core_InterceptorManager,response:new core_InterceptorManager}}async request(configOrUrl,config){try{return await this._request(configOrUrl,config)}catch(err){if(err instanceof Error){let dummy;Error.captureStackTrace?Error.captureStackTrace(dummy={}):dummy=new Error;const stack=dummy.stack?dummy.stack.replace(/^.+\n/,""):"";err.stack?stack&&!String(err.stack).endsWith(stack.replace(/^.+\n.+\n/,""))&&(err.stack+="\n"+stack):err.stack=stack}throw err}}_request(configOrUrl,config){"string"==typeof configOrUrl?(config=config||{}).url=configOrUrl:config=configOrUrl||{},config=mergeConfig(this.defaults,config);const{transitional,paramsSerializer,headers}=config;void 0!==transitional&&validator.assertOptions(transitional,{silentJSONParsing:Axios_validators.transitional(Axios_validators.boolean),forcedJSONParsing:Axios_validators.transitional(Axios_validators.boolean),clarifyTimeoutError:Axios_validators.transitional(Axios_validators.boolean)},!1),null!=paramsSerializer&&(lib_utils.isFunction(paramsSerializer)?config.paramsSerializer={serialize:paramsSerializer}:validator.assertOptions(paramsSerializer,{encode:Axios_validators.function,serialize:Axios_validators.function},!0)),config.method=(config.method||this.defaults.method||"get").toLowerCase();let contextHeaders=headers&&lib_utils.merge(headers.common,headers[config.method]);headers&&lib_utils.forEach(["delete","get","head","post","put","patch","common"],(method=>{delete headers[method]})),config.headers=core_AxiosHeaders.concat(contextHeaders,headers);const requestInterceptorChain=[];let synchronousRequestInterceptors=!0;this.interceptors.request.forEach((function unshiftRequestInterceptors(interceptor){"function"==typeof interceptor.runWhen&&!1===interceptor.runWhen(config)||(synchronousRequestInterceptors=synchronousRequestInterceptors&&interceptor.synchronous,requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected))}));const responseInterceptorChain=[];let promise;this.interceptors.response.forEach((function pushResponseInterceptors(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)}));let len,i=0;if(!synchronousRequestInterceptors){const chain=[dispatchRequest.bind(this),void 0];for(chain.unshift.apply(chain,requestInterceptorChain),chain.push.apply(chain,responseInterceptorChain),len=chain.length,promise=Promise.resolve(config);i<len;)promise=promise.then(chain[i++],chain[i++]);return promise}len=requestInterceptorChain.length;let newConfig=config;for(i=0;i<len;){const onFulfilled=requestInterceptorChain[i++],onRejected=requestInterceptorChain[i++];try{newConfig=onFulfilled(newConfig)}catch(error){onRejected.call(this,error);break}}try{promise=dispatchRequest.call(this,newConfig)}catch(error){return Promise.reject(error)}for(i=0,len=responseInterceptorChain.length;i<len;)promise=promise.then(responseInterceptorChain[i++],responseInterceptorChain[i++]);return promise}getUri(config){return buildURL(buildFullPath((config=mergeConfig(this.defaults,config)).baseURL,config.url),config.params,config.paramsSerializer)}}lib_utils.forEach(["delete","get","head","options"],(function forEachMethodNoData(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method,url,data:(config||{}).data}))}})),lib_utils.forEach(["post","put","patch"],(function forEachMethodWithData(method){function generateHTTPMethod(isForm){return function httpMethod(url,data,config){return this.request(mergeConfig(config||{},{method,headers:isForm?{"Content-Type":"multipart/form-data"}:{},url,data}))}}Axios.prototype[method]=generateHTTPMethod(),Axios.prototype[method+"Form"]=generateHTTPMethod(!0)}));const core_Axios=Axios;class CancelToken{constructor(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");let resolvePromise;this.promise=new Promise((function promiseExecutor(resolve){resolvePromise=resolve}));const token=this;this.promise.then((cancel=>{if(!token._listeners)return;let i=token._listeners.length;for(;i-- >0;)token._listeners[i](cancel);token._listeners=null})),this.promise.then=onfulfilled=>{let _resolve;const promise=new Promise((resolve=>{token.subscribe(resolve),_resolve=resolve})).then(onfulfilled);return promise.cancel=function reject(){token.unsubscribe(_resolve)},promise},executor((function cancel(message,config,request){token.reason||(token.reason=new cancel_CanceledError(message,config,request),resolvePromise(token.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(listener){this.reason?listener(this.reason):this._listeners?this._listeners.push(listener):this._listeners=[listener]}unsubscribe(listener){if(!this._listeners)return;const index=this._listeners.indexOf(listener);-1!==index&&this._listeners.splice(index,1)}static source(){let cancel;return{token:new CancelToken((function executor(c){cancel=c})),cancel}}}const cancel_CancelToken=CancelToken;const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach((([key,value])=>{HttpStatusCode[value]=key}));const helpers_HttpStatusCode=HttpStatusCode;const axios_axios=function createInstance(defaultConfig){const context=new core_Axios(defaultConfig),instance=bind(core_Axios.prototype.request,context);return lib_utils.extend(instance,core_Axios.prototype,context,{allOwnKeys:!0}),lib_utils.extend(instance,context,null,{allOwnKeys:!0}),instance.create=function create(instanceConfig){return createInstance(mergeConfig(defaultConfig,instanceConfig))},instance}(lib_defaults);axios_axios.Axios=core_Axios,axios_axios.CanceledError=cancel_CanceledError,axios_axios.CancelToken=cancel_CancelToken,axios_axios.isCancel=isCancel,axios_axios.VERSION="1.6.7",axios_axios.toFormData=helpers_toFormData,axios_axios.AxiosError=core_AxiosError,axios_axios.Cancel=axios_axios.CanceledError,axios_axios.all=function all(promises){return Promise.all(promises)},axios_axios.spread=function spread(callback){return function wrap(arr){return callback.apply(null,arr)}},axios_axios.isAxiosError=function isAxiosError_isAxiosError(payload){return lib_utils.isObject(payload)&&!0===payload.isAxiosError},axios_axios.mergeConfig=mergeConfig,axios_axios.AxiosHeaders=core_AxiosHeaders,axios_axios.formToJSON=thing=>helpers_formDataToJSON(lib_utils.isHTMLForm(thing)?new FormData(thing):thing),axios_axios.getAdapter=adapters_getAdapter,axios_axios.HttpStatusCode=helpers_HttpStatusCode,axios_axios.default=axios_axios;const lib_axios=axios_axios;__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");(0,react.createContext)(null),(0,react.createContext)(null);new PQueue({interval:5e3,intervalCap:30}),new PQueue({interval:5e3,intervalCap:30});new PQueue({interval:6e4,intervalCap:100,timeout:6e4}),new PQueue({concurrency:20,interval:6e4,intervalCap:20,timeout:6e4});create$3({p:create$6().required().equals(["brc-20"]),op:create$6().required().equals(["transfer"]),tick:create$6().required().test((value=>value.length>0&&value.length<=4)),amt:create$6().required().test((value=>new bignumber.A(value).isFinite()))});var stampSchema=z.object({stamp:z.number(),block_index:z.number().optional(),cpid:z.string().optional(),asset_longname:z.string().optional(),creator:z.string(),divisible:z.number(),keyburn:z.number().optional(),locked:z.number(),message_index:z.number().optional(),stamp_base64:z.string(),stamp_mimetype:z.string(),stamp_url:z.string(),supply:z.number(),timestamp:z.string().optional(),tx_hash:z.string(),tx_index:z.number().optional(),src_data:z.string().optional(),ident:z.string().optional(),creator_name:z.string().optional().nullable(),stamp_gen:z.string().optional(),stamp_hash:z.string().optional(),is_btc_stamp:z.number().optional(),is_reissue:z.number().optional(),file_hash:z.string().optional()}),src20TokenSchema=z.object({id:z.string().optional(),address:z.string(),cpid:z.string().optional(),p:z.string(),tick:z.string(),amt:z.string().optional(),block_time:z.string(),last_update:z.number()});z.object({page:z.number(),limit:z.number(),totalPages:z.number(),total:z.number(),last_block:z.number().optional(),btc:z.object({address:z.string(),balance:z.number(),txCount:z.number(),unconfirmedBalance:z.number(),unconfirmedTxCount:z.number()}),data:z.object({stamps:z.array(stampSchema),src20:z.array(src20TokenSchema)})});Error;new AlexSDK,(0,utils_dist.j6)(1e6,"STX");var marketDataQueryOptions={staleTime:6e4,refetchOnMount:!1,refetchInterval:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1};function selectBinanceUsdPrice(resp){return resp?.price}function useBinanceMarketDataQuery(currency){return useQuery_useQuery({queryFn:()=>async function fetchBinanceMarketData(currency){return(await lib_axios.get(`https://api1.binance.com/api/v3/ticker/price?symbol=${currency}USDT`)).data}(currency),queryKey:[`binance-market-data-${currency}`],...marketDataQueryOptions})}var currencyNameMap={BTC:"bitcoin",STX:"stacks"};function selectCoincapUsdPrice(resp){return resp?.data?.priceUsd}function useCoincapMarketDataQuery(currency){return useQuery_useQuery({queryFn:()=>async function fetchCoincapMarketData(currency){return(await lib_axios.get(`https://api.coincap.io/v2/assets/${currencyNameMap[currency]}`)).data}(currency),queryKey:[`coincap-market-data-${currency}`],...marketDataQueryOptions})}var currencyNameMap2={BTC:"bitcoin",STX:"blockstack"};function selectCoingeckoUsdPrice(resp){return Object.values(resp)[0]?.usd}function useCoinGeckoMarketDataQuery(currency){return useQuery_useQuery({queryFn:()=>async function fetchCoingeckoMarketData(currency){return(await lib_axios.get(`https://api.coingecko.com/api/v3/simple/price?ids=${currencyNameMap2[currency]}&vs_currencies=usd`)).data}(currency),queryKey:[`coin-gecko-market-data-${currency}`],...marketDataQueryOptions})}function useCryptoCurrencyMarketDataMeanAverage(currency){const{data:coingecko}=useCoinGeckoMarketDataQuery(currency),{data:coincap}=useCoincapMarketDataQuery(currency),{data:binance}=useBinanceMarketDataQuery(currency);return(0,react.useMemo)((()=>{const priceData=function pullPriceDataFromAvailableResponses(responses){return responses.filter((({result})=>!!result)).map((({result,selector:priceSelector})=>priceSelector(result))).map((val=>new bignumber.A(val))).map((val=>(0,utils_dist.KA)(val,dist.uG.USD)))}([{result:coingecko,selector:selectCoingeckoUsdPrice},{result:coincap,selector:selectCoincapUsdPrice},{result:binance,selector:selectBinanceUsdPrice}]),meanPrice=(0,utils_dist.pE)(priceData);return(0,models_dist.jd)((0,models_dist.he)(currency,"USD"),(0,utils_dist.j6)(meanPrice,"USD"))}),[binance,coincap,coingecko,currency])}var defaultFeesMaxValues=[5e5,75e4,2e6],defaultFeesMinValues=[2500,3e3,3500],defaultFeesMinValuesAsMoney=((0,utils_dist.j6)(defaultFeesMaxValues[0],"STX"),(0,utils_dist.j6)(defaultFeesMaxValues[1],"STX"),(0,utils_dist.j6)(defaultFeesMaxValues[2],"STX"),[(0,utils_dist.j6)(defaultFeesMinValues[0],"STX"),(0,utils_dist.j6)(defaultFeesMinValues[1],"STX"),(0,utils_dist.j6)(defaultFeesMinValues[2],"STX")]);defaultFeesMinValuesAsMoney[0],defaultFeesMinValuesAsMoney[1],defaultFeesMinValuesAsMoney[2],models_dist.zJ.Default;modern_utils.rX},"./node_modules/.pnpm/@lukeed+uuid@2.0.1/node_modules/@lukeed/uuid/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v4:()=>v4});for(var BUFFER,IDX=256,HEX=[];IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);function v4(){var num,i=0,out="";if(!BUFFER||IDX+16>256){for(BUFFER=Array(i=256);i--;)BUFFER[i]=256*Math.random()|0;i=IDX=0}for(;i<16;i++)num=BUFFER[IDX+i],out+=6==i?HEX[15&num|64]:8==i?HEX[63&num|128]:HEX[num],1&i&&i>1&&i<11&&(out+="-");return IDX++,out}},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_assert.js":(__unused_webpack_module,exports)=>{"use strict";function number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function bool(b){if("boolean"!=typeof b)throw new Error(`boolean expected, not ${b}`)}function isBytes(a){return a instanceof Uint8Array||null!=a&&"object"==typeof a&&"Uint8Array"===a.constructor.name}function bytes(b,...lengths){if(!isBytes(b))throw new Error("Uint8Array expected");if(lengths.length>0&&!lengths.includes(b.length))throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`)}function hash(h){if("function"!=typeof h||"function"!=typeof h.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(h.outputLen),number(h.blockLen)}function exists(instance,checkFinished=!0){if(instance.destroyed)throw new Error("Hash instance has been destroyed");if(checkFinished&&instance.finished)throw new Error("Hash#digest() has already been called")}function output(out,instance){bytes(out);const min=instance.outputLen;if(out.length<min)throw new Error(`digestInto() expects output buffer of length at least ${min}`)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.output=exports.exists=exports.hash=exports.bytes=exports.bool=exports.number=exports.isBytes=void 0,exports.number=number,exports.bool=bool,exports.isBytes=isBytes,exports.bytes=bytes,exports.hash=hash,exports.exists=exists,exports.output=output;const assert={number,bool,bytes,hash,exists,output};exports.default=assert},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_md.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashMD=exports.Maj=exports.Chi=void 0;const _assert_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_assert.js"),utils_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js");exports.Chi=(a,b,c)=>a&b^~a&c;exports.Maj=(a,b,c)=>a&b^a&c^b&c;class HashMD extends utils_js_1.Hash{constructor(blockLen,outputLen,padOffset,isLE){super(),this.blockLen=blockLen,this.outputLen=outputLen,this.padOffset=padOffset,this.isLE=isLE,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(blockLen),this.view=(0,utils_js_1.createView)(this.buffer)}update(data){(0,_assert_js_1.exists)(this);const{view,buffer,blockLen}=this,len=(data=(0,utils_js_1.toBytes)(data)).length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);if(take!==blockLen)buffer.set(data.subarray(pos,pos+take),this.pos),this.pos+=take,pos+=take,this.pos===blockLen&&(this.process(view,0),this.pos=0);else{const dataView=(0,utils_js_1.createView)(data);for(;blockLen<=len-pos;pos+=blockLen)this.process(dataView,pos)}}return this.length+=data.length,this.roundClean(),this}digestInto(out){(0,_assert_js_1.exists)(this),(0,_assert_js_1.output)(out,this),this.finished=!0;const{buffer,view,blockLen,isLE}=this;let{pos}=this;buffer[pos++]=128,this.buffer.subarray(pos).fill(0),this.padOffset>blockLen-pos&&(this.process(view,0),pos=0);for(let i=pos;i<blockLen;i++)buffer[i]=0;!function setBigUint64(view,byteOffset,value,isLE){if("function"==typeof view.setBigUint64)return view.setBigUint64(byteOffset,value,isLE);const _32n=BigInt(32),_u32_max=BigInt(4294967295),wh=Number(value>>_32n&_u32_max),wl=Number(value&_u32_max),h=isLE?4:0,l=isLE?0:4;view.setUint32(byteOffset+h,wh,isLE),view.setUint32(byteOffset+l,wl,isLE)}(view,blockLen-8,BigInt(8*this.length),isLE),this.process(view,0);const oview=(0,utils_js_1.createView)(out),len=this.outputLen;if(len%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const outLen=len/4,state=this.get();if(outLen>state.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<outLen;i++)oview.setUint32(4*i,state[i],isLE)}digest(){const{buffer,outputLen}=this;this.digestInto(buffer);const res=buffer.slice(0,outputLen);return this.destroy(),res}_cloneInto(to){to||(to=new this.constructor),to.set(...this.get());const{blockLen,buffer,length,finished,destroyed,pos}=this;return to.length=length,to.pos=pos,to.finished=finished,to.destroyed=destroyed,length%blockLen&&to.buffer.set(buffer),to}}exports.HashMD=HashMD},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/crypto.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.crypto=void 0,exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/hmac.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hmac=exports.HMAC=void 0;const _assert_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_assert.js"),utils_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js");class HMAC extends utils_js_1.Hash{constructor(hash,_key){super(),this.finished=!1,this.destroyed=!1,(0,_assert_js_1.hash)(hash);const key=(0,utils_js_1.toBytes)(_key);if(this.iHash=hash.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const blockLen=this.blockLen,pad=new Uint8Array(blockLen);pad.set(key.length>blockLen?hash.create().update(key).digest():key);for(let i=0;i<pad.length;i++)pad[i]^=54;this.iHash.update(pad),this.oHash=hash.create();for(let i=0;i<pad.length;i++)pad[i]^=106;this.oHash.update(pad),pad.fill(0)}update(buf){return(0,_assert_js_1.exists)(this),this.iHash.update(buf),this}digestInto(out){(0,_assert_js_1.exists)(this),(0,_assert_js_1.bytes)(out,this.outputLen),this.finished=!0,this.iHash.digestInto(out),this.oHash.update(out),this.oHash.digestInto(out),this.destroy()}digest(){const out=new Uint8Array(this.oHash.outputLen);return this.digestInto(out),out}_cloneInto(to){to||(to=Object.create(Object.getPrototypeOf(this),{}));const{oHash,iHash,finished,destroyed,blockLen,outputLen}=this;return to.finished=finished,to.destroyed=destroyed,to.blockLen=blockLen,to.outputLen=outputLen,to.oHash=oHash._cloneInto(to.oHash),to.iHash=iHash._cloneInto(to.iHash),to}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}exports.HMAC=HMAC;exports.hmac=(hash,key,message)=>new HMAC(hash,key).update(message).digest(),exports.hmac.create=(hash,key)=>new HMAC(hash,key)},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/ripemd160.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ripemd160=exports.RIPEMD160=void 0;const _md_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_md.js"),utils_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js"),Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id=new Uint8Array(new Array(16).fill(0).map(((_,i)=>i)));let idxL=[Id],idxR=[Id.map((i=>(9*i+5)%16))];for(let i=0;i<4;i++)for(let j of[idxL,idxR])j.push(j[i].map((k=>Rho[k])));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((i=>new Uint8Array(i))),shiftsL=idxL.map(((idx,i)=>idx.map((j=>shifts[i][j])))),shiftsR=idxR.map(((idx,i)=>idx.map((j=>shifts[i][j])))),Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function f(group,x,y,z){return 0===group?x^y^z:1===group?x&y|~x&z:2===group?(x|~y)^z:3===group?x&z|y&~z:x^(y|~z)}const R_BUF=new Uint32Array(16);class RIPEMD160 extends _md_js_1.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0,h1,h2,h3,h4}=this;return[h0,h1,h2,h3,h4]}set(h0,h1,h2,h3,h4){this.h0=0|h0,this.h1=0|h1,this.h2=0|h2,this.h3=0|h3,this.h4=0|h4}process(view,offset){for(let i=0;i<16;i++,offset+=4)R_BUF[i]=view.getUint32(offset,!0);let al=0|this.h0,ar=al,bl=0|this.h1,br=bl,cl=0|this.h2,cr=cl,dl=0|this.h3,dr=dl,el=0|this.h4,er=el;for(let group=0;group<5;group++){const rGroup=4-group,hbl=Kl[group],hbr=Kr[group],rl=idxL[group],rr=idxR[group],sl=shiftsL[group],sr=shiftsR[group];for(let i=0;i<16;i++){const tl=(0,utils_js_1.rotl)(al+f(group,bl,cl,dl)+R_BUF[rl[i]]+hbl,sl[i])+el|0;al=el,el=dl,dl=0|(0,utils_js_1.rotl)(cl,10),cl=bl,bl=tl}for(let i=0;i<16;i++){const tr=(0,utils_js_1.rotl)(ar+f(rGroup,br,cr,dr)+R_BUF[rr[i]]+hbr,sr[i])+er|0;ar=er,er=dr,dr=0|(0,utils_js_1.rotl)(cr,10),cr=br,br=tr}}this.set(this.h1+cl+dr|0,this.h2+dl+er|0,this.h3+el+ar|0,this.h4+al+br|0,this.h0+bl+cr|0)}roundClean(){R_BUF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}exports.RIPEMD160=RIPEMD160,exports.ripemd160=(0,utils_js_1.wrapConstructor)((()=>new RIPEMD160))},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha1.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sha1=void 0;const _md_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_md.js"),utils_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js"),SHA1_IV=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),SHA1_W=new Uint32Array(80);class SHA1 extends _md_js_1.HashMD{constructor(){super(64,20,8,!1),this.A=0|SHA1_IV[0],this.B=0|SHA1_IV[1],this.C=0|SHA1_IV[2],this.D=0|SHA1_IV[3],this.E=0|SHA1_IV[4]}get(){const{A,B,C,D,E}=this;return[A,B,C,D,E]}set(A,B,C,D,E){this.A=0|A,this.B=0|B,this.C=0|C,this.D=0|D,this.E=0|E}process(view,offset){for(let i=0;i<16;i++,offset+=4)SHA1_W[i]=view.getUint32(offset,!1);for(let i=16;i<80;i++)SHA1_W[i]=(0,utils_js_1.rotl)(SHA1_W[i-3]^SHA1_W[i-8]^SHA1_W[i-14]^SHA1_W[i-16],1);let{A,B,C,D,E}=this;for(let i=0;i<80;i++){let F,K;i<20?(F=(0,_md_js_1.Chi)(B,C,D),K=1518500249):i<40?(F=B^C^D,K=1859775393):i<60?(F=(0,_md_js_1.Maj)(B,C,D),K=2400959708):(F=B^C^D,K=3395469782);const T=(0,utils_js_1.rotl)(A,5)+F+E+K+SHA1_W[i]|0;E=D,D=C,C=(0,utils_js_1.rotl)(B,30),B=A,A=T}A=A+this.A|0,B=B+this.B|0,C=C+this.C|0,D=D+this.D|0,E=E+this.E|0,this.set(A,B,C,D,E)}roundClean(){SHA1_W.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}exports.sha1=(0,utils_js_1.wrapConstructor)((()=>new SHA1))},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sha224=exports.sha256=void 0;const _md_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_md.js"),utils_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js"),SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends _md_js_1.HashMD{constructor(){super(64,32,8,!1),this.A=0|SHA256_IV[0],this.B=0|SHA256_IV[1],this.C=0|SHA256_IV[2],this.D=0|SHA256_IV[3],this.E=0|SHA256_IV[4],this.F=0|SHA256_IV[5],this.G=0|SHA256_IV[6],this.H=0|SHA256_IV[7]}get(){const{A,B,C,D,E,F,G,H}=this;return[A,B,C,D,E,F,G,H]}set(A,B,C,D,E,F,G,H){this.A=0|A,this.B=0|B,this.C=0|C,this.D=0|D,this.E=0|E,this.F=0|F,this.G=0|G,this.H=0|H}process(view,offset){for(let i=0;i<16;i++,offset+=4)SHA256_W[i]=view.getUint32(offset,!1);for(let i=16;i<64;i++){const W15=SHA256_W[i-15],W2=SHA256_W[i-2],s0=(0,utils_js_1.rotr)(W15,7)^(0,utils_js_1.rotr)(W15,18)^W15>>>3,s1=(0,utils_js_1.rotr)(W2,17)^(0,utils_js_1.rotr)(W2,19)^W2>>>10;SHA256_W[i]=s1+SHA256_W[i-7]+s0+SHA256_W[i-16]|0}let{A,B,C,D,E,F,G,H}=this;for(let i=0;i<64;i++){const T1=H+((0,utils_js_1.rotr)(E,6)^(0,utils_js_1.rotr)(E,11)^(0,utils_js_1.rotr)(E,25))+(0,_md_js_1.Chi)(E,F,G)+SHA256_K[i]+SHA256_W[i]|0,T2=((0,utils_js_1.rotr)(A,2)^(0,utils_js_1.rotr)(A,13)^(0,utils_js_1.rotr)(A,22))+(0,_md_js_1.Maj)(A,B,C)|0;H=G,G=F,F=E,E=D+T1|0,D=C,C=B,B=A,A=T1+T2|0}A=A+this.A|0,B=B+this.B|0,C=C+this.C|0,D=D+this.D|0,E=E+this.E|0,F=F+this.F|0,G=G+this.G|0,H=H+this.H|0,this.set(A,B,C,D,E,F,G,H)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}exports.sha256=(0,utils_js_1.wrapConstructor)((()=>new SHA256)),exports.sha224=(0,utils_js_1.wrapConstructor)((()=>new SHA224))},"./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomBytes=exports.wrapXOFConstructorWithOpts=exports.wrapConstructorWithOpts=exports.wrapConstructor=exports.checkOpts=exports.Hash=exports.concatBytes=exports.toBytes=exports.utf8ToBytes=exports.asyncLoop=exports.nextTick=exports.hexToBytes=exports.bytesToHex=exports.byteSwap32=exports.byteSwapIfBE=exports.byteSwap=exports.isLE=exports.rotl=exports.rotr=exports.createView=exports.u32=exports.u8=exports.isBytes=void 0;const crypto_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/crypto.js"),_assert_js_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_assert.js");exports.isBytes=function isBytes(a){return a instanceof Uint8Array||null!=a&&"object"==typeof a&&"Uint8Array"===a.constructor.name};exports.u8=arr=>new Uint8Array(arr.buffer,arr.byteOffset,arr.byteLength);exports.u32=arr=>new Uint32Array(arr.buffer,arr.byteOffset,Math.floor(arr.byteLength/4));exports.createView=arr=>new DataView(arr.buffer,arr.byteOffset,arr.byteLength);exports.rotr=(word,shift)=>word<<32-shift|word>>>shift;exports.rotl=(word,shift)=>word<<shift|word>>>32-shift>>>0,exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];exports.byteSwap=word=>word<<24&4278190080|word<<8&16711680|word>>>8&65280|word>>>24&255,exports.byteSwapIfBE=exports.isLE?n=>n:n=>(0,exports.byteSwap)(n),exports.byteSwap32=function byteSwap32(arr){for(let i=0;i<arr.length;i++)arr[i]=(0,exports.byteSwap)(arr[i])};const hexes=Array.from({length:256},((_,i)=>i.toString(16).padStart(2,"0")));exports.bytesToHex=function bytesToHex(bytes){(0,_assert_js_1.bytes)(bytes);let hex="";for(let i=0;i<bytes.length;i++)hex+=hexes[bytes[i]];return hex};const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(char){return char>=asciis._0&&char<=asciis._9?char-asciis._0:char>=asciis._A&&char<=asciis._F?char-(asciis._A-10):char>=asciis._a&&char<=asciis._f?char-(asciis._a-10):void 0}exports.hexToBytes=function hexToBytes(hex){if("string"!=typeof hex)throw new Error("hex string expected, got "+typeof hex);const hl=hex.length,al=hl/2;if(hl%2)throw new Error("padded hex string expected, got unpadded hex of length "+hl);const array=new Uint8Array(al);for(let ai=0,hi=0;ai<al;ai++,hi+=2){const n1=asciiToBase16(hex.charCodeAt(hi)),n2=asciiToBase16(hex.charCodeAt(hi+1));if(void 0===n1||void 0===n2){const char=hex[hi]+hex[hi+1];throw new Error('hex string expected, got non-hex character "'+char+'" at index '+hi)}array[ai]=16*n1+n2}return array};function utf8ToBytes(str){if("string"!=typeof str)throw new Error("utf8ToBytes expected string, got "+typeof str);return new Uint8Array((new TextEncoder).encode(str))}function toBytes(data){return"string"==typeof data&&(data=utf8ToBytes(data)),(0,_assert_js_1.bytes)(data),data}exports.nextTick=async()=>{},exports.asyncLoop=async function asyncLoop(iters,tick,cb){let ts=Date.now();for(let i=0;i<iters;i++){cb(i);const diff=Date.now()-ts;diff>=0&&diff<tick||(await(0,exports.nextTick)(),ts+=diff)}},exports.utf8ToBytes=utf8ToBytes,exports.toBytes=toBytes,exports.concatBytes=function concatBytes(...arrays){let sum=0;for(let i=0;i<arrays.length;i++){const a=arrays[i];(0,_assert_js_1.bytes)(a),sum+=a.length}const res=new Uint8Array(sum);for(let i=0,pad=0;i<arrays.length;i++){const a=arrays[i];res.set(a,pad),pad+=a.length}return res};exports.Hash=class Hash{clone(){return this._cloneInto()}};const toStr={}.toString;exports.checkOpts=function checkOpts(defaults,opts){if(void 0!==opts&&"[object Object]"!==toStr.call(opts))throw new Error("Options should be object or undefined");return Object.assign(defaults,opts)},exports.wrapConstructor=function wrapConstructor(hashCons){const hashC=msg=>hashCons().update(toBytes(msg)).digest(),tmp=hashCons();return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=()=>hashCons(),hashC},exports.wrapConstructorWithOpts=function wrapConstructorWithOpts(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest(),tmp=hashCons({});return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=opts=>hashCons(opts),hashC},exports.wrapXOFConstructorWithOpts=function wrapXOFConstructorWithOpts(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest(),tmp=hashCons({});return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=opts=>hashCons(opts),hashC},exports.randomBytes=function randomBytes(bytesLength=32){if(crypto_1.crypto&&"function"==typeof crypto_1.crypto.getRandomValues)return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));throw new Error("crypto.getRandomValues must be defined")}},"./node_modules/.pnpm/@noble+secp256k1@1.7.1/node_modules/@noble/secp256k1/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utils=exports.schnorr=exports.verify=exports.signSync=exports.sign=exports.getSharedSecret=exports.recoverPublicKey=exports.getPublicKey=exports.Signature=exports.Point=exports.CURVE=void 0;const nodeCrypto=__webpack_require__("?ddd9"),_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE=Object.freeze({a:_0n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});exports.CURVE=CURVE;const divNearest=(a,b)=>(a+b/_2n)/b,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(k){const{n}=CURVE,a1=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2=a1,POW_2_128=BigInt("0x100000000000000000000000000000000"),c1=divNearest(b2*k,n),c2=divNearest(-b1*k,n);let k1=mod(k-c1*a1-c2*a2,n),k2=mod(-c1*b1-c2*b2,n);const k1neg=k1>POW_2_128,k2neg=k2>POW_2_128;if(k1neg&&(k1=n-k1),k2neg&&(k2=n-k2),k1>POW_2_128||k2>POW_2_128)throw new Error("splitScalarEndo: Endomorphism failed, k="+k);return{k1neg,k1,k2neg,k2}}},fieldLen=32,groupLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(x){const{a,b}=CURVE,x2=mod(x*x),x3=mod(x2*x);return mod(x3+a*x+b)}const USE_ENDOMORPHISM=CURVE.a===_0n;class ShaError extends Error{constructor(message){super(message)}}function assertJacPoint(other){if(!(other instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(x,y,z){this.x=x,this.y=y,this.z=z}static fromAffine(p){if(!(p instanceof Point))throw new TypeError("JacobianPoint#fromAffine: expected Point");return p.equals(Point.ZERO)?JacobianPoint.ZERO:new JacobianPoint(p.x,p.y,_1n)}static toAffineBatch(points){const toInv=function invertBatch(nums,p=CURVE.P){const scratch=new Array(nums.length),inverted=invert(nums.reduce(((acc,num,i)=>num===_0n?acc:(scratch[i]=acc,mod(acc*num,p))),_1n),p);return nums.reduceRight(((acc,num,i)=>num===_0n?acc:(scratch[i]=mod(acc*scratch[i],p),mod(acc*num,p))),inverted),scratch}(points.map((p=>p.z)));return points.map(((p,i)=>p.toAffine(toInv[i])))}static normalizeZ(points){return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine)}equals(other){assertJacPoint(other);const{x:X1,y:Y1,z:Z1}=this,{x:X2,y:Y2,z:Z2}=other,Z1Z1=mod(Z1*Z1),Z2Z2=mod(Z2*Z2),U1=mod(X1*Z2Z2),U2=mod(X2*Z1Z1),S1=mod(mod(Y1*Z2)*Z2Z2),S2=mod(mod(Y2*Z1)*Z1Z1);return U1===U2&&S1===S2}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:X1,y:Y1,z:Z1}=this,A=mod(X1*X1),B=mod(Y1*Y1),C=mod(B*B),x1b=X1+B,D=mod(_2n*(mod(x1b*x1b)-A-C)),E=mod(_3n*A),F=mod(E*E),X3=mod(F-_2n*D),Y3=mod(E*(D-X3)-_8n*C),Z3=mod(_2n*Y1*Z1);return new JacobianPoint(X3,Y3,Z3)}add(other){assertJacPoint(other);const{x:X1,y:Y1,z:Z1}=this,{x:X2,y:Y2,z:Z2}=other;if(X2===_0n||Y2===_0n)return this;if(X1===_0n||Y1===_0n)return other;const Z1Z1=mod(Z1*Z1),Z2Z2=mod(Z2*Z2),U1=mod(X1*Z2Z2),U2=mod(X2*Z1Z1),S1=mod(mod(Y1*Z2)*Z2Z2),S2=mod(mod(Y2*Z1)*Z1Z1),H=mod(U2-U1),r=mod(S2-S1);if(H===_0n)return r===_0n?this.double():JacobianPoint.ZERO;const HH=mod(H*H),HHH=mod(H*HH),V=mod(U1*HH),X3=mod(r*r-HHH-_2n*V),Y3=mod(r*(V-X3)-S1*HHH),Z3=mod(Z1*Z2*H);return new JacobianPoint(X3,Y3,Z3)}subtract(other){return this.add(other.negate())}multiplyUnsafe(scalar){const P0=JacobianPoint.ZERO;if("bigint"==typeof scalar&&scalar===_0n)return P0;let n=normalizeScalar(scalar);if(n===_1n)return this;if(!USE_ENDOMORPHISM){let p=P0,d=this;for(;n>_0n;)n&_1n&&(p=p.add(d)),d=d.double(),n>>=_1n;return p}let{k1neg,k1,k2neg,k2}=endo.splitScalar(n),k1p=P0,k2p=P0,d=this;for(;k1>_0n||k2>_0n;)k1&_1n&&(k1p=k1p.add(d)),k2&_1n&&(k2p=k2p.add(d)),d=d.double(),k1>>=_1n,k2>>=_1n;return k1neg&&(k1p=k1p.negate()),k2neg&&(k2p=k2p.negate()),k2p=new JacobianPoint(mod(k2p.x*endo.beta),k2p.y,k2p.z),k1p.add(k2p)}precomputeWindow(W){const windows=USE_ENDOMORPHISM?128/W+1:256/W+1,points=[];let p=this,base=p;for(let window=0;window<windows;window++){base=p,points.push(base);for(let i=1;i<2**(W-1);i++)base=base.add(p),points.push(base);p=base.double()}return points}wNAF(n,affinePoint){!affinePoint&&this.equals(JacobianPoint.BASE)&&(affinePoint=Point.BASE);const W=affinePoint&&affinePoint._WINDOW_SIZE||1;if(256%W)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let precomputes=affinePoint&&pointPrecomputes.get(affinePoint);precomputes||(precomputes=this.precomputeWindow(W),affinePoint&&1!==W&&(precomputes=JacobianPoint.normalizeZ(precomputes),pointPrecomputes.set(affinePoint,precomputes)));let p=JacobianPoint.ZERO,f=JacobianPoint.BASE;const windows=1+(USE_ENDOMORPHISM?128/W:256/W),windowSize=2**(W-1),mask=BigInt(2**W-1),maxNumber=2**W,shiftBy=BigInt(W);for(let window=0;window<windows;window++){const offset=window*windowSize;let wbits=Number(n&mask);n>>=shiftBy,wbits>windowSize&&(wbits-=maxNumber,n+=_1n);const offset1=offset,offset2=offset+Math.abs(wbits)-1,cond1=window%2!=0,cond2=wbits<0;0===wbits?f=f.add(constTimeNegate(cond1,precomputes[offset1])):p=p.add(constTimeNegate(cond2,precomputes[offset2]))}return{p,f}}multiply(scalar,affinePoint){let point,fake,n=normalizeScalar(scalar);if(USE_ENDOMORPHISM){const{k1neg,k1,k2neg,k2}=endo.splitScalar(n);let{p:k1p,f:f1p}=this.wNAF(k1,affinePoint),{p:k2p,f:f2p}=this.wNAF(k2,affinePoint);k1p=constTimeNegate(k1neg,k1p),k2p=constTimeNegate(k2neg,k2p),k2p=new JacobianPoint(mod(k2p.x*endo.beta),k2p.y,k2p.z),point=k1p.add(k2p),fake=f1p.add(f2p)}else{const{p,f}=this.wNAF(n,affinePoint);point=p,fake=f}return JacobianPoint.normalizeZ([point,fake])[0]}toAffine(invZ){const{x,y,z}=this,is0=this.equals(JacobianPoint.ZERO);null==invZ&&(invZ=is0?_8n:invert(z));const iz1=invZ,iz2=mod(iz1*iz1),iz3=mod(iz2*iz1),ax=mod(x*iz2),ay=mod(y*iz3),zz=mod(z*iz1);if(is0)return Point.ZERO;if(zz!==_1n)throw new Error("invZ was invalid");return new Point(ax,ay)}}function constTimeNegate(condition,item){const neg=item.negate();return condition?neg:item}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n),JacobianPoint.ZERO=new JacobianPoint(_0n,_1n,_0n);const pointPrecomputes=new WeakMap;class Point{constructor(x,y){this.x=x,this.y=y}_setWindowSize(windowSize){this._WINDOW_SIZE=windowSize,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n===_0n}static fromCompressedHex(bytes){const isShort=32===bytes.length,x=bytesToNumber(isShort?bytes:bytes.subarray(1));if(!isValidFieldElement(x))throw new Error("Point is not on curve");let y=function sqrtMod(x){const{P}=CURVE,_6n=BigInt(6),_11n=BigInt(11),_22n=BigInt(22),_23n=BigInt(23),_44n=BigInt(44),_88n=BigInt(88),b2=x*x*x%P,b3=b2*b2*x%P,b6=pow2(b3,_3n)*b3%P,b9=pow2(b6,_3n)*b3%P,b11=pow2(b9,_2n)*b2%P,b22=pow2(b11,_11n)*b11%P,b44=pow2(b22,_22n)*b22%P,b88=pow2(b44,_44n)*b44%P,b176=pow2(b88,_88n)*b88%P,b220=pow2(b176,_44n)*b44%P,b223=pow2(b220,_3n)*b3%P,t1=pow2(b223,_23n)*b22%P,t2=pow2(t1,_6n)*b2%P,rt=pow2(t2,_2n);if(rt*rt%P!==x)throw new Error("Cannot find square root");return rt}(weierstrass(x));const isYOdd=(y&_1n)===_1n;if(isShort)isYOdd&&(y=mod(-y));else{1==(1&bytes[0])!==isYOdd&&(y=mod(-y))}const point=new Point(x,y);return point.assertValidity(),point}static fromUncompressedHex(bytes){const x=bytesToNumber(bytes.subarray(1,fieldLen+1)),y=bytesToNumber(bytes.subarray(fieldLen+1,2*fieldLen+1)),point=new Point(x,y);return point.assertValidity(),point}static fromHex(hex){const bytes=ensureBytes(hex),len=bytes.length,header=bytes[0];if(len===fieldLen)return this.fromCompressedHex(bytes);if(len===compressedLen&&(2===header||3===header))return this.fromCompressedHex(bytes);if(len===uncompressedLen&&4===header)return this.fromUncompressedHex(bytes);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`)}static fromPrivateKey(privateKey){return Point.BASE.multiply(normalizePrivateKey(privateKey))}static fromSignature(msgHash,signature,recovery){const{r,s}=normalizeSignature(signature);if(![0,1,2,3].includes(recovery))throw new Error("Cannot recover: invalid recovery bit");const h=truncateHash(ensureBytes(msgHash)),{n}=CURVE,radj=2===recovery||3===recovery?r+n:r,rinv=invert(radj,n),u1=mod(-h*rinv,n),u2=mod(s*rinv,n),prefix=1&recovery?"03":"02",R=Point.fromHex(prefix+numTo32bStr(radj)),Q=Point.BASE.multiplyAndAddUnsafe(R,u1,u2);if(!Q)throw new Error("Cannot recover signature: point at infinify");return Q.assertValidity(),Q}toRawBytes(isCompressed=!1){return hexToBytes(this.toHex(isCompressed))}toHex(isCompressed=!1){const x=numTo32bStr(this.x);if(isCompressed){return`${this.hasEvenY()?"02":"03"}${x}`}return`04${x}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const msg="Point is not on elliptic curve",{x,y}=this;if(!isValidFieldElement(x)||!isValidFieldElement(y))throw new Error(msg);const left=mod(y*y);if(mod(left-weierstrass(x))!==_0n)throw new Error(msg)}equals(other){return this.x===other.x&&this.y===other.y}negate(){return new Point(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(other){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine()}subtract(other){return this.add(other.negate())}multiply(scalar){return JacobianPoint.fromAffine(this).multiply(scalar,this).toAffine()}multiplyAndAddUnsafe(Q,a,b){const P=JacobianPoint.fromAffine(this),aP=a===_0n||a===_1n||this!==Point.BASE?P.multiplyUnsafe(a):P.multiply(a),bQ=JacobianPoint.fromAffine(Q).multiplyUnsafe(b),sum=aP.add(bQ);return sum.equals(JacobianPoint.ZERO)?void 0:sum.toAffine()}}function sliceDER(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function parseDERInt(data){if(data.length<2||2!==data[0])throw new Error(`Invalid signature integer tag: ${bytesToHex(data)}`);const len=data[1],res=data.subarray(2,len+2);if(!len||res.length!==len)throw new Error("Invalid signature integer: wrong length");if(0===res[0]&&res[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(res),left:data.subarray(len+2)}}exports.Point=Point,Point.BASE=new Point(CURVE.Gx,CURVE.Gy),Point.ZERO=new Point(_0n,_0n);class Signature{constructor(r,s){this.r=r,this.s=s,this.assertValidity()}static fromCompact(hex){const arr=hex instanceof Uint8Array,name="Signature.fromCompact";if("string"!=typeof hex&&!arr)throw new TypeError(`${name}: Expected string or Uint8Array`);const str=arr?bytesToHex(hex):hex;if(128!==str.length)throw new Error(`${name}: Expected 64-byte hex`);return new Signature(hexToNumber(str.slice(0,64)),hexToNumber(str.slice(64,128)))}static fromDER(hex){const arr=hex instanceof Uint8Array;if("string"!=typeof hex&&!arr)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=function parseDERSignature(data){if(data.length<2||48!=data[0])throw new Error(`Invalid signature tag: ${bytesToHex(data)}`);if(data[1]!==data.length-2)throw new Error("Invalid signature: incorrect length");const{data:r,left:sBytes}=parseDERInt(data.subarray(2)),{data:s,left:rBytesLeft}=parseDERInt(sBytes);if(rBytesLeft.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(rBytesLeft)}`);return{r,s}}(arr?hex:hexToBytes(hex));return new Signature(r,s)}static fromHex(hex){return this.fromDER(hex)}assertValidity(){const{r,s}=this;if(!isWithinCurveOrder(r))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(s))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const HALF=CURVE.n>>_1n;return this.s>HALF}normalizeS(){return this.hasHighS()?new Signature(this.r,mod(-this.s,CURVE.n)):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){const sHex=sliceDER(numberToHexUnpadded(this.s)),rHex=sliceDER(numberToHexUnpadded(this.r)),sHexL=sHex.length/2,rHexL=rHex.length/2,sLen=numberToHexUnpadded(sHexL),rLen=numberToHexUnpadded(rHexL);return`30${numberToHexUnpadded(rHexL+sHexL+4)}02${rLen}${rHex}02${sLen}${sHex}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}}function concatBytes(...arrays){if(!arrays.every((b=>b instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===arrays.length)return arrays[0];const length=arrays.reduce(((a,arr)=>a+arr.length),0),result=new Uint8Array(length);for(let i=0,pad=0;i<arrays.length;i++){const arr=arrays[i];result.set(arr,pad),pad+=arr.length}return result}exports.Signature=Signature;const hexes=Array.from({length:256},((v,i)=>i.toString(16).padStart(2,"0")));function bytesToHex(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Expected Uint8Array");let hex="";for(let i=0;i<uint8a.length;i++)hex+=hexes[uint8a[i]];return hex}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(num){if("bigint"!=typeof num)throw new Error("Expected bigint");if(!(_0n<=num&&num<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return num.toString(16).padStart(64,"0")}function numTo32b(num){const b=hexToBytes(numTo32bStr(num));if(32!==b.length)throw new Error("Error: expected 32 bytes");return b}function numberToHexUnpadded(num){const hex=num.toString(16);return 1&hex.length?`0${hex}`:hex}function hexToNumber(hex){if("string"!=typeof hex)throw new TypeError("hexToNumber: expected string, got "+typeof hex);return BigInt(`0x${hex}`)}function hexToBytes(hex){if("string"!=typeof hex)throw new TypeError("hexToBytes: expected string, got "+typeof hex);if(hex.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+hex.length);const array=new Uint8Array(hex.length/2);for(let i=0;i<array.length;i++){const j=2*i,hexByte=hex.slice(j,j+2),byte=Number.parseInt(hexByte,16);if(Number.isNaN(byte)||byte<0)throw new Error("Invalid byte sequence");array[i]=byte}return array}function bytesToNumber(bytes){return hexToNumber(bytesToHex(bytes))}function ensureBytes(hex){return hex instanceof Uint8Array?Uint8Array.from(hex):hexToBytes(hex)}function normalizeScalar(num){if("number"==typeof num&&Number.isSafeInteger(num)&&num>0)return BigInt(num);if("bigint"==typeof num&&isWithinCurveOrder(num))return num;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(a,b=CURVE.P){const result=a%b;return result>=_0n?result:b+result}function pow2(x,power){const{P}=CURVE;let res=x;for(;power-- >_0n;)res*=res,res%=P;return res}function invert(number,modulo=CURVE.P){if(number===_0n||modulo<=_0n)throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);let a=mod(number,modulo),b=modulo,x=_0n,y=_1n,u=_1n,v=_0n;for(;a!==_0n;){const q=b/a,r=b%a,m=x-u*q,n=y-v*q;b=a,a=r,x=u,y=v,u=m,v=n}if(b!==_1n)throw new Error("invert: does not exist");return mod(x,modulo)}function truncateHash(hash,truncateOnly=!1){const h=function bits2int_2(bytes){const delta=8*bytes.length-8*groupLen,num=bytesToNumber(bytes);return delta>0?num>>BigInt(delta):num}(hash);if(truncateOnly)return h;const{n}=CURVE;return h>=n?h-n:h}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(hashLen,qByteLen){if(this.hashLen=hashLen,this.qByteLen=qByteLen,"number"!=typeof hashLen||hashLen<2)throw new Error("hashLen must be a number");if("number"!=typeof qByteLen||qByteLen<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(hashLen).fill(1),this.k=new Uint8Array(hashLen).fill(0),this.counter=0}hmac(...values){return exports.utils.hmacSha256(this.k,...values)}hmacSync(...values){return _hmacSha256Sync(this.k,...values)}checkSync(){if("function"!=typeof _hmacSha256Sync)throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(seed=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),seed),this.v=await this.hmac(this.v),0!==seed.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),seed),this.v=await this.hmac(this.v))}reseedSync(seed=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),seed),this.v=this.hmacSync(this.v),0!==seed.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),seed),this.v=this.hmacSync(this.v))}async generate(){this.incr();let len=0;const out=[];for(;len<this.qByteLen;){this.v=await this.hmac(this.v);const sl=this.v.slice();out.push(sl),len+=this.v.length}return concatBytes(...out)}generateSync(){this.checkSync(),this.incr();let len=0;const out=[];for(;len<this.qByteLen;){this.v=this.hmacSync(this.v);const sl=this.v.slice();out.push(sl),len+=this.v.length}return concatBytes(...out)}}function isWithinCurveOrder(num){return _0n<num&&num<CURVE.n}function isValidFieldElement(num){return _0n<num&&num<CURVE.P}function kmdToSig(kBytes,m,d,lowS=!0){const{n}=CURVE,k=truncateHash(kBytes,!0);if(!isWithinCurveOrder(k))return;const kinv=invert(k,n),q=Point.BASE.multiply(k),r=mod(q.x,n);if(r===_0n)return;const s=mod(kinv*mod(m+d*r,n),n);if(s===_0n)return;let sig=new Signature(r,s),recovery=(q.x===sig.r?0:2)|Number(q.y&_1n);return lowS&&sig.hasHighS()&&(sig=sig.normalizeS(),recovery^=1),{sig,recovery}}function normalizePrivateKey(key){let num;if("bigint"==typeof key)num=key;else if("number"==typeof key&&Number.isSafeInteger(key)&&key>0)num=BigInt(key);else if("string"==typeof key){if(key.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");num=hexToNumber(key)}else{if(!(key instanceof Uint8Array))throw new TypeError("Expected valid private key");if(key.length!==groupLen)throw new Error("Expected 32 bytes of private key");num=bytesToNumber(key)}if(!isWithinCurveOrder(num))throw new Error("Expected private key: 0 < key < n");return num}function normalizePublicKey(publicKey){return publicKey instanceof Point?(publicKey.assertValidity(),publicKey):Point.fromHex(publicKey)}function normalizeSignature(signature){if(signature instanceof Signature)return signature.assertValidity(),signature;try{return Signature.fromDER(signature)}catch(error){return Signature.fromCompact(signature)}}function isProbPub(item){const arr=item instanceof Uint8Array,str="string"==typeof item,len=(arr||str)&&item.length;return arr?len===compressedLen||len===uncompressedLen:str?len===2*compressedLen||len===2*uncompressedLen:item instanceof Point}function bits2int(bytes){return bytesToNumber(bytes.length>fieldLen?bytes.slice(0,fieldLen):bytes)}function bits2octets(bytes){const z1=bits2int(bytes),z2=mod(z1,CURVE.n);return int2octets(z2<_0n?z1:z2)}function int2octets(num){return numTo32b(num)}function initSigArgs(msgHash,privateKey,extraEntropy){if(null==msgHash)throw new Error(`sign: expected valid message hash, not "${msgHash}"`);const h1=ensureBytes(msgHash),d=normalizePrivateKey(privateKey),seedArgs=[int2octets(d),bits2octets(h1)];if(null!=extraEntropy){!0===extraEntropy&&(extraEntropy=exports.utils.randomBytes(fieldLen));const e=ensureBytes(extraEntropy);if(e.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);seedArgs.push(e)}return{seed:concatBytes(...seedArgs),m:bits2int(h1),d}}function finalizeSig(recSig,opts){const{sig,recovery}=recSig,{der,recovered}=Object.assign({canonical:!0,der:!0},opts),hashed=der?sig.toDERRawBytes():sig.toCompactRawBytes();return recovered?[hashed,recovery]:hashed}exports.getPublicKey=function getPublicKey(privateKey,isCompressed=!1){return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed)},exports.recoverPublicKey=function recoverPublicKey(msgHash,signature,recovery,isCompressed=!1){return Point.fromSignature(msgHash,signature,recovery).toRawBytes(isCompressed)},exports.getSharedSecret=function getSharedSecret(privateA,publicB,isCompressed=!1){if(isProbPub(privateA))throw new TypeError("getSharedSecret: first arg must be private key");if(!isProbPub(publicB))throw new TypeError("getSharedSecret: second arg must be public key");const b=normalizePublicKey(publicB);return b.assertValidity(),b.multiply(normalizePrivateKey(privateA)).toRawBytes(isCompressed)},exports.sign=async function sign(msgHash,privKey,opts={}){const{seed,m,d}=initSigArgs(msgHash,privKey,opts.extraEntropy),drbg=new HmacDrbg(32,groupLen);let sig;for(await drbg.reseed(seed);!(sig=kmdToSig(await drbg.generate(),m,d,opts.canonical));)await drbg.reseed();return finalizeSig(sig,opts)},exports.signSync=function signSync(msgHash,privKey,opts={}){const{seed,m,d}=initSigArgs(msgHash,privKey,opts.extraEntropy),drbg=new HmacDrbg(32,groupLen);let sig;for(drbg.reseedSync(seed);!(sig=kmdToSig(drbg.generateSync(),m,d,opts.canonical));)drbg.reseedSync();return finalizeSig(sig,opts)};const vopts={strict:!0};function schnorrChallengeFinalize(ch){return mod(bytesToNumber(ch),CURVE.n)}exports.verify=function verify(signature,msgHash,publicKey,opts=vopts){let sig;try{sig=normalizeSignature(signature),msgHash=ensureBytes(msgHash)}catch(error){return!1}const{r,s}=sig;if(opts.strict&&sig.hasHighS())return!1;const h=truncateHash(msgHash);let P;try{P=normalizePublicKey(publicKey)}catch(error){return!1}const{n}=CURVE,sinv=invert(s,n),u1=mod(h*sinv,n),u2=mod(r*sinv,n),R=Point.BASE.multiplyAndAddUnsafe(P,u1,u2);return!!R&&mod(R.x,n)===r};class SchnorrSignature{constructor(r,s){this.r=r,this.s=s,this.assertValidity()}static fromHex(hex){const bytes=ensureBytes(hex);if(64!==bytes.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${bytes.length}`);const r=bytesToNumber(bytes.subarray(0,32)),s=bytesToNumber(bytes.subarray(32,64));return new SchnorrSignature(r,s)}assertValidity(){const{r,s}=this;if(!isValidFieldElement(r)||!isWithinCurveOrder(s))throw new Error("Invalid signature")}toHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}toRawBytes(){return hexToBytes(this.toHex())}}class InternalSchnorrSignature{constructor(message,privateKey,auxRand=exports.utils.randomBytes()){if(null==message)throw new TypeError(`sign: Expected valid message, not "${message}"`);this.m=ensureBytes(message);const{x,scalar}=this.getScalar(normalizePrivateKey(privateKey));if(this.px=x,this.d=scalar,this.rand=ensureBytes(auxRand),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(priv){const point=Point.fromPrivateKey(priv),scalar=point.hasEvenY()?priv:CURVE.n-priv;return{point,scalar,x:point.toRawX()}}initNonce(d,t0h){return numTo32b(d^bytesToNumber(t0h))}finalizeNonce(k0h){const k0=mod(bytesToNumber(k0h),CURVE.n);if(k0===_0n)throw new Error("sign: Creation of signature failed. k is zero");const{point:R,x:rx,scalar:k}=this.getScalar(k0);return{R,rx,k}}finalizeSig(R,k,e,d){return new SchnorrSignature(R.x,mod(k+e*d,CURVE.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m,d,px,rand}=this,tag=exports.utils.taggedHash,t=this.initNonce(d,await tag(TAGS.aux,rand)),{R,rx,k}=this.finalizeNonce(await tag(TAGS.nonce,t,px,m)),e=schnorrChallengeFinalize(await tag(TAGS.challenge,rx,px,m)),sig=this.finalizeSig(R,k,e,d);return await schnorrVerify(sig,m,px)||this.error(),sig}calcSync(){const{m,d,px,rand}=this,tag=exports.utils.taggedHashSync,t=this.initNonce(d,tag(TAGS.aux,rand)),{R,rx,k}=this.finalizeNonce(tag(TAGS.nonce,t,px,m)),e=schnorrChallengeFinalize(tag(TAGS.challenge,rx,px,m)),sig=this.finalizeSig(R,k,e,d);return schnorrVerifySync(sig,m,px)||this.error(),sig}}function initSchnorrVerify(signature,message,publicKey){const raw=signature instanceof SchnorrSignature,sig=raw?signature:SchnorrSignature.fromHex(signature);return raw&&sig.assertValidity(),{...sig,m:ensureBytes(message),P:normalizePublicKey(publicKey)}}function finalizeSchnorrVerify(r,P,s,e){const R=Point.BASE.multiplyAndAddUnsafe(P,normalizePrivateKey(s),mod(-e,CURVE.n));return!(!R||!R.hasEvenY()||R.x!==r)}async function schnorrVerify(signature,message,publicKey){try{const{r,s,m,P}=initSchnorrVerify(signature,message,publicKey),e=schnorrChallengeFinalize(await exports.utils.taggedHash(TAGS.challenge,numTo32b(r),P.toRawX(),m));return finalizeSchnorrVerify(r,P,s,e)}catch(error){return!1}}function schnorrVerifySync(signature,message,publicKey){try{const{r,s,m,P}=initSchnorrVerify(signature,message,publicKey),e=schnorrChallengeFinalize(exports.utils.taggedHashSync(TAGS.challenge,numTo32b(r),P.toRawX(),m));return finalizeSchnorrVerify(r,P,s,e)}catch(error){if(error instanceof ShaError)throw error;return!1}}exports.schnorr={Signature:SchnorrSignature,getPublicKey:function schnorrGetPublicKey(privateKey){return Point.fromPrivateKey(privateKey).toRawX()},sign:async function schnorrSign(msg,privKey,auxRand){return new InternalSchnorrSignature(msg,privKey,auxRand).calc()},verify:schnorrVerify,signSync:function schnorrSignSync(msg,privKey,auxRand){return new InternalSchnorrSignature(msg,privKey,auxRand).calcSync()},verifySync:schnorrVerifySync},Point.BASE._setWindowSize(8);const crypto={node:nodeCrypto,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},TAGS={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},TAGGED_HASH_PREFIXES={};exports.utils={bytesToHex,hexToBytes,concatBytes,mod,invert,isValidPrivateKey(privateKey){try{return normalizePrivateKey(privateKey),!0}catch(error){return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:hash=>{hash=ensureBytes(hash);const minLen=groupLen+8;if(hash.length<minLen||hash.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return numTo32b(mod(bytesToNumber(hash),CURVE.n-_1n)+_1n)},randomBytes:(bytesLength=32)=>{if(crypto.web)return crypto.web.getRandomValues(new Uint8Array(bytesLength));if(crypto.node){const{randomBytes}=crypto.node;return Uint8Array.from(randomBytes(bytesLength))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>exports.utils.hashToPrivateKey(exports.utils.randomBytes(groupLen+8)),precompute(windowSize=8,point=Point.BASE){const cached=point===Point.BASE?point:new Point(point.x,point.y);return cached._setWindowSize(windowSize),cached.multiply(_3n),cached},sha256:async(...messages)=>{if(crypto.web){const buffer=await crypto.web.subtle.digest("SHA-256",concatBytes(...messages));return new Uint8Array(buffer)}if(crypto.node){const{createHash}=crypto.node,hash=createHash("sha256");return messages.forEach((m=>hash.update(m))),Uint8Array.from(hash.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(key,...messages)=>{if(crypto.web){const ckey=await crypto.web.subtle.importKey("raw",key,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),message=concatBytes(...messages),buffer=await crypto.web.subtle.sign("HMAC",ckey,message);return new Uint8Array(buffer)}if(crypto.node){const{createHmac}=crypto.node,hash=createHmac("sha256",key);return messages.forEach((m=>hash.update(m))),Uint8Array.from(hash.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(tag,...messages)=>{let tagP=TAGGED_HASH_PREFIXES[tag];if(void 0===tagP){const tagH=await exports.utils.sha256(Uint8Array.from(tag,(c=>c.charCodeAt(0))));tagP=concatBytes(tagH,tagH),TAGGED_HASH_PREFIXES[tag]=tagP}return exports.utils.sha256(tagP,...messages)},taggedHashSync:(tag,...messages)=>{if("function"!=typeof _sha256Sync)throw new ShaError("sha256Sync is undefined, you need to set it");let tagP=TAGGED_HASH_PREFIXES[tag];if(void 0===tagP){const tagH=_sha256Sync(Uint8Array.from(tag,(c=>c.charCodeAt(0))));tagP=concatBytes(tagH,tagH),TAGGED_HASH_PREFIXES[tag]=tagP}return _sha256Sync(tagP,...messages)},_JacobianPoint:JacobianPoint},Object.defineProperties(exports.utils,{sha256Sync:{configurable:!1,get:()=>_sha256Sync,set(val){_sha256Sync||(_sha256Sync=val)}},hmacSha256Sync:{configurable:!1,get:()=>_hmacSha256Sync,set(val){_hmacSha256Sync||(_hmacSha256Sync=val)}}})},"./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/callback/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function pTimeout(promise,timeout){return new Promise((function(resolve,reject){var timeoutId=setTimeout((function(){reject(Error("Promise timed out"))}),timeout);promise.then((function(val){return clearTimeout(timeoutId),resolve(val)})).catch(reject)}))}function invokeCallback(ctx,callback,delay){return function sleep(timeoutInMs){return new Promise((function(resolve){return setTimeout(resolve,timeoutInMs)}))}(delay).then((function(){return pTimeout(function(){try{return Promise.resolve(callback(ctx))}catch(err){return Promise.reject(err)}}(),1e3)})).catch((function(err){null==ctx||ctx.log("warn","Callback Error",{error:err}),null==ctx||ctx.stats.increment("callback_error")})).then((function(){return ctx}))}__webpack_require__.d(__webpack_exports__,{s2:()=>pTimeout,w_:()=>invokeCallback})},"./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/context/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>ContextCancelation,j:()=>CoreContext});var dist=__webpack_require__("./node_modules/.pnpm/@lukeed+uuid@2.0.1/node_modules/@lukeed/uuid/dist/index.mjs"),dset_dist=__webpack_require__("./node_modules/.pnpm/dset@3.1.3/node_modules/dset/dist/index.mjs"),tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),CoreLogger=function(){function CoreLogger(){this._logs=[]}return CoreLogger.prototype.log=function(level,message,extras){var time=new Date;this._logs.push({level,message,time,extras})},Object.defineProperty(CoreLogger.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),CoreLogger.prototype.flush=function(){if(this.logs.length>1){var formatted=this._logs.reduce((function(logs,log){var _a,_b,_c,line=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},log),{json:JSON.stringify(log.extras,null," "),extras:log.extras});delete line.time;var key=null!==(_c=null===(_b=log.time)||void 0===_b?void 0:_b.toISOString())&&void 0!==_c?_c:"";return logs[key]&&(key="".concat(key,"-").concat(Math.random())),(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},logs),((_a={})[key]=line,_a))}),{});console.table?console.table(formatted):console.log(formatted)}else this.logs.forEach((function(logEntry){var level=logEntry.level,message=logEntry.message,extras=logEntry.extras;"info"===level||"debug"===level?console.log(message,null!=extras?extras:""):console[level](message,null!=extras?extras:"")}));this._logs=[]},CoreLogger}(),esm_stats=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/stats/index.js"),ContextCancelation=function ContextCancelation(options){var _a,_b,_c;this.retry=null===(_a=options.retry)||void 0===_a||_a,this.type=null!==(_b=options.type)&&void 0!==_b?_b:"plugin Error",this.reason=null!==(_c=options.reason)&&void 0!==_c?_c:""},CoreContext=function(){function CoreContext(event,id,stats,logger){void 0===id&&(id=(0,dist.v4)()),void 0===stats&&(stats=new esm_stats.r),void 0===logger&&(logger=new CoreLogger),this.attempts=0,this.event=event,this._id=id,this.logger=logger,this.stats=stats}return CoreContext.system=function(){},CoreContext.prototype.isSame=function(other){return other.id===this.id},CoreContext.prototype.cancel=function(error){if(error)throw error;throw new ContextCancelation({reason:"Context Cancel"})},CoreContext.prototype.log=function(level,message,extras){this.logger.log(level,message,extras)},Object.defineProperty(CoreContext.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),CoreContext.prototype.updateEvent=function(path,val){var _a;if("integrations"===path.split(".")[0]){var integrationName=path.split(".")[1];if(!1===(null===(_a=this.event.integrations)||void 0===_a?void 0:_a[integrationName]))return this.event}return(0,dset_dist.J)(this.event,path,val),this.event},CoreContext.prototype.failedDelivery=function(){return this._failedDelivery},CoreContext.prototype.setFailedDelivery=function(options){this._failedDelivery=options},CoreContext.prototype.logs=function(){return this.logger.logs},CoreContext.prototype.flush=function(){this.logger.flush(),this.stats.flush()},CoreContext.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},CoreContext}()},"./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>ON_REMOVE_FROM_FUTURE,M:()=>PriorityQueue});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),emitter=__webpack_require__("./node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js");var ON_REMOVE_FROM_FUTURE="onRemoveFromFuture",PriorityQueue=function(_super){function PriorityQueue(maxAttempts,queue,seen){var _this=_super.call(this)||this;return _this.future=[],_this.maxAttempts=maxAttempts,_this.queue=queue,_this.seen=null!=seen?seen:{},_this}return(0,tslib_es6.C6)(PriorityQueue,_super),PriorityQueue.prototype.push=function(){for(var _this=this,items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];var accepted=items.map((function(operation){return!(_this.updateAttempts(operation)>_this.maxAttempts||_this.includes(operation))&&(_this.queue.push(operation),!0)}));return this.queue=this.queue.sort((function(a,b){return _this.getAttempts(a)-_this.getAttempts(b)})),accepted},PriorityQueue.prototype.pushWithBackoff=function(item){var _this=this;if(0===this.getAttempts(item))return this.push(item)[0];var attempt=this.updateAttempts(item);if(attempt>this.maxAttempts||this.includes(item))return!1;var timeout=function backoff(params){var random=Math.random()+1,_a=params.minTimeout,minTimeout=void 0===_a?500:_a,_b=params.factor,factor=void 0===_b?2:_b,attempt=params.attempt,_c=params.maxTimeout,maxTimeout=void 0===_c?1/0:_c;return Math.min(random*minTimeout*Math.pow(factor,attempt),maxTimeout)}({attempt:attempt-1});return setTimeout((function(){_this.queue.push(item),_this.future=_this.future.filter((function(f){return f.id!==item.id})),_this.emit(ON_REMOVE_FROM_FUTURE)}),timeout),this.future.push(item),!0},PriorityQueue.prototype.getAttempts=function(item){var _a;return null!==(_a=this.seen[item.id])&&void 0!==_a?_a:0},PriorityQueue.prototype.updateAttempts=function(item){return this.seen[item.id]=this.getAttempts(item)+1,this.getAttempts(item)},PriorityQueue.prototype.includes=function(item){return this.queue.includes(item)||this.future.includes(item)||Boolean(this.queue.find((function(i){return i.id===item.id})))||Boolean(this.future.find((function(i){return i.id===item.id})))},PriorityQueue.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(PriorityQueue.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(PriorityQueue.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),PriorityQueue}(emitter.v)},"./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>attempt,D:()=>ensure});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/context/index.js");function attempt(ctx,plugin){ctx.log("debug","plugin",{plugin:plugin.name});var start=(new Date).getTime(),hook=plugin[ctx.event.type];return void 0===hook?Promise.resolve(ctx):function tryAsync(fn){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.sH)(this,void 0,void 0,(function(){var err_1;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,fn()];case 1:return[2,_a.sent()];case 2:return err_1=_a.sent(),[2,Promise.reject(err_1)];case 3:return[2]}}))}))}((function(){return hook.apply(plugin,[ctx])})).then((function(ctx){var done=(new Date).getTime()-start;return ctx.stats.gauge("plugin_time",done,["plugin:".concat(plugin.name)]),ctx})).catch((function(err){if(err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.d&&"middleware_cancellation"===err.type)throw err;return err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.d?(ctx.log("warn",err.type,{plugin:plugin.name,error:err}),err):(ctx.log("error","plugin Error",{plugin:plugin.name,error:err}),ctx.stats.increment("plugin_error",1,["plugin:".concat(plugin.name)]),err)}))}function ensure(ctx,plugin){return attempt(ctx,plugin).then((function(newContext){if(newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.j)return newContext;ctx.log("debug","Context canceled"),ctx.stats.increment("context_canceled"),ctx.cancel(newContext)}))}},"./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/stats/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{p:()=>CoreStats,r:()=>NullStats});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),CoreStats=function(){function CoreStats(){this.metrics=[]}return CoreStats.prototype.increment=function(metric,by,tags){void 0===by&&(by=1),this.metrics.push({metric,value:by,tags:null!=tags?tags:[],type:"counter",timestamp:Date.now()})},CoreStats.prototype.gauge=function(metric,value,tags){this.metrics.push({metric,value,tags:null!=tags?tags:[],type:"gauge",timestamp:Date.now()})},CoreStats.prototype.flush=function(){var formatted=this.metrics.map((function(m){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)({},m),{tags:m.tags.join(",")})}));console.table?console.table(formatted):console.log(formatted),this.metrics=[]},CoreStats.prototype.serialize=function(){return this.metrics.map((function(m){return{m:m.metric,v:m.value,t:m.tags,k:(type=m.type,{gauge:"g",counter:"c"}[type]),e:m.timestamp};var type}))},CoreStats}(),NullStats=function(_super){function NullStats(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.C6)(NullStats,_super),NullStats.prototype.gauge=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},NullStats.prototype.increment=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},NullStats.prototype.flush=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},NullStats.prototype.serialize=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i];return[]},NullStats}(CoreStats)},"./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isString(obj){return"string"==typeof obj}function isNumber(obj){return"number"==typeof obj}function isFunction(obj){return"function"==typeof obj}function exists(val){return null!=val}function isPlainObject(obj){return"object"===Object.prototype.toString.call(obj).slice(8,-1).toLowerCase()}__webpack_require__.d(__webpack_exports__,{Et:()=>isNumber,Kg:()=>isString,Qd:()=>isPlainObject,Tn:()=>isFunction,t2:()=>exists})},"./node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>createDeferred});var createDeferred=function(){var resolve,reject,settled=!1,promise=new Promise((function(_resolve,_reject){resolve=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];settled=!0,_resolve.apply(void 0,args)},reject=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];settled=!0,_reject.apply(void 0,args)}}));return{resolve,reject,promise,isSettled:function(){return settled}}}},"./node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>Emitter});var Emitter=function(){function Emitter(options){var _a;this.callbacks={},this.warned=!1,this.maxListeners=null!==(_a=null==options?void 0:options.maxListeners)&&void 0!==_a?_a:10}return Emitter.prototype.warnIfPossibleMemoryLeak=function(event){this.warned||this.maxListeners&&this.callbacks[event].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(event)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},Emitter.prototype.on=function(event,callback){return this.callbacks[event]?(this.callbacks[event].push(callback),this.warnIfPossibleMemoryLeak(event)):this.callbacks[event]=[callback],this},Emitter.prototype.once=function(event,callback){var _this=this,on=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];_this.off(event,on),callback.apply(_this,args)};return this.on(event,on),this},Emitter.prototype.off=function(event,callback){var _a,without=(null!==(_a=this.callbacks[event])&&void 0!==_a?_a:[]).filter((function(fn){return fn!==callback}));return this.callbacks[event]=without,this},Emitter.prototype.emit=function(event){for(var _a,_this=this,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];return(null!==(_a=this.callbacks[event])&&void 0!==_a?_a:[]).forEach((function(callback){callback.apply(_this,args)})),this},Emitter}()},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/browser/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>AnalyticsBrowser});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function getProcessEnv(){return void 0!==process&&process.env?process.env:{}}var parse_cdn=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js"),fetch=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js"),helpers=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/validation/helpers.js");function resolveArguments(eventName,properties,options,callback){var _a,args=[eventName,properties,options,callback],name=(0,helpers.Qd)(eventName)?eventName.event:eventName;if(!name||!(0,helpers.Kg)(name))throw new Error("Event missing");var data=(0,helpers.Qd)(eventName)?null!==(_a=eventName.properties)&&void 0!==_a?_a:{}:(0,helpers.Qd)(properties)?properties:{},opts={};return(0,helpers.Tn)(options)||(opts=null!=options?options:{}),(0,helpers.Qd)(eventName)&&!(0,helpers.Tn)(properties)&&(opts=null!=properties?properties:{}),[name,data,opts,args.find(helpers.Tn)]}function resolvePageArguments(category,name,properties,options,callback){var _a,_b,resolvedCategory=null,resolvedName=null,args=[category,name,properties,options,callback],strings=args.filter(helpers.Kg);void 0!==strings[0]&&void 0!==strings[1]&&(resolvedCategory=strings[0],resolvedName=strings[1]),1===strings.length&&(resolvedCategory=null,resolvedName=strings[0]);var resolvedCallback=args.find(helpers.Tn),objects=args.filter((function(obj){return null===resolvedName?(0,helpers.Qd)(obj):(0,helpers.Qd)(obj)||null===obj})),resolvedProperties=null!==(_a=objects[0])&&void 0!==_a?_a:{},resolvedOptions=null!==(_b=objects[1])&&void 0!==_b?_b:{};return[resolvedCategory,resolvedName,resolvedProperties,resolvedOptions,resolvedCallback]}var resolveUserArguments=function(user){return function(){for(var _a,_b,_c,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];for(var values={},orderStack=["callback","options","traits","id"],_d=0,args_1=args;_d<args_1.length;_d++){var arg=args_1[_d],current=orderStack.pop();if("id"===current){if((0,helpers.Kg)(arg)||(0,helpers.Et)(arg)){values.id=arg.toString();continue}if(null==arg)continue;current=orderStack.pop()}if("traits"!==current&&"options"!==current||null!=arg&&!(0,helpers.Qd)(arg)||(values[current]=arg),(0,helpers.Tn)(arg)){values.callback=arg;break}}return[null!==(_a=values.id)&&void 0!==_a?_a:user.id(),null!==(_b=values.traits)&&void 0!==_b?_b:{},null!==(_c=values.options)&&void 0!==_c?_c:{},values.callback]}};function resolveAliasArguments(to,from,options,callback){(0,helpers.Et)(to)&&(to=to.toString()),(0,helpers.Et)(from)&&(from=from.toString());var args=[to,from,options,callback],_a=args.filter(helpers.Kg),_b=_a[0],aliasTo=void 0===_b?to:_b,_c=_a[1],aliasFrom=void 0===_c?null:_c,_d=args.filter(helpers.Qd)[0];return[aliasTo,aliasFrom,void 0===_d?{}:_d,args.find(helpers.Tn)]}var connection=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js"),context=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/context/index.js"),callback=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/callback/index.js");function dispatch(ctx,queue,emitter,options){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var startTime,dispatched;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return emitter.emit("dispatch_start",ctx),startTime=Date.now(),queue.isEmpty()?[4,queue.dispatchSingle(ctx)]:[3,2];case 1:return dispatched=_a.sent(),[3,4];case 2:return[4,queue.dispatch(ctx)];case 3:dispatched=_a.sent(),_a.label=4;case 4:return(null==options?void 0:options.callback)?[4,(0,callback.w_)(dispatched,options.callback,(startTimeInEpochMS=startTime,timeoutInMS=options.timeout,elapsedTime=Date.now()-startTimeInEpochMS,Math.max((null!=timeoutInMS?timeoutInMS:300)-elapsedTime,0)))]:[3,6];case 5:dispatched=_a.sent(),_a.label=6;case 6:return(null==options?void 0:options.debug)&&dispatched.flush(),[2,dispatched]}var startTimeInEpochMS,timeoutInMS,elapsedTime}))}))}var emitter=__webpack_require__("./node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js"),dist=__webpack_require__("./node_modules/.pnpm/@lukeed+uuid@2.0.1/node_modules/@lukeed/uuid/dist/index.mjs");var createBufferedPageContext=function(url,canonicalUrl,search,path,title,referrer){return{__t:"bpc",c:canonicalUrl,p:path,u:url,s:search,t:title,r:referrer}},BUFFERED_PAGE_CONTEXT_KEYS=Object.keys(createBufferedPageContext("","","","","",""));var createPageContext=function(_a){var href,hashIdx,canonicalUrl=_a.c,pathname=_a.p,search=_a.s,url=_a.u,referrer=_a.r,title=_a.t,newPath=canonicalUrl?function(canonicalUrl){try{return new URL(canonicalUrl).pathname}catch(_e){return"/"===canonicalUrl[0]?canonicalUrl:"/"+canonicalUrl}}(canonicalUrl):pathname,newUrl=canonicalUrl?function(canonicalUrl,searchParams){return canonicalUrl.indexOf("?")>-1?canonicalUrl:canonicalUrl+searchParams}(canonicalUrl,search):-1===(hashIdx=(href=url).indexOf("#"))?href:href.slice(0,hashIdx);return{path:newPath,referrer,search,title,url:newUrl}},getDefaultBufferedPageContext=function(){var c=document.querySelector("link[rel='canonical']");return createBufferedPageContext(location.href,c&&c.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},addPageContext=function(event,pageCtx){void 0===pageCtx&&(pageCtx=createPageContext(getDefaultBufferedPageContext()));var pageContextFromEventProps,evtCtx=event.context;"page"===event.type&&(pageContextFromEventProps=event.properties&&function pick(object,keys){return Object.assign.apply(Object,(0,tslib_es6.fX)([{}],keys.map((function(key){var _a;if(object&&Object.prototype.hasOwnProperty.call(object,key))return(_a={})[key]=object[key],_a})),!1))}(event.properties,Object.keys(pageCtx)),event.properties=(0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},pageCtx),event.properties),event.name?{name:event.name}:{})),evtCtx.page=(0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},pageCtx),pageContextFromEventProps),evtCtx.page)},dset_dist=__webpack_require__("./node_modules/.pnpm/dset@3.1.3/node_modules/dset/dist/index.mjs"),errors_ValidationError=function(_super){function ValidationError(field,message){var _this=_super.call(this,"".concat(field," ").concat(message))||this;return _this.field=field,_this}return(0,tslib_es6.C6)(ValidationError,_super),ValidationError}(Error),stringError="is not a string",objError="is not an object",nilError="is nil";function validateEvent(event){!function assertEventExists(event){if(!(0,helpers.t2)(event))throw new errors_ValidationError("Event",nilError);if("object"!=typeof event)throw new errors_ValidationError("Event",objError)}(event),function assertEventType(event){if(!(0,helpers.Kg)(event.type))throw new errors_ValidationError(".type",stringError)}(event),function assertMessageId(event){if(!(0,helpers.Kg)(event.messageId))throw new errors_ValidationError(".messageId",stringError)}(event),"track"===event.type&&(!function assertTrackEventName(event){if(!(0,helpers.Kg)(event.event))throw new errors_ValidationError(".event",stringError)}(event),function assertTrackEventProperties(event){if(!(0,helpers.Qd)(event.properties))throw new errors_ValidationError(".properties",objError)}(event)),["group","identify"].includes(event.type)&&function assertTraits(event){if(!(0,helpers.Qd)(event.traits))throw new errors_ValidationError(".traits",objError)}(event)}var InternalEventFactorySettings=function InternalEventFactorySettings(settings){var _a,_b;this.settings=settings,this.createMessageId=settings.createMessageId,this.onEventMethodCall=null!==(_a=settings.onEventMethodCall)&&void 0!==_a?_a:function(){},this.onFinishedEvent=null!==(_b=settings.onFinishedEvent)&&void 0!==_b?_b:function(){}},CoreEventFactory=function(){function CoreEventFactory(settings){this.settings=new InternalEventFactorySettings(settings)}return CoreEventFactory.prototype.track=function(event,properties,options,globalIntegrations){return this.settings.onEventMethodCall({type:"track",options}),this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.baseEvent()),{event,type:"track",properties:null!=properties?properties:{},options:(0,tslib_es6.Cl)({},options),integrations:(0,tslib_es6.Cl)({},globalIntegrations)}))},CoreEventFactory.prototype.page=function(category,page,properties,options,globalIntegrations){var _a;this.settings.onEventMethodCall({type:"page",options});var event={type:"page",properties:(0,tslib_es6.Cl)({},properties),options:(0,tslib_es6.Cl)({},options),integrations:(0,tslib_es6.Cl)({},globalIntegrations)};return null!==category&&(event.category=category,event.properties=null!==(_a=event.properties)&&void 0!==_a?_a:{},event.properties.category=category),null!==page&&(event.name=page),this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.baseEvent()),event))},CoreEventFactory.prototype.screen=function(category,screen,properties,options,globalIntegrations){this.settings.onEventMethodCall({type:"screen",options});var event={type:"screen",properties:(0,tslib_es6.Cl)({},properties),options:(0,tslib_es6.Cl)({},options),integrations:(0,tslib_es6.Cl)({},globalIntegrations)};return null!==category&&(event.category=category),null!==screen&&(event.name=screen),this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.baseEvent()),event))},CoreEventFactory.prototype.identify=function(userId,traits,options,globalIntegrations){return this.settings.onEventMethodCall({type:"identify",options}),this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.baseEvent()),{type:"identify",userId,traits:null!=traits?traits:{},options:(0,tslib_es6.Cl)({},options),integrations:globalIntegrations}))},CoreEventFactory.prototype.group=function(groupId,traits,options,globalIntegrations){return this.settings.onEventMethodCall({type:"group",options}),this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.baseEvent()),{type:"group",traits:null!=traits?traits:{},options:(0,tslib_es6.Cl)({},options),integrations:(0,tslib_es6.Cl)({},globalIntegrations),groupId}))},CoreEventFactory.prototype.alias=function(to,from,options,globalIntegrations){this.settings.onEventMethodCall({type:"alias",options});var base={userId:to,type:"alias",options:(0,tslib_es6.Cl)({},options),integrations:(0,tslib_es6.Cl)({},globalIntegrations)};return null!==from&&(base.previousId=from),void 0===to?this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},base),this.baseEvent())):this.normalize((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.baseEvent()),base))},CoreEventFactory.prototype.baseEvent=function(){return{integrations:{},options:{}}},CoreEventFactory.prototype.context=function(options){var _a,eventOverrideKeys=["userId","anonymousId","timestamp","messageId"];delete options.integrations;var providedOptionsKeys=Object.keys(options),context=null!==(_a=options.context)&&void 0!==_a?_a:{},eventOverrides={};return providedOptionsKeys.forEach((function(key){"context"!==key&&(eventOverrideKeys.includes(key)?(0,dset_dist.J)(eventOverrides,key,options[key]):(0,dset_dist.J)(context,key,options[key]))})),[context,eventOverrides]},CoreEventFactory.prototype.normalize=function(event){var _a,_b,obj,fn,integrationBooleans=Object.keys(null!==(_a=event.integrations)&&void 0!==_a?_a:{}).reduce((function(integrationNames,name){var _a,_b;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},integrationNames),((_a={})[name]=Boolean(null===(_b=event.integrations)||void 0===_b?void 0:_b[name]),_a))}),{});event.options=(obj=event.options||{},fn=function(_,value){return void 0!==value},Object.keys(obj).filter((function(k){return fn(k,obj[k])})).reduce((function(acc,key){return acc[key]=obj[key],acc}),{}));var allIntegrations=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},integrationBooleans),null===(_b=event.options)||void 0===_b?void 0:_b.integrations),_c=event.options?this.context(event.options):[],context=_c[0],overrides=_c[1],options=event.options,rest=(0,tslib_es6.Tt)(event,["options"]),evt=(0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({timestamp:new Date},rest),{context,integrations:allIntegrations}),overrides),{messageId:options.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(evt),validateEvent(evt),evt},CoreEventFactory}(),EventFactory=function(_super){function EventFactory(user){var _this=_super.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,dist.v4)())},onEventMethodCall:function(_a){var options=_a.options;_this.maybeUpdateAnonId(options)},onFinishedEvent:function(event){return _this.addIdentity(event),event}})||this;return _this.user=user,_this}return(0,tslib_es6.C6)(EventFactory,_super),EventFactory.prototype.maybeUpdateAnonId=function(options){(null==options?void 0:options.anonymousId)&&this.user.anonymousId(options.anonymousId)},EventFactory.prototype.addIdentity=function(event){this.user.id()&&(event.userId=this.user.id()),this.user.anonymousId()&&(event.anonymousId=this.user.anonymousId())},EventFactory.prototype.track=function(event,properties,options,globalIntegrations,pageCtx){var ev=_super.prototype.track.call(this,event,properties,options,globalIntegrations);return addPageContext(ev,pageCtx),ev},EventFactory.prototype.page=function(category,page,properties,options,globalIntegrations,pageCtx){var ev=_super.prototype.page.call(this,category,page,properties,options,globalIntegrations);return addPageContext(ev,pageCtx),ev},EventFactory.prototype.screen=function(category,screen,properties,options,globalIntegrations,pageCtx){var ev=_super.prototype.screen.call(this,category,screen,properties,options,globalIntegrations);return addPageContext(ev,pageCtx),ev},EventFactory.prototype.identify=function(userId,traits,options,globalIntegrations,pageCtx){var ev=_super.prototype.identify.call(this,userId,traits,options,globalIntegrations);return addPageContext(ev,pageCtx),ev},EventFactory.prototype.group=function(groupId,traits,options,globalIntegrations,pageCtx){var ev=_super.prototype.group.call(this,groupId,traits,options,globalIntegrations);return addPageContext(ev,pageCtx),ev},EventFactory.prototype.alias=function(to,from,options,globalIntegrations,pageCtx){var ev=_super.prototype.alias.call(this,to,from,options,globalIntegrations);return addPageContext(ev,pageCtx),ev},EventFactory}(CoreEventFactory),isDestinationPluginWithAddMiddleware=function(plugin){return"addMiddleware"in plugin&&"destination"===plugin.type},persisted=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js");var priority_queue=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js"),esm_context=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/context/index.js"),delivery=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/queue/delivery.js"),CoreEventQueue=function(_super){function CoreEventQueue(priorityQueue){var taskCompletionPromise,resolvePromise,count,_this=_super.call(this)||this;return _this.criticalTasks=(count=0,{done:function(){return taskCompletionPromise},run:function(op){var value,returnValue=op();return"object"==typeof(value=returnValue)&&null!==value&&"then"in value&&"function"==typeof value.then&&(1==++count&&(taskCompletionPromise=new Promise((function(res){return resolvePromise=res}))),returnValue.finally((function(){return 0==--count&&resolvePromise()}))),returnValue}}),_this.plugins=[],_this.failedInitializations=[],_this.flushing=!1,_this.queue=priorityQueue,_this.queue.on(priority_queue.g,(function(){_this.scheduleFlush(0)})),_this}return(0,tslib_es6.C6)(CoreEventQueue,_super),CoreEventQueue.prototype.register=function(ctx,plugin,instance){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var handleLoadError,err_1,_this=this;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return this.plugins.push(plugin),handleLoadError=function(err){_this.failedInitializations.push(plugin.name),_this.emit("initialization_failure",plugin),console.warn(plugin.name,err),ctx.log("warn","Failed to load destination",{plugin:plugin.name,error:err}),_this.plugins=_this.plugins.filter((function(p){return p!==plugin}))},"destination"!==plugin.type||"Segment.io"===plugin.name?[3,1]:(plugin.load(ctx,instance).catch(handleLoadError),[3,4]);case 1:return _a.trys.push([1,3,,4]),[4,plugin.load(ctx,instance)];case 2:return _a.sent(),[3,4];case 3:return err_1=_a.sent(),handleLoadError(err_1),[3,4];case 4:return[2]}}))}))},CoreEventQueue.prototype.deregister=function(ctx,plugin,instance){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var e_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),plugin.unload?[4,Promise.resolve(plugin.unload(ctx,instance))]:[3,2];case 1:_a.sent(),_a.label=2;case 2:return this.plugins=this.plugins.filter((function(p){return p.name!==plugin.name})),[3,4];case 3:return e_1=_a.sent(),ctx.log("warn","Failed to unload destination",{plugin:plugin.name,error:e_1}),[3,4];case 4:return[2]}}))}))},CoreEventQueue.prototype.dispatch=function(ctx){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var willDeliver;return(0,tslib_es6.YH)(this,(function(_a){return ctx.log("debug","Dispatching"),ctx.stats.increment("message_dispatched"),this.queue.push(ctx),willDeliver=this.subscribeToDelivery(ctx),this.scheduleFlush(0),[2,willDeliver]}))}))},CoreEventQueue.prototype.subscribeToDelivery=function(ctx){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var _this=this;return(0,tslib_es6.YH)(this,(function(_a){return[2,new Promise((function(resolve){var onDeliver=function(flushed,delivered){flushed.isSame(ctx)&&(_this.off("flush",onDeliver),resolve(flushed))};_this.on("flush",onDeliver)}))]}))}))},CoreEventQueue.prototype.dispatchSingle=function(ctx){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var _this=this;return(0,tslib_es6.YH)(this,(function(_a){return ctx.log("debug","Dispatching"),ctx.stats.increment("message_dispatched"),this.queue.updateAttempts(ctx),ctx.attempts=1,[2,this.deliver(ctx).catch((function(err){return _this.enqueuRetry(err,ctx)?_this.subscribeToDelivery(ctx):(ctx.setFailedDelivery({reason:err}),ctx)}))]}))}))},CoreEventQueue.prototype.isEmpty=function(){return 0===this.queue.length},CoreEventQueue.prototype.scheduleFlush=function(timeout){var _this=this;void 0===timeout&&(timeout=500),this.flushing||(this.flushing=!0,setTimeout((function(){_this.flush().then((function(){setTimeout((function(){_this.flushing=!1,_this.queue.length&&_this.scheduleFlush(0)}),0)}))}),timeout))},CoreEventQueue.prototype.deliver=function(ctx){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var start,done,err_2,error;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,this.criticalTasks.done()];case 1:_a.sent(),start=Date.now(),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,this.flushOne(ctx)];case 3:return ctx=_a.sent(),done=Date.now()-start,this.emit("delivery_success",ctx),ctx.stats.gauge("delivered",done),ctx.log("debug","Delivered",ctx.event),[2,ctx];case 4:throw err_2=_a.sent(),error=err_2,ctx.log("error","Failed to deliver",error),this.emit("delivery_failure",ctx,error),ctx.stats.increment("delivery_failed"),err_2;case 5:return[2]}}))}))},CoreEventQueue.prototype.enqueuRetry=function(err,ctx){return!(err instanceof esm_context.d&&!err.retry)&&this.queue.pushWithBackoff(ctx)},CoreEventQueue.prototype.flush=function(){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var ctx,err_3;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:if(0===this.queue.length)return[2,[]];if(!(ctx=this.queue.pop()))return[2,[]];ctx.attempts=this.queue.getAttempts(ctx),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.deliver(ctx)];case 2:return ctx=_a.sent(),this.emit("flush",ctx,!0),[3,4];case 3:return err_3=_a.sent(),this.enqueuRetry(err_3,ctx)||(ctx.setFailedDelivery({reason:err_3}),this.emit("flush",ctx,!1)),[2,[]];case 4:return[2,[ctx]]}}))}))},CoreEventQueue.prototype.isReady=function(){return!0},CoreEventQueue.prototype.availableExtensions=function(denyList){var available=this.plugins.filter((function(p){var _a,_b,_c;if("destination"!==p.type&&"Segment.io"!==p.name)return!0;var alternativeNameMatch=void 0;return null===(_a=p.alternativeNames)||void 0===_a||_a.forEach((function(name){void 0!==denyList[name]&&(alternativeNameMatch=denyList[name])})),null!==(_c=null!==(_b=denyList[p.name])&&void 0!==_b?_b:alternativeNameMatch)&&void 0!==_c?_c:!1!==("Segment.io"===p.name||denyList.All)})),_a=function groupBy(collection,grouper){var results={};return collection.forEach((function(item){var _a,key=void 0;if("string"==typeof grouper){var suggestedKey=item[grouper];key="string"!=typeof suggestedKey?JSON.stringify(suggestedKey):suggestedKey}else grouper instanceof Function&&(key=grouper(item));void 0!==key&&(results[key]=(0,tslib_es6.fX)((0,tslib_es6.fX)([],null!==(_a=results[key])&&void 0!==_a?_a:[],!0),[item],!1))})),results}(available,"type"),_b=_a.before,before=void 0===_b?[]:_b,_c=_a.enrichment,enrichment=void 0===_c?[]:_c,_d=_a.destination,destination=void 0===_d?[]:_d,_e=_a.after;return{before,enrichment,destinations:destination,after:void 0===_e?[]:_e}},CoreEventQueue.prototype.flushOne=function(ctx){var _a,_b;return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var _c,before,enrichment,_i,before_1,beforeWare,_d,enrichment_1,enrichmentWare,temp,_e,destinations,after,afterCalls;return(0,tslib_es6.YH)(this,(function(_f){switch(_f.label){case 0:if(!this.isReady())throw new Error("Not ready");ctx.attempts>1&&this.emit("delivery_retry",ctx),_c=this.availableExtensions(null!==(_a=ctx.event.integrations)&&void 0!==_a?_a:{}),before=_c.before,enrichment=_c.enrichment,_i=0,before_1=before,_f.label=1;case 1:return _i<before_1.length?(beforeWare=before_1[_i],[4,(0,delivery.D)(ctx,beforeWare)]):[3,4];case 2:(temp=_f.sent())instanceof esm_context.j&&(ctx=temp),this.emit("message_enriched",ctx,beforeWare),_f.label=3;case 3:return _i++,[3,1];case 4:_d=0,enrichment_1=enrichment,_f.label=5;case 5:return _d<enrichment_1.length?(enrichmentWare=enrichment_1[_d],[4,(0,delivery.C)(ctx,enrichmentWare)]):[3,8];case 6:(temp=_f.sent())instanceof esm_context.j&&(ctx=temp),this.emit("message_enriched",ctx,enrichmentWare),_f.label=7;case 7:return _d++,[3,5];case 8:return _e=this.availableExtensions(null!==(_b=ctx.event.integrations)&&void 0!==_b?_b:{}),destinations=_e.destinations,after=_e.after,[4,new Promise((function(resolve,reject){setTimeout((function(){var attempts=destinations.map((function(destination){return(0,delivery.C)(ctx,destination)}));Promise.all(attempts).then(resolve).catch(reject)}),0)}))];case 9:return _f.sent(),ctx.stats.increment("message_delivered"),this.emit("message_delivered",ctx),afterCalls=after.map((function(after){return(0,delivery.C)(ctx,after)})),[4,Promise.all(afterCalls)];case 10:return _f.sent(),[2,ctx]}}))}))},CoreEventQueue}(emitter.v),EventQueue=function(_super){function EventQueue(nameOrQueue){return _super.call(this,"string"==typeof nameOrQueue?new persisted.x(4,nameOrQueue):nameOrQueue)||this}return(0,tslib_es6.C6)(EventQueue,_super),EventQueue.prototype.flush=function(){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){return(0,connection.a)()?[2,[]]:[2,_super.prototype.flush.call(this)]}))}))},EventQueue}(CoreEventQueue);function bindAll(obj){for(var proto=obj.constructor.prototype,_i=0,_a=Object.getOwnPropertyNames(proto);_i<_a.length;_i++){var key=_a[_i];if("constructor"!==key){var desc=Object.getOwnPropertyDescriptor(obj.constructor.prototype,key);desc&&"function"==typeof desc.value&&(obj[key]=obj[key].bind(obj))}}return obj}var StoreType={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},_logStoreKeyError=function(store,action,key,err){console.warn("".concat(store.constructor.name,": Can't ").concat(action,' key "').concat(key,'" | Err: ').concat(err))},UniversalStorage=function(){function UniversalStorage(stores){this.stores=stores}return UniversalStorage.prototype.get=function(key){for(var val=null,_i=0,_a=this.stores;_i<_a.length;_i++){var store=_a[_i];try{if(null!=(val=store.get(key)))return val}catch(e){_logStoreKeyError(store,"get",key,e)}}return null},UniversalStorage.prototype.set=function(key,value){this.stores.forEach((function(store){try{store.set(key,value)}catch(e){_logStoreKeyError(store,"set",key,e)}}))},UniversalStorage.prototype.clear=function(key){this.stores.forEach((function(store){try{store.remove(key)}catch(e){_logStoreKeyError(store,"remove",key,e)}}))},UniversalStorage.prototype.getAndSync=function(key){var val=this.get(key),coercedValue="number"==typeof val?val.toString():val;return this.set(key,coercedValue),coercedValue},UniversalStorage}(),MemoryStorage=function(){function MemoryStorage(){this.cache={}}return MemoryStorage.prototype.get=function(key){var _a;return null!==(_a=this.cache[key])&&void 0!==_a?_a:null},MemoryStorage.prototype.set=function(key,value){this.cache[key]=value},MemoryStorage.prototype.remove=function(key){delete this.cache[key]},MemoryStorage}();function isArrayOfStoreType(s){return s&&s.stores&&Array.isArray(s.stores)&&s.stores.every((function(e){return Object.values(StoreType).includes(e)}))}function js_cookie_assign(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)target[key]=source[key]}return target}var api=function init(converter,defaultAttributes){function set(key,value,attributes){if("undefined"!=typeof document){"number"==typeof(attributes=js_cookie_assign({},defaultAttributes,attributes)).expires&&(attributes.expires=new Date(Date.now()+864e5*attributes.expires)),attributes.expires&&(attributes.expires=attributes.expires.toUTCString()),key=encodeURIComponent(key).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName].split(";")[0]));return document.cookie=key+"="+converter.write(value,key)+stringifiedAttributes}}return Object.create({set,get:function get(key){if("undefined"!=typeof document&&(!arguments.length||key)){for(var cookies=document.cookie?document.cookie.split("; "):[],jar={},i=0;i<cookies.length;i++){var parts=cookies[i].split("="),value=parts.slice(1).join("=");try{var foundKey=decodeURIComponent(parts[0]);if(jar[foundKey]=converter.read(value,foundKey),key===foundKey)break}catch(e){}}return key?jar[key]:jar}},remove:function(key,attributes){set(key,"",js_cookie_assign({},attributes,{expires:-1}))},withAttributes:function(attributes){return init(this.converter,js_cookie_assign({},this.attributes,attributes))},withConverter:function(converter){return init(js_cookie_assign({},this.converter,converter),this.attributes)}},{attributes:{value:Object.freeze(defaultAttributes)},converter:{value:Object.freeze(converter)}})}({read:function(value){return'"'===value[0]&&(value=value.slice(1,-1)),value.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(value){return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const js_cookie=api;function tld(url){var parsedUrl=function parseUrl(url){try{return new URL(url)}catch(_a){return}}(url);if(parsedUrl)for(var lvls=function levels(url){var parts=url.hostname.split("."),last=parts[parts.length-1],levels=[];if(4===parts.length&&parseInt(last,10)>0)return levels;if(parts.length<=1)return levels;for(var i=parts.length-2;i>=0;--i)levels.push(parts.slice(i).join("."));return levels}(parsedUrl),i=0;i<lvls.length;++i){var domain=lvls[i],opts={domain:"."+domain};try{if(js_cookie.set("__tld__","1",opts),js_cookie.get("__tld__"))return js_cookie.remove("__tld__",opts),domain}catch(_){return}}}var CookieStorage=function(){function CookieStorage(options){void 0===options&&(options=CookieStorage.defaults),this.options=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},CookieStorage.defaults),options)}return Object.defineProperty(CookieStorage,"defaults",{get:function(){return{maxage:365,domain:tld(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),CookieStorage.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},CookieStorage.prototype.get=function(key){var _a;try{var value=js_cookie.get(key);if(null==value)return null;try{return null!==(_a=JSON.parse(value))&&void 0!==_a?_a:null}catch(e){return null!=value?value:null}}catch(e){return null}},CookieStorage.prototype.set=function(key,value){"string"==typeof value?js_cookie.set(key,value,this.opts()):null===value?js_cookie.remove(key,this.opts()):js_cookie.set(key,JSON.stringify(value),this.opts())},CookieStorage.prototype.remove=function(key){return js_cookie.remove(key,this.opts())},CookieStorage}(),LocalStorage=function(){function LocalStorage(){}return LocalStorage.prototype.localStorageWarning=function(key,state){console.warn("Unable to access ".concat(key,", localStorage may be ").concat(state))},LocalStorage.prototype.get=function(key){var _a;try{var val=localStorage.getItem(key);if(null===val)return null;try{return null!==(_a=JSON.parse(val))&&void 0!==_a?_a:null}catch(e){return null!=val?val:null}}catch(err){return this.localStorageWarning(key,"unavailable"),null}},LocalStorage.prototype.set=function(key,value){try{localStorage.setItem(key,JSON.stringify(value))}catch(_a){this.localStorageWarning(key,"full")}},LocalStorage.prototype.remove=function(key){try{return localStorage.removeItem(key)}catch(err){this.localStorageWarning(key,"unavailable")}},LocalStorage}();function initializeStorages(args){return args.map((function(s){var type,settings;switch(!function isStoreTypeWithSettings(s){return"object"==typeof s&&void 0!==s.name}(s)?type=s:(type=s.name,settings=s.settings),type){case StoreType.Cookie:return new CookieStorage(settings);case StoreType.LocalStorage:return new LocalStorage;case StoreType.Memory:return new MemoryStorage;default:throw new Error("Unknown Store Type: ".concat(s))}}))}function applyCookieOptions(storeTypes,cookieOptions){return storeTypes.map((function(s){return cookieOptions&&s===StoreType.Cookie?{name:s,settings:cookieOptions}:s}))}var defaults={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},User=function(){function User(options,cookieOptions){void 0===options&&(options=defaults);var _a,_b,_c,_d,_this=this;this.options={},this.id=function(id){if(_this.options.disable)return null;var prevId=_this.identityStore.getAndSync(_this.idKey);void 0!==id&&(_this.identityStore.set(_this.idKey,id),id!==prevId&&null!==prevId&&null!==id&&_this.anonymousId(null));var retId=_this.identityStore.getAndSync(_this.idKey);if(retId)return retId;var retLeg=_this.legacyUserStore.get(defaults.cookie.oldKey);return retLeg?"object"==typeof retLeg?retLeg.id:retLeg:null},this.anonymousId=function(id){var _a,_b;if(_this.options.disable)return null;if(void 0===id){var val=null!==(_a=_this.identityStore.getAndSync(_this.anonKey))&&void 0!==_a?_a:null===(_b=_this.legacySIO())||void 0===_b?void 0:_b[0];if(val)return val}return null===id?(_this.identityStore.set(_this.anonKey,null),_this.identityStore.getAndSync(_this.anonKey)):(_this.identityStore.set(_this.anonKey,null!=id?id:(0,dist.v4)()),_this.identityStore.getAndSync(_this.anonKey))},this.traits=function(traits){var _a;if(!_this.options.disable)return null===traits&&(traits={}),traits&&_this.traitsStore.set(_this.traitsKey,null!=traits?traits:{}),null!==(_a=_this.traitsStore.get(_this.traitsKey))&&void 0!==_a?_a:{}},this.options=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},defaults),options),this.cookieOptions=cookieOptions,this.idKey=null!==(_b=null===(_a=options.cookie)||void 0===_a?void 0:_a.key)&&void 0!==_b?_b:defaults.cookie.key,this.traitsKey=null!==(_d=null===(_c=options.localStorage)||void 0===_c?void 0:_c.key)&&void 0!==_d?_d:defaults.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,cookieOptions),this.legacyUserStore=this.createStorage(this.options,cookieOptions,(function(s){return s===StoreType.Cookie})),this.traitsStore=this.createStorage(this.options,cookieOptions,(function(s){return s!==StoreType.Cookie}));var legacyUser=this.legacyUserStore.get(defaults.cookie.oldKey);legacyUser&&"object"==typeof legacyUser&&(legacyUser.id&&this.id(legacyUser.id),legacyUser.traits&&this.traits(legacyUser.traits)),bindAll(this)}return User.prototype.legacySIO=function(){var val=this.legacyUserStore.get("_sio");if(!val)return null;var _a=val.split("----");return[_a[0],_a[1]]},User.prototype.identify=function(id,traits){if(!this.options.disable){traits=null!=traits?traits:{};var currentId=this.id();null!==currentId&&currentId!==id||(traits=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},this.traits()),traits)),id&&this.id(id),this.traits(traits)}},User.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},User.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},User.prototype.load=function(){return new User(this.options,this.cookieOptions)},User.prototype.save=function(){return!0},User.prototype.createStorage=function(options,cookieOpts,filterStores){var stores=[StoreType.LocalStorage,StoreType.Cookie,StoreType.Memory];return options.disable?new UniversalStorage([]):options.persist?(void 0!==options.storage&&null!==options.storage&&isArrayOfStoreType(options.storage)&&(stores=options.storage.stores),options.localStorageFallbackDisabled&&(stores=stores.filter((function(s){return s!==StoreType.LocalStorage}))),filterStores&&(stores=stores.filter(filterStores)),new UniversalStorage(initializeStorages(applyCookieOptions(stores,cookieOpts)))):new UniversalStorage([new MemoryStorage])},User.defaults=defaults,User}(),groupDefaults={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},Group=function(_super){function Group(options,cookie){void 0===options&&(options=groupDefaults);var _this=_super.call(this,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},groupDefaults),options),cookie)||this;return _this.anonymousId=function(_id){},bindAll(_this),_this}return(0,tslib_es6.C6)(Group,_super),Group}(User),version=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/generated/version.js"),get_global=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js"),global_analytics_helper=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js"),flushSyncAnalyticsCalls=function(name,analytics,buffer){buffer.getCalls(name).forEach((function(c){callAnalyticsMethod(analytics,c).catch(console.error)}))},flushAddSourceMiddleware=function(analytics,buffer){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var _i,_a,c;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:_i=0,_a=buffer.getCalls("addSourceMiddleware"),_b.label=1;case 1:return _i<_a.length?(c=_a[_i],[4,callAnalyticsMethod(analytics,c).catch(console.error)]):[3,4];case 2:_b.sent(),_b.label=3;case 3:return _i++,[3,1];case 4:return[2]}}))}))},flushOn=flushSyncAnalyticsCalls.bind(void 0,"on"),flushSetAnonymousID=flushSyncAnalyticsCalls.bind(void 0,"setAnonymousId"),flushAnalyticsCallsInNewTask=function(analytics,buffer){buffer.toArray().forEach((function(m){setTimeout((function(){callAnalyticsMethod(analytics,m).catch(console.error)}),0)}))},popPageContext=function(args){if(hasBufferedPageContextAsLastArg(args)){var ctx=args.pop();return createPageContext(ctx)}},hasBufferedPageContextAsLastArg=function(args){return function isBufferedPageContext(bufferedPageCtx){if(!(0,helpers.Qd)(bufferedPageCtx))return!1;if("bpc"!==bufferedPageCtx.__t)return!1;for(var k in bufferedPageCtx)if(!BUFFERED_PAGE_CONTEXT_KEYS.includes(k))return!1;return!0}(args[args.length-1])},PreInitMethodCall=function PreInitMethodCall(method,args,resolve,reject){void 0===resolve&&(resolve=function(){}),void 0===reject&&(reject=console.error),this.method=method,this.resolve=resolve,this.reject=reject,this.called=!1,this.args=args},PreInitMethodCallBuffer=function(){function PreInitMethodCallBuffer(){for(var calls=[],_i=0;_i<arguments.length;_i++)calls[_i]=arguments[_i];this._callMap={},this.push.apply(this,calls)}return Object.defineProperty(PreInitMethodCallBuffer.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(calls){this._callMap=calls},enumerable:!1,configurable:!0}),PreInitMethodCallBuffer.prototype.getCalls=function(methodName){var _a;return null!==(_a=this.calls[methodName])&&void 0!==_a?_a:[]},PreInitMethodCallBuffer.prototype.push=function(){for(var _this=this,calls=[],_i=0;_i<arguments.length;_i++)calls[_i]=arguments[_i];calls.forEach((function(call){["track","screen","alias","group","page","identify"].includes(call.method)&&!hasBufferedPageContextAsLastArg(call.args)&&(call.args=(0,tslib_es6.fX)((0,tslib_es6.fX)([],call.args,!0),[getDefaultBufferedPageContext()],!1)),_this.calls[call.method]?_this.calls[call.method].push(call):_this.calls[call.method]=[call]}))},PreInitMethodCallBuffer.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},PreInitMethodCallBuffer.prototype.toArray=function(){var _a;return(_a=[]).concat.apply(_a,Object.values(this.calls))},PreInitMethodCallBuffer.prototype._pushSnippetWindowBuffer=function(){var wa=(0,global_analytics_helper.kJ)();if(Array.isArray(wa)){var calls=wa.splice(0,wa.length).map((function(_a){var methodName=_a[0],args=_a.slice(1);return new PreInitMethodCall(methodName,args)}));this.push.apply(this,calls)}},PreInitMethodCallBuffer}();function callAnalyticsMethod(analytics,call){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var result,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),call.called?[2,void 0]:(call.called=!0,result=analytics[call.method].apply(analytics,call.args),"object"==typeof(value=result)&&null!==value&&"then"in value&&"function"==typeof value.then?[4,result]:[3,2]);case 1:_a.sent(),_a.label=2;case 2:return call.resolve(result),[3,4];case 3:return err_1=_a.sent(),call.reject(err_1),[3,4];case 4:return[2]}var value}))}))}var AnalyticsBuffered=function(){function AnalyticsBuffered(loader){var _this=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=version.r,this._preInitBuffer=new PreInitMethodCallBuffer,this._promise=loader(this._preInitBuffer),this._promise.then((function(_a){var ajs=_a[0],ctx=_a[1];_this.instance=ajs,_this.ctx=ctx})).catch((function(){}))}return AnalyticsBuffered.prototype.then=function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(_a=this._promise).then.apply(_a,args)},AnalyticsBuffered.prototype.catch=function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(_a=this._promise).catch.apply(_a,args)},AnalyticsBuffered.prototype.finally=function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(_a=this._promise).finally.apply(_a,args)},AnalyticsBuffered.prototype._createMethod=function(methodName){var _this=this;return function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(_this.instance){var result=(_a=_this.instance)[methodName].apply(_a,args);return Promise.resolve(result)}return new Promise((function(resolve,reject){_this._preInitBuffer.push(new PreInitMethodCall(methodName,args,resolve,reject))}))}},AnalyticsBuffered.prototype._createChainableMethod=function(methodName){var _this=this;return function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return _this.instance?((_a=_this.instance)[methodName].apply(_a,args),_this):(_this._preInitBuffer.push(new PreInitMethodCall(methodName,args)),_this)}},AnalyticsBuffered}(),deprecationWarning="This is being deprecated and will be not be available in future releases of Analytics JS",global=(0,get_global.m)(),_analytics=null==global?void 0:global.analytics;var AnalyticsInstanceSettings=function AnalyticsInstanceSettings(settings){var _a;this.timeout=300,this.writeKey=settings.writeKey,this.cdnSettings=null!==(_a=settings.cdnSettings)&&void 0!==_a?_a:{integrations:{}}};function _stub(){console.warn(deprecationWarning)}var cookieOptions,Analytics=function(_super){function Analytics(settings,options,queue,user,group){var _a,_b,_this=this;(_this=_super.call(this)||this)._debug=!1,_this.initialized=!1,_this.user=function(){return _this._user},_this.init=_this.initialize.bind(_this),_this.log=_stub,_this.addIntegrationMiddleware=_stub,_this.listeners=_stub,_this.addEventListener=_stub,_this.removeAllListeners=_stub,_this.removeListener=_stub,_this.removeEventListener=_stub,_this.hasListeners=_stub,_this.add=_stub,_this.addIntegration=_stub;var cookieOptions=null==options?void 0:options.cookie,disablePersistance=null!==(_a=null==options?void 0:options.disableClientPersistence)&&void 0!==_a&&_a;_this.settings=new AnalyticsInstanceSettings(settings),_this.queue=null!=queue?queue:function createDefaultQueue(name,retryQueue,disablePersistance){void 0===retryQueue&&(retryQueue=!1),void 0===disablePersistance&&(disablePersistance=!1);var maxAttempts=retryQueue?10:1,priorityQueue=disablePersistance?new priority_queue.M(maxAttempts,[]):new persisted.x(maxAttempts,name);return new EventQueue(priorityQueue)}("".concat(settings.writeKey,":event-queue"),null==options?void 0:options.retryQueue,disablePersistance);var storageSetting=null==options?void 0:options.storage;return _this._universalStorage=_this.createStore(disablePersistance,storageSetting,cookieOptions),_this._user=null!=user?user:new User((0,tslib_es6.Cl)({persist:!disablePersistance,storage:null==options?void 0:options.storage},null==options?void 0:options.user),cookieOptions).load(),_this._group=null!=group?group:new Group((0,tslib_es6.Cl)({persist:!disablePersistance,storage:null==options?void 0:options.storage},null==options?void 0:options.group),cookieOptions).load(),_this.eventFactory=new EventFactory(_this._user),_this.integrations=null!==(_b=null==options?void 0:options.integrations)&&void 0!==_b?_b:{},_this.options=null!=options?options:{},bindAll(_this),_this}return(0,tslib_es6.C6)(Analytics,_super),Analytics.prototype.createStore=function(disablePersistance,storageSetting,cookieOptions){return disablePersistance?new UniversalStorage([new MemoryStorage]):storageSetting&&isArrayOfStoreType(storageSetting)?new UniversalStorage(initializeStorages(applyCookieOptions(storageSetting.stores,cookieOptions))):new UniversalStorage(initializeStorages([StoreType.LocalStorage,{name:StoreType.Cookie,settings:cookieOptions},StoreType.Memory]))},Object.defineProperty(Analytics.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),Analytics.prototype.track=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var pageCtx,_a,name,data,opts,cb,segmentEvent,_this=this;return(0,tslib_es6.YH)(this,(function(_b){return pageCtx=popPageContext(args),_a=resolveArguments.apply(void 0,args),name=_a[0],data=_a[1],opts=_a[2],cb=_a[3],segmentEvent=this.eventFactory.track(name,data,opts,this.integrations,pageCtx),[2,this._dispatch(segmentEvent,cb).then((function(ctx){return _this.emit("track",name,ctx.event.properties,ctx.event.options),ctx}))]}))}))},Analytics.prototype.page=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var pageCtx,_a,category,page,properties,options,callback,segmentEvent,_this=this;return(0,tslib_es6.YH)(this,(function(_b){return pageCtx=popPageContext(args),_a=resolvePageArguments.apply(void 0,args),category=_a[0],page=_a[1],properties=_a[2],options=_a[3],callback=_a[4],segmentEvent=this.eventFactory.page(category,page,properties,options,this.integrations,pageCtx),[2,this._dispatch(segmentEvent,callback).then((function(ctx){return _this.emit("page",category,page,ctx.event.properties,ctx.event.options),ctx}))]}))}))},Analytics.prototype.identify=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var pageCtx,_a,id,_traits,options,callback,segmentEvent,_this=this;return(0,tslib_es6.YH)(this,(function(_b){return pageCtx=popPageContext(args),_a=resolveUserArguments(this._user).apply(void 0,args),id=_a[0],_traits=_a[1],options=_a[2],callback=_a[3],this._user.identify(id,_traits),segmentEvent=this.eventFactory.identify(this._user.id(),this._user.traits(),options,this.integrations,pageCtx),[2,this._dispatch(segmentEvent,callback).then((function(ctx){return _this.emit("identify",ctx.event.userId,ctx.event.traits,ctx.event.options),ctx}))]}))}))},Analytics.prototype.group=function(){for(var _this=this,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var pageCtx=popPageContext(args);if(0===args.length)return this._group;var _a=resolveUserArguments(this._group).apply(void 0,args),id=_a[0],_traits=_a[1],options=_a[2],callback=_a[3];this._group.identify(id,_traits);var groupId=this._group.id(),groupTraits=this._group.traits(),segmentEvent=this.eventFactory.group(groupId,groupTraits,options,this.integrations,pageCtx);return this._dispatch(segmentEvent,callback).then((function(ctx){return _this.emit("group",ctx.event.groupId,ctx.event.traits,ctx.event.options),ctx}))},Analytics.prototype.alias=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var pageCtx,_a,to,from,options,callback,segmentEvent,_this=this;return(0,tslib_es6.YH)(this,(function(_b){return pageCtx=popPageContext(args),_a=resolveAliasArguments.apply(void 0,args),to=_a[0],from=_a[1],options=_a[2],callback=_a[3],segmentEvent=this.eventFactory.alias(to,from,options,this.integrations,pageCtx),[2,this._dispatch(segmentEvent,callback).then((function(ctx){return _this.emit("alias",to,from,ctx.event.options),ctx}))]}))}))},Analytics.prototype.screen=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var pageCtx,_a,category,page,properties,options,callback,segmentEvent,_this=this;return(0,tslib_es6.YH)(this,(function(_b){return pageCtx=popPageContext(args),_a=resolvePageArguments.apply(void 0,args),category=_a[0],page=_a[1],properties=_a[2],options=_a[3],callback=_a[4],segmentEvent=this.eventFactory.screen(category,page,properties,options,this.integrations,pageCtx),[2,this._dispatch(segmentEvent,callback).then((function(ctx){return _this.emit("screen",category,page,ctx.event.properties,ctx.event.options),ctx}))]}))}))},Analytics.prototype.trackClick=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var autotrack,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,__webpack_require__.e(248).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js"))];case 1:return autotrack=_b.sent(),[2,(_a=autotrack.link).call.apply(_a,(0,tslib_es6.fX)([this],args,!1))]}}))}))},Analytics.prototype.trackLink=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var autotrack,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,__webpack_require__.e(248).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js"))];case 1:return autotrack=_b.sent(),[2,(_a=autotrack.link).call.apply(_a,(0,tslib_es6.fX)([this],args,!1))]}}))}))},Analytics.prototype.trackSubmit=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var autotrack,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,__webpack_require__.e(248).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js"))];case 1:return autotrack=_b.sent(),[2,(_a=autotrack.form).call.apply(_a,(0,tslib_es6.fX)([this],args,!1))]}}))}))},Analytics.prototype.trackForm=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var autotrack,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,__webpack_require__.e(248).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js"))];case 1:return autotrack=_b.sent(),[2,(_a=autotrack.form).call.apply(_a,(0,tslib_es6.fX)([this],args,!1))]}}))}))},Analytics.prototype.register=function(){for(var plugins=[],_i=0;_i<arguments.length;_i++)plugins[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var ctx,registrations,_this=this;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return ctx=context.o.system(),registrations=plugins.map((function(xt){return _this.queue.register(ctx,xt,_this)})),[4,Promise.all(registrations)];case 1:return _a.sent(),[2,ctx]}}))}))},Analytics.prototype.deregister=function(){for(var plugins=[],_i=0;_i<arguments.length;_i++)plugins[_i]=arguments[_i];return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var ctx,deregistrations,_this=this;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return ctx=context.o.system(),deregistrations=plugins.map((function(pl){var plugin=_this.queue.plugins.find((function(p){return p.name===pl}));if(plugin)return _this.queue.deregister(ctx,plugin,_this);ctx.log("warn","plugin ".concat(pl," not found"))})),[4,Promise.all(deregistrations)];case 1:return _a.sent(),[2,ctx]}}))}))},Analytics.prototype.debug=function(toggle){return!1===toggle&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=toggle,this},Analytics.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},Analytics.prototype.timeout=function(timeout){this.settings.timeout=timeout},Analytics.prototype._dispatch=function(event,callback){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var ctx;return(0,tslib_es6.YH)(this,(function(_a){return ctx=new context.o(event),(0,connection.a)()&&!this.options.retryQueue?[2,ctx]:[2,dispatch(ctx,this.queue,this,{callback,debug:this._debug,timeout:this.settings.timeout})]}))}))},Analytics.prototype.addSourceMiddleware=function(fn){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var _this=this;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,this.queue.criticalTasks.run((function(){return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var sourceMiddlewarePlugin,integrations,plugin;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js"))];case 1:return sourceMiddlewarePlugin=_a.sent().sourceMiddlewarePlugin,integrations={},this.queue.plugins.forEach((function(plugin){if("destination"===plugin.type)return integrations[plugin.name]=!0})),plugin=sourceMiddlewarePlugin(fn,integrations),[4,this.register(plugin)];case 2:return _a.sent(),[2]}}))}))}))];case 1:return _a.sent(),[2,this]}}))}))},Analytics.prototype.addDestinationMiddleware=function(integrationName){for(var middlewares=[],_i=1;_i<arguments.length;_i++)middlewares[_i-1]=arguments[_i];return this.queue.plugins.filter(isDestinationPluginWithAddMiddleware).forEach((function(p){"*"!==integrationName&&p.name.toLowerCase()!==integrationName.toLowerCase()||p.addMiddleware.apply(p,middlewares)})),Promise.resolve(this)},Analytics.prototype.setAnonymousId=function(id){return this._user.anonymousId(id)},Analytics.prototype.queryString=function(query){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return!1===this.options.useQueryString?[2,[]]:[4,__webpack_require__.e(538).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js"))];case 1:return[2,(0,_a.sent().queryString)(this,query)]}}))}))},Analytics.prototype.use=function(legacyPluginFactory){return legacyPluginFactory(this),this},Analytics.prototype.ready=function(callback){return void 0===callback&&(callback=function(res){return res}),(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){return[2,Promise.all(this.queue.plugins.map((function(i){return i.ready?i.ready():Promise.resolve()}))).then((function(res){return callback(res),res}))]}))}))},Analytics.prototype.noConflict=function(){return console.warn(deprecationWarning),(0,global_analytics_helper.Ud)(null!=_analytics?_analytics:this),this},Analytics.prototype.normalize=function(msg){return console.warn(deprecationWarning),this.eventFactory.normalize(msg)},Object.defineProperty(Analytics.prototype,"failedInitializations",{get:function(){return console.warn(deprecationWarning),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(Analytics.prototype,"VERSION",{get:function(){return version.r},enumerable:!1,configurable:!0}),Analytics.prototype.initialize=function(_settings,_options){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){return console.warn(deprecationWarning),[2,Promise.resolve(this)]}))}))},Analytics.prototype.pageview=function(url){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return console.warn(deprecationWarning),[4,this.page({path:url})];case 1:return _a.sent(),[2,this]}}))}))},Object.defineProperty(Analytics.prototype,"plugins",{get:function(){var _a;return console.warn(deprecationWarning),null!==(_a=this._plugins)&&void 0!==_a?_a:{}},enumerable:!1,configurable:!0}),Object.defineProperty(Analytics.prototype,"Integrations",{get:function(){return console.warn(deprecationWarning),this.queue.plugins.filter((function(plugin){return"destination"===plugin.type})).reduce((function(acc,plugin){var name="".concat(plugin.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),integration=window[name];if(!integration)return acc;var nested=integration.Integration;return nested?(acc[plugin.name]=nested,acc):(acc[plugin.name]=integration,acc)}),{})},enumerable:!1,configurable:!0}),Analytics.prototype.push=function(args){var method=args.shift();method&&!this[method]||this[method].apply(this,args)},Analytics}(emitter.v),NullAnalytics=function(_super){function NullAnalytics(){var _this=_super.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return _this.initialized=!0,_this}return(0,tslib_es6.C6)(NullAnalytics,_super),NullAnalytics}(Analytics),merged_options=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js"),create_deferred=__webpack_require__("./node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js"),version_type=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js"),gracefulDecodeURIComponent=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js");function clientHints(hints){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var userAgentData;return(0,tslib_es6.YH)(this,(function(_a){return(userAgentData=navigator.userAgentData)?hints?[2,userAgentData.getHighEntropyValues(hints).catch((function(){return userAgentData.toJSON()}))]:[2,userAgentData.toJSON()]:[2,void 0]}))}))}function getCookieOptions(){if(cookieOptions)return cookieOptions;var domain=tld(window.location.href);return cookieOptions={expires:31536e6,secure:!1,path:"/"},domain&&(cookieOptions.domain=domain),cookieOptions}var EnvironmentEnrichmentPlugin=function EnvironmentEnrichmentPlugin(){var _this=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(_ctx,instance){return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var _a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:this.instance=instance,_b.label=1;case 1:return _b.trys.push([1,3,,4]),_a=this,[4,clientHints(this.instance.options.highEntropyValuesClientHints)];case 2:return _a.userAgentData=_b.sent(),[3,4];case 3:return _b.sent(),[3,4];case 4:return[2,Promise.resolve()]}}))}))},this.enrich=function(ctx){var _a,_b,evtCtx=ctx.event.context,search=evtCtx.page.search||"",query="object"==typeof search?function(obj){try{var searchParams_1=new URLSearchParams;return Object.entries(obj).forEach((function(_a){var k=_a[0],v=_a[1];Array.isArray(v)?v.forEach((function(value){return searchParams_1.append(k,value)})):searchParams_1.append(k,v)})),searchParams_1.toString()}catch(_a){return""}}(search):search;evtCtx.userAgent=navigator.userAgent,evtCtx.userAgentData=_this.userAgentData;var locale=navigator.userLanguage||navigator.language;void 0===evtCtx.locale&&void 0!==locale&&(evtCtx.locale=locale),null!==(_a=evtCtx.library)&&void 0!==_a||(evtCtx.library={name:"analytics.js",version:"".concat("web"===(0,version_type.X)()?"next":"npm:next","-").concat(version.r)}),query&&!evtCtx.campaign&&(evtCtx.campaign=function utm(query){return query.startsWith("?")&&(query=query.substring(1)),(query=query.replace(/\?/g,"&")).split("&").reduce((function(acc,str){var _a=str.split("="),k=_a[0],_b=_a[1],v=void 0===_b?"":_b;if(k.includes("utm_")&&k.length>4){var utmParam=k.slice(4);"campaign"===utmParam&&(utmParam="name"),acc[utmParam]=(0,gracefulDecodeURIComponent.p)(v)}return acc}),{})}(query));var amp=function ampId(){var ampId=js_cookie.get("_ga");if(ampId&&ampId.startsWith("amp"))return ampId}();amp&&(evtCtx.amp={id:amp}),function referrerId(query,ctx,disablePersistance){var _a,storage=new UniversalStorage(disablePersistance?[]:[new CookieStorage(getCookieOptions())]),stored=storage.get("s:context.referrer"),ad=null!==(_a=function ads(query){var queryIds={btid:"dataxu",urid:"millennial-media"};query.startsWith("?")&&(query=query.substring(1));for(var _i=0,parts_1=(query=query.replace(/\?/g,"&")).split("&");_i<parts_1.length;_i++){var _a=parts_1[_i].split("="),k=_a[0],v=_a[1];if(queryIds[k])return{id:v,type:queryIds[k]}}}(query))&&void 0!==_a?_a:stored;ad&&(ctx&&(ctx.referrer=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},ctx.referrer),ad)),storage.set("s:context.referrer",ad))}(query,evtCtx,null!==(_b=_this.instance.options.disableClientPersistence)&&void 0!==_b&&_b);try{evtCtx.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(_){}return ctx},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},envEnrichment=new EnvironmentEnrichmentPlugin,load_script=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js"),middleware=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js"),metric_helpers=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js"),ActionDestination=function(){function ActionDestination(name,action){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,create_deferred.u)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=action,this.name=name,this.type=action.type,this.alternativeNames.push(action.name)}return ActionDestination.prototype.addMiddleware=function(){for(var _a,fn=[],_i=0;_i<arguments.length;_i++)fn[_i]=arguments[_i];"destination"===this.type&&(_a=this.middleware).push.apply(_a,fn)},ActionDestination.prototype.transform=function(ctx){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var modifiedEvent;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,middleware.applyDestinationMiddleware)(this.name,ctx.event,this.middleware)];case 1:return null===(modifiedEvent=_a.sent())&&ctx.cancel(new esm_context.d({retry:!1,reason:"dropped by destination middleware"})),[2,new context.o(modifiedEvent)]}}))}))},ActionDestination.prototype._createMethod=function(methodName){var _this=this;return function(ctx){return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var transformedContext,error_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return this.action[methodName]?(transformedContext=ctx,"destination"!==this.type?[3,2]:[4,this.transform(ctx)]):[2,ctx];case 1:transformedContext=_a.sent(),_a.label=2;case 2:return _a.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!_a.sent())throw new Error("Something prevented the destination from getting ready");return(0,metric_helpers.y)(ctx,{integrationName:this.action.name,methodName,type:"action"}),[4,this.action[methodName](transformedContext)];case 4:return _a.sent(),[3,6];case 5:throw error_1=_a.sent(),(0,metric_helpers.y)(ctx,{integrationName:this.action.name,methodName,type:"action",didError:!0}),error_1;case 6:return[2,ctx]}}))}))}},ActionDestination.prototype.isLoaded=function(){return this.action.isLoaded()},ActionDestination.prototype.ready=function(){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return _b.sent(),[2,!0];case 2:return _b.sent(),[2,!1];case 3:return[2]}}))}))},ActionDestination.prototype.load=function(ctx,analytics){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var loadP,_a,_b,error_2;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];_c.label=1;case 1:return _c.trys.push([1,3,,4]),(0,metric_helpers.y)(ctx,{integrationName:this.action.name,methodName:"load",type:"action"}),loadP=this.action.load(ctx,analytics),_b=(_a=this.loadPromise).resolve,[4,loadP];case 2:return _b.apply(_a,[_c.sent()]),[2,loadP];case 3:throw error_2=_c.sent(),(0,metric_helpers.y)(ctx,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(error_2),error_2;case 4:return[2]}}))}))},ActionDestination.prototype.unload=function(ctx,analytics){var _a,_b;return null===(_b=(_a=this.action).unload)||void 0===_b?void 0:_b.call(_a,ctx,analytics)},ActionDestination}();function loadPluginFactory(remotePlugin,obfuscate){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var defaultCdn,cdn,urlSplit,name_1,obfuscatedURL;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:if(defaultCdn=new RegExp("https://cdn.segment.(com|build)"),cdn=(0,parse_cdn.I2)(),!obfuscate)return[3,6];urlSplit=remotePlugin.url.split("/"),name_1=urlSplit[urlSplit.length-2],obfuscatedURL=remotePlugin.url.replace(name_1,btoa(name_1).replace(/=/g,"")),_a.label=1;case 1:return _a.trys.push([1,3,,5]),[4,(0,load_script.k)(obfuscatedURL.replace(defaultCdn,cdn))];case 2:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,load_script.k)(remotePlugin.url.replace(defaultCdn,cdn))];case 4:return _a.sent(),[3,5];case 5:return[3,8];case 6:return[4,(0,load_script.k)(remotePlugin.url.replace(defaultCdn,cdn))];case 7:_a.sent(),_a.label=8;case 8:return"function"==typeof window[remotePlugin.libraryName]?[2,window[remotePlugin.libraryName]]:[2]}}))}))}function remoteLoader(settings,userIntegrations,mergedIntegrations,options,routingMiddleware,pluginSources){var _a,_b,_c;return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var allPlugins,routingRules,pluginPromises,_this=this;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return allPlugins=[],routingRules=null!==(_b=null===(_a=settings.middlewareSettings)||void 0===_a?void 0:_a.routingRules)&&void 0!==_b?_b:[],pluginPromises=(null!==(_c=settings.remotePlugins)&&void 0!==_c?_c:[]).map((function(remotePlugin){return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var pluginFactory,_a,plugin,plugins,routing_1,error_4;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:if(function isPluginDisabled(userIntegrations,remotePlugin){var creationNameEnabled=userIntegrations[remotePlugin.creationName],currentNameEnabled=userIntegrations[remotePlugin.name];return!1===userIntegrations.All&&!creationNameEnabled&&!currentNameEnabled||!1===creationNameEnabled||!1===currentNameEnabled}(userIntegrations,remotePlugin))return[2];_b.label=1;case 1:return _b.trys.push([1,6,,7]),(_a=null==pluginSources?void 0:pluginSources.find((function(_a){return _a.pluginName===remotePlugin.name})))?[3,3]:[4,loadPluginFactory(remotePlugin,null==options?void 0:options.obfuscate)];case 2:_a=_b.sent(),_b.label=3;case 3:return(pluginFactory=_a)?[4,pluginFactory((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},remotePlugin.settings),mergedIntegrations[remotePlugin.name]))]:[3,5];case 4:plugin=_b.sent(),function validate(pluginLike){if(!Array.isArray(pluginLike))throw new Error("Not a valid list of plugins");var required=["load","isLoaded","name","version","type"];return pluginLike.forEach((function(plugin){required.forEach((function(method){var _a;if(void 0===plugin[method])throw new Error("Plugin: ".concat(null!==(_a=plugin.name)&&void 0!==_a?_a:"unknown"," missing required function ").concat(method))}))})),!0}(plugins=Array.isArray(plugin)?plugin:[plugin]),routing_1=routingRules.filter((function(rule){return rule.destinationName===remotePlugin.creationName})),plugins.forEach((function(plugin){var wrapper=new ActionDestination(remotePlugin.creationName,plugin);routing_1.length&&routingMiddleware&&wrapper.addMiddleware(routingMiddleware),allPlugins.push(wrapper)})),_b.label=5;case 5:return[3,7];case 6:return error_4=_b.sent(),console.warn("Failed to load Remote Plugin",error_4),[3,7];case 7:return[2]}}))}))})),[4,Promise.all(pluginPromises)];case 1:return _d.sent(),[2,allPlugins.filter(Boolean)]}}))}))}var to_facade=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js"),onPageChange=function(cb){var unloaded=!1;window.addEventListener("pagehide",(function(){unloaded||cb(unloaded=!0)})),document.addEventListener("visibilitychange",(function(){if("hidden"==document.visibilityState){if(unloaded)return;unloaded=!0}else unloaded=!1;cb(unloaded)}))},MAX_PAYLOAD_SIZE=500;function kilobytes(buffer){return(encodeURI(JSON.stringify(buffer)).split(/%..|./).length-1)/1024}function batch(apiHost,config){var _a,_b,schedule,buffer=[],pageUnloaded=!1,limit=null!==(_a=null==config?void 0:config.size)&&void 0!==_a?_a:10,timeout=null!==(_b=null==config?void 0:config.timeout)&&void 0!==_b?_b:5e3;function sendBatch(batch){var _a;if(0!==batch.length){var writeKey=null===(_a=batch[0])||void 0===_a?void 0:_a.writeKey,updatedBatch=batch.map((function(event){var _a=event;_a.sentAt;return(0,tslib_es6.Tt)(_a,["sentAt"])}));return(0,fetch.h)("https://".concat(apiHost,"/b"),{keepalive:pageUnloaded,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey,batch:updatedBatch,sentAt:(new Date).toISOString()})})}}function flush(){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var batch_1;return(0,tslib_es6.YH)(this,(function(_a){return buffer.length?(batch_1=buffer,buffer=[],[2,sendBatch(batch_1)]):[2]}))}))}return onPageChange((function(unloaded){if((pageUnloaded=unloaded)&&buffer.length){var reqs=function chunks(batch){var result=[],index=0;return batch.forEach((function(item){kilobytes(result[index])>=64&&index++,result[index]?result[index].push(item):result[index]=[item]})),result}(buffer).map(sendBatch);Promise.all(reqs).catch(console.error)}})),{dispatch:function dispatch(_url,body){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var bufferOverflow;return(0,tslib_es6.YH)(this,(function(_a){return buffer.push(body),bufferOverflow=buffer.length>=limit||function approachingTrackingAPILimit(buffer){return kilobytes(buffer)>=MAX_PAYLOAD_SIZE-50}(buffer),[2,bufferOverflow||pageUnloaded?flush():void(schedule||(schedule=setTimeout((function(){schedule=void 0,flush().catch(console.error)}),timeout)))]}))}))}}}function normalize(analytics,json,settings,integrations){var _a,user=analytics.user();delete json.options,json.writeKey=null==settings?void 0:settings.apiKey,json.userId=json.userId||user.id(),json.anonymousId=json.anonymousId||user.anonymousId(),json.sentAt=new Date;var failed=analytics.queue.failedInitializations||[];failed.length>0&&(json._metadata={failedInitializations:failed});var bundled=[],unbundled=[];for(var key in integrations){var integration=integrations[key];"Segment.io"===key&&bundled.push(key),"bundled"===integration.bundlingStatus&&bundled.push(key),"unbundled"===integration.bundlingStatus&&unbundled.push(key)}for(var _i=0,_b=(null==settings?void 0:settings.unbundledIntegrations)||[];_i<_b.length;_i++){var settingsUnbundled=_b[_i];unbundled.includes(settingsUnbundled)||unbundled.push(settingsUnbundled)}var configIds=null!==(_a=null==settings?void 0:settings.maybeBundledConfigIds)&&void 0!==_a?_a:{},bundledConfigIds=[];return bundled.sort().forEach((function(name){var _a;(null!==(_a=configIds[name])&&void 0!==_a?_a:[]).forEach((function(id){bundledConfigIds.push(id)}))})),!1!==(null==settings?void 0:settings.addBundledMetadata)&&(json._metadata=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},json._metadata),{bundled:bundled.sort(),unbundled:unbundled.sort(),bundledIds:bundledConfigIds})),json}var p_while=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js");function flushQueue(xt,queue){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var failedQueue,_this=this;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return failedQueue=[],(0,connection.a)()?[2,queue]:[4,(0,p_while._)((function(){return queue.length>0&&!(0,connection.a)()}),(function(){return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var ctx,result;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return(ctx=queue.pop())?[4,(0,delivery.C)(ctx,xt)]:[2];case 1:return result=_a.sent(),result instanceof context.o||failedQueue.push(ctx),[2]}}))}))}))];case 1:return _a.sent(),failedQueue.map((function(failed){return queue.pushWithBackoff(failed)})),[2,queue]}}))}))}function scheduleFlush(flushing,buffer,xt,scheduleFlush){var _this=this;flushing||setTimeout((function(){return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var isFlushing,newBuffer;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return isFlushing=!0,[4,flushQueue(xt,buffer)];case 1:return newBuffer=_a.sent(),isFlushing=!1,buffer.todo>0&&scheduleFlush(isFlushing,newBuffer,xt,scheduleFlush),[2]}}))}))}),5e3*Math.random())}var _a,_b,constants=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js");function segmentio(analytics,settings,integrations){var _a,_b,_c;window.addEventListener("pagehide",(function(){buffer.push.apply(buffer,Array.from(inflightEvents)),inflightEvents.clear()}));var writeKey=null!==(_a=null==settings?void 0:settings.apiKey)&&void 0!==_a?_a:"",buffer=analytics.options.disableClientPersistence?new priority_queue.M(analytics.queue.queue.maxAttempts,[]):new persisted.x(analytics.queue.queue.maxAttempts,"".concat(writeKey,":dest-Segment.io")),inflightEvents=new Set,apiHost=null!==(_b=null==settings?void 0:settings.apiHost)&&void 0!==_b?_b:constants.a,protocol=null!==(_c=null==settings?void 0:settings.protocol)&&void 0!==_c?_c:"https",remote="".concat(protocol,"://").concat(apiHost),deliveryStrategy=null==settings?void 0:settings.deliveryStrategy,client="batching"===(null==deliveryStrategy?void 0:deliveryStrategy.strategy)?batch(apiHost,deliveryStrategy.config):function fetch_dispatcher(config){return{dispatch:function dispatch(url,body){return(0,fetch.h)(url,{keepalive:null==config?void 0:config.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(body)})}}}(null==deliveryStrategy?void 0:deliveryStrategy.config);function send(ctx){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var path,json;return(0,tslib_es6.YH)(this,(function(_a){return(0,connection.a)()?(buffer.push(ctx),scheduleFlush(false,buffer,segmentio,scheduleFlush),[2,ctx]):(inflightEvents.add(ctx),path=ctx.event.type.charAt(0),json=(0,to_facade.W)(ctx.event).json(),"track"===ctx.event.type&&delete json.traits,"alias"===ctx.event.type&&(json=function onAlias(analytics,json){var _a,_b,_c,_d,user=analytics.user();return json.previousId=null!==(_c=null!==(_b=null!==(_a=json.previousId)&&void 0!==_a?_a:json.from)&&void 0!==_b?_b:user.id())&&void 0!==_c?_c:user.anonymousId(),json.userId=null!==(_d=json.userId)&&void 0!==_d?_d:json.to,delete json.from,delete json.to,json}(analytics,json)),[2,client.dispatch("".concat(remote,"/").concat(path),normalize(analytics,json,settings,integrations)).then((function(){return ctx})).catch((function(){return buffer.pushWithBackoff(ctx),scheduleFlush(false,buffer,segmentio,scheduleFlush),ctx})).finally((function(){inflightEvents.delete(ctx)}))])}))}))}var segmentio={name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:send,identify:send,page:send,alias:send,group:send,screen:send};return buffer.todo&&scheduleFlush(false,buffer,segmentio,scheduleFlush),segmentio}var inspectorHost=null!==(_a=(_b=(0,get_global.m)()).__SEGMENT_INSPECTOR__)&&void 0!==_a?_a:_b.__SEGMENT_INSPECTOR__={},stats=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js");function flushFinalBuffer(analytics,buffer){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,flushAddSourceMiddleware(analytics,buffer)];case 1:return _a.sent(),flushAnalyticsCallsInNewTask(analytics,buffer),buffer.clear(),[2]}}))}))}function registerPlugins(writeKey,cdnSettings,analytics,options,pluginLikes,legacyIntegrationSources){var _a,_b,_c;return void 0===pluginLikes&&(pluginLikes=[]),(0,tslib_es6.sH)(this,void 0,void 0,(function(){var plugins,pluginSources,tsubMiddleware,_d,legacyDestinations,_e,schemaFilter,_f,mergedSettings,remotePlugins,toRegister,_g,_h,ctx,_this=this;return(0,tslib_es6.YH)(this,(function(_j){switch(_j.label){case 0:return plugins=null==pluginLikes?void 0:pluginLikes.filter((function(pluginLike){return"object"==typeof pluginLike})),pluginSources=null==pluginLikes?void 0:pluginLikes.filter((function(pluginLike){return"function"==typeof pluginLike&&"string"==typeof pluginLike.pluginName})),function hasTsubMiddleware(settings){var _a,_b,_c;return"test"!==getProcessEnv().NODE_ENV&&(null!==(_c=null===(_b=null===(_a=settings.middlewareSettings)||void 0===_a?void 0:_a.routingRules)||void 0===_b?void 0:_b.length)&&void 0!==_c?_c:0)>0}(cdnSettings)?[4,__webpack_require__.e(629).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js")).then((function(mod){return mod.tsubMiddleware(cdnSettings.middlewareSettings.routingRules)}))]:[3,2];case 1:return _d=_j.sent(),[3,3];case 2:_d=void 0,_j.label=3;case 3:return tsubMiddleware=_d,function hasLegacyDestinations(settings){return"test"!==getProcessEnv().NODE_ENV&&Object.keys(settings.integrations).length>1}(cdnSettings)||legacyIntegrationSources.length>0?[4,__webpack_require__.e(50).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js")).then((function(mod){return mod.ajsDestinations(writeKey,cdnSettings,analytics.integrations,options,tsubMiddleware,legacyIntegrationSources)}))]:[3,5];case 4:return _e=_j.sent(),[3,6];case 5:_e=[],_j.label=6;case 6:return legacyDestinations=_e,cdnSettings.legacyVideoPluginsEnabled?[4,__webpack_require__.e(694).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js")).then((function(mod){return mod.loadLegacyVideoPlugins(analytics)}))]:[3,8];case 7:_j.sent(),_j.label=8;case 8:return(null===(_a=options.plan)||void 0===_a?void 0:_a.track)?[4,__webpack_require__.e(104).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js")).then((function(mod){var _a;return mod.schemaFilter(null===(_a=options.plan)||void 0===_a?void 0:_a.track,cdnSettings)}))]:[3,10];case 9:return _f=_j.sent(),[3,11];case 10:_f=void 0,_j.label=11;case 11:return schemaFilter=_f,mergedSettings=(0,merged_options.J)(cdnSettings,options),[4,remoteLoader(cdnSettings,analytics.integrations,mergedSettings,options,tsubMiddleware,pluginSources).catch((function(){return[]}))];case 12:return remotePlugins=_j.sent(),toRegister=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([envEnrichment],plugins,!0),legacyDestinations,!0),remotePlugins,!0),schemaFilter&&toRegister.push(schemaFilter),!1===(null===(_b=options.integrations)||void 0===_b?void 0:_b.All)&&!options.integrations["Segment.io"]||options.integrations&&!1===options.integrations["Segment.io"]?[3,14]:(_h=(_g=toRegister).push,[4,segmentio(analytics,mergedSettings["Segment.io"],cdnSettings.integrations)]);case 13:_h.apply(_g,[_j.sent()]),_j.label=14;case 14:return[4,analytics.register.apply(analytics,toRegister)];case 15:return ctx=_j.sent(),Object.entries(null!==(_c=cdnSettings.enabledMiddleware)&&void 0!==_c?_c:{}).some((function(_a){return _a[1]}))?[4,__webpack_require__.e(521).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js")).then((function(_a){var remoteMiddlewares=_a.remoteMiddlewares;return(0,tslib_es6.sH)(_this,void 0,void 0,(function(){var middleware,promises;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,remoteMiddlewares(ctx,cdnSettings,options.obfuscate)];case 1:return middleware=_b.sent(),promises=middleware.map((function(mdw){return analytics.addSourceMiddleware(mdw)})),[2,Promise.all(promises)]}}))}))}))]:[3,17];case 16:_j.sent(),_j.label=17;case 17:return[2,ctx]}}))}))}function loadAnalytics(settings,options,preInitBuffer){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;return void 0===options&&(options={}),(0,tslib_es6.sH)(this,void 0,void 0,(function(){var cdnSettings,_l,retryQueue,analytics,plugins,classicIntegrations,segmentLoadOptions,ctx,search,hash,term;return(0,tslib_es6.YH)(this,(function(_m){switch(_m.label){case 0:return!0===options.disable?[2,[new NullAnalytics,context.o.system()]]:(options.globalAnalyticsKey&&(0,global_analytics_helper.rY)(options.globalAnalyticsKey),settings.cdnURL&&(0,parse_cdn.qQ)(settings.cdnURL),options.initialPageview&&preInitBuffer.push(new PreInitMethodCall("page",[])),null===(_a=settings.cdnSettings)||void 0===_a?[3,1]:(_l=_a,[3,3]));case 1:return[4,(writeKey=settings.writeKey,cdnURL=settings.cdnURL,baseUrl=null!=cdnURL?cdnURL:(0,parse_cdn.I2)(),(0,fetch.h)("".concat(baseUrl,"/v1/projects/").concat(writeKey,"/settings")).then((function(res){return res.ok?res.json():res.text().then((function(errorResponseMessage){throw new Error(errorResponseMessage)}))})).catch((function(err){throw console.error(err.message),err})))];case 2:_l=_m.sent(),_m.label=3;case 3:return cdnSettings=_l,options.updateCDNSettings&&(cdnSettings=options.updateCDNSettings(cdnSettings)),"function"!=typeof options.disable?[3,5]:[4,options.disable(cdnSettings)];case 4:if(_m.sent())return[2,[new NullAnalytics,context.o.system()]];_m.label=5;case 5:return retryQueue=null===(_c=null===(_b=cdnSettings.integrations["Segment.io"])||void 0===_b?void 0:_b.retryQueue)||void 0===_c||_c,options=(0,tslib_es6.Cl)({retryQueue},options),function(analytics){var _a;null===(_a=inspectorHost.attach)||void 0===_a||_a.call(inspectorHost,analytics)}(analytics=new Analytics((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},settings),{cdnSettings}),options)),plugins=null!==(_d=settings.plugins)&&void 0!==_d?_d:[],classicIntegrations=null!==(_e=settings.classicIntegrations)&&void 0!==_e?_e:[],segmentLoadOptions=null===(_f=options.integrations)||void 0===_f?void 0:_f["Segment.io"],stats.U.initRemoteMetrics((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},cdnSettings.metrics),{host:null!==(_g=null==segmentLoadOptions?void 0:segmentLoadOptions.apiHost)&&void 0!==_g?_g:null===(_h=cdnSettings.metrics)||void 0===_h?void 0:_h.host,protocol:null==segmentLoadOptions?void 0:segmentLoadOptions.protocol})),function flushPreBuffer(analytics,buffer){flushSetAnonymousID(analytics,buffer),flushOn(analytics,buffer)}(analytics,preInitBuffer),[4,registerPlugins(settings.writeKey,cdnSettings,analytics,options,plugins,classicIntegrations)];case 6:return ctx=_m.sent(),search=null!==(_j=window.location.search)&&void 0!==_j?_j:"",hash=null!==(_k=window.location.hash)&&void 0!==_k?_k:"",(term=search.length?search:hash.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,analytics.queryString(term).catch(console.error)]:[3,8];case 7:_m.sent(),_m.label=8;case 8:return analytics.initialized=!0,analytics.emit("initialize",settings,options),[4,flushFinalBuffer(analytics,preInitBuffer)];case 9:return _m.sent(),[2,[analytics,ctx]]}var writeKey,cdnURL,baseUrl}))}))}var AnalyticsBrowser=function(_super){function AnalyticsBrowser(){var _this=this,_a=(0,create_deferred.u)(),loadStart=_a.promise,resolveLoadStart=_a.resolve;return _this=_super.call(this,(function(buffer){return loadStart.then((function(_a){return loadAnalytics(_a[0],_a[1],buffer)}))}))||this,_this._resolveLoadStart=function(settings,options){return resolveLoadStart([settings,options])},_this}return(0,tslib_es6.C6)(AnalyticsBrowser,_super),AnalyticsBrowser.prototype.load=function(settings,options){return void 0===options&&(options={}),this._resolveLoadStart(settings,options),this},AnalyticsBrowser.load=function(settings,options){return void 0===options&&(options={}),(new AnalyticsBrowser).load(settings,options)},AnalyticsBrowser.standalone=function(writeKey,options){return AnalyticsBrowser.load({writeKey},options).then((function(res){return res[0]}))},AnalyticsBrowser}(AnalyticsBuffered)},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>isOffline,s:()=>isOnline});var _environment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js");function isOnline(){return!(0,_environment__WEBPACK_IMPORTED_MODULE_0__.B)()||window.navigator.onLine}function isOffline(){return!isOnline()}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>SEGMENT_API_HOST});var SEGMENT_API_HOST="api.segment.io/v1"},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/context/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>Context});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/context/index.js"),_stats__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js"),Context=function(_super){function Context(event,id){return _super.call(this,event,id,new _stats__WEBPACK_IMPORTED_MODULE_1__.U)||this}return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.C6)(Context,_super),Context.system=function(){return new this({type:"track",event:"system"})},Context}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.j)},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isBrowser(){return"undefined"!=typeof window}function isServer(){return!isBrowser()}__webpack_require__.d(__webpack_exports__,{B:()=>isBrowser,S:()=>isServer})},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function gracefulDecodeURIComponent(encodedURIComponent){try{return decodeURIComponent(encodedURIComponent.replace(/\+/g," "))}catch(_a){return encodedURIComponent}}__webpack_require__.d(__webpack_exports__,{p:()=>gracefulDecodeURIComponent})},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>Stats});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),stats=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/stats/index.js"),fetch=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js"),version=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/generated/version.js"),version_type=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js"),constants=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js");function logError(err){console.error("Error sending segment performance metrics",err)}var remoteMetrics,RemoteMetrics=function(){function RemoteMetrics(options){var _a,_b,_c,_d,_e,_this=this;if(this.host=null!==(_a=null==options?void 0:options.host)&&void 0!==_a?_a:constants.a,this.sampleRate=null!==(_b=null==options?void 0:options.sampleRate)&&void 0!==_b?_b:1,this.flushTimer=null!==(_c=null==options?void 0:options.flushTimer)&&void 0!==_c?_c:3e4,this.maxQueueSize=null!==(_d=null==options?void 0:options.maxQueueSize)&&void 0!==_d?_d:20,this.protocol=null!==(_e=null==options?void 0:options.protocol)&&void 0!==_e?_e:"https",this.queue=[],this.sampleRate>0){var flushing_1=!1,run_1=function(){flushing_1||(flushing_1=!0,_this.flush().catch(logError),flushing_1=!1,setTimeout(run_1,_this.flushTimer))};run_1()}}return RemoteMetrics.prototype.increment=function(metric,tags){if(metric.includes("analytics_js.")&&0!==tags.length&&!(Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize)){var remoteMetric=function(metric,tags,versionType){var formattedTags=tags.reduce((function(acc,t){var _a=t.split(":"),k=_a[0],v=_a[1];return acc[k]=v,acc}),{});return{type:"Counter",metric,value:1,tags:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},formattedTags),{library:"analytics.js",library_version:"web"===versionType?"next-".concat(version.r):"npm:next-".concat(version.r)})}}(metric,tags,(0,version_type.X)());this.queue.push(remoteMetric),metric.includes("error")&&this.flush().catch(logError)}},RemoteMetrics.prototype.flush=function(){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var _this=this;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch((function(error){logError(error),_this.sampleRate=0}))];case 1:return _a.sent(),[2]}}))}))},RemoteMetrics.prototype.send=function(){return(0,tslib_es6.sH)(this,void 0,void 0,(function(){var payload,headers,url;return(0,tslib_es6.YH)(this,(function(_a){return payload={series:this.queue},this.queue=[],headers={"Content-Type":"text/plain"},url="".concat(this.protocol,"://").concat(this.host,"/m"),[2,(0,fetch.h)(url,{headers,body:JSON.stringify(payload),method:"POST"})]}))}))},RemoteMetrics}(),Stats=function(_super){function Stats(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.C6)(Stats,_super),Stats.initRemoteMetrics=function(options){remoteMetrics=new RemoteMetrics(options)},Stats.prototype.increment=function(metric,by,tags){_super.prototype.increment.call(this,metric,by,tags),null==remoteMetrics||remoteMetrics.increment(metric,null!=tags?tags:[])},Stats}(stats.p)},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function recordIntegrationMetric(ctx,_a){var methodName=_a.methodName,integrationName=_a.integrationName,type=_a.type,_b=_a.didError,didError=void 0!==_b&&_b;ctx.stats.increment("analytics_js.integration.invoke".concat(didError?".error":""),1,["method:".concat(methodName),"integration_name:".concat(integrationName),"type:".concat(type)])}__webpack_require__.d(__webpack_exports__,{y:()=>recordIntegrationMetric})},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/generated/version.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>version});var version="1.70.0"},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function unfetch_module(e,n){return n=n||{},new Promise((function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+","+t:t})),t(a())},s.onerror=r,s.withCredentials="include"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)}))}__webpack_require__.d(__webpack_exports__,{h:()=>fetch});var get_global=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js"),fetch=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var global=(0,get_global.m)();return(global&&global.fetch||unfetch_module).apply(void 0,args)}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>getGlobal});var getGlobal=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:null}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ud:()=>setGlobalAnalytics,kJ:()=>getGlobalAnalytics,rY:()=>setGlobalAnalyticsKey});var _globalAnalyticsKey="analytics";function getGlobalAnalytics(){return window[_globalAnalyticsKey]}function setGlobalAnalyticsKey(key){_globalAnalyticsKey=key}function setGlobalAnalytics(analytics){window[_globalAnalyticsKey]=analytics}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function findScript(src){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find((function(s){return s.src===src}))}function loadScript(src,attributes){var found=findScript(src);if(void 0!==found){var status_1=null==found?void 0:found.getAttribute("status");if("loaded"===status_1)return Promise.resolve(found);if("loading"===status_1)return new Promise((function(resolve,reject){found.addEventListener("load",(function(){return resolve(found)})),found.addEventListener("error",(function(err){return reject(err)}))}))}return new Promise((function(resolve,reject){var _a,script=window.document.createElement("script");script.type="text/javascript",script.src=src,script.async=!0,script.setAttribute("status","loading");for(var _i=0,_b=Object.entries(null!=attributes?attributes:{});_i<_b.length;_i++){var _c=_b[_i],k=_c[0],v=_c[1];script.setAttribute(k,v)}script.onload=function(){script.onerror=script.onload=null,script.setAttribute("status","loaded"),resolve(script)},script.onerror=function(){script.onerror=script.onload=null,script.setAttribute("status","error"),reject(new Error("Failed to load ".concat(src)))};var tag=window.document.getElementsByTagName("script")[0];null===(_a=tag.parentElement)||void 0===_a||_a.insertBefore(script,tag)}))}function unloadScript(src){var found=findScript(src);return void 0!==found&&found.remove(),Promise.resolve()}__webpack_require__.d(__webpack_exports__,{d:()=>unloadScript,k:()=>loadScript})},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>mergedOptions});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs");function mergedOptions(cdnSettings,options){var _a,optionOverrides=Object.entries(null!==(_a=options.integrations)&&void 0!==_a?_a:{}).reduce((function(overrides,_a){var _b,_c,integration=_a[0],options=_a[1];return"object"==typeof options?(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)({},overrides),((_b={})[integration]=options,_b)):(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)({},overrides),((_c={})[integration]={},_c))}),{});return Object.entries(cdnSettings.integrations).reduce((function(integrationSettings,_a){var _b,integration=_a[0],settings=_a[1];return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)({},integrationSettings),((_b={})[integration]=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)({},settings),optionOverrides[integration]),_b))}),{})}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>pWhile});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),pWhile=function(condition,action){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.sH)(void 0,void 0,void 0,(function(){var loop;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.YH)(this,(function(_a){return loop=function(actionResult){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.sH)(void 0,void 0,void 0,(function(){var _a;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.YH)(this,(function(_b){switch(_b.label){case 0:return condition(actionResult)?(_a=loop,[4,action()]):[3,2];case 1:return[2,_a.apply(void 0,[_b.sent()])];case 2:return[2]}}))}))},[2,loop(void 0)]}))}))}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I2:()=>getCDN,YM:()=>getNextIntegrationsURL,qQ:()=>setGlobalCDNUrl});var _globalCDN,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js"),analyticsScriptRegex=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,setGlobalCDNUrl=function(cdn){var globalAnalytics=(0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.kJ)();globalAnalytics&&(globalAnalytics._cdn=cdn),_globalCDN=cdn},getCDN=function(){var _a,globalCdnUrl=null!=_globalCDN?_globalCDN:null===(_a=(0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.kJ)())||void 0===_a?void 0:_a._cdn;if(globalCdnUrl)return globalCdnUrl;var cdn,cdnFromScriptTag=(Array.prototype.slice.call(document.querySelectorAll("script")).forEach((function(s){var _a,src=null!==(_a=s.getAttribute("src"))&&void 0!==_a?_a:"",result=analyticsScriptRegex.exec(src);result&&result[1]&&(cdn=result[1])})),cdn);return cdnFromScriptTag||"https://cdn.segment.com"},getNextIntegrationsURL=function(){var cdn=getCDN();return"".concat(cdn,"/next-integrations")}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>PersistedPriorityQueue});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),___WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js"),_core_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/context/index.js"),_core_environment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js"),loc={getItem:function(){},setItem:function(){},removeItem:function(){}};try{loc=(0,_core_environment__WEBPACK_IMPORTED_MODULE_0__.B)()&&window.localStorage?window.localStorage:loc}catch(err){console.warn("Unable to access localStorage",err)}function persisted(key){var items=loc.getItem(key);return(items?JSON.parse(items):[]).map((function(p){return new _core_context__WEBPACK_IMPORTED_MODULE_1__.o(p.event,p.id)}))}function seen(key){var stored=loc.getItem(key);return stored?JSON.parse(stored):{}}function remove(key){loc.removeItem(key)}function mutex(key,onUnlock,attempt){void 0===attempt&&(attempt=0);var lockKey="persisted-queue:v1:".concat(key,":lock"),rawLock=loc.getItem(lockKey),lock=rawLock?JSON.parse(rawLock):null,allowed=null===lock||function(lock){return(new Date).getTime()>lock}(lock);if(allowed)return loc.setItem(lockKey,JSON.stringify((new Date).getTime()+50)),onUnlock(),void loc.removeItem(lockKey);!allowed&&attempt<3?setTimeout((function(){mutex(key,onUnlock,attempt+1)}),50):console.error("Unable to retrieve lock")}var PersistedPriorityQueue=function(_super){function PersistedPriorityQueue(maxAttempts,key){var _this=_super.call(this,maxAttempts,[])||this,itemsKey="persisted-queue:v1:".concat(key,":items"),seenKey="persisted-queue:v1:".concat(key,":seen"),saved=[],lastSeen={};return mutex(key,(function(){try{saved=persisted(itemsKey),lastSeen=seen(seenKey),remove(itemsKey),remove(seenKey),_this.queue=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.fX)([],saved,!0),_this.queue,!0),_this.seen=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)({},lastSeen),_this.seen)}catch(err){console.error(err)}})),window.addEventListener("pagehide",(function(){if(_this.todo>0){var items_1=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.fX)([],_this.queue,!0),_this.future,!0);try{mutex(key,(function(){!function persistItems(key,items){var existing=persisted(key),merged=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.fX)([],items,!0),existing,!0).reduce((function(acc,item){var _a;return(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)({},acc),((_a={})[item.id]=item,_a))}),{});loc.setItem(key,JSON.stringify(Object.values(merged)))}(itemsKey,items_1),function persistSeen(key,memory){var stored=seen(key);loc.setItem(key,JSON.stringify((0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)({},stored),memory)))}(seenKey,_this.seen)}))}catch(err){console.error(err)}}})),_this}return(0,tslib__WEBPACK_IMPORTED_MODULE_2__.C6)(PersistedPriorityQueue,_super),PersistedPriorityQueue}(___WEBPACK_IMPORTED_MODULE_3__.M)},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>toFacade});var _segment_facade__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/index.js");function toFacade(evt,options){var fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Facade(evt,options);return"track"===evt.type&&(fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track(evt,options)),"identify"===evt.type&&(fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify(evt,options)),"page"===evt.type&&(fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page(evt,options)),"alias"===evt.type&&(fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias(evt,options)),"group"===evt.type&&(fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group(evt,options)),"screen"===evt.type&&(fcd=new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Screen(evt,options)),Object.defineProperty(fcd,"obj",{value:evt,writable:!0}),fcd}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>getVersionType});var _version="npm";function getVersionType(){return _version}},"./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{applyDestinationMiddleware:()=>applyDestinationMiddleware,sourceMiddlewarePlugin:()=>sourceMiddlewarePlugin});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs"),_core_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-core@1.6.0/node_modules/@segment/analytics-core/dist/esm/context/index.js"),_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js");function applyDestinationMiddleware(destination,evt,middleware){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.sH)(this,void 0,void 0,(function(){function applyMiddleware(event,fn){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.sH)(this,void 0,void 0,(function(){var nextCalled,returnedEvent,_a;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.YH)(this,(function(_b){switch(_b.label){case 0:return nextCalled=!1,returnedEvent=null,[4,fn({payload:(0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.W)(event,{clone:!0,traverse:!1}),integration:destination,next:function(evt){nextCalled=!0,null===evt&&(returnedEvent=null),evt&&(returnedEvent=evt.obj)}})];case 1:return _b.sent(),nextCalled||null===returnedEvent||(returnedEvent.integrations=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cl)({},event.integrations),((_a={})[destination]=!1,_a))),[2,returnedEvent]}}))}))}var modifiedEvent,_i,middleware_1,md,result;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.YH)(this,(function(_a){switch(_a.label){case 0:modifiedEvent=(0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.W)(evt,{clone:!0,traverse:!1}).rawEvent(),_i=0,middleware_1=middleware,_a.label=1;case 1:return _i<middleware_1.length?(md=middleware_1[_i],[4,applyMiddleware(modifiedEvent,md)]):[3,4];case 2:if(null===(result=_a.sent()))return[2,null];modifiedEvent=result,_a.label=3;case 3:return _i++,[3,1];case 4:return[2,modifiedEvent]}}))}))}function sourceMiddlewarePlugin(fn,integrations){function apply(ctx){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.sH)(this,void 0,void 0,(function(){var nextCalled;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.YH)(this,(function(_a){switch(_a.label){case 0:return nextCalled=!1,[4,fn({payload:(0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.W)(ctx.event,{clone:!0,traverse:!1}),integrations:null!=integrations?integrations:{},next:function(evt){nextCalled=!0,evt&&(ctx.event=evt.obj)}})];case 1:if(_a.sent(),!nextCalled)throw new _core_context__WEBPACK_IMPORTED_MODULE_2__.d({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,ctx]}}))}))}return{name:"Source Middleware ".concat(fn.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(ctx){return Promise.resolve(ctx)},track:apply,page:apply,identify:apply,alias:apply,group:apply}}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/address.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var obj_case_1=__importDefault(__webpack_require__("./node_modules/.pnpm/obj-case@0.2.1/node_modules/obj-case/index.js"));function trait(a,b){return function(){var traits=this.traits(),props=this.properties?this.properties():{};return obj_case_1.default(traits,"address."+a)||obj_case_1.default(traits,a)||(b?obj_case_1.default(traits,"address."+b):null)||(b?obj_case_1.default(traits,b):null)||obj_case_1.default(props,"address."+a)||obj_case_1.default(props,a)||(b?obj_case_1.default(props,"address."+b):null)||(b?obj_case_1.default(props,b):null)}}exports.default=function default_1(proto){proto.zip=trait("postalCode","zip"),proto.country=trait("country"),proto.street=trait("street"),proto.state=trait("state"),proto.city=trait("city"),proto.region=trait("region")}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/alias.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Alias=void 0;var inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js");function Alias(dictionary,opts){facade_1.Facade.call(this,dictionary,opts)}exports.Alias=Alias,inherits_1.default(Alias,facade_1.Facade),Alias.prototype.action=function(){return"alias"},Alias.prototype.type=Alias.prototype.action,Alias.prototype.previousId=function(){return this.field("previousId")||this.field("from")},Alias.prototype.from=Alias.prototype.previousId,Alias.prototype.userId=function(){return this.field("userId")||this.field("to")},Alias.prototype.to=Alias.prototype.userId},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/clone.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=void 0,exports.clone=function clone(properties){if("object"!=typeof properties)return properties;if("[object Object]"===Object.prototype.toString.call(properties)){var temp={};for(var key in properties)Object.prototype.hasOwnProperty.call(properties,key)&&(temp[key]=clone(properties[key]));return temp}return Array.isArray(properties)?properties.map(clone):properties}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/delete.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Delete=void 0;var inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js");function Delete(dictionary,opts){facade_1.Facade.call(this,dictionary,opts)}exports.Delete=Delete,inherits_1.default(Delete,facade_1.Facade),Delete.prototype.type=function(){return"delete"}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Facade=void 0;var address_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/address.js")),clone_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/clone.js"),is_enabled_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-enabled.js")),new_date_1=__importDefault(__webpack_require__("./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/index.js")),obj_case_1=__importDefault(__webpack_require__("./node_modules/.pnpm/obj-case@0.2.1/node_modules/obj-case/index.js")),isodate_traverse_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+isodate-traverse@1.1.1/node_modules/@segment/isodate-traverse/lib/index.js"));function Facade(obj,opts){opts=opts||{},this.raw=clone_1.clone(obj),"clone"in opts||(opts.clone=!0),opts.clone&&(obj=clone_1.clone(obj)),"traverse"in opts||(opts.traverse=!0),obj.timestamp="timestamp"in obj?new_date_1.default(obj.timestamp):new Date,opts.traverse&&isodate_traverse_1.default(obj),this.opts=opts,this.obj=obj}exports.Facade=Facade;var f=Facade.prototype;function transform(obj){return clone_1.clone(obj)}f.proxy=function(field){var fields=field.split("."),obj=this[field=fields.shift()]||this.obj[field];return obj?("function"==typeof obj&&(obj=obj.call(this)||{}),0===fields.length||(obj=obj_case_1.default(obj,fields.join("."))),this.opts.clone?transform(obj):obj):obj},f.field=function(field){var obj=this.obj[field];return this.opts.clone?transform(obj):obj},Facade.proxy=function(field){return function(){return this.proxy(field)}},Facade.field=function(field){return function(){return this.field(field)}},Facade.multi=function(path){return function(){var multi=this.proxy(path+"s");if(Array.isArray(multi))return multi;var one=this.proxy(path);return one&&(one=[this.opts.clone?clone_1.clone(one):one]),one||[]}},Facade.one=function(path){return function(){var one=this.proxy(path);if(one)return one;var multi=this.proxy(path+"s");return Array.isArray(multi)?multi[0]:void 0}},f.json=function(){var ret=this.opts.clone?clone_1.clone(this.obj):this.obj;return this.type&&(ret.type=this.type()),ret},f.rawEvent=function(){return this.raw},f.options=function(integration){var obj=this.obj.options||this.obj.context||{},options=this.opts.clone?clone_1.clone(obj):obj;if(!integration)return options;if(this.enabled(integration)){var integrations=this.integrations(),value=integrations[integration]||obj_case_1.default(integrations,integration);return"object"!=typeof value&&(value=obj_case_1.default(this.options(),integration)),"object"==typeof value?value:{}}},f.context=f.options,f.enabled=function(integration){var allEnabled=this.proxy("options.providers.all");"boolean"!=typeof allEnabled&&(allEnabled=this.proxy("options.all")),"boolean"!=typeof allEnabled&&(allEnabled=this.proxy("integrations.all")),"boolean"!=typeof allEnabled&&(allEnabled=!0);var enabled=allEnabled&&is_enabled_1.default(integration),options=this.integrations();if(options.providers&&options.providers.hasOwnProperty(integration)&&(enabled=options.providers[integration]),options.hasOwnProperty(integration)){var settings=options[integration];enabled="boolean"!=typeof settings||settings}return!!enabled},f.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},f.active=function(){var active=this.proxy("options.active");return null==active&&(active=!0),active},f.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},f.sessionId=f.anonymousId,f.groupId=Facade.proxy("options.groupId"),f.traits=function(aliases){var ret=this.proxy("options.traits")||{},id=this.userId();for(var alias in aliases=aliases||{},id&&(ret.id=id),aliases)if(Object.prototype.hasOwnProperty.call(aliases,alias)){var value=null==this[alias]?this.proxy("options.traits."+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value,delete ret[alias]}return ret},f.library=function(){var library=this.proxy("options.library");return library?"string"==typeof library?{name:library,version:null}:library:{name:"unknown",version:null}},f.device=function(){var device=this.proxy("context.device");"object"==typeof device&&null!==device||(device={});var library=this.library().name;return device.type||(library.indexOf("ios")>-1&&(device.type="ios"),library.indexOf("android")>-1&&(device.type="android")),device},f.userAgent=Facade.proxy("context.userAgent"),f.timezone=Facade.proxy("context.timezone"),f.timestamp=Facade.field("timestamp"),f.channel=Facade.field("channel"),f.ip=Facade.proxy("context.ip"),f.userId=Facade.field("userId"),address_1.default(f)},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/group.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Group=void 0;var inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),is_email_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-email.js")),new_date_1=__importDefault(__webpack_require__("./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/index.js")),facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js");function Group(dictionary,opts){facade_1.Facade.call(this,dictionary,opts)}exports.Group=Group,inherits_1.default(Group,facade_1.Facade);var g=Group.prototype;g.action=function(){return"group"},g.type=g.action,g.groupId=facade_1.Facade.field("groupId"),g.created=function(){var created=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(created)return new_date_1.default(created)},g.email=function(){var email=this.proxy("traits.email");if(email)return email;var groupId=this.groupId();return is_email_1.default(groupId)?groupId:void 0},g.traits=function(aliases){var ret=this.properties(),id=this.groupId();for(var alias in aliases=aliases||{},id&&(ret.id=id),aliases)if(Object.prototype.hasOwnProperty.call(aliases,alias)){var value=null==this[alias]?this.proxy("traits."+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value,delete ret[alias]}return ret},g.name=facade_1.Facade.proxy("traits.name"),g.industry=facade_1.Facade.proxy("traits.industry"),g.employees=facade_1.Facade.proxy("traits.employees"),g.properties=function(){return this.field("traits")||this.field("properties")||{}}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/identify.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Identify=void 0;var facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js"),obj_case_1=__importDefault(__webpack_require__("./node_modules/.pnpm/obj-case@0.2.1/node_modules/obj-case/index.js")),inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),is_email_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-email.js")),new_date_1=__importDefault(__webpack_require__("./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/index.js")),trim=function(str){return str.trim()};function Identify(dictionary,opts){facade_1.Facade.call(this,dictionary,opts)}exports.Identify=Identify,inherits_1.default(Identify,facade_1.Facade);var i=Identify.prototype;i.action=function(){return"identify"},i.type=i.action,i.traits=function(aliases){var ret=this.field("traits")||{},id=this.userId();for(var alias in aliases=aliases||{},id&&(ret.id=id),aliases){var value=null==this[alias]?this.proxy("traits."+alias):this[alias]();null!=value&&(ret[aliases[alias]]=value,alias!==aliases[alias]&&delete ret[alias])}return ret},i.email=function(){var email=this.proxy("traits.email");if(email)return email;var userId=this.userId();return is_email_1.default(userId)?userId:void 0},i.created=function(){var created=this.proxy("traits.created")||this.proxy("traits.createdAt");if(created)return new_date_1.default(created)},i.companyCreated=function(){var created=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(created)return new_date_1.default(created)},i.companyName=function(){return this.proxy("traits.company.name")},i.name=function(){var name=this.proxy("traits.name");if("string"==typeof name)return trim(name);var firstName=this.firstName(),lastName=this.lastName();return firstName&&lastName?trim(firstName+" "+lastName):void 0},i.firstName=function(){var firstName=this.proxy("traits.firstName");if("string"==typeof firstName)return trim(firstName);var name=this.proxy("traits.name");return"string"==typeof name?trim(name).split(" ")[0]:void 0},i.lastName=function(){var lastName=this.proxy("traits.lastName");if("string"==typeof lastName)return trim(lastName);var name=this.proxy("traits.name");if("string"==typeof name){var space=trim(name).indexOf(" ");if(-1!==space)return trim(name.substr(space+1))}},i.uid=function(){return this.userId()||this.username()||this.email()},i.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},i.age=function(){var date=this.birthday(),age=obj_case_1.default(this.traits(),"age");return null!=age?age:date instanceof Date?(new Date).getFullYear()-date.getFullYear():void 0},i.avatar=function(){var traits=this.traits();return obj_case_1.default(traits,"avatar")||obj_case_1.default(traits,"photoUrl")||obj_case_1.default(traits,"avatarUrl")},i.position=function(){var traits=this.traits();return obj_case_1.default(traits,"position")||obj_case_1.default(traits,"jobTitle")},i.username=facade_1.Facade.proxy("traits.username"),i.website=facade_1.Facade.one("traits.website"),i.websites=facade_1.Facade.multi("traits.website"),i.phone=facade_1.Facade.one("traits.phone"),i.phones=facade_1.Facade.multi("traits.phone"),i.address=facade_1.Facade.proxy("traits.address"),i.gender=facade_1.Facade.proxy("traits.gender"),i.birthday=facade_1.Facade.proxy("traits.birthday")},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Delete=exports.Screen=exports.Page=exports.Track=exports.Identify=exports.Group=exports.Alias=exports.Facade=void 0;var facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js");Object.defineProperty(exports,"Facade",{enumerable:!0,get:function(){return facade_1.Facade}});var alias_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/alias.js");Object.defineProperty(exports,"Alias",{enumerable:!0,get:function(){return alias_1.Alias}});var group_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/group.js");Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return group_1.Group}});var identify_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/identify.js");Object.defineProperty(exports,"Identify",{enumerable:!0,get:function(){return identify_1.Identify}});var track_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/track.js");Object.defineProperty(exports,"Track",{enumerable:!0,get:function(){return track_1.Track}});var page_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/page.js");Object.defineProperty(exports,"Page",{enumerable:!0,get:function(){return page_1.Page}});var screen_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/screen.js");Object.defineProperty(exports,"Screen",{enumerable:!0,get:function(){return screen_1.Screen}});var delete_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/delete.js");Object.defineProperty(exports,"Delete",{enumerable:!0,get:function(){return delete_1.Delete}}),exports.default=__assign(__assign({},facade_1.Facade),{Alias:alias_1.Alias,Group:group_1.Group,Identify:identify_1.Identify,Track:track_1.Track,Page:page_1.Page,Screen:screen_1.Screen,Delete:delete_1.Delete})},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-email.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var matcher=/.+\@.+\..+/;exports.default=function isEmail(string){return matcher.test(string)}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-enabled.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var disabled={Salesforce:!0};exports.default=function default_1(integration){return!disabled[integration]}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/page.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Page=void 0;var inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js"),track_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/track.js"),is_email_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-email.js"));function Page(dictionary,opts){facade_1.Facade.call(this,dictionary,opts)}exports.Page=Page,inherits_1.default(Page,facade_1.Facade);var p=Page.prototype;p.action=function(){return"page"},p.type=p.action,p.category=facade_1.Facade.field("category"),p.name=facade_1.Facade.field("name"),p.title=facade_1.Facade.proxy("properties.title"),p.path=facade_1.Facade.proxy("properties.path"),p.url=facade_1.Facade.proxy("properties.url"),p.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},p.properties=function(aliases){var props=this.field("properties")||{},category=this.category(),name=this.name();for(var alias in aliases=aliases||{},category&&(props.category=category),name&&(props.name=name),aliases)if(Object.prototype.hasOwnProperty.call(aliases,alias)){var value=null==this[alias]?this.proxy("properties."+alias):this[alias]();if(null==value)continue;props[aliases[alias]]=value,alias!==aliases[alias]&&delete props[alias]}return props},p.email=function(){var email=this.proxy("context.traits.email")||this.proxy("properties.email");if(email)return email;var userId=this.userId();return is_email_1.default(userId)?userId:void 0},p.fullName=function(){var category=this.category(),name=this.name();return name&&category?category+" "+name:name},p.event=function(name){return name?"Viewed "+name+" Page":"Loaded a Page"},p.track=function(name){var json=this.json();return json.event=this.event(name),json.timestamp=this.timestamp(),json.properties=this.properties(),new track_1.Track(json,this.opts)}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/screen.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Screen=void 0;var inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),page_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/page.js"),track_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/track.js");function Screen(dictionary,opts){page_1.Page.call(this,dictionary,opts)}exports.Screen=Screen,inherits_1.default(Screen,page_1.Page),Screen.prototype.action=function(){return"screen"},Screen.prototype.type=Screen.prototype.action,Screen.prototype.event=function(name){return name?"Viewed "+name+" Screen":"Loaded a Screen"},Screen.prototype.track=function(name){var json=this.json();return json.event=this.event(name),json.timestamp=this.timestamp(),json.properties=this.properties(),new track_1.Track(json,this.opts)}},"./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/track.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Track=void 0;var inherits_1=__importDefault(__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")),facade_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/facade.js"),identify_1=__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/identify.js"),is_email_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/dist/is-email.js")),obj_case_1=__importDefault(__webpack_require__("./node_modules/.pnpm/obj-case@0.2.1/node_modules/obj-case/index.js"));function Track(dictionary,opts){facade_1.Facade.call(this,dictionary,opts)}exports.Track=Track,inherits_1.default(Track,facade_1.Facade);var t=Track.prototype;t.action=function(){return"track"},t.type=t.action,t.event=facade_1.Facade.field("event"),t.value=facade_1.Facade.proxy("properties.value"),t.category=facade_1.Facade.proxy("properties.category"),t.id=facade_1.Facade.proxy("properties.id"),t.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},t.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},t.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},t.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},t.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},t.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},t.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},t.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},t.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},t.sku=facade_1.Facade.proxy("properties.sku"),t.tax=facade_1.Facade.proxy("properties.tax"),t.name=facade_1.Facade.proxy("properties.name"),t.price=facade_1.Facade.proxy("properties.price"),t.total=facade_1.Facade.proxy("properties.total"),t.repeat=facade_1.Facade.proxy("properties.repeat"),t.coupon=facade_1.Facade.proxy("properties.coupon"),t.shipping=facade_1.Facade.proxy("properties.shipping"),t.discount=facade_1.Facade.proxy("properties.discount"),t.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},t.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},t.description=facade_1.Facade.proxy("properties.description"),t.plan=facade_1.Facade.proxy("properties.plan"),t.subtotal=function(){var subtotal=obj_case_1.default(this.properties(),"subtotal"),total=this.total()||this.revenue();if(subtotal)return subtotal;if(!total)return 0;if(this.total()){var n=this.tax();n&&(total-=n),(n=this.shipping())&&(total-=n),(n=this.discount())&&(total+=n)}return total},t.products=function(){var props=this.properties(),products=obj_case_1.default(props,"products");return Array.isArray(products)?products.filter((function(item){return null!==item})):[]},t.quantity=function(){return(this.obj.properties||{}).quantity||1},t.currency=function(){return(this.obj.properties||{}).currency||"USD"},t.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},t.query=facade_1.Facade.proxy("options.query"),t.properties=function(aliases){var ret=this.field("properties")||{};for(var alias in aliases=aliases||{})if(Object.prototype.hasOwnProperty.call(aliases,alias)){var value=null==this[alias]?this.proxy("properties."+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value,delete ret[alias]}return ret},t.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},t.email=function(){var email=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(email)return email;var userId=this.userId();return is_email_1.default(userId)?userId:void 0},t.revenue=function(){var revenue=this.proxy("properties.revenue"),event=this.event();return!revenue&&event&&event.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(revenue=this.proxy("properties.total")),function currency(val){if(!val)return;if("number"==typeof val)return val;if("string"!=typeof val)return;if(val=val.replace(/\$/g,""),val=parseFloat(val),!isNaN(val))return val}(revenue)},t.cents=function(){var revenue=this.revenue();return"number"!=typeof revenue?this.value()||0:100*revenue},t.identify=function(){var json=this.json();return json.traits=this.traits(),new identify_1.Identify(json,this.opts)}},"./node_modules/.pnpm/@segment+isodate-traverse@1.1.1/node_modules/@segment/isodate-traverse/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isodate=__webpack_require__("./node_modules/.pnpm/@segment+isodate@1.0.3/node_modules/@segment/isodate/lib/index.js");function traverse(input,strict){return void 0===strict&&(strict=!0),input&&"object"==typeof input?function traverseObject(obj,strict){return Object.keys(obj).forEach((function(key){obj[key]=traverse(obj[key],strict)})),obj}(input,strict):Array.isArray(input)?function traverseArray(arr,strict){return arr.forEach((function(value,index){arr[index]=traverse(value,strict)})),arr}(input,strict):isodate.is(input,strict)?isodate.parse(input):input}module.exports=traverse},"./node_modules/.pnpm/@segment+isodate@1.0.3/node_modules/@segment/isodate/lib/index.js":(__unused_webpack_module,exports)=>{"use strict";var matcher=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12],arr=matcher.exec(iso),offset=0;if(!arr)return new Date(iso);for(var val,i=0;val=numericKeys[i];i++)arr[val]=parseInt(arr[val],10)||0;arr[2]=parseInt(arr[2],10)||1,arr[3]=parseInt(arr[3],10)||1,arr[2]--,arr[8]=arr[8]?(arr[8]+"00").substring(0,3):0," "===arr[4]?offset=(new Date).getTimezoneOffset():"Z"!==arr[9]&&arr[10]&&(offset=60*arr[11]+arr[12],"+"===arr[10]&&(offset=0-offset));var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)},exports.is=function(string,strict){return"string"==typeof string&&((!strict||!1!==/^\d{4}-\d{2}-\d{2}/.test(string))&&matcher.test(string))}},"./node_modules/.pnpm/@tanstack+query-async-storage-persister@5.45.0/node_modules/@tanstack/query-async-storage-persister/build/modern/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function noop(){}function asyncThrottle(func,{interval=1e3,onError=noop}={}){if("function"!=typeof func)throw new Error("argument is not function.");let nextExecutionTime=0,lastArgs=null,isExecuting=!1,isScheduled=!1;return async(...args)=>{if(lastArgs=args,!isScheduled){for(isScheduled=!0;isExecuting;)await new Promise((done=>setTimeout(done,interval)));for(;Date.now()<nextExecutionTime;)await new Promise((done=>setTimeout(done,nextExecutionTime-Date.now())));isScheduled=!1,isExecuting=!0;try{await func(...lastArgs)}catch(error){try{onError(error)}catch{}}nextExecutionTime=Date.now()+interval,isExecuting=!1}}}__webpack_require__.d(__webpack_exports__,{$:()=>createAsyncStoragePersister});var createAsyncStoragePersister=({storage,key="REACT_QUERY_OFFLINE_CACHE",throttleTime=1e3,serialize=JSON.stringify,deserialize=JSON.parse,retry})=>{if(storage){const trySave=async persistedClient=>{try{const serialized=await serialize(persistedClient);return void await storage.setItem(key,serialized)}catch(error){return error}};return{persistClient:asyncThrottle((async persistedClient=>{let client=persistedClient,error=await trySave(client),errorCount=0;for(;error&&client;)errorCount++,client=await(retry?.({persistedClient:client,error,errorCount})),client&&(error=await trySave(client))}),{interval:throttleTime}),restoreClient:async()=>{const cacheString=await storage.getItem(key);if(cacheString)return await deserialize(cacheString)},removeClient:()=>storage.removeItem(key)}}return{persistClient:noop,restoreClient:()=>Promise.resolve(void 0),removeClient:noop}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/focusManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>focusManager});var _subscribable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/subscribable.js"),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),focusManager=new class extends _subscribable_js__WEBPACK_IMPORTED_MODULE_0__.Q{#focused;#cleanup;#setup;constructor(){super(),this.#setup=onFocus=>{if(!_utils_js__WEBPACK_IMPORTED_MODULE_1__.S$&&window.addEventListener){const listener=()=>onFocus();return window.addEventListener("visibilitychange",listener,!1),()=>{window.removeEventListener("visibilitychange",listener)}}}}onSubscribe(){this.#cleanup||this.setEventListener(this.#setup)}onUnsubscribe(){this.hasListeners()||(this.#cleanup?.(),this.#cleanup=void 0)}setEventListener(setup){this.#setup=setup,this.#cleanup?.(),this.#cleanup=setup((focused=>{"boolean"==typeof focused?this.setFocused(focused):this.onFocus()}))}setFocused(focused){this.#focused!==focused&&(this.#focused=focused,this.onFocus())}onFocus(){const isFocused=this.isFocused();this.listeners.forEach((listener=>{listener(isFocused)}))}isFocused(){return"boolean"==typeof this.#focused?this.#focused:"hidden"!==globalThis.document?.visibilityState}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/mutationCache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>MutationCache});var notifyManager=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/notifyManager.js"),removable=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/removable.js"),retryer=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/retryer.js"),Mutation=class extends removable.k{#observers;#mutationCache;#retryer;constructor(config){super(),this.mutationId=config.mutationId,this.#mutationCache=config.mutationCache,this.#observers=[],this.state=config.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(config.options),this.scheduleGc()}setOptions(options){this.options=options,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(observer){this.#observers.includes(observer)||(this.#observers.push(observer),this.clearGcTimeout(),this.#mutationCache.notify({type:"observerAdded",mutation:this,observer}))}removeObserver(observer){this.#observers=this.#observers.filter((x=>x!==observer)),this.scheduleGc(),this.#mutationCache.notify({type:"observerRemoved",mutation:this,observer})}optionalRemove(){this.#observers.length||("pending"===this.state.status?this.scheduleGc():this.#mutationCache.remove(this))}continue(){return this.#retryer?.continue()??this.execute(this.state.variables)}async execute(variables){this.#retryer=(0,retryer.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(variables):Promise.reject(new Error("No mutationFn found")),onFail:(failureCount,error)=>{this.#dispatch({type:"failed",failureCount,error})},onPause:()=>{this.#dispatch({type:"pause"})},onContinue:()=>{this.#dispatch({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#mutationCache.canRun(this)});const restored="pending"===this.state.status,isPaused=!this.#retryer.canStart();try{if(!restored){this.#dispatch({type:"pending",variables,isPaused}),await(this.#mutationCache.config.onMutate?.(variables,this));const context=await(this.options.onMutate?.(variables));context!==this.state.context&&this.#dispatch({type:"pending",context,variables,isPaused})}const data=await this.#retryer.start();return await(this.#mutationCache.config.onSuccess?.(data,variables,this.state.context,this)),await(this.options.onSuccess?.(data,variables,this.state.context)),await(this.#mutationCache.config.onSettled?.(data,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(data,null,variables,this.state.context)),this.#dispatch({type:"success",data}),data}catch(error){try{throw await(this.#mutationCache.config.onError?.(error,variables,this.state.context,this)),await(this.options.onError?.(error,variables,this.state.context)),await(this.#mutationCache.config.onSettled?.(void 0,error,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,error,variables,this.state.context)),error}finally{this.#dispatch({type:"error",error})}}finally{this.#mutationCache.runNext(this)}}#dispatch(action){this.state=(state=>{switch(action.type){case"failed":return{...state,failureCount:action.failureCount,failureReason:action.error};case"pause":return{...state,isPaused:!0};case"continue":return{...state,isPaused:!1};case"pending":return{...state,context:action.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:action.isPaused,status:"pending",variables:action.variables,submittedAt:Date.now()};case"success":return{...state,data:action.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...state,data:void 0,error:action.error,failureCount:state.failureCount+1,failureReason:action.error,isPaused:!1,status:"error"}}})(this.state),notifyManager.j.batch((()=>{this.#observers.forEach((observer=>{observer.onMutationUpdate(action)})),this.#mutationCache.notify({mutation:this,type:"updated",action})}))}};var utils=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),subscribable=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/subscribable.js"),MutationCache=class extends subscribable.Q{constructor(config={}){super(),this.config=config,this.#mutations=new Map,this.#mutationId=Date.now()}#mutations;#mutationId;build(client,options,state){const mutation=new Mutation({mutationCache:this,mutationId:++this.#mutationId,options:client.defaultMutationOptions(options),state});return this.add(mutation),mutation}add(mutation){const scope=scopeFor(mutation),mutations=this.#mutations.get(scope)??[];mutations.push(mutation),this.#mutations.set(scope,mutations),this.notify({type:"added",mutation})}remove(mutation){const scope=scopeFor(mutation);if(this.#mutations.has(scope)){const mutations=this.#mutations.get(scope)?.filter((x=>x!==mutation));mutations&&(0===mutations.length?this.#mutations.delete(scope):this.#mutations.set(scope,mutations))}this.notify({type:"removed",mutation})}canRun(mutation){const firstPendingMutation=this.#mutations.get(scopeFor(mutation))?.find((m=>"pending"===m.state.status));return!firstPendingMutation||firstPendingMutation===mutation}runNext(mutation){const foundMutation=this.#mutations.get(scopeFor(mutation))?.find((m=>m!==mutation&&m.state.isPaused));return foundMutation?.continue()??Promise.resolve()}clear(){notifyManager.j.batch((()=>{this.getAll().forEach((mutation=>{this.remove(mutation)}))}))}getAll(){return[...this.#mutations.values()].flat()}find(filters){const defaultedFilters={exact:!0,...filters};return this.getAll().find((mutation=>(0,utils.nJ)(defaultedFilters,mutation)))}findAll(filters={}){return this.getAll().filter((mutation=>(0,utils.nJ)(filters,mutation)))}notify(event){notifyManager.j.batch((()=>{this.listeners.forEach((listener=>{listener(event)}))}))}resumePausedMutations(){const pausedMutations=this.getAll().filter((x=>x.state.isPaused));return notifyManager.j.batch((()=>Promise.all(pausedMutations.map((mutation=>mutation.continue().catch(utils.lQ))))))}};function scopeFor(mutation){return mutation.options.scope?.id??String(mutation.mutationId)}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/notifyManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>notifyManager});var notifyManager=function createNotifyManager(){let queue=[],transactions=0,notifyFn=callback=>{callback()},batchNotifyFn=callback=>{callback()},scheduleFn=cb=>setTimeout(cb,0);const schedule=callback=>{transactions?queue.push(callback):scheduleFn((()=>{notifyFn(callback)}))},flush=()=>{const originalQueue=queue;queue=[],originalQueue.length&&scheduleFn((()=>{batchNotifyFn((()=>{originalQueue.forEach((callback=>{notifyFn(callback)}))}))}))};return{batch:callback=>{let result;transactions++;try{result=callback()}finally{transactions--,transactions||flush()}return result},batchCalls:callback=>(...args)=>{schedule((()=>{callback(...args)}))},schedule,setNotifyFunction:fn=>{notifyFn=fn},setBatchNotifyFunction:fn=>{batchNotifyFn=fn},setScheduler:fn=>{scheduleFn=fn}}}()},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/onlineManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>onlineManager});var _subscribable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/subscribable.js"),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),onlineManager=new class extends _subscribable_js__WEBPACK_IMPORTED_MODULE_0__.Q{#online=!0;#cleanup;#setup;constructor(){super(),this.#setup=onOnline=>{if(!_utils_js__WEBPACK_IMPORTED_MODULE_1__.S$&&window.addEventListener){const onlineListener=()=>onOnline(!0),offlineListener=()=>onOnline(!1);return window.addEventListener("online",onlineListener,!1),window.addEventListener("offline",offlineListener,!1),()=>{window.removeEventListener("online",onlineListener),window.removeEventListener("offline",offlineListener)}}}}onSubscribe(){this.#cleanup||this.setEventListener(this.#setup)}onUnsubscribe(){this.hasListeners()||(this.#cleanup?.(),this.#cleanup=void 0)}setEventListener(setup){this.#setup=setup,this.#cleanup?.(),this.#cleanup=setup(this.setOnline.bind(this))}setOnline(online){this.#online!==online&&(this.#online=online,this.listeners.forEach((listener=>{listener(online)})))}isOnline(){return this.#online}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/query.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>Query,k:()=>fetchState});var _utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/notifyManager.js"),_retryer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/retryer.js"),_removable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/removable.js"),Query=class extends _removable_js__WEBPACK_IMPORTED_MODULE_0__.k{#initialState;#revertState;#cache;#retryer;#defaultOptions;#abortSignalConsumed;constructor(config){super(),this.#abortSignalConsumed=!1,this.#defaultOptions=config.defaultOptions,this.setOptions(config.options),this.observers=[],this.#cache=config.cache,this.queryKey=config.queryKey,this.queryHash=config.queryHash,this.#initialState=config.state||function getDefaultState(options){const data="function"==typeof options.initialData?options.initialData():options.initialData,hasData=void 0!==data,initialDataUpdatedAt=hasData?"function"==typeof options.initialDataUpdatedAt?options.initialDataUpdatedAt():options.initialDataUpdatedAt:0;return{data,dataUpdateCount:0,dataUpdatedAt:hasData?initialDataUpdatedAt??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:hasData?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=this.#initialState,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#retryer?.promise}setOptions(options){this.options={...this.#defaultOptions,...options},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#cache.remove(this)}setData(newData,options){const data=(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.pl)(this.state.data,newData,this.options);return this.#dispatch({data,type:"success",dataUpdatedAt:options?.updatedAt,manual:options?.manual}),data}setState(state,setStateOptions){this.#dispatch({type:"setState",state,setStateOptions})}cancel(options){const promise=this.#retryer?.promise;return this.#retryer?.cancel(options),promise?promise.then(_utils_js__WEBPACK_IMPORTED_MODULE_1__.lQ).catch(_utils_js__WEBPACK_IMPORTED_MODULE_1__.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#initialState)}isActive(){return this.observers.some((observer=>!1!==observer.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((observer=>observer.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(staleTime=0){return this.state.isInvalidated||void 0===this.state.data||!(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.j3)(this.state.dataUpdatedAt,staleTime)}onFocus(){const observer=this.observers.find((x=>x.shouldFetchOnWindowFocus()));observer?.refetch({cancelRefetch:!1}),this.#retryer?.continue()}onOnline(){const observer=this.observers.find((x=>x.shouldFetchOnReconnect()));observer?.refetch({cancelRefetch:!1}),this.#retryer?.continue()}addObserver(observer){this.observers.includes(observer)||(this.observers.push(observer),this.clearGcTimeout(),this.#cache.notify({type:"observerAdded",query:this,observer}))}removeObserver(observer){this.observers.includes(observer)&&(this.observers=this.observers.filter((x=>x!==observer)),this.observers.length||(this.#retryer&&(this.#abortSignalConsumed?this.#retryer.cancel({revert:!0}):this.#retryer.cancelRetry()),this.scheduleGc()),this.#cache.notify({type:"observerRemoved",query:this,observer}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#dispatch({type:"invalidate"})}fetch(options,fetchOptions){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&fetchOptions?.cancelRefetch)this.cancel({silent:!0});else if(this.#retryer)return this.#retryer.continueRetry(),this.#retryer.promise;if(options&&this.setOptions(options),!this.options.queryFn){const observer=this.observers.find((x=>x.options.queryFn));observer&&this.setOptions(observer.options)}const abortController=new AbortController,addSignalProperty=object=>{Object.defineProperty(object,"signal",{enumerable:!0,get:()=>(this.#abortSignalConsumed=!0,abortController.signal)})},context={fetchOptions,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const queryFn=(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.ZM)(this.options,fetchOptions),queryFnContext={queryKey:this.queryKey,meta:this.meta};return addSignalProperty(queryFnContext),this.#abortSignalConsumed=!1,this.options.persister?this.options.persister(queryFn,queryFnContext,this):queryFn(queryFnContext)}};addSignalProperty(context),this.options.behavior?.onFetch(context,this),this.#revertState=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===context.fetchOptions?.meta||this.#dispatch({type:"fetch",meta:context.fetchOptions?.meta});const onError=error=>{(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.wm)(error)&&error.silent||this.#dispatch({type:"error",error}),(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.wm)(error)||(this.#cache.config.onError?.(error,this),this.#cache.config.onSettled?.(this.state.data,error,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#retryer=(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.II)({initialPromise:fetchOptions?.initialPromise,fn:context.fetchFn,abort:abortController.abort.bind(abortController),onSuccess:data=>{void 0!==data?(this.setData(data),this.#cache.config.onSuccess?.(data,this),this.#cache.config.onSettled?.(data,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):onError(new Error(`${this.queryHash} data is undefined`))},onError,onFail:(failureCount,error)=>{this.#dispatch({type:"failed",failureCount,error})},onPause:()=>{this.#dispatch({type:"pause"})},onContinue:()=>{this.#dispatch({type:"continue"})},retry:context.options.retry,retryDelay:context.options.retryDelay,networkMode:context.options.networkMode,canRun:()=>!0}),this.#retryer.start()}#dispatch(action){this.state=(state=>{switch(action.type){case"failed":return{...state,fetchFailureCount:action.failureCount,fetchFailureReason:action.error};case"pause":return{...state,fetchStatus:"paused"};case"continue":return{...state,fetchStatus:"fetching"};case"fetch":return{...state,...fetchState(state.data,this.options),fetchMeta:action.meta??null};case"success":return{...state,data:action.data,dataUpdateCount:state.dataUpdateCount+1,dataUpdatedAt:action.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!action.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const error=action.error;return(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.wm)(error)&&error.revert&&this.#revertState?{...this.#revertState,fetchStatus:"idle"}:{...state,error,errorUpdateCount:state.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:state.fetchFailureCount+1,fetchFailureReason:error,fetchStatus:"idle",status:"error"};case"invalidate":return{...state,isInvalidated:!0};case"setState":return{...state,...action.state}}})(this.state),_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__.j.batch((()=>{this.observers.forEach((observer=>{observer.onQueryUpdate()})),this.#cache.notify({query:this,type:"updated",action})}))}};function fetchState(data,options){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.v_)(options.networkMode)?"fetching":"paused",...void 0===data&&{error:null,status:"pending"}}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/queryCache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>QueryCache});var _utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),_query_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/query.js"),_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/notifyManager.js"),_subscribable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/subscribable.js"),QueryCache=class extends _subscribable_js__WEBPACK_IMPORTED_MODULE_0__.Q{constructor(config={}){super(),this.config=config,this.#queries=new Map}#queries;build(client,options,state){const queryKey=options.queryKey,queryHash=options.queryHash??(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.F$)(queryKey,options);let query=this.get(queryHash);return query||(query=new _query_js__WEBPACK_IMPORTED_MODULE_2__.X({cache:this,queryKey,queryHash,options:client.defaultQueryOptions(options),state,defaultOptions:client.getQueryDefaults(queryKey)}),this.add(query)),query}add(query){this.#queries.has(query.queryHash)||(this.#queries.set(query.queryHash,query),this.notify({type:"added",query}))}remove(query){const queryInMap=this.#queries.get(query.queryHash);queryInMap&&(query.destroy(),queryInMap===query&&this.#queries.delete(query.queryHash),this.notify({type:"removed",query}))}clear(){_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__.j.batch((()=>{this.getAll().forEach((query=>{this.remove(query)}))}))}get(queryHash){return this.#queries.get(queryHash)}getAll(){return[...this.#queries.values()]}find(filters){const defaultedFilters={exact:!0,...filters};return this.getAll().find((query=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.MK)(defaultedFilters,query)))}findAll(filters={}){const queries=this.getAll();return Object.keys(filters).length>0?queries.filter((query=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.MK)(filters,query))):queries}notify(event){_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__.j.batch((()=>{this.listeners.forEach((listener=>{listener(event)}))}))}onFocus(){_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__.j.batch((()=>{this.getAll().forEach((query=>{query.onFocus()}))}))}onOnline(){_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__.j.batch((()=>{this.getAll().forEach((query=>{query.onOnline()}))}))}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/queryClient.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>QueryClient});var utils=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),queryCache=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/queryCache.js"),mutationCache=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/mutationCache.js"),focusManager=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/focusManager.js"),onlineManager=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/onlineManager.js"),notifyManager=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/notifyManager.js");function infiniteQueryBehavior(pages){return{onFetch:(context,query)=>{const fetchFn=async()=>{const options=context.options,direction=context.fetchOptions?.meta?.fetchMore?.direction,oldPages=context.state.data?.pages||[],oldPageParams=context.state.data?.pageParams||[],empty={pages:[],pageParams:[]};let cancelled=!1;const queryFn=(0,utils.ZM)(context.options,context.fetchOptions),fetchPage=async(data,param,previous)=>{if(cancelled)return Promise.reject();if(null==param&&data.pages.length)return Promise.resolve(data);const queryFnContext={queryKey:context.queryKey,pageParam:param,direction:previous?"backward":"forward",meta:context.options.meta};var object;object=queryFnContext,Object.defineProperty(object,"signal",{enumerable:!0,get:()=>(context.signal.aborted?cancelled=!0:context.signal.addEventListener("abort",(()=>{cancelled=!0})),context.signal)});const page=await queryFn(queryFnContext),{maxPages}=context.options,addTo=previous?utils.ZZ:utils.y9;return{pages:addTo(data.pages,page,maxPages),pageParams:addTo(data.pageParams,param,maxPages)}};let result;if(direction&&oldPages.length){const previous="backward"===direction,oldData={pages:oldPages,pageParams:oldPageParams},param=(previous?getPreviousPageParam:getNextPageParam)(options,oldData);result=await fetchPage(oldData,param,previous)}else{result=await fetchPage(empty,oldPageParams[0]??options.initialPageParam);const remainingPages=pages??oldPages.length;for(let i=1;i<remainingPages;i++){const param=getNextPageParam(options,result);result=await fetchPage(result,param)}}return result};context.options.persister?context.fetchFn=()=>context.options.persister?.(fetchFn,{queryKey:context.queryKey,meta:context.options.meta,signal:context.signal},query):context.fetchFn=fetchFn}}}function getNextPageParam(options,{pages,pageParams}){const lastIndex=pages.length-1;return options.getNextPageParam(pages[lastIndex],pages,pageParams[lastIndex],pageParams)}function getPreviousPageParam(options,{pages,pageParams}){return options.getPreviousPageParam?.(pages[0],pages,pageParams[0],pageParams)}var QueryClient=class{#queryCache;#mutationCache;#defaultOptions;#queryDefaults;#mutationDefaults;#mountCount;#unsubscribeFocus;#unsubscribeOnline;constructor(config={}){this.#queryCache=config.queryCache||new queryCache.$,this.#mutationCache=config.mutationCache||new mutationCache.q,this.#defaultOptions=config.defaultOptions||{},this.#queryDefaults=new Map,this.#mutationDefaults=new Map,this.#mountCount=0}mount(){this.#mountCount++,1===this.#mountCount&&(this.#unsubscribeFocus=focusManager.m.subscribe((async focused=>{focused&&(await this.resumePausedMutations(),this.#queryCache.onFocus())})),this.#unsubscribeOnline=onlineManager.t.subscribe((async online=>{online&&(await this.resumePausedMutations(),this.#queryCache.onOnline())})))}unmount(){this.#mountCount--,0===this.#mountCount&&(this.#unsubscribeFocus?.(),this.#unsubscribeFocus=void 0,this.#unsubscribeOnline?.(),this.#unsubscribeOnline=void 0)}isFetching(filters){return this.#queryCache.findAll({...filters,fetchStatus:"fetching"}).length}isMutating(filters){return this.#mutationCache.findAll({...filters,status:"pending"}).length}getQueryData(queryKey){const options=this.defaultQueryOptions({queryKey});return this.#queryCache.get(options.queryHash)?.state.data}ensureQueryData(options){const cachedData=this.getQueryData(options.queryKey);if(void 0===cachedData)return this.fetchQuery(options);{const defaultedOptions=this.defaultQueryOptions(options),query=this.#queryCache.build(this,defaultedOptions);return options.revalidateIfStale&&query.isStaleByTime((0,utils.d2)(defaultedOptions.staleTime,query))&&this.prefetchQuery(defaultedOptions),Promise.resolve(cachedData)}}getQueriesData(filters){return this.#queryCache.findAll(filters).map((({queryKey,state})=>[queryKey,state.data]))}setQueryData(queryKey,updater,options){const defaultedOptions=this.defaultQueryOptions({queryKey}),query=this.#queryCache.get(defaultedOptions.queryHash),prevData=query?.state.data,data=(0,utils.Zw)(updater,prevData);if(void 0!==data)return this.#queryCache.build(this,defaultedOptions).setData(data,{...options,manual:!0})}setQueriesData(filters,updater,options){return notifyManager.j.batch((()=>this.#queryCache.findAll(filters).map((({queryKey})=>[queryKey,this.setQueryData(queryKey,updater,options)]))))}getQueryState(queryKey){const options=this.defaultQueryOptions({queryKey});return this.#queryCache.get(options.queryHash)?.state}removeQueries(filters){const queryCache=this.#queryCache;notifyManager.j.batch((()=>{queryCache.findAll(filters).forEach((query=>{queryCache.remove(query)}))}))}resetQueries(filters,options){const queryCache=this.#queryCache,refetchFilters={type:"active",...filters};return notifyManager.j.batch((()=>(queryCache.findAll(filters).forEach((query=>{query.reset()})),this.refetchQueries(refetchFilters,options))))}cancelQueries(filters={},cancelOptions={}){const defaultedCancelOptions={revert:!0,...cancelOptions},promises=notifyManager.j.batch((()=>this.#queryCache.findAll(filters).map((query=>query.cancel(defaultedCancelOptions)))));return Promise.all(promises).then(utils.lQ).catch(utils.lQ)}invalidateQueries(filters={},options={}){return notifyManager.j.batch((()=>{if(this.#queryCache.findAll(filters).forEach((query=>{query.invalidate()})),"none"===filters.refetchType)return Promise.resolve();const refetchFilters={...filters,type:filters.refetchType??filters.type??"active"};return this.refetchQueries(refetchFilters,options)}))}refetchQueries(filters={},options){const fetchOptions={...options,cancelRefetch:options?.cancelRefetch??!0},promises=notifyManager.j.batch((()=>this.#queryCache.findAll(filters).filter((query=>!query.isDisabled())).map((query=>{let promise=query.fetch(void 0,fetchOptions);return fetchOptions.throwOnError||(promise=promise.catch(utils.lQ)),"paused"===query.state.fetchStatus?Promise.resolve():promise}))));return Promise.all(promises).then(utils.lQ)}fetchQuery(options){const defaultedOptions=this.defaultQueryOptions(options);void 0===defaultedOptions.retry&&(defaultedOptions.retry=!1);const query=this.#queryCache.build(this,defaultedOptions);return query.isStaleByTime((0,utils.d2)(defaultedOptions.staleTime,query))?query.fetch(defaultedOptions):Promise.resolve(query.state.data)}prefetchQuery(options){return this.fetchQuery(options).then(utils.lQ).catch(utils.lQ)}fetchInfiniteQuery(options){return options.behavior=infiniteQueryBehavior(options.pages),this.fetchQuery(options)}prefetchInfiniteQuery(options){return this.fetchInfiniteQuery(options).then(utils.lQ).catch(utils.lQ)}resumePausedMutations(){return onlineManager.t.isOnline()?this.#mutationCache.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#queryCache}getMutationCache(){return this.#mutationCache}getDefaultOptions(){return this.#defaultOptions}setDefaultOptions(options){this.#defaultOptions=options}setQueryDefaults(queryKey,options){this.#queryDefaults.set((0,utils.EN)(queryKey),{queryKey,defaultOptions:options})}getQueryDefaults(queryKey){const defaults=[...this.#queryDefaults.values()];let result={};return defaults.forEach((queryDefault=>{(0,utils.Cp)(queryKey,queryDefault.queryKey)&&(result={...result,...queryDefault.defaultOptions})})),result}setMutationDefaults(mutationKey,options){this.#mutationDefaults.set((0,utils.EN)(mutationKey),{mutationKey,defaultOptions:options})}getMutationDefaults(mutationKey){const defaults=[...this.#mutationDefaults.values()];let result={};return defaults.forEach((queryDefault=>{(0,utils.Cp)(mutationKey,queryDefault.mutationKey)&&(result={...result,...queryDefault.defaultOptions})})),result}defaultQueryOptions(options){if(options._defaulted)return options;const defaultedOptions={...this.#defaultOptions.queries,...this.getQueryDefaults(options.queryKey),...options,_defaulted:!0};return defaultedOptions.queryHash||(defaultedOptions.queryHash=(0,utils.F$)(defaultedOptions.queryKey,defaultedOptions)),void 0===defaultedOptions.refetchOnReconnect&&(defaultedOptions.refetchOnReconnect="always"!==defaultedOptions.networkMode),void 0===defaultedOptions.throwOnError&&(defaultedOptions.throwOnError=!!defaultedOptions.suspense),!defaultedOptions.networkMode&&defaultedOptions.persister&&(defaultedOptions.networkMode="offlineFirst"),!0!==defaultedOptions.enabled&&defaultedOptions.queryFn===utils.hT&&(defaultedOptions.enabled=!1),defaultedOptions}defaultMutationOptions(options){return options?._defaulted?options:{...this.#defaultOptions.mutations,...options?.mutationKey&&this.getMutationDefaults(options.mutationKey),...options,_defaulted:!0}}clear(){this.#queryCache.clear(),this.#mutationCache.clear()}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/removable.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>Removable});var _utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js"),Removable=class{#gcTimeout;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.gn)(this.gcTime)&&(this.#gcTimeout=setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(newGcTime){this.gcTime=Math.max(this.gcTime||0,newGcTime??(_utils_js__WEBPACK_IMPORTED_MODULE_0__.S$?1/0:3e5))}clearGcTimeout(){this.#gcTimeout&&(clearTimeout(this.#gcTimeout),this.#gcTimeout=void 0)}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/retryer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{II:()=>createRetryer,v_:()=>canFetch,wm:()=>isCancelledError});var _focusManager_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/focusManager.js"),_onlineManager_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/onlineManager.js"),_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js");function defaultRetryDelay(failureCount){return Math.min(1e3*2**failureCount,3e4)}function canFetch(networkMode){return"online"!==(networkMode??"online")||_onlineManager_js__WEBPACK_IMPORTED_MODULE_0__.t.isOnline()}var CancelledError=class{constructor(options){this.revert=options?.revert,this.silent=options?.silent}};function isCancelledError(value){return value instanceof CancelledError}function createRetryer(config){let continueFn,promiseResolve,promiseReject,isRetryCancelled=!1,failureCount=0,isResolved=!1;const promise=new Promise(((outerResolve,outerReject)=>{promiseResolve=outerResolve,promiseReject=outerReject})),canContinue=()=>_focusManager_js__WEBPACK_IMPORTED_MODULE_1__.m.isFocused()&&("always"===config.networkMode||_onlineManager_js__WEBPACK_IMPORTED_MODULE_0__.t.isOnline())&&config.canRun(),canStart=()=>canFetch(config.networkMode)&&config.canRun(),resolve=value=>{isResolved||(isResolved=!0,config.onSuccess?.(value),continueFn?.(),promiseResolve(value))},reject=value=>{isResolved||(isResolved=!0,config.onError?.(value),continueFn?.(),promiseReject(value))},pause=()=>new Promise((continueResolve=>{continueFn=value=>{(isResolved||canContinue())&&continueResolve(value)},config.onPause?.()})).then((()=>{continueFn=void 0,isResolved||config.onContinue?.()})),run=()=>{if(isResolved)return;let promiseOrValue;const initialPromise=0===failureCount?config.initialPromise:void 0;try{promiseOrValue=initialPromise??config.fn()}catch(error){promiseOrValue=Promise.reject(error)}Promise.resolve(promiseOrValue).then(resolve).catch((error=>{if(isResolved)return;const retry=config.retry??(_utils_js__WEBPACK_IMPORTED_MODULE_2__.S$?0:3),retryDelay=config.retryDelay??defaultRetryDelay,delay="function"==typeof retryDelay?retryDelay(failureCount,error):retryDelay,shouldRetry=!0===retry||"number"==typeof retry&&failureCount<retry||"function"==typeof retry&&retry(failureCount,error);!isRetryCancelled&&shouldRetry?(failureCount++,config.onFail?.(failureCount,error),(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.yy)(delay).then((()=>canContinue()?void 0:pause())).then((()=>{isRetryCancelled?reject(error):run()}))):reject(error)}))};return{promise,cancel:cancelOptions=>{isResolved||(reject(new CancelledError(cancelOptions)),config.abort?.())},continue:()=>(continueFn?.(),promise),cancelRetry:()=>{isRetryCancelled=!0},continueRetry:()=>{isRetryCancelled=!1},canStart,start:()=>(canStart()?run():pause().then(run),promise)}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/subscribable.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>Subscribable});var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(listener){return this.listeners.add(listener),this.onSubscribe(),()=>{this.listeners.delete(listener),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},"./node_modules/.pnpm/@tanstack+query-core@5.45.0/node_modules/@tanstack/query-core/build/modern/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cp:()=>partialMatchKey,EN:()=>hashKey,F$:()=>hashQueryKeyByOptions,MK:()=>matchQuery,S$:()=>isServer,ZM:()=>ensureQueryFn,ZZ:()=>addToStart,Zw:()=>functionalUpdate,d2:()=>resolveStaleTime,f8:()=>shallowEqualObjects,gn:()=>isValidTimeout,hT:()=>skipToken,j3:()=>timeUntilStale,lQ:()=>noop,nJ:()=>matchMutation,pl:()=>replaceData,rX:()=>keepPreviousData,y9:()=>addToEnd,yy:()=>sleep});var isServer="undefined"==typeof window||"Deno"in globalThis;function noop(){}function functionalUpdate(updater,input){return"function"==typeof updater?updater(input):updater}function isValidTimeout(value){return"number"==typeof value&&value>=0&&value!==1/0}function timeUntilStale(updatedAt,staleTime){return Math.max(updatedAt+(staleTime||0)-Date.now(),0)}function resolveStaleTime(staleTime,query){return"function"==typeof staleTime?staleTime(query):staleTime}function matchQuery(filters,query){const{type="all",exact,fetchStatus,predicate,queryKey,stale}=filters;if(queryKey)if(exact){if(query.queryHash!==hashQueryKeyByOptions(queryKey,query.options))return!1}else if(!partialMatchKey(query.queryKey,queryKey))return!1;if("all"!==type){const isActive=query.isActive();if("active"===type&&!isActive)return!1;if("inactive"===type&&isActive)return!1}return("boolean"!=typeof stale||query.isStale()===stale)&&((!fetchStatus||fetchStatus===query.state.fetchStatus)&&!(predicate&&!predicate(query)))}function matchMutation(filters,mutation){const{exact,status,predicate,mutationKey}=filters;if(mutationKey){if(!mutation.options.mutationKey)return!1;if(exact){if(hashKey(mutation.options.mutationKey)!==hashKey(mutationKey))return!1}else if(!partialMatchKey(mutation.options.mutationKey,mutationKey))return!1}return(!status||mutation.state.status===status)&&!(predicate&&!predicate(mutation))}function hashQueryKeyByOptions(queryKey,options){return(options?.queryKeyHashFn||hashKey)(queryKey)}function hashKey(queryKey){return JSON.stringify(queryKey,((_,val)=>isPlainObject(val)?Object.keys(val).sort().reduce(((result,key)=>(result[key]=val[key],result)),{}):val))}function partialMatchKey(a,b){return a===b||typeof a==typeof b&&(!(!a||!b||"object"!=typeof a||"object"!=typeof b)&&!Object.keys(b).some((key=>!partialMatchKey(a[key],b[key]))))}function replaceEqualDeep(a,b){if(a===b)return a;const array=isPlainArray(a)&&isPlainArray(b);if(array||isPlainObject(a)&&isPlainObject(b)){const aItems=array?a:Object.keys(a),aSize=aItems.length,bItems=array?b:Object.keys(b),bSize=bItems.length,copy=array?[]:{};let equalItems=0;for(let i=0;i<bSize;i++){const key=array?i:bItems[i];(!array&&aItems.includes(key)||array)&&void 0===a[key]&&void 0===b[key]?(copy[key]=void 0,equalItems++):(copy[key]=replaceEqualDeep(a[key],b[key]),copy[key]===a[key]&&void 0!==a[key]&&equalItems++)}return aSize===bSize&&equalItems===aSize?a:copy}return b}function shallowEqualObjects(a,b){if(!b||Object.keys(a).length!==Object.keys(b).length)return!1;for(const key in a)if(a[key]!==b[key])return!1;return!0}function isPlainArray(value){return Array.isArray(value)&&value.length===Object.keys(value).length}function isPlainObject(o){if(!hasObjectPrototype(o))return!1;const ctor=o.constructor;if(void 0===ctor)return!0;const prot=ctor.prototype;return!!hasObjectPrototype(prot)&&(!!prot.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(o)===Object.prototype)}function hasObjectPrototype(o){return"[object Object]"===Object.prototype.toString.call(o)}function sleep(ms){return new Promise((resolve=>{setTimeout(resolve,ms)}))}function replaceData(prevData,data,options){return"function"==typeof options.structuralSharing?options.structuralSharing(prevData,data):!1!==options.structuralSharing?replaceEqualDeep(prevData,data):data}function keepPreviousData(previousData){return previousData}function addToEnd(items,item,max=0){const newItems=[...items,item];return max&&newItems.length>max?newItems.slice(1):newItems}function addToStart(items,item,max=0){const newItems=[item,...items];return max&&newItems.length>max?newItems.slice(0,-1):newItems}var skipToken=Symbol(),ensureQueryFn=(options,fetchOptions)=>!options.queryFn&&fetchOptions?.initialPromise?()=>fetchOptions.initialPromise:options.queryFn&&options.queryFn!==skipToken?options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`))},"./node_modules/.pnpm/@tanstack+react-query@5.45.1_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ht:()=>QueryClientProvider,jE:()=>useQueryClient});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),QueryClientContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0),useQueryClient=queryClient=>{const client=react__WEBPACK_IMPORTED_MODULE_0__.useContext(QueryClientContext);if(queryClient)return queryClient;if(!client)throw new Error("No QueryClient set, use QueryClientProvider to set one");return client},QueryClientProvider=({client,children})=>(react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(client.mount(),()=>{client.unmount()})),[client]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(QueryClientContext.Provider,{value:client,children}))},"./node_modules/.pnpm/base-x@3.0.9/node_modules/base-x/src/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer;module.exports=function base(ALPHABET){if(ALPHABET.length>=255)throw new TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw new TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return _Buffer.alloc(0);for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;var vch=_Buffer.allocUnsafe(zeroes+(size-it4));vch.fill(0,0,zeroes);for(var j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function encode(source){if((Array.isArray(source)||source instanceof Uint8Array)&&(source=_Buffer.from(source)),!_Buffer.isBuffer(source))throw new TypeError("Expected Buffer");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe,decode:function decode(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error("Non-base"+BASE+" character")}}}},"./node_modules/.pnpm/base-x@4.0.0/node_modules/base-x/src/index.js":module=>{"use strict";module.exports=function base(ALPHABET){if(ALPHABET.length>=255)throw new TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw new TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return new Uint8Array;for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;for(var vch=new Uint8Array(zeroes+(size-it4)),j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function encode(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe,decode:function decode(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error("Non-base"+BASE+" character")}}}},"./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bech32m=exports.bech32=void 0;const ALPHABET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let z=0;z<32;z++){const x=ALPHABET.charAt(z);ALPHABET_MAP[x]=z}function polymodStep(pre){const b=pre>>25;return(33554431&pre)<<5^996825010&-(b>>0&1)^642813549&-(b>>1&1)^513874426&-(b>>2&1)^1027748829&-(b>>3&1)^705979059&-(b>>4&1)}function prefixChk(prefix){let chk=1;for(let i=0;i<prefix.length;++i){const c=prefix.charCodeAt(i);if(c<33||c>126)return"Invalid prefix ("+prefix+")";chk=polymodStep(chk)^c>>5}chk=polymodStep(chk);for(let i=0;i<prefix.length;++i){const v=prefix.charCodeAt(i);chk=polymodStep(chk)^31&v}return chk}function convert(data,inBits,outBits,pad){let value=0,bits=0;const maxV=(1<<outBits)-1,result=[];for(let i=0;i<data.length;++i)for(value=value<<inBits|data[i],bits+=inBits;bits>=outBits;)bits-=outBits,result.push(value>>bits&maxV);if(pad)bits>0&&result.push(value<<outBits-bits&maxV);else{if(bits>=inBits)return"Excess padding";if(value<<outBits-bits&maxV)return"Non-zero padding"}return result}function toWords(bytes){return convert(bytes,8,5,!0)}function fromWordsUnsafe(words){const res=convert(words,5,8,!1);if(Array.isArray(res))return res}function fromWords(words){const res=convert(words,5,8,!1);if(Array.isArray(res))return res;throw new Error(res)}function getLibraryFromEncoding(encoding){let ENCODING_CONST;function __decode(str,LIMIT){if(LIMIT=LIMIT||90,str.length<8)return str+" too short";if(str.length>LIMIT)return"Exceeds length limit";const lowered=str.toLowerCase(),uppered=str.toUpperCase();if(str!==lowered&&str!==uppered)return"Mixed-case string "+str;const split=(str=lowered).lastIndexOf("1");if(-1===split)return"No separator character for "+str;if(0===split)return"Missing prefix for "+str;const prefix=str.slice(0,split),wordChars=str.slice(split+1);if(wordChars.length<6)return"Data too short";let chk=prefixChk(prefix);if("string"==typeof chk)return chk;const words=[];for(let i=0;i<wordChars.length;++i){const c=wordChars.charAt(i),v=ALPHABET_MAP[c];if(void 0===v)return"Unknown character "+c;chk=polymodStep(chk)^v,i+6>=wordChars.length||words.push(v)}return chk!==ENCODING_CONST?"Invalid checksum for "+str:{prefix,words}}return ENCODING_CONST="bech32"===encoding?1:734539939,{decodeUnsafe:function decodeUnsafe(str,LIMIT){const res=__decode(str,LIMIT);if("object"==typeof res)return res},decode:function decode(str,LIMIT){const res=__decode(str,LIMIT);if("object"==typeof res)return res;throw new Error(res)},encode:function encode(prefix,words,LIMIT){if(LIMIT=LIMIT||90,prefix.length+7+words.length>LIMIT)throw new TypeError("Exceeds length limit");let chk=prefixChk(prefix=prefix.toLowerCase());if("string"==typeof chk)throw new Error(chk);let result=prefix+"1";for(let i=0;i<words.length;++i){const x=words[i];if(x>>5!=0)throw new Error("Non 5-bit word");chk=polymodStep(chk)^x,result+=ALPHABET.charAt(x)}for(let i=0;i<6;++i)chk=polymodStep(chk);chk^=ENCODING_CONST;for(let i=0;i<6;++i){result+=ALPHABET.charAt(chk>>5*(5-i)&31)}return result},toWords,fromWordsUnsafe,fromWords}}exports.bech32=getLibraryFromEncoding("bech32"),exports.bech32m=getLibraryFromEncoding("bech32m")},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/combiner/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const parser_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/index.js");function keyPusher(selfSet,selfKeyVals,otherKeyVals){return key=>{if(selfSet.has(key))return;const newKv=otherKeyVals.filter((kv=>kv.key.toString("hex")===key))[0];selfKeyVals.push(newKv),selfSet.add(key)}}function getTx(psbt){return psbt.globalMap.unsignedTx}function getKeySet(keyVals){const set=new Set;return keyVals.forEach((keyVal=>{const hex=keyVal.key.toString("hex");if(set.has(hex))throw new Error("Combine: KeyValue Map keys should be unique");set.add(hex)})),set}exports.combine=function combine(psbts){const self=psbts[0],selfKeyVals=parser_1.psbtToKeyVals(self),others=psbts.slice(1);if(0===others.length)throw new Error("Combine: Nothing to combine");const selfTx=getTx(self);if(void 0===selfTx)throw new Error("Combine: Self missing transaction");const selfGlobalSet=getKeySet(selfKeyVals.globalKeyVals),selfInputSets=selfKeyVals.inputKeyVals.map(getKeySet),selfOutputSets=selfKeyVals.outputKeyVals.map(getKeySet);for(const other of others){const otherTx=getTx(other);if(void 0===otherTx||!otherTx.toBuffer().equals(selfTx.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const otherKeyVals=parser_1.psbtToKeyVals(other);getKeySet(otherKeyVals.globalKeyVals).forEach(keyPusher(selfGlobalSet,selfKeyVals.globalKeyVals,otherKeyVals.globalKeyVals));otherKeyVals.inputKeyVals.map(getKeySet).forEach(((inputSet,idx)=>inputSet.forEach(keyPusher(selfInputSets[idx],selfKeyVals.inputKeyVals[idx],otherKeyVals.inputKeyVals[idx]))));otherKeyVals.outputKeyVals.map(getKeySet).forEach(((outputSet,idx)=>outputSet.forEach(keyPusher(selfOutputSets[idx],selfKeyVals.outputKeyVals[idx],otherKeyVals.outputKeyVals[idx]))))}return parser_1.psbtFromKeyVals(selfTx,{globalMapKeyVals:selfKeyVals.globalKeyVals,inputKeyVals:selfKeyVals.inputKeyVals,outputKeyVals:selfKeyVals.outputKeyVals})}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/global/globalXpub.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+keyVal.key.toString("hex"));if(79!==keyVal.key.length||![2,3].includes(keyVal.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+keyVal.key.toString("hex"));if(keyVal.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const extendedPubkey=keyVal.key.slice(1),data={masterFingerprint:keyVal.value.slice(0,4),extendedPubkey,path:"m"};for(const i of(n=keyVal.value.length/4-1,[...Array(n).keys()])){const val=keyVal.value.readUInt32LE(4*i+4),isHard=!!(2147483648&val),idx=2147483647&val;data.path+="/"+idx.toString(10)+(isHard?"'":"")}var n;return data},exports.encode=function encode(data){const head=Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]),key=Buffer.concat([head,data.extendedPubkey]),splitPath=data.path.split("/"),value=Buffer.allocUnsafe(4*splitPath.length);data.masterFingerprint.copy(value,0);let offset=4;return splitPath.slice(1).forEach((level=>{const isHard="'"===level.slice(-1);let num=2147483647&parseInt(isHard?level.slice(0,-1):level,10);isHard&&(num+=2147483648),value.writeUInt32LE(num,offset),offset+=4})),{key,value}},exports.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",exports.check=function check(data){const epk=data.extendedPubkey,mfp=data.masterFingerprint,p=data.path;return Buffer.isBuffer(epk)&&78===epk.length&&[2,3].indexOf(epk[45])>-1&&Buffer.isBuffer(mfp)&&4===mfp.length&&"string"==typeof p&&!!p.match(/^m(\/\d+'?)*$/)},exports.canAddToArray=function canAddToArray(array,item,dupeSet){const dupeString=item.extendedPubkey.toString("hex");return!dupeSet.has(dupeString)&&(dupeSet.add(dupeString),0===array.filter((v=>v.extendedPubkey.equals(item.extendedPubkey))).length)}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/global/unsignedTx.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.encode=function encode(data){return{key:Buffer.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),value:data.toBuffer()}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js"),globalXpub=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/global/globalXpub.js"),unsignedTx=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/global/unsignedTx.js"),finalScriptSig=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/finalScriptSig.js"),finalScriptWitness=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/finalScriptWitness.js"),nonWitnessUtxo=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js"),partialSig=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/partialSig.js"),porCommitment=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/porCommitment.js"),sighashType=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/sighashType.js"),tapKeySig=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapKeySig.js"),tapLeafScript=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapLeafScript.js"),tapMerkleRoot=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapMerkleRoot.js"),tapScriptSig=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapScriptSig.js"),witnessUtxo=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/witnessUtxo.js"),tapTree=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/output/tapTree.js"),bip32Derivation=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/bip32Derivation.js"),checkPubkey=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/checkPubkey.js"),redeemScript=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/redeemScript.js"),tapBip32Derivation=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/tapBip32Derivation.js"),tapInternalKey=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/tapInternalKey.js"),witnessScript=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/witnessScript.js"),globals={unsignedTx,globalXpub,checkPubkey:checkPubkey.makeChecker([])};exports.globals=globals;const inputs={nonWitnessUtxo,partialSig,sighashType,finalScriptSig,finalScriptWitness,porCommitment,witnessUtxo,bip32Derivation:bip32Derivation.makeConverter(typeFields_1.InputTypes.BIP32_DERIVATION),redeemScript:redeemScript.makeConverter(typeFields_1.InputTypes.REDEEM_SCRIPT),witnessScript:witnessScript.makeConverter(typeFields_1.InputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey.makeChecker([typeFields_1.InputTypes.PARTIAL_SIG,typeFields_1.InputTypes.BIP32_DERIVATION]),tapKeySig,tapScriptSig,tapLeafScript,tapBip32Derivation:tapBip32Derivation.makeConverter(typeFields_1.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:tapInternalKey.makeConverter(typeFields_1.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot};exports.inputs=inputs;const outputs={bip32Derivation:bip32Derivation.makeConverter(typeFields_1.OutputTypes.BIP32_DERIVATION),redeemScript:redeemScript.makeConverter(typeFields_1.OutputTypes.REDEEM_SCRIPT),witnessScript:witnessScript.makeConverter(typeFields_1.OutputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey.makeChecker([typeFields_1.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:tapBip32Derivation.makeConverter(typeFields_1.OutputTypes.TAP_BIP32_DERIVATION),tapTree,tapInternalKey:tapInternalKey.makeConverter(typeFields_1.OutputTypes.TAP_INTERNAL_KEY)};exports.outputs=outputs},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/finalScriptSig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+keyVal.key.toString("hex"));return keyVal.value},exports.encode=function encode(data){return{key:Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]),value:data}},exports.expected="Buffer",exports.check=function check(data){return Buffer.isBuffer(data)},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.finalScriptSig}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/finalScriptWitness.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+keyVal.key.toString("hex"));return keyVal.value},exports.encode=function encode(data){return{key:Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]),value:data}},exports.expected="Buffer",exports.check=function check(data){return Buffer.isBuffer(data)},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.finalScriptWitness}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+keyVal.key.toString("hex"));return keyVal.value},exports.encode=function encode(data){return{key:Buffer.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),value:data}},exports.expected="Buffer",exports.check=function check(data){return Buffer.isBuffer(data)},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.nonWitnessUtxo}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/partialSig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+keyVal.key.toString("hex"));if(34!==keyVal.key.length&&66!==keyVal.key.length||![2,3,4].includes(keyVal.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+keyVal.key.toString("hex"));return{pubkey:keyVal.key.slice(1),signature:keyVal.value}},exports.encode=function encode(pSig){const head=Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([head,pSig.pubkey]),value:pSig.signature}},exports.expected="{ pubkey: Buffer; signature: Buffer; }",exports.check=function check(data){return Buffer.isBuffer(data.pubkey)&&Buffer.isBuffer(data.signature)&&[33,65].includes(data.pubkey.length)&&[2,3,4].includes(data.pubkey[0])&&function isDerSigWithSighash(buf){if(!Buffer.isBuffer(buf)||buf.length<9)return!1;if(48!==buf[0])return!1;if(buf.length!==buf[1]+3)return!1;if(2!==buf[2])return!1;const rLen=buf[3];if(rLen>33||rLen<1)return!1;if(2!==buf[3+rLen+1])return!1;const sLen=buf[3+rLen+2];return!(sLen>33||sLen<1)&&buf.length===3+rLen+2+sLen+2}(data.signature)},exports.canAddToArray=function canAddToArray(array,item,dupeSet){const dupeString=item.pubkey.toString("hex");return!dupeSet.has(dupeString)&&(dupeSet.add(dupeString),0===array.filter((v=>v.pubkey.equals(item.pubkey))).length)}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/porCommitment.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+keyVal.key.toString("hex"));return keyVal.value.toString("utf8")},exports.encode=function encode(data){return{key:Buffer.from([typeFields_1.InputTypes.POR_COMMITMENT]),value:Buffer.from(data,"utf8")}},exports.expected="string",exports.check=function check(data){return"string"==typeof data},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.porCommitment}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/sighashType.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+keyVal.key.toString("hex"));return keyVal.value.readUInt32LE(0)},exports.encode=function encode(data){const key=Buffer.from([typeFields_1.InputTypes.SIGHASH_TYPE]),value=Buffer.allocUnsafe(4);return value.writeUInt32LE(data,0),{key,value}},exports.expected="number",exports.check=function check(data){return"number"==typeof data},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.sighashType}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapKeySig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");function check(data){return Buffer.isBuffer(data)&&(64===data.length||65===data.length)}exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.TAP_KEY_SIG||1!==keyVal.key.length)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+keyVal.key.toString("hex"));if(!check(keyVal.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return keyVal.value},exports.encode=function encode(value){return{key:Buffer.from([typeFields_1.InputTypes.TAP_KEY_SIG]),value}},exports.expected="Buffer",exports.check=check,exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.tapKeySig}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapLeafScript.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+keyVal.key.toString("hex"));if((keyVal.key.length-2)%32!=0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+keyVal.key.toString("hex"));const leafVersion=keyVal.value[keyVal.value.length-1];if((254&keyVal.key[1])!==leafVersion)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+keyVal.key.toString("hex"));const script=keyVal.value.slice(0,-1);return{controlBlock:keyVal.key.slice(1),script,leafVersion}},exports.encode=function encode(tScript){const head=Buffer.from([typeFields_1.InputTypes.TAP_LEAF_SCRIPT]),verBuf=Buffer.from([tScript.leafVersion]);return{key:Buffer.concat([head,tScript.controlBlock]),value:Buffer.concat([tScript.script,verBuf])}},exports.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",exports.check=function check(data){return Buffer.isBuffer(data.controlBlock)&&(data.controlBlock.length-1)%32==0&&(254&data.controlBlock[0])===data.leafVersion&&Buffer.isBuffer(data.script)},exports.canAddToArray=function canAddToArray(array,item,dupeSet){const dupeString=item.controlBlock.toString("hex");return!dupeSet.has(dupeString)&&(dupeSet.add(dupeString),0===array.filter((v=>v.controlBlock.equals(item.controlBlock))).length)}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapMerkleRoot.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");function check(data){return Buffer.isBuffer(data)&&32===data.length}exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.TAP_MERKLE_ROOT||1!==keyVal.key.length)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+keyVal.key.toString("hex"));if(!check(keyVal.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return keyVal.value},exports.encode=function encode(value){return{key:Buffer.from([typeFields_1.InputTypes.TAP_MERKLE_ROOT]),value}},exports.expected="Buffer",exports.check=check,exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.tapMerkleRoot}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/tapScriptSig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+keyVal.key.toString("hex"));if(65!==keyVal.key.length)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+keyVal.key.toString("hex"));if(64!==keyVal.value.length&&65!==keyVal.value.length)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+keyVal.key.toString("hex"));return{pubkey:keyVal.key.slice(1,33),leafHash:keyVal.key.slice(33),signature:keyVal.value}},exports.encode=function encode(tSig){const head=Buffer.from([typeFields_1.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([head,tSig.pubkey,tSig.leafHash]),value:tSig.signature}},exports.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",exports.check=function check(data){return Buffer.isBuffer(data.pubkey)&&Buffer.isBuffer(data.leafHash)&&Buffer.isBuffer(data.signature)&&32===data.pubkey.length&&32===data.leafHash.length&&(64===data.signature.length||65===data.signature.length)},exports.canAddToArray=function canAddToArray(array,item,dupeSet){const dupeString=item.pubkey.toString("hex")+item.leafHash.toString("hex");return!dupeSet.has(dupeString)&&(dupeSet.add(dupeString),0===array.filter((v=>v.pubkey.equals(item.pubkey)&&v.leafHash.equals(item.leafHash))).length)}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/input/witnessUtxo.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js"),tools_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/tools.js"),varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+keyVal.key.toString("hex"));const value=tools_1.readUInt64LE(keyVal.value,0);let _offset=8;const scriptLen=varuint.decode(keyVal.value,_offset);_offset+=varuint.encodingLength(scriptLen);const script=keyVal.value.slice(_offset);if(script.length!==scriptLen)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script,value}},exports.encode=function encode(data){const{script,value}=data,varintLen=varuint.encodingLength(script.length),result=Buffer.allocUnsafe(8+varintLen+script.length);return tools_1.writeUInt64LE(result,value,0),varuint.encode(script.length,result,8),script.copy(result,8+varintLen),{key:Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),value:result}},exports.expected="{ script: Buffer; value: number; }",exports.check=function check(data){return Buffer.isBuffer(data.script)&&"number"==typeof data.value},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.witnessUtxo}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/output/tapTree.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js"),varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js");exports.decode=function decode(keyVal){if(keyVal.key[0]!==typeFields_1.OutputTypes.TAP_TREE||1!==keyVal.key.length)throw new Error("Decode Error: could not decode tapTree with key 0x"+keyVal.key.toString("hex"));let _offset=0;const data=[];for(;_offset<keyVal.value.length;){const depth=keyVal.value[_offset++],leafVersion=keyVal.value[_offset++],scriptLen=varuint.decode(keyVal.value,_offset);_offset+=varuint.encodingLength(scriptLen),data.push({depth,leafVersion,script:keyVal.value.slice(_offset,_offset+scriptLen)}),_offset+=scriptLen}return{leaves:data}},exports.encode=function encode(tree){const key=Buffer.from([typeFields_1.OutputTypes.TAP_TREE]),bufs=[].concat(...tree.leaves.map((tapLeaf=>[Buffer.of(tapLeaf.depth,tapLeaf.leafVersion),varuint.encode(tapLeaf.script.length),tapLeaf.script])));return{key,value:Buffer.concat(bufs)}},exports.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",exports.check=function check(data){return Array.isArray(data.leaves)&&data.leaves.every((tapLeaf=>tapLeaf.depth>=0&&tapLeaf.depth<=128&&(254&tapLeaf.leafVersion)===tapLeaf.leafVersion&&Buffer.isBuffer(tapLeaf.script)))},exports.canAdd=function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.tapTree}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/bip32Derivation.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const isValidDERKey=pubkey=>33===pubkey.length&&[2,3].includes(pubkey[0])||65===pubkey.length&&4===pubkey[0];exports.makeConverter=function makeConverter(TYPE_BYTE,isValidPubkey=isValidDERKey){return{decode:function decode(keyVal){if(keyVal.key[0]!==TYPE_BYTE)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+keyVal.key.toString("hex"));const pubkey=keyVal.key.slice(1);if(!isValidPubkey(pubkey))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+keyVal.key.toString("hex"));if(keyVal.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const data={masterFingerprint:keyVal.value.slice(0,4),pubkey,path:"m"};for(const i of(n=keyVal.value.length/4-1,[...Array(n).keys()])){const val=keyVal.value.readUInt32LE(4*i+4),isHard=!!(2147483648&val),idx=2147483647&val;data.path+="/"+idx.toString(10)+(isHard?"'":"")}var n;return data},encode:function encode(data){const head=Buffer.from([TYPE_BYTE]),key=Buffer.concat([head,data.pubkey]),splitPath=data.path.split("/"),value=Buffer.allocUnsafe(4*splitPath.length);data.masterFingerprint.copy(value,0);let offset=4;return splitPath.slice(1).forEach((level=>{const isHard="'"===level.slice(-1);let num=2147483647&parseInt(isHard?level.slice(0,-1):level,10);isHard&&(num+=2147483648),value.writeUInt32LE(num,offset),offset+=4})),{key,value}},check:function check(data){return Buffer.isBuffer(data.pubkey)&&Buffer.isBuffer(data.masterFingerprint)&&"string"==typeof data.path&&isValidPubkey(data.pubkey)&&4===data.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function canAddToArray(array,item,dupeSet){const dupeString=item.pubkey.toString("hex");return!dupeSet.has(dupeString)&&(dupeSet.add(dupeString),0===array.filter((v=>v.pubkey.equals(item.pubkey))).length)}}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/checkPubkey.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeChecker=function makeChecker(pubkeyTypes){return function checkPubkey(keyVal){let pubkey;if(pubkeyTypes.includes(keyVal.key[0])&&(pubkey=keyVal.key.slice(1),33!==pubkey.length&&65!==pubkey.length||![2,3,4].includes(pubkey[0])))throw new Error("Format Error: invalid pubkey in key 0x"+keyVal.key.toString("hex"));return pubkey}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/redeemScript.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeConverter=function makeConverter(TYPE_BYTE){return{decode:function decode(keyVal){if(keyVal.key[0]!==TYPE_BYTE)throw new Error("Decode Error: could not decode redeemScript with key 0x"+keyVal.key.toString("hex"));return keyVal.value},encode:function encode(data){return{key:Buffer.from([TYPE_BYTE]),value:data}},check:function check(data){return Buffer.isBuffer(data)},expected:"Buffer",canAdd:function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.redeemScript}}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/tapBip32Derivation.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js"),bip32Derivation=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/bip32Derivation.js"),isValidBIP340Key=pubkey=>32===pubkey.length;exports.makeConverter=function makeConverter(TYPE_BYTE){const parent=bip32Derivation.makeConverter(TYPE_BYTE,isValidBIP340Key);return{decode:function decode(keyVal){const nHashes=varuint.decode(keyVal.value),nHashesLen=varuint.encodingLength(nHashes),base=parent.decode({key:keyVal.key,value:keyVal.value.slice(nHashesLen+32*nHashes)}),leafHashes=new Array(nHashes);for(let i=0,_offset=nHashesLen;i<nHashes;i++,_offset+=32)leafHashes[i]=keyVal.value.slice(_offset,_offset+32);return Object.assign({},base,{leafHashes})},encode:function encode(data){const base=parent.encode(data),nHashesLen=varuint.encodingLength(data.leafHashes.length),nHashesBuf=Buffer.allocUnsafe(nHashesLen);varuint.encode(data.leafHashes.length,nHashesBuf);const value=Buffer.concat([nHashesBuf,...data.leafHashes,base.value]);return Object.assign({},base,{value})},check:function check(data){return Array.isArray(data.leafHashes)&&data.leafHashes.every((leafHash=>Buffer.isBuffer(leafHash)&&32===leafHash.length))&&parent.check(data)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:parent.canAddToArray}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/tapInternalKey.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeConverter=function makeConverter(TYPE_BYTE){return{decode:function decode(keyVal){if(keyVal.key[0]!==TYPE_BYTE||1!==keyVal.key.length)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+keyVal.key.toString("hex"));if(32!==keyVal.value.length)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return keyVal.value},encode:function encode(value){return{key:Buffer.from([TYPE_BYTE]),value}},check:function check(data){return Buffer.isBuffer(data)&&32===data.length},expected:"Buffer",canAdd:function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.tapInternalKey}}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/shared/witnessScript.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeConverter=function makeConverter(TYPE_BYTE){return{decode:function decode(keyVal){if(keyVal.key[0]!==TYPE_BYTE)throw new Error("Decode Error: could not decode witnessScript with key 0x"+keyVal.key.toString("hex"));return keyVal.value},encode:function encode(data){return{key:Buffer.from([TYPE_BYTE]),value:data}},check:function check(data){return Buffer.isBuffer(data)},expected:"Buffer",canAdd:function canAdd(currentData,newData){return!!currentData&&!!newData&&void 0===currentData.witnessScript}}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/tools.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js");function keyValToBuffer(keyVal){const keyLen=keyVal.key.length,valLen=keyVal.value.length,keyVarIntLen=varuint.encodingLength(keyLen),valVarIntLen=varuint.encodingLength(valLen),buffer=Buffer.allocUnsafe(keyVarIntLen+keyLen+valVarIntLen+valLen);return varuint.encode(keyLen,buffer,0),keyVal.key.copy(buffer,keyVarIntLen),varuint.encode(valLen,buffer,keyVarIntLen+keyLen),keyVal.value.copy(buffer,keyVarIntLen+keyLen+valVarIntLen),buffer}function verifuint(value,max){if("number"!=typeof value)throw new Error("cannot write a non-number as a number");if(value<0)throw new Error("specified a negative value for writing an unsigned value");if(value>max)throw new Error("RangeError: value out of range");if(Math.floor(value)!==value)throw new Error("value has a fractional component")}exports.range=n=>[...Array(n).keys()],exports.reverseBuffer=function reverseBuffer(buffer){if(buffer.length<1)return buffer;let j=buffer.length-1,tmp=0;for(let i=0;i<buffer.length/2;i++)tmp=buffer[i],buffer[i]=buffer[j],buffer[j]=tmp,j--;return buffer},exports.keyValsToBuffer=function keyValsToBuffer(keyVals){const buffers=keyVals.map(keyValToBuffer);return buffers.push(Buffer.from([0])),Buffer.concat(buffers)},exports.keyValToBuffer=keyValToBuffer,exports.readUInt64LE=function readUInt64LE(buffer,offset){const a=buffer.readUInt32LE(offset);let b=buffer.readUInt32LE(offset+4);return b*=4294967296,verifuint(b+a,9007199254740991),b+a},exports.writeUInt64LE=function writeUInt64LE(buffer,value,offset){return verifuint(value,9007199254740991),buffer.writeInt32LE(-1&value,offset),buffer.writeUInt32LE(Math.floor(value/4294967296),offset+4),offset+8}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const MAX_SAFE_INTEGER=9007199254740991;function checkUInt53(n){if(n<0||n>MAX_SAFE_INTEGER||n%1!=0)throw new RangeError("value out of range")}function encodingLength(_number){return checkUInt53(_number),_number<253?1:_number<=65535?3:_number<=4294967295?5:9}exports.encode=function encode(_number,buffer,offset){if(checkUInt53(_number),buffer||(buffer=Buffer.allocUnsafe(encodingLength(_number))),!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");return offset||(offset=0),_number<253?(buffer.writeUInt8(_number,offset),Object.assign(encode,{bytes:1})):_number<=65535?(buffer.writeUInt8(253,offset),buffer.writeUInt16LE(_number,offset+1),Object.assign(encode,{bytes:3})):_number<=4294967295?(buffer.writeUInt8(254,offset),buffer.writeUInt32LE(_number,offset+1),Object.assign(encode,{bytes:5})):(buffer.writeUInt8(255,offset),buffer.writeUInt32LE(_number>>>0,offset+1),buffer.writeUInt32LE(_number/4294967296|0,offset+5),Object.assign(encode,{bytes:9})),buffer},exports.decode=function decode(buffer,offset){if(!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");offset||(offset=0);const first=buffer.readUInt8(offset);if(first<253)return Object.assign(decode,{bytes:1}),first;if(253===first)return Object.assign(decode,{bytes:3}),buffer.readUInt16LE(offset+1);if(254===first)return Object.assign(decode,{bytes:5}),buffer.readUInt32LE(offset+1);{Object.assign(decode,{bytes:9});const lo=buffer.readUInt32LE(offset+1),_number=4294967296*buffer.readUInt32LE(offset+5)+lo;return checkUInt53(_number),_number}},exports.encodingLength=encodingLength},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/fromBuffer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const convert=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/index.js"),tools_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/tools.js"),varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js"),typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js");function checkKeyBuffer(type,keyBuf,keyNum){if(!keyBuf.equals(Buffer.from([keyNum])))throw new Error(`Format Error: Invalid ${type} key: ${keyBuf.toString("hex")}`)}function psbtFromKeyVals(unsignedTx,{globalMapKeyVals,inputKeyVals,outputKeyVals}){const globalMap={unsignedTx};let txCount=0;for(const keyVal of globalMapKeyVals)switch(keyVal.key[0]){case typeFields_1.GlobalTypes.UNSIGNED_TX:if(checkKeyBuffer("global",keyVal.key,typeFields_1.GlobalTypes.UNSIGNED_TX),txCount>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");txCount++;break;case typeFields_1.GlobalTypes.GLOBAL_XPUB:void 0===globalMap.globalXpub&&(globalMap.globalXpub=[]),globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));break;default:globalMap.unknownKeyVals||(globalMap.unknownKeyVals=[]),globalMap.unknownKeyVals.push(keyVal)}const inputCount=inputKeyVals.length,outputCount=outputKeyVals.length,inputs=[],outputs=[];for(const index of tools_1.range(inputCount)){const input={};for(const keyVal of inputKeyVals[index])switch(convert.inputs.checkPubkey(keyVal),keyVal.key[0]){case typeFields_1.InputTypes.NON_WITNESS_UTXO:if(checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.NON_WITNESS_UTXO),void 0!==input.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");input.nonWitnessUtxo=convert.inputs.nonWitnessUtxo.decode(keyVal);break;case typeFields_1.InputTypes.WITNESS_UTXO:if(checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.WITNESS_UTXO),void 0!==input.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");input.witnessUtxo=convert.inputs.witnessUtxo.decode(keyVal);break;case typeFields_1.InputTypes.PARTIAL_SIG:void 0===input.partialSig&&(input.partialSig=[]),input.partialSig.push(convert.inputs.partialSig.decode(keyVal));break;case typeFields_1.InputTypes.SIGHASH_TYPE:if(checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.SIGHASH_TYPE),void 0!==input.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");input.sighashType=convert.inputs.sighashType.decode(keyVal);break;case typeFields_1.InputTypes.REDEEM_SCRIPT:if(checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.REDEEM_SCRIPT),void 0!==input.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");input.redeemScript=convert.inputs.redeemScript.decode(keyVal);break;case typeFields_1.InputTypes.WITNESS_SCRIPT:if(checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.WITNESS_SCRIPT),void 0!==input.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");input.witnessScript=convert.inputs.witnessScript.decode(keyVal);break;case typeFields_1.InputTypes.BIP32_DERIVATION:void 0===input.bip32Derivation&&(input.bip32Derivation=[]),input.bip32Derivation.push(convert.inputs.bip32Derivation.decode(keyVal));break;case typeFields_1.InputTypes.FINAL_SCRIPTSIG:checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.FINAL_SCRIPTSIG),input.finalScriptSig=convert.inputs.finalScriptSig.decode(keyVal);break;case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.FINAL_SCRIPTWITNESS),input.finalScriptWitness=convert.inputs.finalScriptWitness.decode(keyVal);break;case typeFields_1.InputTypes.POR_COMMITMENT:checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.POR_COMMITMENT),input.porCommitment=convert.inputs.porCommitment.decode(keyVal);break;case typeFields_1.InputTypes.TAP_KEY_SIG:checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.TAP_KEY_SIG),input.tapKeySig=convert.inputs.tapKeySig.decode(keyVal);break;case typeFields_1.InputTypes.TAP_SCRIPT_SIG:void 0===input.tapScriptSig&&(input.tapScriptSig=[]),input.tapScriptSig.push(convert.inputs.tapScriptSig.decode(keyVal));break;case typeFields_1.InputTypes.TAP_LEAF_SCRIPT:void 0===input.tapLeafScript&&(input.tapLeafScript=[]),input.tapLeafScript.push(convert.inputs.tapLeafScript.decode(keyVal));break;case typeFields_1.InputTypes.TAP_BIP32_DERIVATION:void 0===input.tapBip32Derivation&&(input.tapBip32Derivation=[]),input.tapBip32Derivation.push(convert.inputs.tapBip32Derivation.decode(keyVal));break;case typeFields_1.InputTypes.TAP_INTERNAL_KEY:checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.TAP_INTERNAL_KEY),input.tapInternalKey=convert.inputs.tapInternalKey.decode(keyVal);break;case typeFields_1.InputTypes.TAP_MERKLE_ROOT:checkKeyBuffer("input",keyVal.key,typeFields_1.InputTypes.TAP_MERKLE_ROOT),input.tapMerkleRoot=convert.inputs.tapMerkleRoot.decode(keyVal);break;default:input.unknownKeyVals||(input.unknownKeyVals=[]),input.unknownKeyVals.push(keyVal)}inputs.push(input)}for(const index of tools_1.range(outputCount)){const output={};for(const keyVal of outputKeyVals[index])switch(convert.outputs.checkPubkey(keyVal),keyVal.key[0]){case typeFields_1.OutputTypes.REDEEM_SCRIPT:if(checkKeyBuffer("output",keyVal.key,typeFields_1.OutputTypes.REDEEM_SCRIPT),void 0!==output.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");output.redeemScript=convert.outputs.redeemScript.decode(keyVal);break;case typeFields_1.OutputTypes.WITNESS_SCRIPT:if(checkKeyBuffer("output",keyVal.key,typeFields_1.OutputTypes.WITNESS_SCRIPT),void 0!==output.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");output.witnessScript=convert.outputs.witnessScript.decode(keyVal);break;case typeFields_1.OutputTypes.BIP32_DERIVATION:void 0===output.bip32Derivation&&(output.bip32Derivation=[]),output.bip32Derivation.push(convert.outputs.bip32Derivation.decode(keyVal));break;case typeFields_1.OutputTypes.TAP_INTERNAL_KEY:checkKeyBuffer("output",keyVal.key,typeFields_1.OutputTypes.TAP_INTERNAL_KEY),output.tapInternalKey=convert.outputs.tapInternalKey.decode(keyVal);break;case typeFields_1.OutputTypes.TAP_TREE:checkKeyBuffer("output",keyVal.key,typeFields_1.OutputTypes.TAP_TREE),output.tapTree=convert.outputs.tapTree.decode(keyVal);break;case typeFields_1.OutputTypes.TAP_BIP32_DERIVATION:void 0===output.tapBip32Derivation&&(output.tapBip32Derivation=[]),output.tapBip32Derivation.push(convert.outputs.tapBip32Derivation.decode(keyVal));break;default:output.unknownKeyVals||(output.unknownKeyVals=[]),output.unknownKeyVals.push(keyVal)}outputs.push(output)}return{globalMap,inputs,outputs}}exports.psbtFromBuffer=function psbtFromBuffer(buffer,txGetter){let offset=0;function varSlice(){const keyLen=varuint.decode(buffer,offset);offset+=varuint.encodingLength(keyLen);const key=buffer.slice(offset,offset+keyLen);return offset+=keyLen,key}function getKeyValue(){return{key:varSlice(),value:varSlice()}}function checkEndOfKeyValPairs(){if(offset>=buffer.length)throw new Error("Format Error: Unexpected End of PSBT");const isEnd=0===buffer.readUInt8(offset);return isEnd&&offset++,isEnd}if(1886610036!==function readUInt32BE(){const num=buffer.readUInt32BE(offset);return offset+=4,num}())throw new Error("Format Error: Invalid Magic Number");if(255!==function readUInt8(){const num=buffer.readUInt8(offset);return offset+=1,num}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");const globalMapKeyVals=[],globalKeyIndex={};for(;!checkEndOfKeyValPairs();){const keyVal=getKeyValue(),hexKey=keyVal.key.toString("hex");if(globalKeyIndex[hexKey])throw new Error("Format Error: Keys must be unique for global keymap: key "+hexKey);globalKeyIndex[hexKey]=1,globalMapKeyVals.push(keyVal)}const unsignedTxMaps=globalMapKeyVals.filter((keyVal=>keyVal.key[0]===typeFields_1.GlobalTypes.UNSIGNED_TX));if(1!==unsignedTxMaps.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const unsignedTx=txGetter(unsignedTxMaps[0].value),{inputCount,outputCount}=unsignedTx.getInputOutputCounts(),inputKeyVals=[],outputKeyVals=[];for(const index of tools_1.range(inputCount)){const inputKeyIndex={},input=[];for(;!checkEndOfKeyValPairs();){const keyVal=getKeyValue(),hexKey=keyVal.key.toString("hex");if(inputKeyIndex[hexKey])throw new Error("Format Error: Keys must be unique for each input: input index "+index+" key "+hexKey);inputKeyIndex[hexKey]=1,input.push(keyVal)}inputKeyVals.push(input)}for(const index of tools_1.range(outputCount)){const outputKeyIndex={},output=[];for(;!checkEndOfKeyValPairs();){const keyVal=getKeyValue(),hexKey=keyVal.key.toString("hex");if(outputKeyIndex[hexKey])throw new Error("Format Error: Keys must be unique for each output: output index "+index+" key "+hexKey);outputKeyIndex[hexKey]=1,output.push(keyVal)}outputKeyVals.push(output)}return psbtFromKeyVals(unsignedTx,{globalMapKeyVals,inputKeyVals,outputKeyVals})},exports.checkKeyBuffer=checkKeyBuffer,exports.psbtFromKeyVals=psbtFromKeyVals},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/fromBuffer.js")),__export(__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/toBuffer.js"))},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/toBuffer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const convert=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/index.js"),tools_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/tools.js");exports.psbtToBuffer=function psbtToBuffer({globalMap,inputs,outputs}){const{globalKeyVals,inputKeyVals,outputKeyVals}=psbtToKeyVals({globalMap,inputs,outputs}),globalBuffer=tools_1.keyValsToBuffer(globalKeyVals),keyValsOrEmptyToBuffer=keyVals=>0===keyVals.length?[Buffer.from([0])]:keyVals.map(tools_1.keyValsToBuffer),inputBuffers=keyValsOrEmptyToBuffer(inputKeyVals),outputBuffers=keyValsOrEmptyToBuffer(outputKeyVals),header=Buffer.allocUnsafe(5);return header.writeUIntBE(482972169471,0,5),Buffer.concat([header,globalBuffer].concat(inputBuffers,outputBuffers))};const sortKeyVals=(a,b)=>a.key.compare(b.key);function keyValsFromMap(keyValMap,converterFactory){const keyHexSet=new Set,keyVals=Object.entries(keyValMap).reduce(((result,[key,value])=>{if("unknownKeyVals"===key)return result;const converter=converterFactory[key];if(void 0===converter)return result;const encodedKeyVals=(Array.isArray(value)?value:[value]).map(converter.encode);return encodedKeyVals.map((kv=>kv.key.toString("hex"))).forEach((hex=>{if(keyHexSet.has(hex))throw new Error("Serialize Error: Duplicate key: "+hex);keyHexSet.add(hex)})),result.concat(encodedKeyVals)}),[]),otherKeyVals=keyValMap.unknownKeyVals?keyValMap.unknownKeyVals.filter((keyVal=>!keyHexSet.has(keyVal.key.toString("hex")))):[];return keyVals.concat(otherKeyVals).sort(sortKeyVals)}function psbtToKeyVals({globalMap,inputs,outputs}){return{globalKeyVals:keyValsFromMap(globalMap,convert.globals),inputKeyVals:inputs.map((i=>keyValsFromMap(i,convert.inputs))),outputKeyVals:outputs.map((o=>keyValsFromMap(o,convert.outputs)))}}exports.psbtToKeyVals=psbtToKeyVals},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/psbt.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const combiner_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/combiner/index.js"),parser_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/parser/index.js"),typeFields_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js"),utils_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/utils.js");exports.Psbt=class Psbt{constructor(tx){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:tx}}static fromBase64(data,txFromBuffer){const buffer=Buffer.from(data,"base64");return this.fromBuffer(buffer,txFromBuffer)}static fromHex(data,txFromBuffer){const buffer=Buffer.from(data,"hex");return this.fromBuffer(buffer,txFromBuffer)}static fromBuffer(buffer,txFromBuffer){const results=parser_1.psbtFromBuffer(buffer,txFromBuffer),psbt=new this(results.globalMap.unsignedTx);return Object.assign(psbt,results),psbt}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return parser_1.psbtToBuffer(this)}updateGlobal(updateData){return utils_1.updateGlobal(updateData,this.globalMap),this}updateInput(inputIndex,updateData){const input=utils_1.checkForInput(this.inputs,inputIndex);return utils_1.updateInput(updateData,input),this}updateOutput(outputIndex,updateData){const output=utils_1.checkForOutput(this.outputs,outputIndex);return utils_1.updateOutput(updateData,output),this}addUnknownKeyValToGlobal(keyVal){return utils_1.checkHasKey(keyVal,this.globalMap.unknownKeyVals,utils_1.getEnumLength(typeFields_1.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(keyVal),this}addUnknownKeyValToInput(inputIndex,keyVal){const input=utils_1.checkForInput(this.inputs,inputIndex);return utils_1.checkHasKey(keyVal,input.unknownKeyVals,utils_1.getEnumLength(typeFields_1.InputTypes)),input.unknownKeyVals||(input.unknownKeyVals=[]),input.unknownKeyVals.push(keyVal),this}addUnknownKeyValToOutput(outputIndex,keyVal){const output=utils_1.checkForOutput(this.outputs,outputIndex);return utils_1.checkHasKey(keyVal,output.unknownKeyVals,utils_1.getEnumLength(typeFields_1.OutputTypes)),output.unknownKeyVals||(output.unknownKeyVals=[]),output.unknownKeyVals.push(keyVal),this}addInput(inputData){this.globalMap.unsignedTx.addInput(inputData),this.inputs.push({unknownKeyVals:[]});const addKeyVals=inputData.unknownKeyVals||[],inputIndex=this.inputs.length-1;if(!Array.isArray(addKeyVals))throw new Error("unknownKeyVals must be an Array");return addKeyVals.forEach((keyVal=>this.addUnknownKeyValToInput(inputIndex,keyVal))),utils_1.addInputAttributes(this.inputs,inputData),this}addOutput(outputData){this.globalMap.unsignedTx.addOutput(outputData),this.outputs.push({unknownKeyVals:[]});const addKeyVals=outputData.unknownKeyVals||[],outputIndex=this.outputs.length-1;if(!Array.isArray(addKeyVals))throw new Error("unknownKeyVals must be an Array");return addKeyVals.forEach((keyVal=>this.addUnknownKeyValToOutput(outputIndex,keyVal))),utils_1.addOutputAttributes(this.outputs,outputData),this}clearFinalizedInput(inputIndex){const input=utils_1.checkForInput(this.inputs,inputIndex);utils_1.inputCheckUncleanFinalized(inputIndex,input);for(const key of Object.keys(input))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(key)||delete input[key];return this}combine(...those){const result=combiner_1.combine([this].concat(those));return Object.assign(this,result),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}}},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/typeFields.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(GlobalTypes){GlobalTypes[GlobalTypes.UNSIGNED_TX=0]="UNSIGNED_TX",GlobalTypes[GlobalTypes.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(exports.GlobalTypes||(exports.GlobalTypes={})),exports.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(InputTypes){InputTypes[InputTypes.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",InputTypes[InputTypes.WITNESS_UTXO=1]="WITNESS_UTXO",InputTypes[InputTypes.PARTIAL_SIG=2]="PARTIAL_SIG",InputTypes[InputTypes.SIGHASH_TYPE=3]="SIGHASH_TYPE",InputTypes[InputTypes.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",InputTypes[InputTypes.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",InputTypes[InputTypes.BIP32_DERIVATION=6]="BIP32_DERIVATION",InputTypes[InputTypes.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",InputTypes[InputTypes.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",InputTypes[InputTypes.POR_COMMITMENT=9]="POR_COMMITMENT",InputTypes[InputTypes.TAP_KEY_SIG=19]="TAP_KEY_SIG",InputTypes[InputTypes.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",InputTypes[InputTypes.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",InputTypes[InputTypes.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",InputTypes[InputTypes.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",InputTypes[InputTypes.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(exports.InputTypes||(exports.InputTypes={})),exports.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(OutputTypes){OutputTypes[OutputTypes.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",OutputTypes[OutputTypes.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",OutputTypes[OutputTypes.BIP32_DERIVATION=2]="BIP32_DERIVATION",OutputTypes[OutputTypes.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",OutputTypes[OutputTypes.TAP_TREE=6]="TAP_TREE",OutputTypes[OutputTypes.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(exports.OutputTypes||(exports.OutputTypes={})),exports.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]},"./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0});const converter=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/index.js");function checkForInput(inputs,inputIndex){const input=inputs[inputIndex];if(void 0===input)throw new Error(`No input #${inputIndex}`);return input}function checkForOutput(outputs,outputIndex){const output=outputs[outputIndex];if(void 0===output)throw new Error(`No output #${outputIndex}`);return output}function throwForUpdateMaker(typeName,name,expected,data){throw new Error(`Data for ${typeName} key ${name} is incorrect: Expected ${expected} and got ${JSON.stringify(data)}`)}function updateMaker(typeName){return(updateData,mainData)=>{for(const name of Object.keys(updateData)){const data=updateData[name],{canAdd,canAddToArray,check,expected}=converter[typeName+"s"][name]||{};if(check)if(!!canAddToArray){if(!Array.isArray(data)||mainData[name]&&!Array.isArray(mainData[name]))throw new Error(`Key type ${name} must be an array`);data.every(check)||throwForUpdateMaker(typeName,name,expected,data);const arr=mainData[name]||[],dupeCheckSet=new Set;if(!data.every((v=>canAddToArray(arr,v,dupeCheckSet))))throw new Error("Can not add duplicate data to array");mainData[name]=arr.concat(data)}else{if(check(data)||throwForUpdateMaker(typeName,name,expected,data),!canAdd(mainData,data))throw new Error(`Can not add duplicate data to ${typeName}`);mainData[name]=data}}}}exports.checkForInput=checkForInput,exports.checkForOutput=checkForOutput,exports.checkHasKey=function checkHasKey(checkKeyVal,keyVals,enumLength){if(checkKeyVal.key[0]<enumLength)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(keyVals&&0!==keyVals.filter((kv=>kv.key.equals(checkKeyVal.key))).length)throw new Error(`Duplicate Key: ${checkKeyVal.key.toString("hex")}`)},exports.getEnumLength=function getEnumLength(myenum){let count=0;return Object.keys(myenum).forEach((val=>{Number(isNaN(Number(val)))&&count++})),count},exports.inputCheckUncleanFinalized=function inputCheckUncleanFinalized(inputIndex,input){let result=!1;if(input.nonWitnessUtxo||input.witnessUtxo){const needScriptSig=!!input.redeemScript,needWitnessScript=!!input.witnessScript,scriptSigOK=!needScriptSig||!!input.finalScriptSig,witnessScriptOK=!needWitnessScript||!!input.finalScriptWitness,hasOneFinal=!!input.finalScriptSig||!!input.finalScriptWitness;result=scriptSigOK&&witnessScriptOK&&hasOneFinal}if(!1===result)throw new Error(`Input #${inputIndex} has too much or too little data to clean`)},exports.updateGlobal=updateMaker("global"),exports.updateInput=updateMaker("input"),exports.updateOutput=updateMaker("output"),exports.addInputAttributes=function addInputAttributes(inputs,data){const input=checkForInput(inputs,inputs.length-1);exports.updateInput(data,input)},exports.addOutputAttributes=function addOutputAttributes(outputs,data){const output=checkForOutput(outputs,outputs.length-1);exports.updateOutput(data,output)},exports.defaultVersionSetter=function defaultVersionSetter(version,txBuf){if(!Buffer.isBuffer(txBuf)||txBuf.length<4)throw new Error("Set Version: Invalid Transaction");return txBuf.writeUInt32LE(version,0),txBuf},exports.defaultLocktimeSetter=function defaultLocktimeSetter(locktime,txBuf){if(!Buffer.isBuffer(txBuf)||txBuf.length<4)throw new Error("Set Locktime: Invalid Transaction");return txBuf.writeUInt32LE(locktime,txBuf.length-4),txBuf}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/address.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.toOutputScript=exports.fromOutputScript=exports.toBech32=exports.toBase58Check=exports.fromBech32=exports.fromBase58Check=void 0;const networks=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),payments=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/index.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),bech32_1=__webpack_require__("./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js"),bs58check=__webpack_require__("./node_modules/.pnpm/bs58check@3.0.1/node_modules/bs58check/index.js"),FUTURE_SEGWIT_MAX_SIZE=40,FUTURE_SEGWIT_MIN_SIZE=2,FUTURE_SEGWIT_MAX_VERSION=16,FUTURE_SEGWIT_MIN_VERSION=2,FUTURE_SEGWIT_VERSION_DIFF=80,FUTURE_SEGWIT_VERSION_WARNING="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function fromBase58Check(address){const payload=Buffer.from(bs58check.decode(address));if(payload.length<21)throw new TypeError(address+" is too short");if(payload.length>21)throw new TypeError(address+" is too long");return{version:payload.readUInt8(0),hash:payload.slice(1)}}function fromBech32(address){let result,version;try{result=bech32_1.bech32.decode(address)}catch(e){}if(result){if(version=result.words[0],0!==version)throw new TypeError(address+" uses wrong encoding")}else if(result=bech32_1.bech32m.decode(address),version=result.words[0],0===version)throw new TypeError(address+" uses wrong encoding");const data=bech32_1.bech32.fromWords(result.words.slice(1));return{version,prefix:result.prefix,data:Buffer.from(data)}}function toBech32(data,version,prefix){const words=bech32_1.bech32.toWords(data);return words.unshift(version),0===version?bech32_1.bech32.encode(prefix,words):bech32_1.bech32m.encode(prefix,words)}exports.fromBase58Check=fromBase58Check,exports.fromBech32=fromBech32,exports.toBase58Check=function toBase58Check(hash,version){(0,types_1.typeforce)((0,types_1.tuple)(types_1.Hash160bit,types_1.UInt8),arguments);const payload=Buffer.allocUnsafe(21);return payload.writeUInt8(version,0),hash.copy(payload,1),bs58check.encode(payload)},exports.toBech32=toBech32,exports.fromOutputScript=function fromOutputScript(output,network){network=network||networks.bitcoin;try{return payments.p2pkh({output,network}).address}catch(e){}try{return payments.p2sh({output,network}).address}catch(e){}try{return payments.p2wpkh({output,network}).address}catch(e){}try{return payments.p2wsh({output,network}).address}catch(e){}try{return payments.p2tr({output,network}).address}catch(e){}try{return function _toFutureSegwitAddress(output,network){const data=output.slice(2);if(data.length<FUTURE_SEGWIT_MIN_SIZE||data.length>FUTURE_SEGWIT_MAX_SIZE)throw new TypeError("Invalid program length for segwit address");const version=output[0]-FUTURE_SEGWIT_VERSION_DIFF;if(version<FUTURE_SEGWIT_MIN_VERSION||version>FUTURE_SEGWIT_MAX_VERSION)throw new TypeError("Invalid version for segwit address");if(output[1]!==data.length)throw new TypeError("Invalid script for segwit address");return console.warn(FUTURE_SEGWIT_VERSION_WARNING),toBech32(data,version,network.bech32)}(output,network)}catch(e){}throw new Error(bscript.toASM(output)+" has no matching Address")},exports.toOutputScript=function toOutputScript(address,network){let decodeBase58,decodeBech32;network=network||networks.bitcoin;try{decodeBase58=fromBase58Check(address)}catch(e){}if(decodeBase58){if(decodeBase58.version===network.pubKeyHash)return payments.p2pkh({hash:decodeBase58.hash}).output;if(decodeBase58.version===network.scriptHash)return payments.p2sh({hash:decodeBase58.hash}).output}else{try{decodeBech32=fromBech32(address)}catch(e){}if(decodeBech32){if(decodeBech32.prefix!==network.bech32)throw new Error(address+" has an invalid prefix");if(0===decodeBech32.version){if(20===decodeBech32.data.length)return payments.p2wpkh({hash:decodeBech32.data}).output;if(32===decodeBech32.data.length)return payments.p2wsh({hash:decodeBech32.data}).output}else if(1===decodeBech32.version){if(32===decodeBech32.data.length)return payments.p2tr({pubkey:decodeBech32.data}).output}else if(decodeBech32.version>=FUTURE_SEGWIT_MIN_VERSION&&decodeBech32.version<=FUTURE_SEGWIT_MAX_VERSION&&decodeBech32.data.length>=FUTURE_SEGWIT_MIN_SIZE&&decodeBech32.data.length<=FUTURE_SEGWIT_MAX_SIZE)return console.warn(FUTURE_SEGWIT_VERSION_WARNING),bscript.compile([decodeBech32.version+FUTURE_SEGWIT_VERSION_DIFF,decodeBech32.data])}}throw new Error(address+" has no matching Script")}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bip66.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=exports.decode=exports.check=void 0,exports.check=function check(buffer){if(buffer.length<8)return!1;if(buffer.length>72)return!1;if(48!==buffer[0])return!1;if(buffer[1]!==buffer.length-2)return!1;if(2!==buffer[2])return!1;const lenR=buffer[3];if(0===lenR)return!1;if(5+lenR>=buffer.length)return!1;if(2!==buffer[4+lenR])return!1;const lenS=buffer[5+lenR];return 0!==lenS&&(6+lenR+lenS===buffer.length&&(!(128&buffer[4])&&(!(lenR>1&&0===buffer[4]&&!(128&buffer[5]))&&(!(128&buffer[lenR+6])&&!(lenS>1&&0===buffer[lenR+6]&&!(128&buffer[lenR+7]))))))},exports.decode=function decode(buffer){if(buffer.length<8)throw new Error("DER sequence length is too short");if(buffer.length>72)throw new Error("DER sequence length is too long");if(48!==buffer[0])throw new Error("Expected DER sequence");if(buffer[1]!==buffer.length-2)throw new Error("DER sequence length is invalid");if(2!==buffer[2])throw new Error("Expected DER integer");const lenR=buffer[3];if(0===lenR)throw new Error("R length is zero");if(5+lenR>=buffer.length)throw new Error("R length is too long");if(2!==buffer[4+lenR])throw new Error("Expected DER integer (2)");const lenS=buffer[5+lenR];if(0===lenS)throw new Error("S length is zero");if(6+lenR+lenS!==buffer.length)throw new Error("S length is invalid");if(128&buffer[4])throw new Error("R value is negative");if(lenR>1&&0===buffer[4]&&!(128&buffer[5]))throw new Error("R value excessively padded");if(128&buffer[lenR+6])throw new Error("S value is negative");if(lenS>1&&0===buffer[lenR+6]&&!(128&buffer[lenR+7]))throw new Error("S value excessively padded");return{r:buffer.slice(4,4+lenR),s:buffer.slice(6+lenR)}},exports.encode=function encode(r,s){const lenR=r.length,lenS=s.length;if(0===lenR)throw new Error("R length is zero");if(0===lenS)throw new Error("S length is zero");if(lenR>33)throw new Error("R length is too long");if(lenS>33)throw new Error("S length is too long");if(128&r[0])throw new Error("R value is negative");if(128&s[0])throw new Error("S value is negative");if(lenR>1&&0===r[0]&&!(128&r[1]))throw new Error("R value excessively padded");if(lenS>1&&0===s[0]&&!(128&s[1]))throw new Error("S value excessively padded");const signature=Buffer.allocUnsafe(6+lenR+lenS);return signature[0]=48,signature[1]=signature.length-2,signature[2]=2,signature[3]=r.length,r.copy(signature,4),signature[4+lenR]=2,signature[5+lenR]=s.length,s.copy(signature,6+lenR),signature}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/block.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Block=void 0;const bufferutils_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bufferutils.js"),bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),merkle_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/merkle.js"),transaction_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/transaction.js"),types=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),{typeforce}=types,errorMerkleNoTxes=new TypeError("Cannot compute merkle root for zero transactions"),errorWitnessNotSegwit=new TypeError("Cannot compute witness commit for non-segwit block");class Block{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(buffer){if(buffer.length<80)throw new Error("Buffer too small (< 80 bytes)");const bufferReader=new bufferutils_1.BufferReader(buffer),block=new Block;if(block.version=bufferReader.readInt32(),block.prevHash=bufferReader.readSlice(32),block.merkleRoot=bufferReader.readSlice(32),block.timestamp=bufferReader.readUInt32(),block.bits=bufferReader.readUInt32(),block.nonce=bufferReader.readUInt32(),80===buffer.length)return block;const readTransaction=()=>{const tx=transaction_1.Transaction.fromBuffer(bufferReader.buffer.slice(bufferReader.offset),!0);return bufferReader.offset+=tx.byteLength(),tx},nTransactions=bufferReader.readVarInt();block.transactions=[];for(let i=0;i<nTransactions;++i){const tx=readTransaction();block.transactions.push(tx)}const witnessCommit=block.getWitnessCommit();return witnessCommit&&(block.witnessCommit=witnessCommit),block}static fromHex(hex){return Block.fromBuffer(Buffer.from(hex,"hex"))}static calculateTarget(bits){const exponent=((4278190080&bits)>>24)-3,mantissa=8388607&bits,target=Buffer.alloc(32,0);return target.writeUIntBE(mantissa,29-exponent,3),target}static calculateMerkleRoot(transactions,forWitness){if(typeforce([{getHash:types.Function}],transactions),0===transactions.length)throw errorMerkleNoTxes;if(forWitness&&!txesHaveWitnessCommit(transactions))throw errorWitnessNotSegwit;const hashes=transactions.map((transaction=>transaction.getHash(forWitness))),rootHash=(0,merkle_1.fastMerkleRoot)(hashes,bcrypto.hash256);return forWitness?bcrypto.hash256(Buffer.concat([rootHash,transactions[0].ins[0].witness[0]])):rootHash}getWitnessCommit(){if(!txesHaveWitnessCommit(this.transactions))return null;const witnessCommits=this.transactions[0].outs.filter((out=>out.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex")))).map((out=>out.script.slice(6,38)));if(0===witnessCommits.length)return null;const result=witnessCommits[witnessCommits.length-1];return result instanceof Buffer&&32===result.length?result:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return function anyTxHasWitness(transactions){return transactions instanceof Array&&transactions.some((tx=>"object"==typeof tx&&tx.ins instanceof Array&&tx.ins.some((input=>"object"==typeof input&&input.witness instanceof Array&&input.witness.length>0))))}(this.transactions)}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(headersOnly,allowWitness=!0){return headersOnly||!this.transactions?80:80+bufferutils_1.varuint.encodingLength(this.transactions.length)+this.transactions.reduce(((a,x)=>a+x.byteLength(allowWitness)),0)}getHash(){return bcrypto.hash256(this.toBuffer(!0))}getId(){return(0,bufferutils_1.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const date=new Date(0);return date.setUTCSeconds(this.timestamp),date}toBuffer(headersOnly){const buffer=Buffer.allocUnsafe(this.byteLength(headersOnly)),bufferWriter=new bufferutils_1.BufferWriter(buffer);return bufferWriter.writeInt32(this.version),bufferWriter.writeSlice(this.prevHash),bufferWriter.writeSlice(this.merkleRoot),bufferWriter.writeUInt32(this.timestamp),bufferWriter.writeUInt32(this.bits),bufferWriter.writeUInt32(this.nonce),headersOnly||!this.transactions||(bufferutils_1.varuint.encode(this.transactions.length,buffer,bufferWriter.offset),bufferWriter.offset+=bufferutils_1.varuint.encode.bytes,this.transactions.forEach((tx=>{const txSize=tx.byteLength();tx.toBuffer(buffer,bufferWriter.offset),bufferWriter.offset+=txSize}))),buffer}toHex(headersOnly){return this.toBuffer(headersOnly).toString("hex")}checkTxRoots(){const hasWitnessCommit=this.hasWitnessCommit();return!(!hasWitnessCommit&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!hasWitnessCommit||this.__checkWitnessCommit()))}checkProofOfWork(){const hash=(0,bufferutils_1.reverseBuffer)(this.getHash()),target=Block.calculateTarget(this.bits);return hash.compare(target)<=0}__checkMerkleRoot(){if(!this.transactions)throw errorMerkleNoTxes;const actualMerkleRoot=Block.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(actualMerkleRoot)}__checkWitnessCommit(){if(!this.transactions)throw errorMerkleNoTxes;if(!this.hasWitnessCommit())throw errorWitnessNotSegwit;const actualWitnessCommit=Block.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(actualWitnessCommit)}}function txesHaveWitnessCommit(transactions){return transactions instanceof Array&&transactions[0]&&transactions[0].ins&&transactions[0].ins instanceof Array&&transactions[0].ins[0]&&transactions[0].ins[0].witness&&transactions[0].ins[0].witness instanceof Array&&transactions[0].ins[0].witness.length>0}exports.Block=Block},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bufferutils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferReader=exports.BufferWriter=exports.cloneBuffer=exports.reverseBuffer=exports.writeUInt64LE=exports.readUInt64LE=exports.varuint=void 0;const types=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),{typeforce}=types,varuint=__webpack_require__("./node_modules/.pnpm/varuint-bitcoin@1.1.2/node_modules/varuint-bitcoin/index.js");function verifuint(value,max){if("number"!=typeof value)throw new Error("cannot write a non-number as a number");if(value<0)throw new Error("specified a negative value for writing an unsigned value");if(value>max)throw new Error("RangeError: value out of range");if(Math.floor(value)!==value)throw new Error("value has a fractional component")}function readUInt64LE(buffer,offset){const a=buffer.readUInt32LE(offset);let b=buffer.readUInt32LE(offset+4);return b*=4294967296,verifuint(b+a,9007199254740991),b+a}function writeUInt64LE(buffer,value,offset){return verifuint(value,9007199254740991),buffer.writeInt32LE(-1&value,offset),buffer.writeUInt32LE(Math.floor(value/4294967296),offset+4),offset+8}exports.varuint=varuint,exports.readUInt64LE=readUInt64LE,exports.writeUInt64LE=writeUInt64LE,exports.reverseBuffer=function reverseBuffer(buffer){if(buffer.length<1)return buffer;let j=buffer.length-1,tmp=0;for(let i=0;i<buffer.length/2;i++)tmp=buffer[i],buffer[i]=buffer[j],buffer[j]=tmp,j--;return buffer},exports.cloneBuffer=function cloneBuffer(buffer){const clone=Buffer.allocUnsafe(buffer.length);return buffer.copy(clone),clone};class BufferWriter{static withCapacity(size){return new BufferWriter(Buffer.alloc(size))}constructor(buffer,offset=0){this.buffer=buffer,this.offset=offset,typeforce(types.tuple(types.Buffer,types.UInt32),[buffer,offset])}writeUInt8(i){this.offset=this.buffer.writeUInt8(i,this.offset)}writeInt32(i){this.offset=this.buffer.writeInt32LE(i,this.offset)}writeUInt32(i){this.offset=this.buffer.writeUInt32LE(i,this.offset)}writeUInt64(i){this.offset=writeUInt64LE(this.buffer,i,this.offset)}writeVarInt(i){varuint.encode(i,this.buffer,this.offset),this.offset+=varuint.encode.bytes}writeSlice(slice){if(this.buffer.length<this.offset+slice.length)throw new Error("Cannot write slice out of bounds");this.offset+=slice.copy(this.buffer,this.offset)}writeVarSlice(slice){this.writeVarInt(slice.length),this.writeSlice(slice)}writeVector(vector){this.writeVarInt(vector.length),vector.forEach((buf=>this.writeVarSlice(buf)))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}exports.BufferWriter=BufferWriter;exports.BufferReader=class BufferReader{constructor(buffer,offset=0){this.buffer=buffer,this.offset=offset,typeforce(types.tuple(types.Buffer,types.UInt32),[buffer,offset])}readUInt8(){const result=this.buffer.readUInt8(this.offset);return this.offset++,result}readInt32(){const result=this.buffer.readInt32LE(this.offset);return this.offset+=4,result}readUInt32(){const result=this.buffer.readUInt32LE(this.offset);return this.offset+=4,result}readUInt64(){const result=readUInt64LE(this.buffer,this.offset);return this.offset+=8,result}readVarInt(){const vi=varuint.decode(this.buffer,this.offset);return this.offset+=varuint.decode.bytes,vi}readSlice(n){if(this.buffer.length<this.offset+n)throw new Error("Cannot read slice out of bounds");const result=this.buffer.slice(this.offset,this.offset+n);return this.offset+=n,result}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const count=this.readVarInt(),vector=[];for(let i=0;i<count;i++)vector.push(this.readVarSlice());return vector}}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.taggedHash=exports.TAGGED_HASH_PREFIXES=exports.TAGS=exports.hash256=exports.hash160=exports.sha256=exports.sha1=exports.ripemd160=void 0;const ripemd160_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/ripemd160.js"),sha1_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha1.js"),sha256_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha256.js");function sha256(buffer){return Buffer.from((0,sha256_1.sha256)(Uint8Array.from(buffer)))}exports.ripemd160=function ripemd160(buffer){return Buffer.from((0,ripemd160_1.ripemd160)(Uint8Array.from(buffer)))},exports.sha1=function sha1(buffer){return Buffer.from((0,sha1_1.sha1)(Uint8Array.from(buffer)))},exports.sha256=sha256,exports.hash160=function hash160(buffer){return Buffer.from((0,ripemd160_1.ripemd160)((0,sha256_1.sha256)(Uint8Array.from(buffer))))},exports.hash256=function hash256(buffer){return Buffer.from((0,sha256_1.sha256)((0,sha256_1.sha256)(Uint8Array.from(buffer))))},exports.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],exports.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Buffer.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Buffer.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Buffer.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Buffer.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Buffer.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Buffer.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Buffer.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Buffer.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Buffer.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])},exports.taggedHash=function taggedHash(prefix,data){return sha256(Buffer.concat([exports.TAGGED_HASH_PREFIXES[prefix],data]))}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ecc_lib.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEccLib=exports.initEccLib=void 0;const _ECCLIB_CACHE={};exports.initEccLib=function initEccLib(eccLib){eccLib?eccLib!==_ECCLIB_CACHE.eccLib&&(!function verifyEcc(ecc){assert("function"==typeof ecc.isXOnlyPoint),assert(ecc.isXOnlyPoint(h("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert(ecc.isXOnlyPoint(h("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),assert(ecc.isXOnlyPoint(h("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),assert(ecc.isXOnlyPoint(h("0000000000000000000000000000000000000000000000000000000000000001"))),assert(!ecc.isXOnlyPoint(h("0000000000000000000000000000000000000000000000000000000000000000"))),assert(!ecc.isXOnlyPoint(h("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),assert("function"==typeof ecc.xOnlyPointAddTweak),tweakAddVectors.forEach((t=>{const r=ecc.xOnlyPointAddTweak(h(t.pubkey),h(t.tweak));null===t.result?assert(null===r):(assert(null!==r),assert(r.parity===t.parity),assert(Buffer.from(r.xOnlyPubkey).equals(h(t.result))))}))}(eccLib),_ECCLIB_CACHE.eccLib=eccLib):_ECCLIB_CACHE.eccLib=eccLib},exports.getEccLib=function getEccLib(){if(!_ECCLIB_CACHE.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return _ECCLIB_CACHE.eccLib};const h=hex=>Buffer.from(hex,"hex");function assert(bool){if(!bool)throw new Error("ecc library invalid")}const tweakAddVectors=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.f0=exports.o8=void 0;__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/address.js");__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js");const networks=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js");exports.o8=networks;__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/index.js");__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js");var block_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/block.js");var psbt_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt.js");var ops_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ops.js");var transaction_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/transaction.js");var ecc_lib_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ecc_lib.js");Object.defineProperty(exports,"f0",{enumerable:!0,get:function(){return ecc_lib_1.initEccLib}})},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/merkle.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.fastMerkleRoot=void 0,exports.fastMerkleRoot=function fastMerkleRoot(values,digestFn){if(!Array.isArray(values))throw TypeError("Expected values Array");if("function"!=typeof digestFn)throw TypeError("Expected digest Function");let length=values.length;const results=values.concat();for(;length>1;){let j=0;for(let i=0;i<length;i+=2,++j){const left=results[i],right=i+1===length?left:results[i+1],data=Buffer.concat([left,right]);results[j]=digestFn(data)}length=j}return results[0]}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testnet=exports.regtest=exports.bitcoin=void 0,exports.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},exports.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},exports.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ops.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.REVERSE_OPS=exports.OPS=void 0;const OPS={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};exports.OPS=OPS;const REVERSE_OPS={};exports.REVERSE_OPS=REVERSE_OPS;for(const op of Object.keys(OPS)){REVERSE_OPS[OPS[op]]=op}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/bip341.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tweakKey=exports.tapTweakHash=exports.tapleafHash=exports.findScriptPath=exports.toHashTree=exports.rootHashFromPath=exports.MAX_TAPTREE_DEPTH=exports.LEAF_VERSION_TAPSCRIPT=void 0;const buffer_1=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js"),ecc_lib_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ecc_lib.js"),bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),bufferutils_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bufferutils.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js");exports.LEAF_VERSION_TAPSCRIPT=192,exports.MAX_TAPTREE_DEPTH=128;function tapleafHash(leaf){const version=leaf.version||exports.LEAF_VERSION_TAPSCRIPT;return bcrypto.taggedHash("TapLeaf",buffer_1.Buffer.concat([buffer_1.Buffer.from([version]),serializeScript(leaf.output)]))}function tapTweakHash(pubKey,h){return bcrypto.taggedHash("TapTweak",buffer_1.Buffer.concat(h?[pubKey,h]:[pubKey]))}function tapBranchHash(a,b){return bcrypto.taggedHash("TapBranch",buffer_1.Buffer.concat([a,b]))}function serializeScript(s){const varintLen=bufferutils_1.varuint.encodingLength(s.length),buffer=buffer_1.Buffer.allocUnsafe(varintLen);return bufferutils_1.varuint.encode(s.length,buffer),buffer_1.Buffer.concat([buffer,s])}exports.rootHashFromPath=function rootHashFromPath(controlBlock,leafHash){if(controlBlock.length<33)throw new TypeError(`The control-block length is too small. Got ${controlBlock.length}, expected min 33.`);const m=(controlBlock.length-33)/32;let kj=leafHash;for(let j=0;j<m;j++){const ej=controlBlock.slice(33+32*j,65+32*j);kj=kj.compare(ej)<0?tapBranchHash(kj,ej):tapBranchHash(ej,kj)}return kj},exports.toHashTree=function toHashTree(scriptTree){if((0,types_1.isTapleaf)(scriptTree))return{hash:tapleafHash(scriptTree)};const hashes=[toHashTree(scriptTree[0]),toHashTree(scriptTree[1])];hashes.sort(((a,b)=>a.hash.compare(b.hash)));const[left,right]=hashes;return{hash:tapBranchHash(left.hash,right.hash),left,right}},exports.findScriptPath=function findScriptPath(node,hash){if("left"in(ht=node)&&"right"in ht){const leftPath=findScriptPath(node.left,hash);if(void 0!==leftPath)return[...leftPath,node.right.hash];const rightPath=findScriptPath(node.right,hash);if(void 0!==rightPath)return[...rightPath,node.left.hash]}else if(node.hash.equals(hash))return[];var ht},exports.tapleafHash=tapleafHash,exports.tapTweakHash=tapTweakHash,exports.tweakKey=function tweakKey(pubKey,h){if(!buffer_1.Buffer.isBuffer(pubKey))return null;if(32!==pubKey.length)return null;if(h&&32!==h.length)return null;const tweakHash=tapTweakHash(pubKey,h),res=(0,ecc_lib_1.getEccLib)().xOnlyPointAddTweak(pubKey,tweakHash);return res&&null!==res.xOnlyPubkey?{parity:res.parity,x:buffer_1.Buffer.from(res.xOnlyPubkey)}:null}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/embed.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2data=void 0;const networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),OPS=bscript.OPS;exports.p2data=function p2data(a,opts){if(!a.data&&!a.output)throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.Buffer),data:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))},a);const o={name:"embed",network:a.network||networks_1.bitcoin};if(lazy.prop(o,"output",(()=>{if(a.data)return bscript.compile([OPS.OP_RETURN].concat(a.data))})),lazy.prop(o,"data",(()=>{if(a.output)return bscript.decompile(a.output).slice(1)})),opts.validate&&a.output){const chunks=bscript.decompile(a.output);if(chunks[0]!==OPS.OP_RETURN)throw new TypeError("Output is invalid");if(!chunks.slice(1).every(types_1.typeforce.Buffer))throw new TypeError("Output is invalid");if(a.data&&!function stacksEqual(a,b){return a.length===b.length&&a.every(((x,i)=>x.equals(b[i])))}(a.data,o.data))throw new TypeError("Data mismatch")}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2tr=exports.p2wsh=exports.p2wpkh=exports.p2sh=exports.p2pkh=exports.p2pk=exports.p2ms=exports.embed=void 0;const embed_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/embed.js");Object.defineProperty(exports,"embed",{enumerable:!0,get:function(){return embed_1.p2data}});const p2ms_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2ms.js");Object.defineProperty(exports,"p2ms",{enumerable:!0,get:function(){return p2ms_1.p2ms}});const p2pk_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2pk.js");Object.defineProperty(exports,"p2pk",{enumerable:!0,get:function(){return p2pk_1.p2pk}});const p2pkh_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2pkh.js");Object.defineProperty(exports,"p2pkh",{enumerable:!0,get:function(){return p2pkh_1.p2pkh}});const p2sh_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2sh.js");Object.defineProperty(exports,"p2sh",{enumerable:!0,get:function(){return p2sh_1.p2sh}});const p2wpkh_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2wpkh.js");Object.defineProperty(exports,"p2wpkh",{enumerable:!0,get:function(){return p2wpkh_1.p2wpkh}});const p2wsh_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2wsh.js");Object.defineProperty(exports,"p2wsh",{enumerable:!0,get:function(){return p2wsh_1.p2wsh}});const p2tr_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2tr.js");Object.defineProperty(exports,"p2tr",{enumerable:!0,get:function(){return p2tr_1.p2tr}})},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.value=exports.prop=void 0,exports.prop=function prop(object,name,f){Object.defineProperty(object,name,{configurable:!0,enumerable:!0,get(){const _value=f.call(this);return this[name]=_value,_value},set(_value){Object.defineProperty(this,name,{configurable:!0,enumerable:!0,value:_value,writable:!0})}})},exports.value=function value(f){let _value;return()=>(void 0!==_value||(_value=f()),_value)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2ms.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2ms=void 0;const networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),OPS=bscript.OPS,OP_INT_BASE=OPS.OP_RESERVED;function stacksEqual(a,b){return a.length===b.length&&a.every(((x,i)=>x.equals(b[i])))}exports.p2ms=function p2ms(a,opts){if(!(a.input||a.output||a.pubkeys&&void 0!==a.m||a.signatures))throw new TypeError("Not enough data");function isAcceptableSignature(x){return bscript.isCanonicalScriptSignature(x)||void 0!==(opts.allowIncomplete&&x===OPS.OP_0)}opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),m:types_1.typeforce.maybe(types_1.typeforce.Number),n:types_1.typeforce.maybe(types_1.typeforce.Number),output:types_1.typeforce.maybe(types_1.typeforce.Buffer),pubkeys:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.isPoint)),signatures:types_1.typeforce.maybe(types_1.typeforce.arrayOf(isAcceptableSignature)),input:types_1.typeforce.maybe(types_1.typeforce.Buffer)},a);const o={network:a.network||networks_1.bitcoin};let chunks=[],decoded=!1;function decode(output){decoded||(decoded=!0,chunks=bscript.decompile(output),o.m=chunks[0]-OP_INT_BASE,o.n=chunks[chunks.length-2]-OP_INT_BASE,o.pubkeys=chunks.slice(1,-2))}if(lazy.prop(o,"output",(()=>{if(a.m&&o.n&&a.pubkeys)return bscript.compile([].concat(OP_INT_BASE+a.m,a.pubkeys,OP_INT_BASE+o.n,OPS.OP_CHECKMULTISIG))})),lazy.prop(o,"m",(()=>{if(o.output)return decode(o.output),o.m})),lazy.prop(o,"n",(()=>{if(o.pubkeys)return o.pubkeys.length})),lazy.prop(o,"pubkeys",(()=>{if(a.output)return decode(a.output),o.pubkeys})),lazy.prop(o,"signatures",(()=>{if(a.input)return bscript.decompile(a.input).slice(1)})),lazy.prop(o,"input",(()=>{if(a.signatures)return bscript.compile([OPS.OP_0].concat(a.signatures))})),lazy.prop(o,"witness",(()=>{if(o.input)return[]})),lazy.prop(o,"name",(()=>{if(o.m&&o.n)return`p2ms(${o.m} of ${o.n})`})),opts.validate){if(a.output){if(decode(a.output),!types_1.typeforce.Number(chunks[0]))throw new TypeError("Output is invalid");if(!types_1.typeforce.Number(chunks[chunks.length-2]))throw new TypeError("Output is invalid");if(chunks[chunks.length-1]!==OPS.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(o.m<=0||o.n>16||o.m>o.n||o.n!==chunks.length-3)throw new TypeError("Output is invalid");if(!o.pubkeys.every((x=>(0,types_1.isPoint)(x))))throw new TypeError("Output is invalid");if(void 0!==a.m&&a.m!==o.m)throw new TypeError("m mismatch");if(void 0!==a.n&&a.n!==o.n)throw new TypeError("n mismatch");if(a.pubkeys&&!stacksEqual(a.pubkeys,o.pubkeys))throw new TypeError("Pubkeys mismatch")}if(a.pubkeys){if(void 0!==a.n&&a.n!==a.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(o.n=a.pubkeys.length,o.n<o.m)throw new TypeError("Pubkey count cannot be less than m")}if(a.signatures){if(a.signatures.length<o.m)throw new TypeError("Not enough signatures provided");if(a.signatures.length>o.m)throw new TypeError("Too many signatures provided")}if(a.input){if(a.input[0]!==OPS.OP_0)throw new TypeError("Input is invalid");if(0===o.signatures.length||!o.signatures.every(isAcceptableSignature))throw new TypeError("Input has invalid signature(s)");if(a.signatures&&!stacksEqual(a.signatures,o.signatures))throw new TypeError("Signature mismatch");if(void 0!==a.m&&a.m!==a.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2pk.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2pk=void 0;const networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),OPS=bscript.OPS;exports.p2pk=function p2pk(a,opts){if(!(a.input||a.output||a.pubkey||a.input||a.signature))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.Buffer),pubkey:types_1.typeforce.maybe(types_1.isPoint),signature:types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),input:types_1.typeforce.maybe(types_1.typeforce.Buffer)},a);const _chunks=lazy.value((()=>bscript.decompile(a.input))),o={name:"p2pk",network:a.network||networks_1.bitcoin};if(lazy.prop(o,"output",(()=>{if(a.pubkey)return bscript.compile([a.pubkey,OPS.OP_CHECKSIG])})),lazy.prop(o,"pubkey",(()=>{if(a.output)return a.output.slice(1,-1)})),lazy.prop(o,"signature",(()=>{if(a.input)return _chunks()[0]})),lazy.prop(o,"input",(()=>{if(a.signature)return bscript.compile([a.signature])})),lazy.prop(o,"witness",(()=>{if(o.input)return[]})),opts.validate){if(a.output){if(a.output[a.output.length-1]!==OPS.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,types_1.isPoint)(o.pubkey))throw new TypeError("Output pubkey is invalid");if(a.pubkey&&!a.pubkey.equals(o.pubkey))throw new TypeError("Pubkey mismatch")}if(a.signature&&a.input&&!a.input.equals(o.input))throw new TypeError("Signature mismatch");if(a.input){if(1!==_chunks().length)throw new TypeError("Input is invalid");if(!bscript.isCanonicalScriptSignature(o.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2pkh.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2pkh=void 0;const bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),bs58check=__webpack_require__("./node_modules/.pnpm/bs58check@3.0.1/node_modules/bs58check/index.js"),OPS=bscript.OPS;exports.p2pkh=function p2pkh(a,opts){if(!(a.address||a.hash||a.output||a.pubkey||a.input))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),address:types_1.typeforce.maybe(types_1.typeforce.String),hash:types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),output:types_1.typeforce.maybe(types_1.typeforce.BufferN(25)),pubkey:types_1.typeforce.maybe(types_1.isPoint),signature:types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),input:types_1.typeforce.maybe(types_1.typeforce.Buffer)},a);const _address=lazy.value((()=>{const payload=Buffer.from(bs58check.decode(a.address));return{version:payload.readUInt8(0),hash:payload.slice(1)}})),_chunks=lazy.value((()=>bscript.decompile(a.input))),network=a.network||networks_1.bitcoin,o={name:"p2pkh",network};if(lazy.prop(o,"address",(()=>{if(!o.hash)return;const payload=Buffer.allocUnsafe(21);return payload.writeUInt8(network.pubKeyHash,0),o.hash.copy(payload,1),bs58check.encode(payload)})),lazy.prop(o,"hash",(()=>a.output?a.output.slice(3,23):a.address?_address().hash:a.pubkey||o.pubkey?bcrypto.hash160(a.pubkey||o.pubkey):void 0)),lazy.prop(o,"output",(()=>{if(o.hash)return bscript.compile([OPS.OP_DUP,OPS.OP_HASH160,o.hash,OPS.OP_EQUALVERIFY,OPS.OP_CHECKSIG])})),lazy.prop(o,"pubkey",(()=>{if(a.input)return _chunks()[1]})),lazy.prop(o,"signature",(()=>{if(a.input)return _chunks()[0]})),lazy.prop(o,"input",(()=>{if(a.pubkey&&a.signature)return bscript.compile([a.signature,a.pubkey])})),lazy.prop(o,"witness",(()=>{if(o.input)return[]})),opts.validate){let hash=Buffer.from([]);if(a.address){if(_address().version!==network.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==_address().hash.length)throw new TypeError("Invalid address");hash=_address().hash}if(a.hash){if(hash.length>0&&!hash.equals(a.hash))throw new TypeError("Hash mismatch");hash=a.hash}if(a.output){if(25!==a.output.length||a.output[0]!==OPS.OP_DUP||a.output[1]!==OPS.OP_HASH160||20!==a.output[2]||a.output[23]!==OPS.OP_EQUALVERIFY||a.output[24]!==OPS.OP_CHECKSIG)throw new TypeError("Output is invalid");const hash2=a.output.slice(3,23);if(hash.length>0&&!hash.equals(hash2))throw new TypeError("Hash mismatch");hash=hash2}if(a.pubkey){const pkh=bcrypto.hash160(a.pubkey);if(hash.length>0&&!hash.equals(pkh))throw new TypeError("Hash mismatch");hash=pkh}if(a.input){const chunks=_chunks();if(2!==chunks.length)throw new TypeError("Input is invalid");if(!bscript.isCanonicalScriptSignature(chunks[0]))throw new TypeError("Input has invalid signature");if(!(0,types_1.isPoint)(chunks[1]))throw new TypeError("Input has invalid pubkey");if(a.signature&&!a.signature.equals(chunks[0]))throw new TypeError("Signature mismatch");if(a.pubkey&&!a.pubkey.equals(chunks[1]))throw new TypeError("Pubkey mismatch");const pkh=bcrypto.hash160(chunks[1]);if(hash.length>0&&!hash.equals(pkh))throw new TypeError("Hash mismatch")}}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2sh.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2sh=void 0;const bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),bs58check=__webpack_require__("./node_modules/.pnpm/bs58check@3.0.1/node_modules/bs58check/index.js"),OPS=bscript.OPS;exports.p2sh=function p2sh(a,opts){if(!(a.address||a.hash||a.output||a.redeem||a.input))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),address:types_1.typeforce.maybe(types_1.typeforce.String),hash:types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),output:types_1.typeforce.maybe(types_1.typeforce.BufferN(23)),redeem:types_1.typeforce.maybe({network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.Buffer),input:types_1.typeforce.maybe(types_1.typeforce.Buffer),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))}),input:types_1.typeforce.maybe(types_1.typeforce.Buffer),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))},a);let network=a.network;network||(network=a.redeem&&a.redeem.network||networks_1.bitcoin);const o={network},_address=lazy.value((()=>{const payload=Buffer.from(bs58check.decode(a.address));return{version:payload.readUInt8(0),hash:payload.slice(1)}})),_chunks=lazy.value((()=>bscript.decompile(a.input))),_redeem=lazy.value((()=>{const chunks=_chunks(),lastChunk=chunks[chunks.length-1];return{network,output:lastChunk===OPS.OP_FALSE?Buffer.from([]):lastChunk,input:bscript.compile(chunks.slice(0,-1)),witness:a.witness||[]}}));if(lazy.prop(o,"address",(()=>{if(!o.hash)return;const payload=Buffer.allocUnsafe(21);return payload.writeUInt8(o.network.scriptHash,0),o.hash.copy(payload,1),bs58check.encode(payload)})),lazy.prop(o,"hash",(()=>a.output?a.output.slice(2,22):a.address?_address().hash:o.redeem&&o.redeem.output?bcrypto.hash160(o.redeem.output):void 0)),lazy.prop(o,"output",(()=>{if(o.hash)return bscript.compile([OPS.OP_HASH160,o.hash,OPS.OP_EQUAL])})),lazy.prop(o,"redeem",(()=>{if(a.input)return _redeem()})),lazy.prop(o,"input",(()=>{if(a.redeem&&a.redeem.input&&a.redeem.output)return bscript.compile([].concat(bscript.decompile(a.redeem.input),a.redeem.output))})),lazy.prop(o,"witness",(()=>o.redeem&&o.redeem.witness?o.redeem.witness:o.input?[]:void 0)),lazy.prop(o,"name",(()=>{const nameParts=["p2sh"];return void 0!==o.redeem&&void 0!==o.redeem.name&&nameParts.push(o.redeem.name),nameParts.join("-")})),opts.validate){let hash=Buffer.from([]);if(a.address){if(_address().version!==network.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==_address().hash.length)throw new TypeError("Invalid address");hash=_address().hash}if(a.hash){if(hash.length>0&&!hash.equals(a.hash))throw new TypeError("Hash mismatch");hash=a.hash}if(a.output){if(23!==a.output.length||a.output[0]!==OPS.OP_HASH160||20!==a.output[1]||a.output[22]!==OPS.OP_EQUAL)throw new TypeError("Output is invalid");const hash2=a.output.slice(2,22);if(hash.length>0&&!hash.equals(hash2))throw new TypeError("Hash mismatch");hash=hash2}const checkRedeem=redeem=>{if(redeem.output){const decompile=bscript.decompile(redeem.output);if(!decompile||decompile.length<1)throw new TypeError("Redeem.output too short");if(redeem.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(bscript.countNonPushOnlyOPs(decompile)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const hash2=bcrypto.hash160(redeem.output);if(hash.length>0&&!hash.equals(hash2))throw new TypeError("Hash mismatch");hash=hash2}if(redeem.input){const hasInput=redeem.input.length>0,hasWitness=redeem.witness&&redeem.witness.length>0;if(!hasInput&&!hasWitness)throw new TypeError("Empty input");if(hasInput&&hasWitness)throw new TypeError("Input and witness provided");if(hasInput){const richunks=bscript.decompile(redeem.input);if(!bscript.isPushOnly(richunks))throw new TypeError("Non push-only scriptSig")}}};if(a.input){const chunks=_chunks();if(!chunks||chunks.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(_redeem().output))throw new TypeError("Input is invalid");checkRedeem(_redeem())}if(a.redeem){if(a.redeem.network&&a.redeem.network!==network)throw new TypeError("Network mismatch");if(a.input){const redeem=_redeem();if(a.redeem.output&&!a.redeem.output.equals(redeem.output))throw new TypeError("Redeem.output mismatch");if(a.redeem.input&&!a.redeem.input.equals(redeem.input))throw new TypeError("Redeem.input mismatch")}checkRedeem(a.redeem)}if(a.witness&&a.redeem&&a.redeem.witness&&!function stacksEqual(a,b){return a.length===b.length&&a.every(((x,i)=>x.equals(b[i])))}(a.redeem.witness,a.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2tr.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2tr=void 0;const buffer_1=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js"),networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),ecc_lib_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ecc_lib.js"),bip341_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/bip341.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),bech32_1=__webpack_require__("./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js"),OPS=bscript.OPS;exports.p2tr=function p2tr(a,opts){if(!(a.address||a.output||a.pubkey||a.internalPubkey||a.witness&&a.witness.length>1))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({address:types_1.typeforce.maybe(types_1.typeforce.String),input:types_1.typeforce.maybe(types_1.typeforce.BufferN(0)),network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.BufferN(34)),internalPubkey:types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),hash:types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),pubkey:types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),signature:types_1.typeforce.maybe(types_1.typeforce.anyOf(types_1.typeforce.BufferN(64),types_1.typeforce.BufferN(65))),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer)),scriptTree:types_1.typeforce.maybe(types_1.isTaptree),redeem:types_1.typeforce.maybe({output:types_1.typeforce.maybe(types_1.typeforce.Buffer),redeemVersion:types_1.typeforce.maybe(types_1.typeforce.Number),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))}),redeemVersion:types_1.typeforce.maybe(types_1.typeforce.Number)},a);const _address=lazy.value((()=>{const result=bech32_1.bech32m.decode(a.address),version=result.words.shift(),data=bech32_1.bech32m.fromWords(result.words);return{version,prefix:result.prefix,data:buffer_1.Buffer.from(data)}})),_witness=lazy.value((()=>{if(a.witness&&a.witness.length)return a.witness.length>=2&&80===a.witness[a.witness.length-1][0]?a.witness.slice(0,-1):a.witness.slice()})),_hashTree=lazy.value((()=>a.scriptTree?(0,bip341_1.toHashTree)(a.scriptTree):a.hash?{hash:a.hash}:void 0)),network=a.network||networks_1.bitcoin,o={name:"p2tr",network};if(lazy.prop(o,"address",(()=>{if(!o.pubkey)return;const words=bech32_1.bech32m.toWords(o.pubkey);return words.unshift(1),bech32_1.bech32m.encode(network.bech32,words)})),lazy.prop(o,"hash",(()=>{const hashTree=_hashTree();if(hashTree)return hashTree.hash;const w=_witness();if(w&&w.length>1){const controlBlock=w[w.length-1],leafVersion=controlBlock[0]&types_1.TAPLEAF_VERSION_MASK,script=w[w.length-2],leafHash=(0,bip341_1.tapleafHash)({output:script,version:leafVersion});return(0,bip341_1.rootHashFromPath)(controlBlock,leafHash)}return null})),lazy.prop(o,"output",(()=>{if(o.pubkey)return bscript.compile([OPS.OP_1,o.pubkey])})),lazy.prop(o,"redeemVersion",(()=>a.redeemVersion?a.redeemVersion:a.redeem&&void 0!==a.redeem.redeemVersion&&null!==a.redeem.redeemVersion?a.redeem.redeemVersion:bip341_1.LEAF_VERSION_TAPSCRIPT)),lazy.prop(o,"redeem",(()=>{const witness=_witness();if(witness&&!(witness.length<2))return{output:witness[witness.length-2],witness:witness.slice(0,-2),redeemVersion:witness[witness.length-1][0]&types_1.TAPLEAF_VERSION_MASK}})),lazy.prop(o,"pubkey",(()=>{if(a.pubkey)return a.pubkey;if(a.output)return a.output.slice(2);if(a.address)return _address().data;if(o.internalPubkey){const tweakedKey=(0,bip341_1.tweakKey)(o.internalPubkey,o.hash);if(tweakedKey)return tweakedKey.x}})),lazy.prop(o,"internalPubkey",(()=>{if(a.internalPubkey)return a.internalPubkey;const witness=_witness();return witness&&witness.length>1?witness[witness.length-1].slice(1,33):void 0})),lazy.prop(o,"signature",(()=>{if(a.signature)return a.signature;const witness=_witness();return witness&&1===witness.length?witness[0]:void 0})),lazy.prop(o,"witness",(()=>{if(a.witness)return a.witness;const hashTree=_hashTree();if(hashTree&&a.redeem&&a.redeem.output&&a.internalPubkey){const leafHash=(0,bip341_1.tapleafHash)({output:a.redeem.output,version:o.redeemVersion}),path=(0,bip341_1.findScriptPath)(hashTree,leafHash);if(!path)return;const outputKey=(0,bip341_1.tweakKey)(a.internalPubkey,hashTree.hash);if(!outputKey)return;const controlBock=buffer_1.Buffer.concat([buffer_1.Buffer.from([o.redeemVersion|outputKey.parity]),a.internalPubkey].concat(path));return[a.redeem.output,controlBock]}return a.signature?[a.signature]:void 0})),opts.validate){let pubkey=buffer_1.Buffer.from([]);if(a.address){if(network&&network.bech32!==_address().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(1!==_address().version)throw new TypeError("Invalid address version");if(32!==_address().data.length)throw new TypeError("Invalid address data");pubkey=_address().data}if(a.pubkey){if(pubkey.length>0&&!pubkey.equals(a.pubkey))throw new TypeError("Pubkey mismatch");pubkey=a.pubkey}if(a.output){if(34!==a.output.length||a.output[0]!==OPS.OP_1||32!==a.output[1])throw new TypeError("Output is invalid");if(pubkey.length>0&&!pubkey.equals(a.output.slice(2)))throw new TypeError("Pubkey mismatch");pubkey=a.output.slice(2)}if(a.internalPubkey){const tweakedKey=(0,bip341_1.tweakKey)(a.internalPubkey,o.hash);if(pubkey.length>0&&!pubkey.equals(tweakedKey.x))throw new TypeError("Pubkey mismatch");pubkey=tweakedKey.x}if(pubkey&&pubkey.length&&!(0,ecc_lib_1.getEccLib)().isXOnlyPoint(pubkey))throw new TypeError("Invalid pubkey for p2tr");const hashTree=_hashTree();if(a.hash&&hashTree&&!a.hash.equals(hashTree.hash))throw new TypeError("Hash mismatch");if(a.redeem&&a.redeem.output&&hashTree){const leafHash=(0,bip341_1.tapleafHash)({output:a.redeem.output,version:o.redeemVersion});if(!(0,bip341_1.findScriptPath)(hashTree,leafHash))throw new TypeError("Redeem script not in tree")}const witness=_witness();if(a.redeem&&o.redeem){if(a.redeem.redeemVersion&&a.redeem.redeemVersion!==o.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(a.redeem.output){if(0===bscript.decompile(a.redeem.output).length)throw new TypeError("Redeem.output is invalid");if(o.redeem.output&&!a.redeem.output.equals(o.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(a.redeem.witness&&o.redeem.witness&&!function stacksEqual(a,b){return a.length===b.length&&a.every(((x,i)=>x.equals(b[i])))}(a.redeem.witness,o.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(witness&&witness.length)if(1===witness.length){if(a.signature&&!a.signature.equals(witness[0]))throw new TypeError("Signature mismatch")}else{const controlBlock=witness[witness.length-1];if(controlBlock.length<33)throw new TypeError(`The control-block length is too small. Got ${controlBlock.length}, expected min 33.`);if((controlBlock.length-33)%32!=0)throw new TypeError(`The control-block length of ${controlBlock.length} is incorrect!`);const m=(controlBlock.length-33)/32;if(m>128)throw new TypeError(`The script path is too long. Got ${m}, expected max 128.`);const internalPubkey=controlBlock.slice(1,33);if(a.internalPubkey&&!a.internalPubkey.equals(internalPubkey))throw new TypeError("Internal pubkey mismatch");if(!(0,ecc_lib_1.getEccLib)().isXOnlyPoint(internalPubkey))throw new TypeError("Invalid internalPubkey for p2tr witness");const leafVersion=controlBlock[0]&types_1.TAPLEAF_VERSION_MASK,script=witness[witness.length-2],leafHash=(0,bip341_1.tapleafHash)({output:script,version:leafVersion}),hash=(0,bip341_1.rootHashFromPath)(controlBlock,leafHash),outputKey=(0,bip341_1.tweakKey)(internalPubkey,hash);if(!outputKey)throw new TypeError("Invalid outputKey for p2tr witness");if(pubkey.length&&!pubkey.equals(outputKey.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(outputKey.parity!==(1&controlBlock[0]))throw new Error("Incorrect parity")}}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2wpkh.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2wpkh=void 0;const bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),bech32_1=__webpack_require__("./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js"),OPS=bscript.OPS,EMPTY_BUFFER=Buffer.alloc(0);exports.p2wpkh=function p2wpkh(a,opts){if(!(a.address||a.hash||a.output||a.pubkey||a.witness))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({address:types_1.typeforce.maybe(types_1.typeforce.String),hash:types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),input:types_1.typeforce.maybe(types_1.typeforce.BufferN(0)),network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.BufferN(22)),pubkey:types_1.typeforce.maybe(types_1.isPoint),signature:types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))},a);const _address=lazy.value((()=>{const result=bech32_1.bech32.decode(a.address),version=result.words.shift(),data=bech32_1.bech32.fromWords(result.words);return{version,prefix:result.prefix,data:Buffer.from(data)}})),network=a.network||networks_1.bitcoin,o={name:"p2wpkh",network};if(lazy.prop(o,"address",(()=>{if(!o.hash)return;const words=bech32_1.bech32.toWords(o.hash);return words.unshift(0),bech32_1.bech32.encode(network.bech32,words)})),lazy.prop(o,"hash",(()=>a.output?a.output.slice(2,22):a.address?_address().data:a.pubkey||o.pubkey?bcrypto.hash160(a.pubkey||o.pubkey):void 0)),lazy.prop(o,"output",(()=>{if(o.hash)return bscript.compile([OPS.OP_0,o.hash])})),lazy.prop(o,"pubkey",(()=>a.pubkey?a.pubkey:a.witness?a.witness[1]:void 0)),lazy.prop(o,"signature",(()=>{if(a.witness)return a.witness[0]})),lazy.prop(o,"input",(()=>{if(o.witness)return EMPTY_BUFFER})),lazy.prop(o,"witness",(()=>{if(a.pubkey&&a.signature)return[a.signature,a.pubkey]})),opts.validate){let hash=Buffer.from([]);if(a.address){if(network&&network.bech32!==_address().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==_address().version)throw new TypeError("Invalid address version");if(20!==_address().data.length)throw new TypeError("Invalid address data");hash=_address().data}if(a.hash){if(hash.length>0&&!hash.equals(a.hash))throw new TypeError("Hash mismatch");hash=a.hash}if(a.output){if(22!==a.output.length||a.output[0]!==OPS.OP_0||20!==a.output[1])throw new TypeError("Output is invalid");if(hash.length>0&&!hash.equals(a.output.slice(2)))throw new TypeError("Hash mismatch");hash=a.output.slice(2)}if(a.pubkey){const pkh=bcrypto.hash160(a.pubkey);if(hash.length>0&&!hash.equals(pkh))throw new TypeError("Hash mismatch");if(hash=pkh,!(0,types_1.isPoint)(a.pubkey)||33!==a.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(a.witness){if(2!==a.witness.length)throw new TypeError("Witness is invalid");if(!bscript.isCanonicalScriptSignature(a.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,types_1.isPoint)(a.witness[1])||33!==a.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(a.signature&&!a.signature.equals(a.witness[0]))throw new TypeError("Signature mismatch");if(a.pubkey&&!a.pubkey.equals(a.witness[1]))throw new TypeError("Pubkey mismatch");const pkh=bcrypto.hash160(a.witness[1]);if(hash.length>0&&!hash.equals(pkh))throw new TypeError("Hash mismatch")}}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/p2wsh.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.p2wsh=void 0;const bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),lazy=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/lazy.js"),bech32_1=__webpack_require__("./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js"),OPS=bscript.OPS,EMPTY_BUFFER=Buffer.alloc(0);function chunkHasUncompressedPubkey(chunk){return!(!Buffer.isBuffer(chunk)||65!==chunk.length||4!==chunk[0]||!(0,types_1.isPoint)(chunk))}exports.p2wsh=function p2wsh(a,opts){if(!(a.address||a.hash||a.output||a.redeem||a.witness))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{}),(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),address:types_1.typeforce.maybe(types_1.typeforce.String),hash:types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),output:types_1.typeforce.maybe(types_1.typeforce.BufferN(34)),redeem:types_1.typeforce.maybe({input:types_1.typeforce.maybe(types_1.typeforce.Buffer),network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.Buffer),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))}),input:types_1.typeforce.maybe(types_1.typeforce.BufferN(0)),witness:types_1.typeforce.maybe(types_1.typeforce.arrayOf(types_1.typeforce.Buffer))},a);const _address=lazy.value((()=>{const result=bech32_1.bech32.decode(a.address),version=result.words.shift(),data=bech32_1.bech32.fromWords(result.words);return{version,prefix:result.prefix,data:Buffer.from(data)}})),_rchunks=lazy.value((()=>bscript.decompile(a.redeem.input)));let network=a.network;network||(network=a.redeem&&a.redeem.network||networks_1.bitcoin);const o={network};if(lazy.prop(o,"address",(()=>{if(!o.hash)return;const words=bech32_1.bech32.toWords(o.hash);return words.unshift(0),bech32_1.bech32.encode(network.bech32,words)})),lazy.prop(o,"hash",(()=>a.output?a.output.slice(2):a.address?_address().data:o.redeem&&o.redeem.output?bcrypto.sha256(o.redeem.output):void 0)),lazy.prop(o,"output",(()=>{if(o.hash)return bscript.compile([OPS.OP_0,o.hash])})),lazy.prop(o,"redeem",(()=>{if(a.witness)return{output:a.witness[a.witness.length-1],input:EMPTY_BUFFER,witness:a.witness.slice(0,-1)}})),lazy.prop(o,"input",(()=>{if(o.witness)return EMPTY_BUFFER})),lazy.prop(o,"witness",(()=>{if(a.redeem&&a.redeem.input&&a.redeem.input.length>0&&a.redeem.output&&a.redeem.output.length>0){const stack=bscript.toStack(_rchunks());return o.redeem=Object.assign({witness:stack},a.redeem),o.redeem.input=EMPTY_BUFFER,[].concat(stack,a.redeem.output)}if(a.redeem&&a.redeem.output&&a.redeem.witness)return[].concat(a.redeem.witness,a.redeem.output)})),lazy.prop(o,"name",(()=>{const nameParts=["p2wsh"];return void 0!==o.redeem&&void 0!==o.redeem.name&&nameParts.push(o.redeem.name),nameParts.join("-")})),opts.validate){let hash=Buffer.from([]);if(a.address){if(_address().prefix!==network.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==_address().version)throw new TypeError("Invalid address version");if(32!==_address().data.length)throw new TypeError("Invalid address data");hash=_address().data}if(a.hash){if(hash.length>0&&!hash.equals(a.hash))throw new TypeError("Hash mismatch");hash=a.hash}if(a.output){if(34!==a.output.length||a.output[0]!==OPS.OP_0||32!==a.output[1])throw new TypeError("Output is invalid");const hash2=a.output.slice(2);if(hash.length>0&&!hash.equals(hash2))throw new TypeError("Hash mismatch");hash=hash2}if(a.redeem){if(a.redeem.network&&a.redeem.network!==network)throw new TypeError("Network mismatch");if(a.redeem.input&&a.redeem.input.length>0&&a.redeem.witness&&a.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(a.redeem.output){const decompile=bscript.decompile(a.redeem.output);if(!decompile||decompile.length<1)throw new TypeError("Redeem.output is invalid");if(a.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(bscript.countNonPushOnlyOPs(decompile)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const hash2=bcrypto.sha256(a.redeem.output);if(hash.length>0&&!hash.equals(hash2))throw new TypeError("Hash mismatch");hash=hash2}if(a.redeem.input&&!bscript.isPushOnly(_rchunks()))throw new TypeError("Non push-only scriptSig");if(a.witness&&a.redeem.witness&&!function stacksEqual(a,b){return a.length===b.length&&a.every(((x,i)=>x.equals(b[i])))}(a.witness,a.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(a.redeem.input&&_rchunks().some(chunkHasUncompressedPubkey)||a.redeem.output&&(bscript.decompile(a.redeem.output)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(a.witness&&a.witness.length>0){const wScript=a.witness[a.witness.length-1];if(a.redeem&&a.redeem.output&&!a.redeem.output.equals(wScript))throw new TypeError("Witness and redeem.output mismatch");if(a.witness.some(chunkHasUncompressedPubkey)||(bscript.decompile(wScript)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,a)}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Psbt=void 0;const bip174_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/psbt.js"),varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js"),utils_1=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/utils.js"),address_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/address.js"),bufferutils_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bufferutils.js"),networks_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/networks.js"),payments=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/index.js"),bip341_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/bip341.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),transaction_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/transaction.js"),bip371_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt/bip371.js"),psbtutils_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt/psbtutils.js"),DEFAULT_OPTS={network:networks_1.bitcoin,maximumFeeRate:5e3};class Psbt{static fromBase64(data,opts={}){const buffer=Buffer.from(data,"base64");return this.fromBuffer(buffer,opts)}static fromHex(data,opts={}){const buffer=Buffer.from(data,"hex");return this.fromBuffer(buffer,opts)}static fromBuffer(buffer,opts={}){const psbtBase=bip174_1.Psbt.fromBuffer(buffer,transactionFromBuffer),psbt=new Psbt(opts,psbtBase);return function checkTxForDupeIns(tx,cache){tx.ins.forEach((input=>{checkTxInputCache(cache,input)}))}(psbt.__CACHE.__TX,psbt.__CACHE),psbt}constructor(opts={},data=new bip174_1.Psbt(new PsbtTransaction)){this.data=data,this.opts=Object.assign({},DEFAULT_OPTS,opts),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const dpew=(obj,attr,enumerable,writable)=>Object.defineProperty(obj,attr,{enumerable,writable});dpew(this,"__CACHE",!1,!0),dpew(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(version){this.setVersion(version)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(locktime){this.setLocktime(locktime)}get txInputs(){return this.__CACHE.__TX.ins.map((input=>({hash:(0,bufferutils_1.cloneBuffer)(input.hash),index:input.index,sequence:input.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((output=>{let address;try{address=(0,address_1.fromOutputScript)(output.script,this.opts.network)}catch(_){}return{script:(0,bufferutils_1.cloneBuffer)(output.script),value:output.value,address}}))}combine(...those){return this.data.combine(...those.map((o=>o.data))),this}clone(){const res=Psbt.fromBuffer(this.data.toBuffer());return res.opts=JSON.parse(JSON.stringify(this.opts)),res}setMaximumFeeRate(satoshiPerByte){check32Bit(satoshiPerByte),this.opts.maximumFeeRate=satoshiPerByte}setVersion(version){check32Bit(version),checkInputsForPartialSig(this.data.inputs,"setVersion");const c=this.__CACHE;return c.__TX.version=version,c.__EXTRACTED_TX=void 0,this}setLocktime(locktime){check32Bit(locktime),checkInputsForPartialSig(this.data.inputs,"setLocktime");const c=this.__CACHE;return c.__TX.locktime=locktime,c.__EXTRACTED_TX=void 0,this}setInputSequence(inputIndex,sequence){check32Bit(sequence),checkInputsForPartialSig(this.data.inputs,"setInputSequence");const c=this.__CACHE;if(c.__TX.ins.length<=inputIndex)throw new Error("Input index too high");return c.__TX.ins[inputIndex].sequence=sequence,c.__EXTRACTED_TX=void 0,this}addInputs(inputDatas){return inputDatas.forEach((inputData=>this.addInput(inputData))),this}addInput(inputData){if(arguments.length>1||!inputData||void 0===inputData.hash||void 0===inputData.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,bip371_1.checkTaprootInputFields)(inputData,inputData,"addInput"),checkInputsForPartialSig(this.data.inputs,"addInput"),inputData.witnessScript&&checkInvalidP2WSH(inputData.witnessScript);const c=this.__CACHE;this.data.addInput(inputData);checkTxInputCache(c,c.__TX.ins[c.__TX.ins.length-1]);const inputIndex=this.data.inputs.length-1,input=this.data.inputs[inputIndex];return input.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,input,inputIndex),c.__FEE=void 0,c.__FEE_RATE=void 0,c.__EXTRACTED_TX=void 0,this}addOutputs(outputDatas){return outputDatas.forEach((outputData=>this.addOutput(outputData))),this}addOutput(outputData){if(arguments.length>1||!outputData||void 0===outputData.value||void 0===outputData.address&&void 0===outputData.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");checkInputsForPartialSig(this.data.inputs,"addOutput");const{address}=outputData;if("string"==typeof address){const{network}=this.opts,script=(0,address_1.toOutputScript)(address,network);outputData=Object.assign(outputData,{script})}(0,bip371_1.checkTaprootOutputFields)(outputData,outputData,"addOutput");const c=this.__CACHE;return this.data.addOutput(outputData),c.__FEE=void 0,c.__FEE_RATE=void 0,c.__EXTRACTED_TX=void 0,this}extractTransaction(disableFeeCheck){if(!this.data.inputs.every(isFinalized))throw new Error("Not finalized");const c=this.__CACHE;if(disableFeeCheck||function checkFees(psbt,cache,opts){const feeRate=cache.__FEE_RATE||psbt.getFeeRate(),vsize=cache.__EXTRACTED_TX.virtualSize(),satoshis=feeRate*vsize;if(feeRate>=opts.maximumFeeRate)throw new Error(`Warning: You are paying around ${(satoshis/1e8).toFixed(8)} in fees, which is ${feeRate} satoshi per byte for a transaction with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,c,this.opts),c.__EXTRACTED_TX)return c.__EXTRACTED_TX;const tx=c.__TX.clone();return inputFinalizeGetAmts(this.data.inputs,tx,c,!0),tx}getFeeRate(){return getTxCacheValue("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return getTxCacheValue("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,utils_1.checkForInput)(this.data.inputs,0),range(this.data.inputs.length).forEach((idx=>this.finalizeInput(idx))),this}finalizeInput(inputIndex,finalScriptsFunc){const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex);return(0,bip371_1.isTaprootInput)(input)?this._finalizeTaprootInput(inputIndex,input,void 0,finalScriptsFunc):this._finalizeInput(inputIndex,input,finalScriptsFunc)}finalizeTaprootInput(inputIndex,tapLeafHashToFinalize,finalScriptsFunc=bip371_1.tapScriptFinalizer){const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex);if((0,bip371_1.isTaprootInput)(input))return this._finalizeTaprootInput(inputIndex,input,tapLeafHashToFinalize,finalScriptsFunc);throw new Error(`Cannot finalize input #${inputIndex}. Not Taproot.`)}_finalizeInput(inputIndex,input,finalScriptsFunc=getFinalScripts){const{script,isP2SH,isP2WSH,isSegwit}=function getScriptFromInput(inputIndex,input,cache){const unsignedTx=cache.__TX,res={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(res.isP2SH=!!input.redeemScript,res.isP2WSH=!!input.witnessScript,input.witnessScript)res.script=input.witnessScript;else if(input.redeemScript)res.script=input.redeemScript;else if(input.nonWitnessUtxo){const nonWitnessUtxoTx=nonWitnessUtxoTxFromCache(cache,input,inputIndex),prevoutIndex=unsignedTx.ins[inputIndex].index;res.script=nonWitnessUtxoTx.outs[prevoutIndex].script}else input.witnessUtxo&&(res.script=input.witnessUtxo.script);(input.witnessScript||(0,psbtutils_1.isP2WPKH)(res.script))&&(res.isSegwit=!0);return res}(inputIndex,input,this.__CACHE);if(!script)throw new Error(`No script found for input #${inputIndex}`);!function checkPartialSigSighashes(input){if(!input.sighashType||!input.partialSig)return;const{partialSig,sighashType}=input;partialSig.forEach((pSig=>{const{hashType}=bscript.signature.decode(pSig.signature);if(sighashType!==hashType)throw new Error("Signature sighash does not match input sighash type")}))}(input);const{finalScriptSig,finalScriptWitness}=finalScriptsFunc(inputIndex,input,script,isSegwit,isP2SH,isP2WSH);if(finalScriptSig&&this.data.updateInput(inputIndex,{finalScriptSig}),finalScriptWitness&&this.data.updateInput(inputIndex,{finalScriptWitness}),!finalScriptSig&&!finalScriptWitness)throw new Error(`Unknown error finalizing input #${inputIndex}`);return this.data.clearFinalizedInput(inputIndex),this}_finalizeTaprootInput(inputIndex,input,tapLeafHashToFinalize,finalScriptsFunc=bip371_1.tapScriptFinalizer){if(!input.witnessUtxo)throw new Error(`Cannot finalize input #${inputIndex}. Missing withness utxo.`);if(input.tapKeySig){const payment=payments.p2tr({output:input.witnessUtxo.script,signature:input.tapKeySig}),finalScriptWitness=(0,psbtutils_1.witnessStackToScriptWitness)(payment.witness);this.data.updateInput(inputIndex,{finalScriptWitness})}else{const{finalScriptWitness}=finalScriptsFunc(inputIndex,input,tapLeafHashToFinalize);this.data.updateInput(inputIndex,{finalScriptWitness})}return this.data.clearFinalizedInput(inputIndex),this}getInputType(inputIndex){const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex),result=getMeaningfulScript(getScriptFromUtxo(inputIndex,input,this.__CACHE),inputIndex,"input",input.redeemScript||function redeemFromFinalScriptSig(finalScript){if(!finalScript)return;const decomp=bscript.decompile(finalScript);if(!decomp)return;const lastItem=decomp[decomp.length-1];if(!Buffer.isBuffer(lastItem)||isPubkeyLike(lastItem)||function isSigLike(buf){return bscript.isCanonicalScriptSignature(buf)}(lastItem))return;if(!bscript.decompile(lastItem))return;return lastItem}(input.finalScriptSig),input.witnessScript||function redeemFromFinalWitnessScript(finalScript){if(!finalScript)return;const decomp=scriptWitnessToWitnessStack(finalScript),lastItem=decomp[decomp.length-1];if(isPubkeyLike(lastItem))return;if(!bscript.decompile(lastItem))return;return lastItem}(input.finalScriptWitness));return("raw"===result.type?"":result.type+"-")+classifyScript(result.meaningfulScript)}inputHasPubkey(inputIndex,pubkey){return function pubkeyInInput(pubkey,input,inputIndex,cache){const script=getScriptFromUtxo(inputIndex,input,cache),{meaningfulScript}=getMeaningfulScript(script,inputIndex,"input",input.redeemScript,input.witnessScript);return(0,psbtutils_1.pubkeyInScript)(pubkey,meaningfulScript)}(pubkey,(0,utils_1.checkForInput)(this.data.inputs,inputIndex),inputIndex,this.__CACHE)}inputHasHDKey(inputIndex,root){const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex),derivationIsMine=bip32DerivationIsMine(root);return!!input.bip32Derivation&&input.bip32Derivation.some(derivationIsMine)}outputHasPubkey(outputIndex,pubkey){return function pubkeyInOutput(pubkey,output,outputIndex,cache){const script=cache.__TX.outs[outputIndex].script,{meaningfulScript}=getMeaningfulScript(script,outputIndex,"output",output.redeemScript,output.witnessScript);return(0,psbtutils_1.pubkeyInScript)(pubkey,meaningfulScript)}(pubkey,(0,utils_1.checkForOutput)(this.data.outputs,outputIndex),outputIndex,this.__CACHE)}outputHasHDKey(outputIndex,root){const output=(0,utils_1.checkForOutput)(this.data.outputs,outputIndex),derivationIsMine=bip32DerivationIsMine(root);return!!output.bip32Derivation&&output.bip32Derivation.some(derivationIsMine)}validateSignaturesOfAllInputs(validator){(0,utils_1.checkForInput)(this.data.inputs,0);return range(this.data.inputs.length).map((idx=>this.validateSignaturesOfInput(idx,validator))).reduce(((final,res)=>!0===res&&final),!0)}validateSignaturesOfInput(inputIndex,validator,pubkey){const input=this.data.inputs[inputIndex];return(0,bip371_1.isTaprootInput)(input)?this.validateSignaturesOfTaprootInput(inputIndex,validator,pubkey):this._validateSignaturesOfInput(inputIndex,validator,pubkey)}_validateSignaturesOfInput(inputIndex,validator,pubkey){const input=this.data.inputs[inputIndex],partialSig=(input||{}).partialSig;if(!input||!partialSig||partialSig.length<1)throw new Error("No signatures to validate");if("function"!=typeof validator)throw new Error("Need validator function to validate signatures");const mySigs=pubkey?partialSig.filter((sig=>sig.pubkey.equals(pubkey))):partialSig;if(mySigs.length<1)throw new Error("No signatures for this pubkey");const results=[];let hashCache,scriptCache,sighashCache;for(const pSig of mySigs){const sig=bscript.signature.decode(pSig.signature),{hash,script}=sighashCache!==sig.hashType?getHashForSig(inputIndex,Object.assign({},input,{sighashType:sig.hashType}),this.__CACHE,!0):{hash:hashCache,script:scriptCache};sighashCache=sig.hashType,hashCache=hash,scriptCache=script,checkScriptForPubkey(pSig.pubkey,script,"verify"),results.push(validator(pSig.pubkey,hash,sig.signature))}return results.every((res=>!0===res))}validateSignaturesOfTaprootInput(inputIndex,validator,pubkey){const input=this.data.inputs[inputIndex],tapKeySig=(input||{}).tapKeySig,tapScriptSig=(input||{}).tapScriptSig;if(!input&&!tapKeySig&&(!tapScriptSig||tapScriptSig.length))throw new Error("No signatures to validate");if("function"!=typeof validator)throw new Error("Need validator function to validate signatures");const allHashses=(pubkey=pubkey&&(0,bip371_1.toXOnly)(pubkey))?getTaprootHashesForSig(inputIndex,input,this.data.inputs,pubkey,this.__CACHE):function getAllTaprootHashesForSig(inputIndex,input,inputs,cache){const allPublicKeys=[];if(input.tapInternalKey){const key=getPrevoutTaprootKey(inputIndex,input,cache);key&&allPublicKeys.push(key)}if(input.tapScriptSig){const tapScriptPubkeys=input.tapScriptSig.map((tss=>tss.pubkey));allPublicKeys.push(...tapScriptPubkeys)}const allHashes=allPublicKeys.map((pubicKey=>getTaprootHashesForSig(inputIndex,input,inputs,pubicKey,cache)));return allHashes.flat()}(inputIndex,input,this.data.inputs,this.__CACHE);if(!allHashses.length)throw new Error("No signatures for this pubkey");const tapKeyHash=allHashses.find((h=>!h.leafHash));let validationResultCount=0;if(tapKeySig&&tapKeyHash){if(!validator(tapKeyHash.pubkey,tapKeyHash.hash,trimTaprootSig(tapKeySig)))return!1;validationResultCount++}if(tapScriptSig)for(const tapSig of tapScriptSig){const tapSigHash=allHashses.find((h=>tapSig.pubkey.equals(h.pubkey)));if(tapSigHash){if(!validator(tapSig.pubkey,tapSigHash.hash,trimTaprootSig(tapSig.signature)))return!1;validationResultCount++}}return validationResultCount>0}signAllInputsHD(hdKeyPair,sighashTypes=[transaction_1.Transaction.SIGHASH_ALL]){if(!hdKeyPair||!hdKeyPair.publicKey||!hdKeyPair.fingerprint)throw new Error("Need HDSigner to sign input");const results=[];for(const i of range(this.data.inputs.length))try{this.signInputHD(i,hdKeyPair,sighashTypes),results.push(!0)}catch(err){results.push(!1)}if(results.every((v=>!1===v)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(hdKeyPair,sighashTypes=[transaction_1.Transaction.SIGHASH_ALL]){return new Promise(((resolve,reject)=>{if(!hdKeyPair||!hdKeyPair.publicKey||!hdKeyPair.fingerprint)return reject(new Error("Need HDSigner to sign input"));const results=[],promises=[];for(const i of range(this.data.inputs.length))promises.push(this.signInputHDAsync(i,hdKeyPair,sighashTypes).then((()=>{results.push(!0)}),(()=>{results.push(!1)})));return Promise.all(promises).then((()=>{if(results.every((v=>!1===v)))return reject(new Error("No inputs were signed"));resolve()}))}))}signInputHD(inputIndex,hdKeyPair,sighashTypes=[transaction_1.Transaction.SIGHASH_ALL]){if(!hdKeyPair||!hdKeyPair.publicKey||!hdKeyPair.fingerprint)throw new Error("Need HDSigner to sign input");return getSignersFromHD(inputIndex,this.data.inputs,hdKeyPair).forEach((signer=>this.signInput(inputIndex,signer,sighashTypes))),this}signInputHDAsync(inputIndex,hdKeyPair,sighashTypes=[transaction_1.Transaction.SIGHASH_ALL]){return new Promise(((resolve,reject)=>{if(!hdKeyPair||!hdKeyPair.publicKey||!hdKeyPair.fingerprint)return reject(new Error("Need HDSigner to sign input"));const promises=getSignersFromHD(inputIndex,this.data.inputs,hdKeyPair).map((signer=>this.signInputAsync(inputIndex,signer,sighashTypes)));return Promise.all(promises).then((()=>{resolve()})).catch(reject)}))}signAllInputs(keyPair,sighashTypes){if(!keyPair||!keyPair.publicKey)throw new Error("Need Signer to sign input");const results=[];for(const i of range(this.data.inputs.length))try{this.signInput(i,keyPair,sighashTypes),results.push(!0)}catch(err){results.push(!1)}if(results.every((v=>!1===v)))throw new Error("No inputs were signed");return this}signAllInputsAsync(keyPair,sighashTypes){return new Promise(((resolve,reject)=>{if(!keyPair||!keyPair.publicKey)return reject(new Error("Need Signer to sign input"));const results=[],promises=[];for(const[i]of this.data.inputs.entries())promises.push(this.signInputAsync(i,keyPair,sighashTypes).then((()=>{results.push(!0)}),(()=>{results.push(!1)})));return Promise.all(promises).then((()=>{if(results.every((v=>!1===v)))return reject(new Error("No inputs were signed"));resolve()}))}))}signInput(inputIndex,keyPair,sighashTypes){if(!keyPair||!keyPair.publicKey)throw new Error("Need Signer to sign input");const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex);return(0,bip371_1.isTaprootInput)(input)?this._signTaprootInput(inputIndex,input,keyPair,void 0,sighashTypes):this._signInput(inputIndex,keyPair,sighashTypes)}signTaprootInput(inputIndex,keyPair,tapLeafHashToSign,sighashTypes){if(!keyPair||!keyPair.publicKey)throw new Error("Need Signer to sign input");const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex);if((0,bip371_1.isTaprootInput)(input))return this._signTaprootInput(inputIndex,input,keyPair,tapLeafHashToSign,sighashTypes);throw new Error(`Input #${inputIndex} is not of type Taproot.`)}_signInput(inputIndex,keyPair,sighashTypes=[transaction_1.Transaction.SIGHASH_ALL]){const{hash,sighashType}=getHashAndSighashType(this.data.inputs,inputIndex,keyPair.publicKey,this.__CACHE,sighashTypes),partialSig=[{pubkey:keyPair.publicKey,signature:bscript.signature.encode(keyPair.sign(hash),sighashType)}];return this.data.updateInput(inputIndex,{partialSig}),this}_signTaprootInput(inputIndex,input,keyPair,tapLeafHashToSign,allowedSighashTypes=[transaction_1.Transaction.SIGHASH_DEFAULT]){const hashesForSig=this.checkTaprootHashesForSig(inputIndex,input,keyPair,tapLeafHashToSign,allowedSighashTypes),tapKeySig=hashesForSig.filter((h=>!h.leafHash)).map((h=>(0,bip371_1.serializeTaprootSignature)(keyPair.signSchnorr(h.hash),input.sighashType)))[0],tapScriptSig=hashesForSig.filter((h=>!!h.leafHash)).map((h=>({pubkey:(0,bip371_1.toXOnly)(keyPair.publicKey),signature:(0,bip371_1.serializeTaprootSignature)(keyPair.signSchnorr(h.hash),input.sighashType),leafHash:h.leafHash})));return tapKeySig&&this.data.updateInput(inputIndex,{tapKeySig}),tapScriptSig.length&&this.data.updateInput(inputIndex,{tapScriptSig}),this}signInputAsync(inputIndex,keyPair,sighashTypes){return Promise.resolve().then((()=>{if(!keyPair||!keyPair.publicKey)throw new Error("Need Signer to sign input");const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex);return(0,bip371_1.isTaprootInput)(input)?this._signTaprootInputAsync(inputIndex,input,keyPair,void 0,sighashTypes):this._signInputAsync(inputIndex,keyPair,sighashTypes)}))}signTaprootInputAsync(inputIndex,keyPair,tapLeafHash,sighashTypes){return Promise.resolve().then((()=>{if(!keyPair||!keyPair.publicKey)throw new Error("Need Signer to sign input");const input=(0,utils_1.checkForInput)(this.data.inputs,inputIndex);if((0,bip371_1.isTaprootInput)(input))return this._signTaprootInputAsync(inputIndex,input,keyPair,tapLeafHash,sighashTypes);throw new Error(`Input #${inputIndex} is not of type Taproot.`)}))}_signInputAsync(inputIndex,keyPair,sighashTypes=[transaction_1.Transaction.SIGHASH_ALL]){const{hash,sighashType}=getHashAndSighashType(this.data.inputs,inputIndex,keyPair.publicKey,this.__CACHE,sighashTypes);return Promise.resolve(keyPair.sign(hash)).then((signature=>{const partialSig=[{pubkey:keyPair.publicKey,signature:bscript.signature.encode(signature,sighashType)}];this.data.updateInput(inputIndex,{partialSig})}))}async _signTaprootInputAsync(inputIndex,input,keyPair,tapLeafHash,sighashTypes=[transaction_1.Transaction.SIGHASH_DEFAULT]){const hashesForSig=this.checkTaprootHashesForSig(inputIndex,input,keyPair,tapLeafHash,sighashTypes),signaturePromises=[],tapKeyHash=hashesForSig.filter((h=>!h.leafHash))[0];if(tapKeyHash){const tapKeySigPromise=Promise.resolve(keyPair.signSchnorr(tapKeyHash.hash)).then((sig=>({tapKeySig:(0,bip371_1.serializeTaprootSignature)(sig,input.sighashType)})));signaturePromises.push(tapKeySigPromise)}const tapScriptHashes=hashesForSig.filter((h=>!!h.leafHash));if(tapScriptHashes.length){const tapScriptSigPromises=tapScriptHashes.map((tsh=>Promise.resolve(keyPair.signSchnorr(tsh.hash)).then((signature=>({tapScriptSig:[{pubkey:(0,bip371_1.toXOnly)(keyPair.publicKey),signature:(0,bip371_1.serializeTaprootSignature)(signature,input.sighashType),leafHash:tsh.leafHash}]})))));signaturePromises.push(...tapScriptSigPromises)}return Promise.all(signaturePromises).then((results=>{results.forEach((v=>this.data.updateInput(inputIndex,v)))}))}checkTaprootHashesForSig(inputIndex,input,keyPair,tapLeafHashToSign,allowedSighashTypes){if("function"!=typeof keyPair.signSchnorr)throw new Error(`Need Schnorr Signer to sign taproot input #${inputIndex}.`);const hashesForSig=getTaprootHashesForSig(inputIndex,input,this.data.inputs,keyPair.publicKey,this.__CACHE,tapLeafHashToSign,allowedSighashTypes);if(!hashesForSig||!hashesForSig.length)throw new Error(`Can not sign for input #${inputIndex} with the key ${keyPair.publicKey.toString("hex")}`);return hashesForSig}toBuffer(){return checkCache(this.__CACHE),this.data.toBuffer()}toHex(){return checkCache(this.__CACHE),this.data.toHex()}toBase64(){return checkCache(this.__CACHE),this.data.toBase64()}updateGlobal(updateData){return this.data.updateGlobal(updateData),this}updateInput(inputIndex,updateData){return updateData.witnessScript&&checkInvalidP2WSH(updateData.witnessScript),(0,bip371_1.checkTaprootInputFields)(this.data.inputs[inputIndex],updateData,"updateInput"),this.data.updateInput(inputIndex,updateData),updateData.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,this.data.inputs[inputIndex],inputIndex),this}updateOutput(outputIndex,updateData){const outputData=this.data.outputs[outputIndex];return(0,bip371_1.checkTaprootOutputFields)(outputData,updateData,"updateOutput"),this.data.updateOutput(outputIndex,updateData),this}addUnknownKeyValToGlobal(keyVal){return this.data.addUnknownKeyValToGlobal(keyVal),this}addUnknownKeyValToInput(inputIndex,keyVal){return this.data.addUnknownKeyValToInput(inputIndex,keyVal),this}addUnknownKeyValToOutput(outputIndex,keyVal){return this.data.addUnknownKeyValToOutput(outputIndex,keyVal),this}clearFinalizedInput(inputIndex){return this.data.clearFinalizedInput(inputIndex),this}}exports.Psbt=Psbt;const transactionFromBuffer=buffer=>new PsbtTransaction(buffer);class PsbtTransaction{constructor(buffer=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=transaction_1.Transaction.fromBuffer(buffer),function checkTxEmpty(tx){if(!tx.ins.every((input=>input.script&&0===input.script.length&&input.witness&&0===input.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(input){if(void 0===input.hash||void 0===input.index||!Buffer.isBuffer(input.hash)&&"string"!=typeof input.hash||"number"!=typeof input.index)throw new Error("Error adding input.");const hash="string"==typeof input.hash?(0,bufferutils_1.reverseBuffer)(Buffer.from(input.hash,"hex")):input.hash;this.tx.addInput(hash,input.index,input.sequence)}addOutput(output){if(void 0===output.script||void 0===output.value||!Buffer.isBuffer(output.script)||"number"!=typeof output.value)throw new Error("Error adding output.");this.tx.addOutput(output.script,output.value)}toBuffer(){return this.tx.toBuffer()}}function checkCache(cache){if(!1!==cache.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function hasSigs(neededSigs,partialSig,pubkeys){if(!partialSig)return!1;let sigs;if(sigs=pubkeys?pubkeys.map((pkey=>{const pubkey=function compressPubkey(pubkey){if(65===pubkey.length){const parity=1&pubkey[64],newKey=pubkey.slice(0,33);return newKey[0]=2|parity,newKey}return pubkey.slice()}(pkey);return partialSig.find((pSig=>pSig.pubkey.equals(pubkey)))})).filter((v=>!!v)):partialSig,sigs.length>neededSigs)throw new Error("Too many signatures");return sigs.length===neededSigs}function isFinalized(input){return!!input.finalScriptSig||!!input.finalScriptWitness}function bip32DerivationIsMine(root){return d=>!!d.masterFingerprint.equals(root.fingerprint)&&!!root.derivePath(d.path).publicKey.equals(d.pubkey)}function check32Bit(num){if("number"!=typeof num||num!==Math.floor(num)||num>4294967295||num<0)throw new Error("Invalid 32 bit integer")}function checkInputsForPartialSig(inputs,action){inputs.forEach((input=>{if((0,bip371_1.isTaprootInput)(input)?(0,bip371_1.checkTaprootInputForSigs)(input,action):(0,psbtutils_1.checkInputForSig)(input,action))throw new Error("Can not modify transaction, signatures exist.")}))}function checkScriptForPubkey(pubkey,script,action){if(!(0,psbtutils_1.pubkeyInScript)(pubkey,script))throw new Error(`Can not ${action} for this input with the key ${pubkey.toString("hex")}`)}function checkTxInputCache(cache,input){const key=(0,bufferutils_1.reverseBuffer)(Buffer.from(input.hash)).toString("hex")+":"+input.index;if(cache.__TX_IN_CACHE[key])throw new Error("Duplicate input detected.");cache.__TX_IN_CACHE[key]=1}function scriptCheckerFactory(payment,paymentScriptName){return(inputIndex,scriptPubKey,redeemScript,ioType)=>{const redeemScriptOutput=payment({redeem:{output:redeemScript}}).output;if(!scriptPubKey.equals(redeemScriptOutput))throw new Error(`${paymentScriptName} for ${ioType} #${inputIndex} doesn't match the scriptPubKey in the prevout`)}}const checkRedeemScript=scriptCheckerFactory(payments.p2sh,"Redeem script"),checkWitnessScript=scriptCheckerFactory(payments.p2wsh,"Witness script");function getTxCacheValue(key,name,inputs,c){if(!inputs.every(isFinalized))throw new Error(`PSBT must be finalized to calculate ${name}`);if("__FEE_RATE"===key&&c.__FEE_RATE)return c.__FEE_RATE;if("__FEE"===key&&c.__FEE)return c.__FEE;let tx,mustFinalize=!0;return c.__EXTRACTED_TX?(tx=c.__EXTRACTED_TX,mustFinalize=!1):tx=c.__TX.clone(),inputFinalizeGetAmts(inputs,tx,c,mustFinalize),"__FEE_RATE"===key?c.__FEE_RATE:"__FEE"===key?c.__FEE:void 0}function getFinalScripts(inputIndex,input,script,isSegwit,isP2SH,isP2WSH){const scriptType=classifyScript(script);if(!function canFinalize(input,script,scriptType){switch(scriptType){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hasSigs(1,input.partialSig);case"multisig":const p2ms=payments.p2ms({output:script});return hasSigs(p2ms.m,input.partialSig,p2ms.pubkeys);default:return!1}}(input,script,scriptType))throw new Error(`Can not finalize input #${inputIndex}`);return function prepareFinalScripts(script,scriptType,partialSig,isSegwit,isP2SH,isP2WSH){let finalScriptSig,finalScriptWitness;const payment=function getPayment(script,scriptType,partialSig){let payment;switch(scriptType){case"multisig":const sigs=function getSortedSigs(script,partialSig){const p2ms=payments.p2ms({output:script});return p2ms.pubkeys.map((pk=>(partialSig.filter((ps=>ps.pubkey.equals(pk)))[0]||{}).signature)).filter((v=>!!v))}(script,partialSig);payment=payments.p2ms({output:script,signatures:sigs});break;case"pubkey":payment=payments.p2pk({output:script,signature:partialSig[0].signature});break;case"pubkeyhash":payment=payments.p2pkh({output:script,pubkey:partialSig[0].pubkey,signature:partialSig[0].signature});break;case"witnesspubkeyhash":payment=payments.p2wpkh({output:script,pubkey:partialSig[0].pubkey,signature:partialSig[0].signature})}return payment}(script,scriptType,partialSig),p2wsh=isP2WSH?payments.p2wsh({redeem:payment}):null,p2sh=isP2SH?payments.p2sh({redeem:p2wsh||payment}):null;isSegwit?(finalScriptWitness=p2wsh?(0,psbtutils_1.witnessStackToScriptWitness)(p2wsh.witness):(0,psbtutils_1.witnessStackToScriptWitness)(payment.witness),p2sh&&(finalScriptSig=p2sh.input)):finalScriptSig=p2sh?p2sh.input:payment.input;return{finalScriptSig,finalScriptWitness}}(script,scriptType,input.partialSig,isSegwit,isP2SH,isP2WSH)}function getHashAndSighashType(inputs,inputIndex,pubkey,cache,sighashTypes){const input=(0,utils_1.checkForInput)(inputs,inputIndex),{hash,sighashType,script}=getHashForSig(inputIndex,input,cache,!1,sighashTypes);return checkScriptForPubkey(pubkey,script,"sign"),{hash,sighashType}}function getHashForSig(inputIndex,input,cache,forValidate,sighashTypes){const unsignedTx=cache.__TX,sighashType=input.sighashType||transaction_1.Transaction.SIGHASH_ALL;let hash,prevout;if(checkSighashTypeAllowed(sighashType,sighashTypes),input.nonWitnessUtxo){const nonWitnessUtxoTx=nonWitnessUtxoTxFromCache(cache,input,inputIndex),prevoutHash=unsignedTx.ins[inputIndex].hash,utxoHash=nonWitnessUtxoTx.getHash();if(!prevoutHash.equals(utxoHash))throw new Error(`Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`);const prevoutIndex=unsignedTx.ins[inputIndex].index;prevout=nonWitnessUtxoTx.outs[prevoutIndex]}else{if(!input.witnessUtxo)throw new Error("Need a Utxo input item for signing");prevout=input.witnessUtxo}const{meaningfulScript,type}=getMeaningfulScript(prevout.script,inputIndex,"input",input.redeemScript,input.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(type)>=0)hash=unsignedTx.hashForWitnessV0(inputIndex,meaningfulScript,prevout.value,sighashType);else if((0,psbtutils_1.isP2WPKH)(meaningfulScript)){const signingScript=payments.p2pkh({hash:meaningfulScript.slice(2)}).output;hash=unsignedTx.hashForWitnessV0(inputIndex,signingScript,prevout.value,sighashType)}else{if(void 0===input.nonWitnessUtxo&&!1===cache.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${inputIndex} has witnessUtxo but non-segwit script: ${meaningfulScript.toString("hex")}`);forValidate||!1===cache.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),hash=unsignedTx.hashForSignature(inputIndex,meaningfulScript,sighashType)}return{script:meaningfulScript,sighashType,hash}}function getPrevoutTaprootKey(inputIndex,input,cache){const{script}=getScriptAndAmountFromUtxo(inputIndex,input,cache);return(0,psbtutils_1.isP2TR)(script)?script.subarray(2,34):null}function trimTaprootSig(signature){return 64===signature.length?signature:signature.subarray(0,64)}function getTaprootHashesForSig(inputIndex,input,inputs,pubkey,cache,tapLeafHashToSign,allowedSighashTypes){const unsignedTx=cache.__TX,sighashType=input.sighashType||transaction_1.Transaction.SIGHASH_DEFAULT;checkSighashTypeAllowed(sighashType,allowedSighashTypes);const prevOuts=inputs.map(((i,index)=>getScriptAndAmountFromUtxo(index,i,cache))),signingScripts=prevOuts.map((o=>o.script)),values=prevOuts.map((o=>o.value)),hashes=[];if(input.tapInternalKey&&!tapLeafHashToSign){const outputKey=getPrevoutTaprootKey(inputIndex,input,cache)||Buffer.from([]);if((0,bip371_1.toXOnly)(pubkey).equals(outputKey)){const tapKeyHash=unsignedTx.hashForWitnessV1(inputIndex,signingScripts,values,sighashType);hashes.push({pubkey,hash:tapKeyHash})}}const tapLeafHashes=(input.tapLeafScript||[]).filter((tapLeaf=>(0,psbtutils_1.pubkeyInScript)(pubkey,tapLeaf.script))).map((tapLeaf=>{const hash=(0,bip341_1.tapleafHash)({output:tapLeaf.script,version:tapLeaf.leafVersion});return Object.assign({hash},tapLeaf)})).filter((tapLeaf=>!tapLeafHashToSign||tapLeafHashToSign.equals(tapLeaf.hash))).map((tapLeaf=>{const tapScriptHash=unsignedTx.hashForWitnessV1(inputIndex,signingScripts,values,transaction_1.Transaction.SIGHASH_DEFAULT,tapLeaf.hash);return{pubkey,hash:tapScriptHash,leafHash:tapLeaf.hash}}));return hashes.concat(tapLeafHashes)}function checkSighashTypeAllowed(sighashType,sighashTypes){if(sighashTypes&&sighashTypes.indexOf(sighashType)<0){const str=function sighashTypeToString(sighashType){let text=sighashType&transaction_1.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&sighashType){case transaction_1.Transaction.SIGHASH_ALL:text+="SIGHASH_ALL";break;case transaction_1.Transaction.SIGHASH_SINGLE:text+="SIGHASH_SINGLE";break;case transaction_1.Transaction.SIGHASH_NONE:text+="SIGHASH_NONE"}return text}(sighashType);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${str}`)}}function getSignersFromHD(inputIndex,inputs,hdKeyPair){const input=(0,utils_1.checkForInput)(inputs,inputIndex);if(!input.bip32Derivation||0===input.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const myDerivations=input.bip32Derivation.map((bipDv=>bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)?bipDv:void 0)).filter((v=>!!v));if(0===myDerivations.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return myDerivations.map((bipDv=>{const node=hdKeyPair.derivePath(bipDv.path);if(!bipDv.pubkey.equals(node.publicKey))throw new Error("pubkey did not match bip32Derivation");return node}))}function scriptWitnessToWitnessStack(buffer){let offset=0;function readVarInt(){const vi=varuint.decode(buffer,offset);return offset+=varuint.decode.bytes,vi}function readVarSlice(){return function readSlice(n){return offset+=n,buffer.slice(offset-n,offset)}(readVarInt())}return function readVector(){const count=readVarInt(),vector=[];for(let i=0;i<count;i++)vector.push(readVarSlice());return vector}()}function addNonWitnessTxCache(cache,input,inputIndex){cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex]=input.nonWitnessUtxo;const tx=transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex]=tx;const self=cache,selfIndex=inputIndex;delete input.nonWitnessUtxo,Object.defineProperty(input,"nonWitnessUtxo",{enumerable:!0,get(){const buf=self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex],txCache=self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];if(void 0!==buf)return buf;{const newBuf=txCache.toBuffer();return self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex]=newBuf,newBuf}},set(data){self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex]=data}})}function inputFinalizeGetAmts(inputs,tx,cache,mustFinalize){let inputAmount=0;inputs.forEach(((input,idx)=>{if(mustFinalize&&input.finalScriptSig&&(tx.ins[idx].script=input.finalScriptSig),mustFinalize&&input.finalScriptWitness&&(tx.ins[idx].witness=scriptWitnessToWitnessStack(input.finalScriptWitness)),input.witnessUtxo)inputAmount+=input.witnessUtxo.value;else if(input.nonWitnessUtxo){const nwTx=nonWitnessUtxoTxFromCache(cache,input,idx),vout=tx.ins[idx].index,out=nwTx.outs[vout];inputAmount+=out.value}}));const outputAmount=tx.outs.reduce(((total,o)=>total+o.value),0),fee=inputAmount-outputAmount;if(fee<0)throw new Error("Outputs are spending more than Inputs");const bytes=tx.virtualSize();cache.__FEE=fee,cache.__EXTRACTED_TX=tx,cache.__FEE_RATE=Math.floor(fee/bytes)}function nonWitnessUtxoTxFromCache(cache,input,inputIndex){const c=cache.__NON_WITNESS_UTXO_TX_CACHE;return c[inputIndex]||addNonWitnessTxCache(cache,input,inputIndex),c[inputIndex]}function getScriptFromUtxo(inputIndex,input,cache){const{script}=getScriptAndAmountFromUtxo(inputIndex,input,cache);return script}function getScriptAndAmountFromUtxo(inputIndex,input,cache){if(void 0!==input.witnessUtxo)return{script:input.witnessUtxo.script,value:input.witnessUtxo.value};if(void 0!==input.nonWitnessUtxo){const o=nonWitnessUtxoTxFromCache(cache,input,inputIndex).outs[cache.__TX.ins[inputIndex].index];return{script:o.script,value:o.value}}throw new Error("Can't find pubkey in input without Utxo data")}function isPubkeyLike(buf){return 33===buf.length&&bscript.isCanonicalPubKey(buf)}function getMeaningfulScript(script,index,ioType,redeemScript,witnessScript){const isP2SH=(0,psbtutils_1.isP2SHScript)(script),isP2SHP2WSH=isP2SH&&redeemScript&&(0,psbtutils_1.isP2WSHScript)(redeemScript),isP2WSH=(0,psbtutils_1.isP2WSHScript)(script);if(isP2SH&&void 0===redeemScript)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((isP2WSH||isP2SHP2WSH)&&void 0===witnessScript)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let meaningfulScript;return isP2SHP2WSH?(meaningfulScript=witnessScript,checkRedeemScript(index,script,redeemScript,ioType),checkWitnessScript(index,redeemScript,witnessScript,ioType),checkInvalidP2WSH(meaningfulScript)):isP2WSH?(meaningfulScript=witnessScript,checkWitnessScript(index,script,witnessScript,ioType),checkInvalidP2WSH(meaningfulScript)):isP2SH?(meaningfulScript=redeemScript,checkRedeemScript(index,script,redeemScript,ioType)):meaningfulScript=script,{meaningfulScript,type:isP2SHP2WSH?"p2sh-p2wsh":isP2SH?"p2sh":isP2WSH?"p2wsh":"raw"}}function checkInvalidP2WSH(script){if((0,psbtutils_1.isP2WPKH)(script)||(0,psbtutils_1.isP2SHScript)(script))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function classifyScript(script){return(0,psbtutils_1.isP2WPKH)(script)?"witnesspubkeyhash":(0,psbtutils_1.isP2PKH)(script)?"pubkeyhash":(0,psbtutils_1.isP2MS)(script)?"multisig":(0,psbtutils_1.isP2PK)(script)?"pubkey":"nonstandard"}function range(n){return[...Array(n).keys()]}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt/bip371.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkTaprootInputForSigs=exports.tapTreeFromList=exports.tapTreeToList=exports.tweakInternalPubKey=exports.checkTaprootOutputFields=exports.checkTaprootInputFields=exports.isTaprootOutput=exports.isTaprootInput=exports.serializeTaprootSignature=exports.tapScriptFinalizer=exports.toXOnly=void 0;const types_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),transaction_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/transaction.js"),psbtutils_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt/psbtutils.js"),bip341_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/bip341.js"),payments_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/index.js"),psbtutils_2=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt/psbtutils.js");function isTaprootInput(input){return input&&!!(input.tapInternalKey||input.tapMerkleRoot||input.tapLeafScript&&input.tapLeafScript.length||input.tapBip32Derivation&&input.tapBip32Derivation.length||input.witnessUtxo&&(0,psbtutils_1.isP2TR)(input.witnessUtxo.script))}function isTaprootOutput(output,script){return output&&!!(output.tapInternalKey||output.tapTree||output.tapBip32Derivation&&output.tapBip32Derivation.length||script&&(0,psbtutils_1.isP2TR)(script))}function tapTreeFromList(leaves=[]){return 1===leaves.length&&0===leaves[0].depth?{output:leaves[0].script,version:leaves[0].leafVersion}:function instertLeavesInTree(leaves){let tree;for(const leaf of leaves)if(tree=instertLeafInTree(leaf,tree),!tree)throw new Error("No room left to insert tapleaf in tree");return tree}(leaves)}function decodeSchnorrSignature(signature){return{signature:signature.slice(0,64),hashType:signature.slice(64)[0]||transaction_1.Transaction.SIGHASH_DEFAULT}}function _tapTreeToList(tree,leaves=[],depth=0){if(depth>bip341_1.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return tree?(0,types_1.isTapleaf)(tree)?(leaves.push({depth,leafVersion:tree.version||bip341_1.LEAF_VERSION_TAPSCRIPT,script:tree.output}),leaves):(tree[0]&&_tapTreeToList(tree[0],leaves,depth+1),tree[1]&&_tapTreeToList(tree[1],leaves,depth+1),leaves):[]}function instertLeafInTree(leaf,tree,depth=0){if(depth>bip341_1.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(leaf.depth===depth)return tree?void 0:{output:leaf.script,version:leaf.leafVersion};if((0,types_1.isTapleaf)(tree))return;const leftSide=instertLeafInTree(leaf,tree&&tree[0],depth+1);if(leftSide)return[leftSide,tree&&tree[1]];const rightSide=instertLeafInTree(leaf,tree&&tree[1],depth+1);return rightSide?[tree&&tree[0],rightSide]:void 0}function isTapLeafInTree(tapLeaf,merkleRoot){if(!merkleRoot)return!0;const leafHash=(0,bip341_1.tapleafHash)({output:tapLeaf.script,version:tapLeaf.leafVersion});return(0,bip341_1.rootHashFromPath)(tapLeaf.controlBlock,leafHash).equals(merkleRoot)}function hasNonTaprootFields(io){return io&&!!(io.redeemScript||io.witnessScript||io.bip32Derivation&&io.bip32Derivation.length)}exports.toXOnly=pubKey=>32===pubKey.length?pubKey:pubKey.slice(1,33),exports.tapScriptFinalizer=function tapScriptFinalizer(inputIndex,input,tapLeafHashToFinalize){const tapLeaf=function findTapLeafToFinalize(input,inputIndex,leafHashToFinalize){if(!input.tapScriptSig||!input.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${inputIndex}. No tapleaf script signature provided.`);const tapLeaf=(input.tapLeafScript||[]).sort(((a,b)=>a.controlBlock.length-b.controlBlock.length)).find((leaf=>function canFinalizeLeaf(leaf,tapScriptSig,hash){const leafHash=(0,bip341_1.tapleafHash)({output:leaf.script,version:leaf.leafVersion});return(!hash||hash.equals(leafHash))&&void 0!==tapScriptSig.find((tss=>tss.leafHash.equals(leafHash)))}(leaf,input.tapScriptSig,leafHashToFinalize)));if(!tapLeaf)throw new Error(`Can not finalize taproot input #${inputIndex}. Signature for tapleaf script not found.`);return tapLeaf}(input,inputIndex,tapLeafHashToFinalize);try{const sigs=function sortSignatures(input,tapLeaf){const leafHash=(0,bip341_1.tapleafHash)({output:tapLeaf.script,version:tapLeaf.leafVersion});return(input.tapScriptSig||[]).filter((tss=>tss.leafHash.equals(leafHash))).map((tss=>function addPubkeyPositionInScript(script,tss){return Object.assign({positionInScript:(0,psbtutils_1.pubkeyPositionInScript)(tss.pubkey,script)},tss)}(tapLeaf.script,tss))).sort(((t1,t2)=>t2.positionInScript-t1.positionInScript)).map((t=>t.signature))}(input,tapLeaf),witness=sigs.concat(tapLeaf.script).concat(tapLeaf.controlBlock);return{finalScriptWitness:(0,psbtutils_1.witnessStackToScriptWitness)(witness)}}catch(err){throw new Error(`Can not finalize taproot input #${inputIndex}: ${err}`)}},exports.serializeTaprootSignature=function serializeTaprootSignature(sig,sighashType){const sighashTypeByte=sighashType?Buffer.from([sighashType]):Buffer.from([]);return Buffer.concat([sig,sighashTypeByte])},exports.isTaprootInput=isTaprootInput,exports.isTaprootOutput=isTaprootOutput,exports.checkTaprootInputFields=function checkTaprootInputFields(inputData,newInputData,action){!function checkMixedTaprootAndNonTaprootInputFields(inputData,newInputData,action){const isBadTaprootUpdate=isTaprootInput(inputData)&&hasNonTaprootFields(newInputData),isBadNonTaprootUpdate=hasNonTaprootFields(inputData)&&isTaprootInput(newInputData),hasMixedFields=inputData===newInputData&&isTaprootInput(newInputData)&&hasNonTaprootFields(newInputData);if(isBadTaprootUpdate||isBadNonTaprootUpdate||hasMixedFields)throw new Error(`Invalid arguments for Psbt.${action}. Cannot use both taproot and non-taproot fields.`)}(inputData,newInputData,action),function checkIfTapLeafInTree(inputData,newInputData,action){if(newInputData.tapMerkleRoot){const newLeafsInTree=(newInputData.tapLeafScript||[]).every((l=>isTapLeafInTree(l,newInputData.tapMerkleRoot))),oldLeafsInTree=(inputData.tapLeafScript||[]).every((l=>isTapLeafInTree(l,newInputData.tapMerkleRoot)));if(!newLeafsInTree||!oldLeafsInTree)throw new Error(`Invalid arguments for Psbt.${action}. Tapleaf not part of taptree.`)}else if(inputData.tapMerkleRoot){if(!(newInputData.tapLeafScript||[]).every((l=>isTapLeafInTree(l,inputData.tapMerkleRoot))))throw new Error(`Invalid arguments for Psbt.${action}. Tapleaf not part of taptree.`)}}(inputData,newInputData,action)},exports.checkTaprootOutputFields=function checkTaprootOutputFields(outputData,newOutputData,action){!function checkMixedTaprootAndNonTaprootOutputFields(inputData,newInputData,action){const isBadTaprootUpdate=isTaprootOutput(inputData)&&hasNonTaprootFields(newInputData),isBadNonTaprootUpdate=hasNonTaprootFields(inputData)&&isTaprootOutput(newInputData),hasMixedFields=inputData===newInputData&&isTaprootOutput(newInputData)&&hasNonTaprootFields(newInputData);if(isBadTaprootUpdate||isBadNonTaprootUpdate||hasMixedFields)throw new Error(`Invalid arguments for Psbt.${action}. Cannot use both taproot and non-taproot fields.`)}(outputData,newOutputData,action),function checkTaprootScriptPubkey(outputData,newOutputData){if(!newOutputData.tapTree&&!newOutputData.tapInternalKey)return;const tapInternalKey=newOutputData.tapInternalKey||outputData.tapInternalKey,tapTree=newOutputData.tapTree||outputData.tapTree;if(tapInternalKey){const{script:scriptPubkey}=outputData,script=function getTaprootScripPubkey(tapInternalKey,tapTree){const scriptTree=tapTree&&tapTreeFromList(tapTree.leaves),{output}=(0,payments_1.p2tr)({internalPubkey:tapInternalKey,scriptTree});return output}(tapInternalKey,tapTree);if(scriptPubkey&&!scriptPubkey.equals(script))throw new Error("Error adding output. Script or address missmatch.")}}(outputData,newOutputData)},exports.tweakInternalPubKey=function tweakInternalPubKey(inputIndex,input){const tapInternalKey=input.tapInternalKey,outputKey=tapInternalKey&&(0,bip341_1.tweakKey)(tapInternalKey,input.tapMerkleRoot);if(!outputKey)throw new Error(`Cannot tweak tap internal key for input #${inputIndex}. Public key: ${tapInternalKey&&tapInternalKey.toString("hex")}`);return outputKey.x},exports.tapTreeToList=function tapTreeToList(tree){if(!(0,types_1.isTaptree)(tree))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return _tapTreeToList(tree)},exports.tapTreeFromList=tapTreeFromList,exports.checkTaprootInputForSigs=function checkTaprootInputForSigs(input,action){return function extractTaprootSigs(input){const sigs=[];input.tapKeySig&&sigs.push(input.tapKeySig);input.tapScriptSig&&sigs.push(...input.tapScriptSig.map((s=>s.signature)));if(!sigs.length){const finalTapKeySig=function getTapKeySigFromWithness(finalScriptWitness){if(!finalScriptWitness)return;const witness=finalScriptWitness.slice(2);if(64===witness.length||65===witness.length)return witness}(input.finalScriptWitness);finalTapKeySig&&sigs.push(finalTapKeySig)}return sigs}(input).some((sig=>(0,psbtutils_2.signatureBlocksAction)(sig,decodeSchnorrSignature,action)))}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/psbt/psbtutils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.signatureBlocksAction=exports.checkInputForSig=exports.pubkeyInScript=exports.pubkeyPositionInScript=exports.witnessStackToScriptWitness=exports.isP2TR=exports.isP2SHScript=exports.isP2WSHScript=exports.isP2WPKH=exports.isP2PKH=exports.isP2PK=exports.isP2MS=void 0;const varuint=__webpack_require__("./node_modules/.pnpm/bip174@2.1.1/node_modules/bip174/src/lib/converter/varint.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),transaction_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/transaction.js"),crypto_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),payments=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/payments/index.js");function isPaymentFactory(payment){return script=>{try{return payment({output:script}),!0}catch(err){return!1}}}function pubkeyPositionInScript(pubkey,script){const pubkeyHash=(0,crypto_1.hash160)(pubkey),pubkeyXOnly=pubkey.slice(1,33),decompiled=bscript.decompile(script);if(null===decompiled)throw new Error("Unknown script error");return decompiled.findIndex((element=>"number"!=typeof element&&(element.equals(pubkey)||element.equals(pubkeyHash)||element.equals(pubkeyXOnly))))}function signatureBlocksAction(signature,signatureDecodeFn,action){const{hashType}=signatureDecodeFn(signature),whitelist=[];hashType&transaction_1.Transaction.SIGHASH_ANYONECANPAY&&whitelist.push("addInput");switch(31&hashType){case transaction_1.Transaction.SIGHASH_ALL:break;case transaction_1.Transaction.SIGHASH_SINGLE:case transaction_1.Transaction.SIGHASH_NONE:whitelist.push("addOutput"),whitelist.push("setInputSequence")}return-1===whitelist.indexOf(action)}exports.isP2MS=isPaymentFactory(payments.p2ms),exports.isP2PK=isPaymentFactory(payments.p2pk),exports.isP2PKH=isPaymentFactory(payments.p2pkh),exports.isP2WPKH=isPaymentFactory(payments.p2wpkh),exports.isP2WSHScript=isPaymentFactory(payments.p2wsh),exports.isP2SHScript=isPaymentFactory(payments.p2sh),exports.isP2TR=isPaymentFactory(payments.p2tr),exports.witnessStackToScriptWitness=function witnessStackToScriptWitness(witness){let buffer=Buffer.allocUnsafe(0);function writeVarInt(i){const currentLen=buffer.length,varintLen=varuint.encodingLength(i);buffer=Buffer.concat([buffer,Buffer.allocUnsafe(varintLen)]),varuint.encode(i,buffer,currentLen)}function writeVarSlice(slice){writeVarInt(slice.length),function writeSlice(slice){buffer=Buffer.concat([buffer,Buffer.from(slice)])}(slice)}return function writeVector(vector){writeVarInt(vector.length),vector.forEach(writeVarSlice)}(witness),buffer},exports.pubkeyPositionInScript=pubkeyPositionInScript,exports.pubkeyInScript=function pubkeyInScript(pubkey,script){return-1!==pubkeyPositionInScript(pubkey,script)},exports.checkInputForSig=function checkInputForSig(input,action){return function extractPartialSigs(input){let pSigs=[];if(0===(input.partialSig||[]).length){if(!input.finalScriptSig&&!input.finalScriptWitness)return[];pSigs=function getPsigsFromInputFinalScripts(input){const scriptItems=input.finalScriptSig&&bscript.decompile(input.finalScriptSig)||[],witnessItems=input.finalScriptWitness&&bscript.decompile(input.finalScriptWitness)||[];return scriptItems.concat(witnessItems).filter((item=>Buffer.isBuffer(item)&&bscript.isCanonicalScriptSignature(item))).map((sig=>({signature:sig})))}(input)}else pSigs=input.partialSig;return pSigs.map((p=>p.signature))}(input).some((pSig=>signatureBlocksAction(pSig,bscript.signature.decode,action)))},exports.signatureBlocksAction=signatureBlocksAction},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/push_data.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=exports.encode=exports.encodingLength=void 0;const ops_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ops.js");function encodingLength(i){return i<ops_1.OPS.OP_PUSHDATA1?1:i<=255?2:i<=65535?3:5}exports.encodingLength=encodingLength,exports.encode=function encode(buffer,num,offset){const size=encodingLength(num);return 1===size?buffer.writeUInt8(num,offset):2===size?(buffer.writeUInt8(ops_1.OPS.OP_PUSHDATA1,offset),buffer.writeUInt8(num,offset+1)):3===size?(buffer.writeUInt8(ops_1.OPS.OP_PUSHDATA2,offset),buffer.writeUInt16LE(num,offset+1)):(buffer.writeUInt8(ops_1.OPS.OP_PUSHDATA4,offset),buffer.writeUInt32LE(num,offset+1)),size},exports.decode=function decode(buffer,offset){const opcode=buffer.readUInt8(offset);let num,size;if(opcode<ops_1.OPS.OP_PUSHDATA1)num=opcode,size=1;else if(opcode===ops_1.OPS.OP_PUSHDATA1){if(offset+2>buffer.length)return null;num=buffer.readUInt8(offset+1),size=2}else if(opcode===ops_1.OPS.OP_PUSHDATA2){if(offset+3>buffer.length)return null;num=buffer.readUInt16LE(offset+1),size=3}else{if(offset+5>buffer.length)return null;if(opcode!==ops_1.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");num=buffer.readUInt32LE(offset+1),size=5}return{opcode,number:num,size}}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.signature=exports.number=exports.isCanonicalScriptSignature=exports.isDefinedHashType=exports.isCanonicalPubKey=exports.toStack=exports.fromASM=exports.toASM=exports.decompile=exports.compile=exports.countNonPushOnlyOPs=exports.isPushOnly=exports.OPS=void 0;const bip66=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bip66.js"),ops_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/ops.js");Object.defineProperty(exports,"OPS",{enumerable:!0,get:function(){return ops_1.OPS}});const pushdata=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/push_data.js"),scriptNumber=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script_number.js"),scriptSignature=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script_signature.js"),types=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),{typeforce}=types,OP_INT_BASE=ops_1.OPS.OP_RESERVED;function isPushOnlyChunk(value){return types.Buffer(value)||function isOPInt(value){return types.Number(value)&&(value===ops_1.OPS.OP_0||value>=ops_1.OPS.OP_1&&value<=ops_1.OPS.OP_16||value===ops_1.OPS.OP_1NEGATE)}(value)}function isPushOnly(value){return types.Array(value)&&value.every(isPushOnlyChunk)}function asMinimalOP(buffer){return 0===buffer.length?ops_1.OPS.OP_0:1===buffer.length?buffer[0]>=1&&buffer[0]<=16?OP_INT_BASE+buffer[0]:129===buffer[0]?ops_1.OPS.OP_1NEGATE:void 0:void 0}function chunksIsBuffer(buf){return Buffer.isBuffer(buf)}function singleChunkIsBuffer(buf){return Buffer.isBuffer(buf)}function compile(chunks){if(chunksIsBuffer(chunks))return chunks;typeforce(types.Array,chunks);const bufferSize=chunks.reduce(((accum,chunk)=>singleChunkIsBuffer(chunk)?1===chunk.length&&void 0!==asMinimalOP(chunk)?accum+1:accum+pushdata.encodingLength(chunk.length)+chunk.length:accum+1),0),buffer=Buffer.allocUnsafe(bufferSize);let offset=0;if(chunks.forEach((chunk=>{if(singleChunkIsBuffer(chunk)){const opcode=asMinimalOP(chunk);if(void 0!==opcode)return buffer.writeUInt8(opcode,offset),void(offset+=1);offset+=pushdata.encode(buffer,chunk.length,offset),chunk.copy(buffer,offset),offset+=chunk.length}else buffer.writeUInt8(chunk,offset),offset+=1})),offset!==buffer.length)throw new Error("Could not decode chunks");return buffer}function decompile(buffer){if(function chunksIsArray(buf){return types.Array(buf)}(buffer))return buffer;typeforce(types.Buffer,buffer);const chunks=[];let i=0;for(;i<buffer.length;){const opcode=buffer[i];if(opcode>ops_1.OPS.OP_0&&opcode<=ops_1.OPS.OP_PUSHDATA4){const d=pushdata.decode(buffer,i);if(null===d)return null;if(i+=d.size,i+d.number>buffer.length)return null;const data=buffer.slice(i,i+d.number);i+=d.number;const op=asMinimalOP(data);void 0!==op?chunks.push(op):chunks.push(data)}else chunks.push(opcode),i+=1}return chunks}function isDefinedHashType(hashType){const hashTypeMod=-129&hashType;return hashTypeMod>0&&hashTypeMod<4}exports.isPushOnly=isPushOnly,exports.countNonPushOnlyOPs=function countNonPushOnlyOPs(value){return value.length-value.filter(isPushOnlyChunk).length},exports.compile=compile,exports.decompile=decompile,exports.toASM=function toASM(chunks){return chunksIsBuffer(chunks)&&(chunks=decompile(chunks)),chunks.map((chunk=>{if(singleChunkIsBuffer(chunk)){const op=asMinimalOP(chunk);if(void 0===op)return chunk.toString("hex");chunk=op}return ops_1.REVERSE_OPS[chunk]})).join(" ")},exports.fromASM=function fromASM(asm){return typeforce(types.String,asm),compile(asm.split(" ").map((chunkStr=>void 0!==ops_1.OPS[chunkStr]?ops_1.OPS[chunkStr]:(typeforce(types.Hex,chunkStr),Buffer.from(chunkStr,"hex")))))},exports.toStack=function toStack(chunks){return chunks=decompile(chunks),typeforce(isPushOnly,chunks),chunks.map((op=>singleChunkIsBuffer(op)?op:op===ops_1.OPS.OP_0?Buffer.allocUnsafe(0):scriptNumber.encode(op-OP_INT_BASE)))},exports.isCanonicalPubKey=function isCanonicalPubKey(buffer){return types.isPoint(buffer)},exports.isDefinedHashType=isDefinedHashType,exports.isCanonicalScriptSignature=function isCanonicalScriptSignature(buffer){return!!Buffer.isBuffer(buffer)&&(!!isDefinedHashType(buffer[buffer.length-1])&&bip66.check(buffer.slice(0,-1)))},exports.number=scriptNumber,exports.signature=scriptSignature},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script_number.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=exports.decode=void 0,exports.decode=function decode(buffer,maxLength,minimal){maxLength=maxLength||4,minimal=void 0===minimal||minimal;const length=buffer.length;if(0===length)return 0;if(length>maxLength)throw new TypeError("Script number overflow");if(minimal&&0==(127&buffer[length-1])&&(length<=1||0==(128&buffer[length-2])))throw new Error("Non-minimally encoded script number");if(5===length){const a=buffer.readUInt32LE(0),b=buffer.readUInt8(4);return 128&b?-(4294967296*(-129&b)+a):4294967296*b+a}let result=0;for(let i=0;i<length;++i)result|=buffer[i]<<8*i;return 128&buffer[length-1]?-(result&~(128<<8*(length-1))):result},exports.encode=function encode(_number){let value=Math.abs(_number);const size=function scriptNumSize(i){return i>2147483647?5:i>8388607?4:i>32767?3:i>127?2:i>0?1:0}(value),buffer=Buffer.allocUnsafe(size),negative=_number<0;for(let i=0;i<size;++i)buffer.writeUInt8(255&value,i),value>>=8;return 128&buffer[size-1]?buffer.writeUInt8(negative?128:0,size-1):negative&&(buffer[size-1]|=128),buffer}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script_signature.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=exports.decode=void 0;const bip66=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bip66.js"),types=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),{typeforce}=types,ZERO=Buffer.alloc(1,0);function toDER(x){let i=0;for(;0===x[i];)++i;return i===x.length?ZERO:128&(x=x.slice(i))[0]?Buffer.concat([ZERO,x],1+x.length):x}function fromDER(x){0===x[0]&&(x=x.slice(1));const buffer=Buffer.alloc(32,0),bstart=Math.max(0,32-x.length);return x.copy(buffer,bstart),buffer}exports.decode=function decode(buffer){const hashType=buffer.readUInt8(buffer.length-1),hashTypeMod=-129&hashType;if(hashTypeMod<=0||hashTypeMod>=4)throw new Error("Invalid hashType "+hashType);const decoded=bip66.decode(buffer.slice(0,-1)),r=fromDER(decoded.r),s=fromDER(decoded.s);return{signature:Buffer.concat([r,s],64),hashType}},exports.encode=function encode(signature,hashType){typeforce({signature:types.BufferN(64),hashType:types.UInt8},{signature,hashType});const hashTypeMod=-129&hashType;if(hashTypeMod<=0||hashTypeMod>=4)throw new Error("Invalid hashType "+hashType);const hashTypeBuffer=Buffer.allocUnsafe(1);hashTypeBuffer.writeUInt8(hashType,0);const r=toDER(signature.slice(0,32)),s=toDER(signature.slice(32,64));return Buffer.concat([bip66.encode(r,s),hashTypeBuffer])}},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/transaction.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transaction=void 0;const bufferutils_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/bufferutils.js"),bcrypto=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/crypto.js"),bscript=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),script_1=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/script.js"),types=__webpack_require__("./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js"),{typeforce}=types;function varSliceSize(someScript){const length=someScript.length;return bufferutils_1.varuint.encodingLength(length)+length}const EMPTY_BUFFER=Buffer.allocUnsafe(0),EMPTY_WITNESS=[],ZERO=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),ONE=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),VALUE_UINT64_MAX=Buffer.from("ffffffffffffffff","hex"),BLANK_OUTPUT={script:EMPTY_BUFFER,valueBuffer:VALUE_UINT64_MAX};class Transaction{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(buffer,_NO_STRICT){const bufferReader=new bufferutils_1.BufferReader(buffer),tx=new Transaction;tx.version=bufferReader.readInt32();const marker=bufferReader.readUInt8(),flag=bufferReader.readUInt8();let hasWitnesses=!1;marker===Transaction.ADVANCED_TRANSACTION_MARKER&&flag===Transaction.ADVANCED_TRANSACTION_FLAG?hasWitnesses=!0:bufferReader.offset-=2;const vinLen=bufferReader.readVarInt();for(let i=0;i<vinLen;++i)tx.ins.push({hash:bufferReader.readSlice(32),index:bufferReader.readUInt32(),script:bufferReader.readVarSlice(),sequence:bufferReader.readUInt32(),witness:EMPTY_WITNESS});const voutLen=bufferReader.readVarInt();for(let i=0;i<voutLen;++i)tx.outs.push({value:bufferReader.readUInt64(),script:bufferReader.readVarSlice()});if(hasWitnesses){for(let i=0;i<vinLen;++i)tx.ins[i].witness=bufferReader.readVector();if(!tx.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(tx.locktime=bufferReader.readUInt32(),_NO_STRICT)return tx;if(bufferReader.offset!==buffer.length)throw new Error("Transaction has unexpected data");return tx}static fromHex(hex){return Transaction.fromBuffer(Buffer.from(hex,"hex"),!1)}static isCoinbaseHash(buffer){typeforce(types.Hash256bit,buffer);for(let i=0;i<32;++i)if(0!==buffer[i])return!1;return!0}isCoinbase(){return 1===this.ins.length&&Transaction.isCoinbaseHash(this.ins[0].hash)}addInput(hash,index,sequence,scriptSig){return typeforce(types.tuple(types.Hash256bit,types.UInt32,types.maybe(types.UInt32),types.maybe(types.Buffer)),arguments),types.Null(sequence)&&(sequence=Transaction.DEFAULT_SEQUENCE),this.ins.push({hash,index,script:scriptSig||EMPTY_BUFFER,sequence,witness:EMPTY_WITNESS})-1}addOutput(scriptPubKey,value){return typeforce(types.tuple(types.Buffer,types.Satoshi),arguments),this.outs.push({script:scriptPubKey,value})-1}hasWitnesses(){return this.ins.some((x=>0!==x.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(_ALLOW_WITNESS=!0){const hasWitnesses=_ALLOW_WITNESS&&this.hasWitnesses();return(hasWitnesses?10:8)+bufferutils_1.varuint.encodingLength(this.ins.length)+bufferutils_1.varuint.encodingLength(this.outs.length)+this.ins.reduce(((sum,input)=>sum+40+varSliceSize(input.script)),0)+this.outs.reduce(((sum,output)=>sum+8+varSliceSize(output.script)),0)+(hasWitnesses?this.ins.reduce(((sum,input)=>sum+function vectorSize(someVector){const length=someVector.length;return bufferutils_1.varuint.encodingLength(length)+someVector.reduce(((sum,witness)=>sum+varSliceSize(witness)),0)}(input.witness)),0):0)}clone(){const newTx=new Transaction;return newTx.version=this.version,newTx.locktime=this.locktime,newTx.ins=this.ins.map((txIn=>({hash:txIn.hash,index:txIn.index,script:txIn.script,sequence:txIn.sequence,witness:txIn.witness}))),newTx.outs=this.outs.map((txOut=>({script:txOut.script,value:txOut.value}))),newTx}hashForSignature(inIndex,prevOutScript,hashType){if(typeforce(types.tuple(types.UInt32,types.Buffer,types.Number),arguments),inIndex>=this.ins.length)return ONE;const ourScript=bscript.compile(bscript.decompile(prevOutScript).filter((x=>x!==script_1.OPS.OP_CODESEPARATOR))),txTmp=this.clone();if((31&hashType)===Transaction.SIGHASH_NONE)txTmp.outs=[],txTmp.ins.forEach(((input,i)=>{i!==inIndex&&(input.sequence=0)}));else if((31&hashType)===Transaction.SIGHASH_SINGLE){if(inIndex>=this.outs.length)return ONE;txTmp.outs.length=inIndex+1;for(let i=0;i<inIndex;i++)txTmp.outs[i]=BLANK_OUTPUT;txTmp.ins.forEach(((input,y)=>{y!==inIndex&&(input.sequence=0)}))}hashType&Transaction.SIGHASH_ANYONECANPAY?(txTmp.ins=[txTmp.ins[inIndex]],txTmp.ins[0].script=ourScript):(txTmp.ins.forEach((input=>{input.script=EMPTY_BUFFER})),txTmp.ins[inIndex].script=ourScript);const buffer=Buffer.allocUnsafe(txTmp.byteLength(!1)+4);return buffer.writeInt32LE(hashType,buffer.length-4),txTmp.__toBuffer(buffer,0,!1),bcrypto.hash256(buffer)}hashForWitnessV1(inIndex,prevOutScripts,values,hashType,leafHash,annex){if(typeforce(types.tuple(types.UInt32,typeforce.arrayOf(types.Buffer),typeforce.arrayOf(types.Satoshi),types.UInt32),arguments),values.length!==this.ins.length||prevOutScripts.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const outputType=hashType===Transaction.SIGHASH_DEFAULT?Transaction.SIGHASH_ALL:hashType&Transaction.SIGHASH_OUTPUT_MASK,isAnyoneCanPay=(hashType&Transaction.SIGHASH_INPUT_MASK)===Transaction.SIGHASH_ANYONECANPAY,isNone=outputType===Transaction.SIGHASH_NONE,isSingle=outputType===Transaction.SIGHASH_SINGLE;let hashPrevouts=EMPTY_BUFFER,hashAmounts=EMPTY_BUFFER,hashScriptPubKeys=EMPTY_BUFFER,hashSequences=EMPTY_BUFFER,hashOutputs=EMPTY_BUFFER;if(!isAnyoneCanPay){let bufferWriter=bufferutils_1.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((txIn=>{bufferWriter.writeSlice(txIn.hash),bufferWriter.writeUInt32(txIn.index)})),hashPrevouts=bcrypto.sha256(bufferWriter.end()),bufferWriter=bufferutils_1.BufferWriter.withCapacity(8*this.ins.length),values.forEach((value=>bufferWriter.writeUInt64(value))),hashAmounts=bcrypto.sha256(bufferWriter.end()),bufferWriter=bufferutils_1.BufferWriter.withCapacity(prevOutScripts.map(varSliceSize).reduce(((a,b)=>a+b))),prevOutScripts.forEach((prevOutScript=>bufferWriter.writeVarSlice(prevOutScript))),hashScriptPubKeys=bcrypto.sha256(bufferWriter.end()),bufferWriter=bufferutils_1.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach((txIn=>bufferWriter.writeUInt32(txIn.sequence))),hashSequences=bcrypto.sha256(bufferWriter.end())}if(isNone||isSingle){if(isSingle&&inIndex<this.outs.length){const output=this.outs[inIndex],bufferWriter=bufferutils_1.BufferWriter.withCapacity(8+varSliceSize(output.script));bufferWriter.writeUInt64(output.value),bufferWriter.writeVarSlice(output.script),hashOutputs=bcrypto.sha256(bufferWriter.end())}}else{const txOutsSize=this.outs.map((output=>8+varSliceSize(output.script))).reduce(((a,b)=>a+b)),bufferWriter=bufferutils_1.BufferWriter.withCapacity(txOutsSize);this.outs.forEach((out=>{bufferWriter.writeUInt64(out.value),bufferWriter.writeVarSlice(out.script)})),hashOutputs=bcrypto.sha256(bufferWriter.end())}const spendType=(leafHash?2:0)+(annex?1:0),sigMsgSize=174-(isAnyoneCanPay?49:0)-(isNone?32:0)+(annex?32:0)+(leafHash?37:0),sigMsgWriter=bufferutils_1.BufferWriter.withCapacity(sigMsgSize);if(sigMsgWriter.writeUInt8(hashType),sigMsgWriter.writeInt32(this.version),sigMsgWriter.writeUInt32(this.locktime),sigMsgWriter.writeSlice(hashPrevouts),sigMsgWriter.writeSlice(hashAmounts),sigMsgWriter.writeSlice(hashScriptPubKeys),sigMsgWriter.writeSlice(hashSequences),isNone||isSingle||sigMsgWriter.writeSlice(hashOutputs),sigMsgWriter.writeUInt8(spendType),isAnyoneCanPay){const input=this.ins[inIndex];sigMsgWriter.writeSlice(input.hash),sigMsgWriter.writeUInt32(input.index),sigMsgWriter.writeUInt64(values[inIndex]),sigMsgWriter.writeVarSlice(prevOutScripts[inIndex]),sigMsgWriter.writeUInt32(input.sequence)}else sigMsgWriter.writeUInt32(inIndex);if(annex){const bufferWriter=bufferutils_1.BufferWriter.withCapacity(varSliceSize(annex));bufferWriter.writeVarSlice(annex),sigMsgWriter.writeSlice(bcrypto.sha256(bufferWriter.end()))}return isSingle&&sigMsgWriter.writeSlice(hashOutputs),leafHash&&(sigMsgWriter.writeSlice(leafHash),sigMsgWriter.writeUInt8(0),sigMsgWriter.writeUInt32(4294967295)),bcrypto.taggedHash("TapSighash",Buffer.concat([Buffer.from([0]),sigMsgWriter.end()]))}hashForWitnessV0(inIndex,prevOutScript,value,hashType){typeforce(types.tuple(types.UInt32,types.Buffer,types.Satoshi,types.UInt32),arguments);let bufferWriter,tbuffer=Buffer.from([]),hashOutputs=ZERO,hashPrevouts=ZERO,hashSequence=ZERO;if(hashType&Transaction.SIGHASH_ANYONECANPAY||(tbuffer=Buffer.allocUnsafe(36*this.ins.length),bufferWriter=new bufferutils_1.BufferWriter(tbuffer,0),this.ins.forEach((txIn=>{bufferWriter.writeSlice(txIn.hash),bufferWriter.writeUInt32(txIn.index)})),hashPrevouts=bcrypto.hash256(tbuffer)),hashType&Transaction.SIGHASH_ANYONECANPAY||(31&hashType)===Transaction.SIGHASH_SINGLE||(31&hashType)===Transaction.SIGHASH_NONE||(tbuffer=Buffer.allocUnsafe(4*this.ins.length),bufferWriter=new bufferutils_1.BufferWriter(tbuffer,0),this.ins.forEach((txIn=>{bufferWriter.writeUInt32(txIn.sequence)})),hashSequence=bcrypto.hash256(tbuffer)),(31&hashType)!==Transaction.SIGHASH_SINGLE&&(31&hashType)!==Transaction.SIGHASH_NONE){const txOutsSize=this.outs.reduce(((sum,output)=>sum+8+varSliceSize(output.script)),0);tbuffer=Buffer.allocUnsafe(txOutsSize),bufferWriter=new bufferutils_1.BufferWriter(tbuffer,0),this.outs.forEach((out=>{bufferWriter.writeUInt64(out.value),bufferWriter.writeVarSlice(out.script)})),hashOutputs=bcrypto.hash256(tbuffer)}else if((31&hashType)===Transaction.SIGHASH_SINGLE&&inIndex<this.outs.length){const output=this.outs[inIndex];tbuffer=Buffer.allocUnsafe(8+varSliceSize(output.script)),bufferWriter=new bufferutils_1.BufferWriter(tbuffer,0),bufferWriter.writeUInt64(output.value),bufferWriter.writeVarSlice(output.script),hashOutputs=bcrypto.hash256(tbuffer)}tbuffer=Buffer.allocUnsafe(156+varSliceSize(prevOutScript)),bufferWriter=new bufferutils_1.BufferWriter(tbuffer,0);const input=this.ins[inIndex];return bufferWriter.writeInt32(this.version),bufferWriter.writeSlice(hashPrevouts),bufferWriter.writeSlice(hashSequence),bufferWriter.writeSlice(input.hash),bufferWriter.writeUInt32(input.index),bufferWriter.writeVarSlice(prevOutScript),bufferWriter.writeUInt64(value),bufferWriter.writeUInt32(input.sequence),bufferWriter.writeSlice(hashOutputs),bufferWriter.writeUInt32(this.locktime),bufferWriter.writeUInt32(hashType),bcrypto.hash256(tbuffer)}getHash(forWitness){return forWitness&&this.isCoinbase()?Buffer.alloc(32,0):bcrypto.hash256(this.__toBuffer(void 0,void 0,forWitness))}getId(){return(0,bufferutils_1.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(buffer,initialOffset){return this.__toBuffer(buffer,initialOffset,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(index,scriptSig){typeforce(types.tuple(types.Number,types.Buffer),arguments),this.ins[index].script=scriptSig}setWitness(index,witness){typeforce(types.tuple(types.Number,[types.Buffer]),arguments),this.ins[index].witness=witness}__toBuffer(buffer,initialOffset,_ALLOW_WITNESS=!1){buffer||(buffer=Buffer.allocUnsafe(this.byteLength(_ALLOW_WITNESS)));const bufferWriter=new bufferutils_1.BufferWriter(buffer,initialOffset||0);bufferWriter.writeInt32(this.version);const hasWitnesses=_ALLOW_WITNESS&&this.hasWitnesses();return hasWitnesses&&(bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER),bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG)),bufferWriter.writeVarInt(this.ins.length),this.ins.forEach((txIn=>{bufferWriter.writeSlice(txIn.hash),bufferWriter.writeUInt32(txIn.index),bufferWriter.writeVarSlice(txIn.script),bufferWriter.writeUInt32(txIn.sequence)})),bufferWriter.writeVarInt(this.outs.length),this.outs.forEach((txOut=>{!function isOutput(out){return void 0!==out.value}(txOut)?bufferWriter.writeSlice(txOut.valueBuffer):bufferWriter.writeUInt64(txOut.value),bufferWriter.writeVarSlice(txOut.script)})),hasWitnesses&&this.ins.forEach((input=>{bufferWriter.writeVector(input.witness)})),bufferWriter.writeUInt32(this.locktime),void 0!==initialOffset?buffer.slice(initialOffset,bufferWriter.offset):buffer}}exports.Transaction=Transaction,Transaction.DEFAULT_SEQUENCE=4294967295,Transaction.SIGHASH_DEFAULT=0,Transaction.SIGHASH_ALL=1,Transaction.SIGHASH_NONE=2,Transaction.SIGHASH_SINGLE=3,Transaction.SIGHASH_ANYONECANPAY=128,Transaction.SIGHASH_OUTPUT_MASK=3,Transaction.SIGHASH_INPUT_MASK=128,Transaction.ADVANCED_TRANSACTION_MARKER=0,Transaction.ADVANCED_TRANSACTION_FLAG=1},"./node_modules/.pnpm/bitcoinjs-lib@6.1.5/node_modules/bitcoinjs-lib/src/types.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneOf=exports.Null=exports.BufferN=exports.Function=exports.UInt32=exports.UInt8=exports.tuple=exports.maybe=exports.Hex=exports.Buffer=exports.String=exports.Boolean=exports.Array=exports.Number=exports.Hash256bit=exports.Hash160bit=exports.Buffer256bit=exports.isTaptree=exports.isTapleaf=exports.TAPLEAF_VERSION_MASK=exports.Network=exports.ECPoint=exports.Satoshi=exports.Signer=exports.BIP32Path=exports.UInt31=exports.isPoint=exports.typeforce=void 0;const buffer_1=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js");exports.typeforce=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/index.js");const ZERO32=buffer_1.Buffer.alloc(32,0),EC_P=buffer_1.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");exports.isPoint=function isPoint(p){if(!buffer_1.Buffer.isBuffer(p))return!1;if(p.length<33)return!1;const t=p[0],x=p.slice(1,33);if(0===x.compare(ZERO32))return!1;if(x.compare(EC_P)>=0)return!1;if((2===t||3===t)&&33===p.length)return!0;const y=p.slice(33);return 0!==y.compare(ZERO32)&&(!(y.compare(EC_P)>=0)&&(4===t&&65===p.length))};const UINT31_MAX=Math.pow(2,31)-1;function BIP32Path(value){return exports.typeforce.String(value)&&!!value.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}exports.UInt31=function UInt31(value){return exports.typeforce.UInt32(value)&&value<=UINT31_MAX},exports.BIP32Path=BIP32Path,BIP32Path.toJSON=()=>"BIP32 derivation path",exports.Signer=function Signer(obj){return(exports.typeforce.Buffer(obj.publicKey)||"function"==typeof obj.getPublicKey)&&"function"==typeof obj.sign};function isTapleaf(o){return!(!o||!("output"in o))&&(!!buffer_1.Buffer.isBuffer(o.output)&&(void 0===o.version||(o.version&exports.TAPLEAF_VERSION_MASK)===o.version))}exports.Satoshi=function Satoshi(value){return exports.typeforce.UInt53(value)&&value<=21e14},exports.ECPoint=exports.typeforce.quacksLike("Point"),exports.Network=exports.typeforce.compile({messagePrefix:exports.typeforce.oneOf(exports.typeforce.Buffer,exports.typeforce.String),bip32:{public:exports.typeforce.UInt32,private:exports.typeforce.UInt32},pubKeyHash:exports.typeforce.UInt8,scriptHash:exports.typeforce.UInt8,wif:exports.typeforce.UInt8}),exports.TAPLEAF_VERSION_MASK=254,exports.isTapleaf=isTapleaf,exports.isTaptree=function isTaptree(scriptTree){return(0,exports.Array)(scriptTree)?2===scriptTree.length&&scriptTree.every((t=>isTaptree(t))):isTapleaf(scriptTree)},exports.Buffer256bit=exports.typeforce.BufferN(32),exports.Hash160bit=exports.typeforce.BufferN(20),exports.Hash256bit=exports.typeforce.BufferN(32),exports.Number=exports.typeforce.Number,exports.Array=exports.typeforce.Array,exports.Boolean=exports.typeforce.Boolean,exports.String=exports.typeforce.String,exports.Buffer=exports.typeforce.Buffer,exports.Hex=exports.typeforce.Hex,exports.maybe=exports.typeforce.maybe,exports.tuple=exports.typeforce.tuple,exports.UInt8=exports.typeforce.UInt8,exports.UInt32=exports.typeforce.UInt32,exports.Function=exports.typeforce.Function,exports.BufferN=exports.typeforce.BufferN,exports.Null=exports.typeforce.Null,exports.oneOf=exports.typeforce.oneOf},"./node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var basex=__webpack_require__("./node_modules/.pnpm/base-x@3.0.9/node_modules/base-x/src/index.js");module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},"./node_modules/.pnpm/bs58@5.0.0/node_modules/bs58/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{const basex=__webpack_require__("./node_modules/.pnpm/base-x@4.0.0/node_modules/base-x/src/index.js");module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},"./node_modules/.pnpm/bs58check@2.1.2/node_modules/bs58check/base.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var base58=__webpack_require__("./node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer;module.exports=function(checksumFn){function decodeRaw(buffer){var payload=buffer.slice(0,-4),checksum=buffer.slice(-4),newChecksum=checksumFn(payload);if(!(checksum[0]^newChecksum[0]|checksum[1]^newChecksum[1]|checksum[2]^newChecksum[2]|checksum[3]^newChecksum[3]))return payload}return{encode:function encode(payload){var checksum=checksumFn(payload);return base58.encode(Buffer.concat([payload,checksum],payload.length+4))},decode:function decode(string){var payload=decodeRaw(base58.decode(string));if(!payload)throw new Error("Invalid checksum");return payload},decodeUnsafe:function decodeUnsafe(string){var buffer=base58.decodeUnsafe(string);if(buffer)return decodeRaw(buffer)}}}},"./node_modules/.pnpm/bs58check@2.1.2/node_modules/bs58check/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var createHash=__webpack_require__("./node_modules/.pnpm/create-hash@1.2.0/node_modules/create-hash/browser.js"),bs58checkBase=__webpack_require__("./node_modules/.pnpm/bs58check@2.1.2/node_modules/bs58check/base.js");module.exports=bs58checkBase((function sha256x2(buffer){var tmp=createHash("sha256").update(buffer).digest();return createHash("sha256").update(tmp).digest()}))},"./node_modules/.pnpm/bs58check@3.0.1/node_modules/bs58check/base.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var base58=__webpack_require__("./node_modules/.pnpm/bs58@5.0.0/node_modules/bs58/index.js");module.exports=function(checksumFn){function decodeRaw(buffer){var payload=buffer.slice(0,-4),checksum=buffer.slice(-4),newChecksum=checksumFn(payload);if(!(checksum[0]^newChecksum[0]|checksum[1]^newChecksum[1]|checksum[2]^newChecksum[2]|checksum[3]^newChecksum[3]))return payload}return{encode:function encode(payload){var payloadU8=Uint8Array.from(payload),checksum=checksumFn(payloadU8),length=payloadU8.length+4,both=new Uint8Array(length);return both.set(payloadU8,0),both.set(checksum.subarray(0,4),payloadU8.length),base58.encode(both,length)},decode:function decode(string){var payload=decodeRaw(base58.decode(string));if(!payload)throw new Error("Invalid checksum");return payload},decodeUnsafe:function decodeUnsafe(string){var buffer=base58.decodeUnsafe(string);if(buffer)return decodeRaw(buffer)}}}},"./node_modules/.pnpm/bs58check@3.0.1/node_modules/bs58check/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var{sha256}=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha256.js"),bs58checkBase=__webpack_require__("./node_modules/.pnpm/bs58check@3.0.1/node_modules/bs58check/base.js");module.exports=bs58checkBase((function sha256x2(buffer){return sha256(sha256(buffer))}))},"./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/address.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.c32ToB58=exports.b58ToC32=exports.c32addressDecode=exports.c32address=exports.versions=void 0;const checksum_1=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/checksum.js"),base58check=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/base58check.js"),utils_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js");exports.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const ADDR_BITCOIN_TO_STACKS={};ADDR_BITCOIN_TO_STACKS[0]=exports.versions.mainnet.p2pkh,ADDR_BITCOIN_TO_STACKS[5]=exports.versions.mainnet.p2sh,ADDR_BITCOIN_TO_STACKS[111]=exports.versions.testnet.p2pkh,ADDR_BITCOIN_TO_STACKS[196]=exports.versions.testnet.p2sh;const ADDR_STACKS_TO_BITCOIN={};function c32address(version,hash160hex){if(!hash160hex.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,checksum_1.c32checkEncode)(version,hash160hex)}`}function c32addressDecode(c32addr){if(c32addr.length<=5)throw new Error("Invalid c32 address: invalid length");if("S"!=c32addr[0])throw new Error('Invalid c32 address: must start with "S"');return(0,checksum_1.c32checkDecode)(c32addr.slice(1))}ADDR_STACKS_TO_BITCOIN[exports.versions.mainnet.p2pkh]=0,ADDR_STACKS_TO_BITCOIN[exports.versions.mainnet.p2sh]=5,ADDR_STACKS_TO_BITCOIN[exports.versions.testnet.p2pkh]=111,ADDR_STACKS_TO_BITCOIN[exports.versions.testnet.p2sh]=196,exports.c32address=c32address,exports.c32addressDecode=c32addressDecode,exports.b58ToC32=function b58ToC32(b58check,version=-1){const addrInfo=base58check.decode(b58check),hash160String=(0,utils_1.bytesToHex)(addrInfo.data),addrVersion=parseInt((0,utils_1.bytesToHex)(addrInfo.prefix),16);let stacksVersion;return version<0?(stacksVersion=addrVersion,void 0!==ADDR_BITCOIN_TO_STACKS[addrVersion]&&(stacksVersion=ADDR_BITCOIN_TO_STACKS[addrVersion])):stacksVersion=version,c32address(stacksVersion,hash160String)},exports.c32ToB58=function c32ToB58(c32string,version=-1){const addrInfo=c32addressDecode(c32string),stacksVersion=addrInfo[0],hash160String=addrInfo[1];let bitcoinVersion;version<0?(bitcoinVersion=stacksVersion,void 0!==ADDR_STACKS_TO_BITCOIN[stacksVersion]&&(bitcoinVersion=ADDR_STACKS_TO_BITCOIN[stacksVersion])):bitcoinVersion=version;let prefix=bitcoinVersion.toString(16);return 1===prefix.length&&(prefix=`0${prefix}`),base58check.encode(hash160String,prefix)}},"./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/base58check.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=exports.encode=void 0;const sha256_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha256.js"),utils_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js"),basex=__webpack_require__("./node_modules/.pnpm/base-x@4.0.0/node_modules/base-x/src/index.js"),ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";exports.encode=function encode(data,prefix="00"){const dataBytes="string"==typeof data?(0,utils_1.hexToBytes)(data):data,prefixBytes="string"==typeof prefix?(0,utils_1.hexToBytes)(prefix):data;if(!(dataBytes instanceof Uint8Array&&prefixBytes instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const checksum=(0,sha256_1.sha256)((0,sha256_1.sha256)(new Uint8Array([...prefixBytes,...dataBytes])));return basex(ALPHABET).encode([...prefixBytes,...dataBytes,...checksum.slice(0,4)])},exports.decode=function decode(string){const bytes=basex(ALPHABET).decode(string),prefixBytes=bytes.slice(0,1),dataBytes=bytes.slice(1,-4),checksum=(0,sha256_1.sha256)((0,sha256_1.sha256)(new Uint8Array([...prefixBytes,...dataBytes])));return bytes.slice(-4).forEach(((check,index)=>{if(check!==checksum[index])throw new Error("Invalid checksum")})),{prefix:prefixBytes,data:dataBytes}}},"./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/checksum.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.c32checkDecode=exports.c32checkEncode=void 0;const sha256_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha256.js"),utils_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js"),encoding_1=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/encoding.js");function c32checksum(dataHex){const dataHash=(0,sha256_1.sha256)((0,sha256_1.sha256)((0,utils_1.hexToBytes)(dataHex)));return(0,utils_1.bytesToHex)(dataHash.slice(0,4))}exports.c32checkEncode=function c32checkEncode(version,data){if(version<0||version>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!data.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");(data=data.toLowerCase()).length%2!=0&&(data=`0${data}`);let versionHex=version.toString(16);1===versionHex.length&&(versionHex=`0${versionHex}`);const checksumHex=c32checksum(`${versionHex}${data}`),c32str=(0,encoding_1.c32encode)(`${data}${checksumHex}`);return`${encoding_1.c32[version]}${c32str}`},exports.c32checkDecode=function c32checkDecode(c32data){c32data=(0,encoding_1.c32normalize)(c32data);const dataHex=(0,encoding_1.c32decode)(c32data.slice(1)),versionChar=c32data[0],version=encoding_1.c32.indexOf(versionChar),checksum=dataHex.slice(-8);let versionHex=version.toString(16);if(1===versionHex.length&&(versionHex=`0${versionHex}`),c32checksum(`${versionHex}${dataHex.substring(0,dataHex.length-8)}`)!==checksum)throw new Error("Invalid c32check string: checksum mismatch");return[version,dataHex.substring(0,dataHex.length-8)]}},"./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/encoding.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.c32decode=exports.c32normalize=exports.c32encode=exports.c32=void 0;const utils_1=__webpack_require__("./node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js");exports.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const hex="0123456789abcdef";function c32normalize(c32input){return c32input.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}exports.c32encode=function c32encode(inputHex,minLength){if(!inputHex.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");inputHex.length%2!=0&&(inputHex=`0${inputHex}`);let res=[],carry=0;for(let i=(inputHex=inputHex.toLowerCase()).length-1;i>=0;i--)if(carry<4){const currentCode=hex.indexOf(inputHex[i])>>carry;let nextCode=0;0!==i&&(nextCode=hex.indexOf(inputHex[i-1]));const nextBits=1+carry,nextLowBits=nextCode%(1<<nextBits)<<5-nextBits,curC32Digit=exports.c32[currentCode+nextLowBits];carry=nextBits,res.unshift(curC32Digit)}else carry=0;let C32leadingZeros=0;for(let i=0;i<res.length&&"0"===res[i];i++)C32leadingZeros++;res=res.slice(C32leadingZeros);const zeroPrefix=(new TextDecoder).decode((0,utils_1.hexToBytes)(inputHex)).match(/^\u0000*/),numLeadingZeroBytesInHex=zeroPrefix?zeroPrefix[0].length:0;for(let i=0;i<numLeadingZeroBytesInHex;i++)res.unshift(exports.c32[0]);if(minLength){const count=minLength-res.length;for(let i=0;i<count;i++)res.unshift(exports.c32[0])}return res.join("")},exports.c32normalize=c32normalize,exports.c32decode=function c32decode(c32input,minLength){if(!(c32input=c32normalize(c32input)).match(`^[${exports.c32}]*$`))throw new Error("Not a c32-encoded string");const zeroPrefix=c32input.match(`^${exports.c32[0]}*`),numLeadingZeroBytes=zeroPrefix?zeroPrefix[0].length:0;let res=[],carry=0,carryBits=0;for(let i=c32input.length-1;i>=0;i--){4===carryBits&&(res.unshift(hex[carry]),carryBits=0,carry=0);const currentValue=(exports.c32.indexOf(c32input[i])<<carryBits)+carry,currentHexDigit=hex[currentValue%16];if(carryBits+=1,carry=currentValue>>4,carry>1<<carryBits)throw new Error("Panic error in decoding.");res.unshift(currentHexDigit)}res.unshift(hex[carry]),res.length%2==1&&res.unshift("0");let hexLeadingZeros=0;for(let i=0;i<res.length&&"0"===res[i];i++)hexLeadingZeros++;res=res.slice(hexLeadingZeros-hexLeadingZeros%2);let hexStr=res.join("");for(let i=0;i<numLeadingZeroBytes;i++)hexStr=`00${hexStr}`;if(minLength){const count=2*minLength-hexStr.length;for(let i=0;i<count;i+=2)hexStr=`00${hexStr}`}return hexStr}},"./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.ns=exports.bJ=void 0;const encoding_1=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/encoding.js");const checksum_1=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/checksum.js");const address_1=__webpack_require__("./node_modules/.pnpm/c32check@2.0.0/node_modules/c32check/lib/address.js");Object.defineProperty(exports,"bJ",{enumerable:!0,get:function(){return address_1.c32address}}),Object.defineProperty(exports,"ns",{enumerable:!0,get:function(){return address_1.c32addressDecode}})},"./node_modules/.pnpm/cipher-base@1.0.4/node_modules/cipher-base/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,Transform=__webpack_require__("?8d76").Transform,StringDecoder=__webpack_require__("./node_modules/.pnpm/string_decoder@1.3.0/node_modules/string_decoder/lib/string_decoder.js").I;function CipherBase(hashMode){Transform.call(this),this.hashMode="string"==typeof hashMode,this.hashMode?this[hashMode]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(CipherBase,Transform),CipherBase.prototype.update=function(data,inputEnc,outputEnc){"string"==typeof data&&(data=Buffer.from(data,inputEnc));var outData=this._update(data);return this.hashMode?this:(outputEnc&&(outData=this._toString(outData,outputEnc)),outData)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(data,_,next){var err;try{this.hashMode?this._update(data):this.push(this._update(data))}catch(e){err=e}finally{next(err)}},CipherBase.prototype._flush=function(done){var err;try{this.push(this.__final())}catch(e){err=e}done(err)},CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer.alloc(0);return outputEnc&&(outData=this._toString(outData,outputEnc,!0)),outData},CipherBase.prototype._toString=function(value,enc,fin){if(this._decoder||(this._decoder=new StringDecoder(enc),this._encoding=enc),this._encoding!==enc)throw new Error("can't switch encodings");var out=this._decoder.write(value);return fin&&(out+=this._decoder.end()),out},module.exports=CipherBase},"./node_modules/.pnpm/create-hash@1.2.0/node_modules/create-hash/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),MD5=__webpack_require__("./node_modules/.pnpm/md5.js@1.3.5/node_modules/md5.js/index.js"),RIPEMD160=__webpack_require__("./node_modules/.pnpm/ripemd160@2.0.2/node_modules/ripemd160/index.js"),sha=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/index.js"),Base=__webpack_require__("./node_modules/.pnpm/cipher-base@1.0.4/node_modules/cipher-base/index.js");function Hash(hash){Base.call(this,"digest"),this._hash=hash}inherits(Hash,Base),Hash.prototype._update=function(data){this._hash.update(data)},Hash.prototype._final=function(){return this._hash.digest()},module.exports=function createHash(alg){return"md5"===(alg=alg.toLowerCase())?new MD5:"rmd160"===alg||"ripemd160"===alg?new RIPEMD160:new Hash(sha(alg))}},"./node_modules/.pnpm/cross-fetch@3.1.8_encoding@0.1.13/node_modules/cross-fetch/dist/browser-polyfill.js":function(){!function(self){!function(exports){var support_searchParams="URLSearchParams"in self,support_iterable="Symbol"in self&&"iterator"in Symbol,support_blob="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),support_formData="FormData"in self,support_arrayBuffer="ArrayBuffer"in self;if(support_arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value}}};return support_iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach((function(value,name){this.append(name,value)}),this):Array.isArray(headers)?headers.forEach((function(header){this.append(header[0],header[1])}),this):headers&&Object.getOwnPropertyNames(headers).forEach((function(name){this.append(name,headers[name])}),this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function fileReaderReady(reader){return new Promise((function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}}))}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:support_blob&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:support_formData&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():support_arrayBuffer&&support_blob&&function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}(body)?(this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))?this._bodyArrayBuffer=bufferClone(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support_blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support_formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value},Headers.prototype.delete=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach((function(value,name){items.push(name)})),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach((function(value){items.push(value)})),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach((function(value,name){items.push([name,value])})),iteratorFor(items)},support_iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(input,options){var body=(options=options||{}).body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"same-origin",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.signal=options.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach((function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}})),form}function Response(bodyInit,options){options||(options={}),this.type="default",this.status=void 0===options.status?200:options.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status,headers:{location:url}})},exports.DOMException=self.DOMException;try{new exports.DOMException}catch(err){exports.DOMException=function(message,name){this.message=message,this.name=name;var error=Error(message);this.stack=error.stack},exports.DOMException.prototype=Object.create(Error.prototype),exports.DOMException.prototype.constructor=exports.DOMException}function fetch(input,init){return new Promise((function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted)return reject(new exports.DOMException("Aborted","AbortError"));var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}xhr.onload=function(){var rawHeaders,headers,options={status:xhr.status,statusText:xhr.statusText,headers:(rawHeaders=xhr.getAllResponseHeaders()||"",headers=new Headers,rawHeaders.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}})),headers)};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.onabort=function(){reject(new exports.DOMException("Aborted","AbortError"))},xhr.open(request.method,request.url,!0),"include"===request.credentials?xhr.withCredentials=!0:"omit"===request.credentials&&(xhr.withCredentials=!1),"responseType"in xhr&&support_blob&&(xhr.responseType="blob"),request.headers.forEach((function(value,name){xhr.setRequestHeader(name,value)})),request.signal&&(request.signal.addEventListener("abort",abortXhr),xhr.onreadystatechange=function(){4===xhr.readyState&&request.signal.removeEventListener("abort",abortXhr)}),xhr.send(void 0===request._bodyInit?null:request._bodyInit)}))}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response),exports.Headers=Headers,exports.Request=Request,exports.Response=Response,exports.fetch=fetch,Object.defineProperty(exports,"__esModule",{value:!0})}({})}("undefined"!=typeof self?self:this)},"./node_modules/.pnpm/dset@3.1.3/node_modules/dset/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function dset(obj,keys,val){keys.split&&(keys=keys.split("."));for(var x,k,i=0,l=keys.length,t=obj;i<l&&"__proto__"!==(k=keys[i++])&&"constructor"!==k&&"prototype"!==k;)t=t[k]=i===l?val:typeof(x=t[k])==typeof keys?x:0*keys[i]!=0||~(""+keys[i]).indexOf(".")?{}:[]}__webpack_require__.d(__webpack_exports__,{J:()=>dset})},"./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/ecpair.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ECPairFactory=exports.networks=void 0;const networks=__webpack_require__("./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/networks.js");exports.networks=networks;const types=__webpack_require__("./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/types.js"),randomBytes=__webpack_require__("./node_modules/.pnpm/randombytes@2.1.0/node_modules/randombytes/browser.js"),wif=__webpack_require__("./node_modules/.pnpm/wif@2.0.6/node_modules/wif/index.js"),testecc_1=__webpack_require__("./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/testecc.js"),isOptions=types.typeforce.maybe(types.typeforce.compile({compressed:types.maybe(types.Boolean),network:types.maybe(types.Network)}));exports.ECPairFactory=function ECPairFactory(ecc){function fromPrivateKey(buffer,options){if(types.typeforce(types.Buffer256bit,buffer),!ecc.isPrivate(buffer))throw new TypeError("Private key not in range [1, n)");return types.typeforce(isOptions,options),new ECPair(buffer,void 0,options)}function fromPublicKey(buffer,options){return types.typeforce(ecc.isPoint,buffer),types.typeforce(isOptions,options),new ECPair(void 0,buffer,options)}(0,testecc_1.testEcc)(ecc);class ECPair{__D;__Q;compressed;network;lowR;constructor(__D,__Q,options){this.__D=__D,this.__Q=__Q,this.lowR=!1,void 0===options&&(options={}),this.compressed=void 0===options.compressed||options.compressed,this.network=options.network||networks.bitcoin,void 0!==__Q&&(this.__Q=Buffer.from(ecc.pointCompress(__Q,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){const p=ecc.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(p)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return wif.encode(this.network.wif,this.__D,this.compressed)}tweak(t){return this.privateKey?this.tweakFromPrivateKey(t):this.tweakFromPublicKey(t)}sign(hash,lowR){if(!this.__D)throw new Error("Missing private key");if(void 0===lowR&&(lowR=this.lowR),!1===lowR)return Buffer.from(ecc.sign(hash,this.__D));{let sig=ecc.sign(hash,this.__D);const extraData=Buffer.alloc(32,0);let counter=0;for(;sig[0]>127;)counter++,extraData.writeUIntLE(counter,0,6),sig=ecc.sign(hash,this.__D,extraData);return Buffer.from(sig)}}signSchnorr(hash){if(!this.privateKey)throw new Error("Missing private key");if(!ecc.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(ecc.signSchnorr(hash,this.privateKey))}verify(hash,signature){return ecc.verify(hash,this.publicKey,signature)}verifySchnorr(hash,signature){if(!ecc.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return ecc.verifySchnorr(hash,this.publicKey.subarray(1,33),signature)}tweakFromPublicKey(t){const xOnlyPubKey=32===(pubKey=this.publicKey).length?pubKey:pubKey.slice(1,33);var pubKey;const tweakedPublicKey=ecc.xOnlyPointAddTweak(xOnlyPubKey,t);if(!tweakedPublicKey||null===tweakedPublicKey.xOnlyPubkey)throw new Error("Cannot tweak public key!");const parityByte=Buffer.from([0===tweakedPublicKey.parity?2:3]);return fromPublicKey(Buffer.concat([parityByte,tweakedPublicKey.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(t){const privateKey=3===this.publicKey[0]||4===this.publicKey[0]&&1==(1&this.publicKey[64])?ecc.privateNegate(this.privateKey):this.privateKey,tweakedPrivateKey=ecc.privateAdd(privateKey,t);if(!tweakedPrivateKey)throw new Error("Invalid tweaked private key!");return fromPrivateKey(Buffer.from(tweakedPrivateKey),{network:this.network,compressed:this.compressed})}}return{isPoint:function isPoint(maybePoint){return ecc.isPoint(maybePoint)},fromPrivateKey,fromPublicKey,fromWIF:function fromWIF(wifString,network){const decoded=wif.decode(wifString),version=decoded.version;if(types.Array(network)){if(!(network=network.filter((x=>version===x.wif)).pop()))throw new Error("Unknown network version")}else if(network=network||networks.bitcoin,version!==network.wif)throw new Error("Invalid network version");return fromPrivateKey(decoded.privateKey,{compressed:decoded.compressed,network})},makeRandom:function makeRandom(options){types.typeforce(isOptions,options),void 0===options&&(options={});const rng=options.rng||randomBytes;let d;do{d=rng(32),types.typeforce(types.Buffer256bit,d)}while(!ecc.isPrivate(d));return fromPrivateKey(d,options)}}}},"./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.dg=void 0;var ecpair_1=__webpack_require__("./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/ecpair.js");Object.defineProperty(exports,"dg",{enumerable:!0,get:function(){return ecpair_1.ECPairFactory}})},"./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/networks.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testnet=exports.bitcoin=void 0,exports.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},exports.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},"./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/testecc.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.testEcc=void 0;const h=hex=>Buffer.from(hex,"hex");function assert(bool){if(!bool)throw new Error("ecc library invalid")}exports.testEcc=function testEcc(ecc){assert(ecc.isPoint(h("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert(!ecc.isPoint(h("030000000000000000000000000000000000000000000000000000000000000005"))),assert(ecc.isPrivate(h("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert(ecc.isPrivate(h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),assert(!ecc.isPrivate(h("0000000000000000000000000000000000000000000000000000000000000000"))),assert(!ecc.isPrivate(h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),assert(!ecc.isPrivate(h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),assert(Buffer.from(ecc.privateAdd(h("0000000000000000000000000000000000000000000000000000000000000001"),h("0000000000000000000000000000000000000000000000000000000000000000"))).equals(h("0000000000000000000000000000000000000000000000000000000000000001"))),assert(null===ecc.privateAdd(h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),h("0000000000000000000000000000000000000000000000000000000000000003"))),assert(Buffer.from(ecc.privateAdd(h("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),h("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(h("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),assert(Buffer.from(ecc.privateNegate(h("0000000000000000000000000000000000000000000000000000000000000001"))).equals(h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),assert(Buffer.from(ecc.privateNegate(h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(h("0000000000000000000000000000000000000000000000000000000000000003"))),assert(Buffer.from(ecc.privateNegate(h("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(h("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),assert(Buffer.from(ecc.pointCompress(h("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(h("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert(Buffer.from(ecc.pointCompress(h("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(h("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),assert(Buffer.from(ecc.pointCompress(h("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(h("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert(Buffer.from(ecc.pointCompress(h("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(h("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),assert(Buffer.from(ecc.pointFromScalar(h("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(h("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),assert(null===ecc.xOnlyPointAddTweak(h("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")));let xOnlyRes=ecc.xOnlyPointAddTweak(h("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),h("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));assert(Buffer.from(xOnlyRes.xOnlyPubkey).equals(h("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&1===xOnlyRes.parity),xOnlyRes=ecc.xOnlyPointAddTweak(h("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),h("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),assert(Buffer.from(xOnlyRes.xOnlyPubkey).equals(h("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&0===xOnlyRes.parity),assert(Buffer.from(ecc.sign(h("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),h("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(h("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),assert(ecc.verify(h("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),h("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),h("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),ecc.signSchnorr&&assert(Buffer.from(ecc.signSchnorr(h("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),h("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),h("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(h("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),ecc.verifySchnorr&&assert(ecc.verifySchnorr(h("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),h("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),h("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}},"./node_modules/.pnpm/ecpair@2.1.0/node_modules/ecpair/src/types.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maybe=exports.Boolean=exports.Array=exports.Buffer256bit=exports.Network=exports.typeforce=void 0,exports.typeforce=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/index.js"),exports.Network=exports.typeforce.compile({messagePrefix:exports.typeforce.oneOf(exports.typeforce.Buffer,exports.typeforce.String),bip32:{public:exports.typeforce.UInt32,private:exports.typeforce.UInt32},pubKeyHash:exports.typeforce.UInt8,scriptHash:exports.typeforce.UInt8,wif:exports.typeforce.UInt8}),exports.Buffer256bit=exports.typeforce.BufferN(32),exports.Array=exports.typeforce.Array,exports.Boolean=exports.typeforce.Boolean,exports.maybe=exports.typeforce.maybe},"./node_modules/.pnpm/eventemitter3@5.0.1/node_modules/eventemitter3/index.js":module=>{"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},"./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js":module=>{"use strict";var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,module.exports.once=function once(emitter,name){return new Promise((function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver),reject(err)}function resolver(){"function"==typeof emitter.removeListener&&emitter.removeListener("error",errorListener),resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:!0}),"error"!==name&&function addErrorHandlerIfEventEmitter(emitter,handler,flags){"function"==typeof emitter.on&&eventTargetAgnosticAddListener(emitter,"error",handler,flags)}(emitter,errorListener,{once:!0})}))},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}function _getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing;if(checkListener(listener),void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=_getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,function ProcessEmitWarning(warning){console&&console.warn&&console.warn(warning)}(w)}return target}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target,type,listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function unwrapListeners(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if("function"==typeof emitter.on)flags.once?emitter.once(name,listener):emitter.on(name,listener);else{if("function"!=typeof emitter.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter);emitter.addEventListener(name,(function wrapListener(arg){flags.once&&emitter.removeEventListener(name,wrapListener),listener(arg)}))}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function emit(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function once(type,listener){return checkListener(listener),this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){return checkListener(listener),this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(checkListener(listener),void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},"./node_modules/.pnpm/hash-base@3.1.0/node_modules/hash-base/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,Transform=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/readable-browser.js").Transform;function HashBase(blockSize){Transform.call(this),this._block=Buffer.allocUnsafe(blockSize),this._blockSize=blockSize,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(HashBase,Transform),HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding)}catch(err){error=err}callback(error)},HashBase.prototype._flush=function(callback){var error=null;try{this.push(this.digest())}catch(err){error=err}callback(error)},HashBase.prototype.update=function(data,encoding){if(function throwIfNotStringOrBuffer(val,prefix){if(!Buffer.isBuffer(val)&&"string"!=typeof val)throw new TypeError(prefix+" must be a string or a buffer")}(data,"Data"),this._finalized)throw new Error("Digest already called");Buffer.isBuffer(data)||(data=Buffer.from(data,encoding));for(var block=this._block,offset=0;this._blockOffset+data.length-offset>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++];this._update(),this._blockOffset=0}for(;offset<data.length;)block[this._blockOffset++]=data[offset++];for(var j=0,carry=8*data.length;carry>0;++j)this._length[j]+=carry,(carry=this._length[j]/4294967296|0)>0&&(this._length[j]-=4294967296*carry);return this},HashBase.prototype._update=function(){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var digest=this._digest();void 0!==encoding&&(digest=digest.toString(encoding)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return digest},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},module.exports=HashBase},"./node_modules/.pnpm/lodash.clonedeep@4.5.0/node_modules/lodash.clonedeep/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",boolTag="[object Boolean]",dateTag="[object Date]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function isArguments(value){return function isArrayLikeObject(value){return function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function initCloneArray(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}(getPrototype(object))}(isFunc?{}:value),!isDeep)return function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}(value,function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag:return function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),!0):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case symbolTag:return function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}(object)}}(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}(value):keys(value);return function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););return array}(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))})),result}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value))}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function hashDelete(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache},Stack.prototype.delete=function stackDelete(key){return this.__data__.delete(key)},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):function stubArray(){return[]},getTag=function baseGetTag(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}module.exports=function cloneDeep(value){return baseClone(value,!0,!0)}},"./node_modules/.pnpm/lodash.get@4.4.2/node_modules/lodash.get/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var INFINITY=1/0,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,splice=arrayProto.splice,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var value,other,length=array.length;length--;)if((value=array[length][0])===(other=key)||value!=value&&other!=other)return length;return-1}function baseGet(object,path){path=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;if("number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value))return!0;return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)}(path,object)?[path]:function castPath(value){return isArray(value)?value:stringToPath(value)}(path);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function baseIsNative(value){if(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))return!1;var pattern=function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}(value)||function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}(value)?reIsNative:reIsHostCtor;return pattern.test(function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}(value))}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function hashDelete(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this};var stringToPath=memoize((function(string){string=function toString(value){return null==value?"":function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}(value)}(string);var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,(function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)})),result}));function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result),result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;var isArray=Array.isArray;function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isSymbol(value){return"symbol"==typeof value||function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},"./node_modules/.pnpm/md5.js@1.3.5/node_modules/md5.js/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),HashBase=__webpack_require__("./node_modules/.pnpm/hash-base@3.1.0/node_modules/hash-base/index.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,ARRAY16=new Array(16);function MD5(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function rotl(x,n){return x<<n|x>>>32-n}function fnF(a,b,c,d,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+b|0}function fnG(a,b,c,d,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+b|0}function fnH(a,b,c,d,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+b|0}function fnI(a,b,c,d,m,k,s){return rotl(a+(c^(b|~d))+m+k|0,s)+b|0}inherits(MD5,HashBase),MD5.prototype._update=function(){for(var M=ARRAY16,i=0;i<16;++i)M[i]=this._block.readInt32LE(4*i);var a=this._a,b=this._b,c=this._c,d=this._d;a=fnF(a,b,c,d,M[0],3614090360,7),d=fnF(d,a,b,c,M[1],3905402710,12),c=fnF(c,d,a,b,M[2],606105819,17),b=fnF(b,c,d,a,M[3],3250441966,22),a=fnF(a,b,c,d,M[4],4118548399,7),d=fnF(d,a,b,c,M[5],1200080426,12),c=fnF(c,d,a,b,M[6],2821735955,17),b=fnF(b,c,d,a,M[7],4249261313,22),a=fnF(a,b,c,d,M[8],1770035416,7),d=fnF(d,a,b,c,M[9],2336552879,12),c=fnF(c,d,a,b,M[10],4294925233,17),b=fnF(b,c,d,a,M[11],2304563134,22),a=fnF(a,b,c,d,M[12],1804603682,7),d=fnF(d,a,b,c,M[13],4254626195,12),c=fnF(c,d,a,b,M[14],2792965006,17),a=fnG(a,b=fnF(b,c,d,a,M[15],1236535329,22),c,d,M[1],4129170786,5),d=fnG(d,a,b,c,M[6],3225465664,9),c=fnG(c,d,a,b,M[11],643717713,14),b=fnG(b,c,d,a,M[0],3921069994,20),a=fnG(a,b,c,d,M[5],3593408605,5),d=fnG(d,a,b,c,M[10],38016083,9),c=fnG(c,d,a,b,M[15],3634488961,14),b=fnG(b,c,d,a,M[4],3889429448,20),a=fnG(a,b,c,d,M[9],568446438,5),d=fnG(d,a,b,c,M[14],3275163606,9),c=fnG(c,d,a,b,M[3],4107603335,14),b=fnG(b,c,d,a,M[8],1163531501,20),a=fnG(a,b,c,d,M[13],2850285829,5),d=fnG(d,a,b,c,M[2],4243563512,9),c=fnG(c,d,a,b,M[7],1735328473,14),a=fnH(a,b=fnG(b,c,d,a,M[12],2368359562,20),c,d,M[5],4294588738,4),d=fnH(d,a,b,c,M[8],2272392833,11),c=fnH(c,d,a,b,M[11],1839030562,16),b=fnH(b,c,d,a,M[14],4259657740,23),a=fnH(a,b,c,d,M[1],2763975236,4),d=fnH(d,a,b,c,M[4],1272893353,11),c=fnH(c,d,a,b,M[7],4139469664,16),b=fnH(b,c,d,a,M[10],3200236656,23),a=fnH(a,b,c,d,M[13],681279174,4),d=fnH(d,a,b,c,M[0],3936430074,11),c=fnH(c,d,a,b,M[3],3572445317,16),b=fnH(b,c,d,a,M[6],76029189,23),a=fnH(a,b,c,d,M[9],3654602809,4),d=fnH(d,a,b,c,M[12],3873151461,11),c=fnH(c,d,a,b,M[15],530742520,16),a=fnI(a,b=fnH(b,c,d,a,M[2],3299628645,23),c,d,M[0],4096336452,6),d=fnI(d,a,b,c,M[7],1126891415,10),c=fnI(c,d,a,b,M[14],2878612391,15),b=fnI(b,c,d,a,M[5],4237533241,21),a=fnI(a,b,c,d,M[12],1700485571,6),d=fnI(d,a,b,c,M[3],2399980690,10),c=fnI(c,d,a,b,M[10],4293915773,15),b=fnI(b,c,d,a,M[1],2240044497,21),a=fnI(a,b,c,d,M[8],1873313359,6),d=fnI(d,a,b,c,M[15],4264355552,10),c=fnI(c,d,a,b,M[6],2734768916,15),b=fnI(b,c,d,a,M[13],1309151649,21),a=fnI(a,b,c,d,M[4],4149444226,6),d=fnI(d,a,b,c,M[11],3174756917,10),c=fnI(c,d,a,b,M[2],718787259,15),b=fnI(b,c,d,a,M[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+b|0,this._c=this._c+c|0,this._d=this._d+d|0},MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer.allocUnsafe(16);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer},module.exports=MD5},"./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isodate=__webpack_require__("./node_modules/.pnpm/@segment+isodate@1.0.3/node_modules/@segment/isodate/lib/index.js"),milliseconds=__webpack_require__("./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/milliseconds.js"),seconds=__webpack_require__("./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/seconds.js"),toStr=Object.prototype.toString;module.exports=function newDate(val){return function isDate(value){return"[object Date]"===toStr.call(value)}(val)?val:function isNumber(value){return"[object Number]"===toStr.call(value)}(val)?new Date(function toMs(num){return num<315576e5?1e3*num:num}(val)):isodate.is(val)?isodate.parse(val):milliseconds.is(val)?milliseconds.parse(val):seconds.is(val)?seconds.parse(val):new Date(val)}},"./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/milliseconds.js":(__unused_webpack_module,exports)=>{"use strict";var matcher=/\d{13}/;exports.is=function(string){return matcher.test(string)},exports.parse=function(millis){return millis=parseInt(millis,10),new Date(millis)}},"./node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/seconds.js":(__unused_webpack_module,exports)=>{"use strict";var matcher=/\d{10}/;exports.is=function(string){return matcher.test(string)},exports.parse=function(seconds){var millis=1e3*parseInt(seconds,10);return new Date(millis)}},"./node_modules/.pnpm/obj-case@0.2.1/node_modules/obj-case/index.js":module=>{function multiple(fn){return function(obj,path,val,options){var key,normalize=options&&function isFunction(val){return"function"==typeof val}(options.normalizer)?options.normalizer:defaultNormalize;path=normalize(path);for(var finished=!1;!finished;)loop();function loop(){for(key in obj){var normalizedKey=normalize(key);if(0===path.indexOf(normalizedKey)){var temp=path.substr(normalizedKey.length);if("."===temp.charAt(0)||0===temp.length){path=temp.substr(1);var child=obj[key];return null==child?void(finished=!0):path.length?void(obj=child):void(finished=!0)}}}key=void 0,finished=!0}if(key)return null==obj?obj:fn(obj,key,val)}}function del(obj,key){return obj.hasOwnProperty(key)&&delete obj[key],obj}function replace(obj,key,val){return obj.hasOwnProperty(key)&&(obj[key]=val),obj}function defaultNormalize(path){return path.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}module.exports=multiple((function find(obj,key){if(obj.hasOwnProperty(key))return obj[key]})),module.exports.find=module.exports,module.exports.replace=function(obj,key,val,options){return multiple(replace).call(this,obj,key,val,options),obj},module.exports.del=function(obj,key,options){return multiple(del).call(this,obj,key,null,options),obj}},"./node_modules/.pnpm/property-expr@2.0.6/node_modules/property-expr/index.js":module=>{"use strict";function Cache(maxSize){this._maxSize=maxSize,this.clear()}Cache.prototype.clear=function(){this._size=0,this._values=Object.create(null)},Cache.prototype.get=function(key){return this._values[key]},Cache.prototype.set=function(key,value){return this._size>=this._maxSize&&this.clear(),key in this._values||this._size++,this._values[key]=value};var SPLIT_REGEX=/[^.^\]^[]+|(?=\[\]|\.\.)/g,DIGIT_REGEX=/^\d+$/,LEAD_DIGIT_REGEX=/^\d/,SPEC_CHAR_REGEX=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,CLEAN_QUOTES_REGEX=/^\s*(['"]?)(.*?)(\1)\s*$/,pathCache=new Cache(512),setCache=new Cache(512),getCache=new Cache(512);function normalizePath(path){return pathCache.get(path)||pathCache.set(path,split(path).map((function(part){return part.replace(CLEAN_QUOTES_REGEX,"$2")})))}function split(path){return path.match(SPLIT_REGEX)||[""]}function isQuoted(str){return"string"==typeof str&&str&&-1!==["'",'"'].indexOf(str.charAt(0))}function shouldBeQuoted(part){return!isQuoted(part)&&(function hasLeadingNumber(part){return part.match(LEAD_DIGIT_REGEX)&&!part.match(DIGIT_REGEX)}(part)||function hasSpecialChars(part){return SPEC_CHAR_REGEX.test(part)}(part))}module.exports={Cache,split,normalizePath,setter:function(path){var parts=normalizePath(path);return setCache.get(path)||setCache.set(path,(function setter(obj,value){for(var index=0,len=parts.length,data=obj;index<len-1;){var part=parts[index];if("__proto__"===part||"constructor"===part||"prototype"===part)return obj;data=data[parts[index++]]}data[parts[index]]=value}))},getter:function(path,safe){var parts=normalizePath(path);return getCache.get(path)||getCache.set(path,(function getter(data){for(var index=0,len=parts.length;index<len;){if(null==data&&safe)return;data=data[parts[index++]]}return data}))},join:function(segments){return segments.reduce((function(path,part){return path+(isQuoted(part)||DIGIT_REGEX.test(part)?"["+part+"]":(path?".":"")+part)}),"")},forEach:function(path,cb,thisArg){!function forEach(parts,iter,thisArg){var part,idx,isArray,isBracket,len=parts.length;for(idx=0;idx<len;idx++)(part=parts[idx])&&(shouldBeQuoted(part)&&(part='"'+part+'"'),isArray=!(isBracket=isQuoted(part))&&/^\d+$/.test(part),iter.call(thisArg,part,isBracket,isArray,idx,parts))}(Array.isArray(path)?path:split(path),cb,thisArg)}}},"./node_modules/.pnpm/punycode@2.3.1/node_modules/punycode/punycode.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";Math.floor,String.fromCharCode},"./node_modules/.pnpm/randombytes@2.1.0/node_modules/randombytes/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,crypto=__webpack_require__.g.crypto||__webpack_require__.g.msCrypto;crypto&&crypto.getRandomValues?module.exports=function randomBytes(size,cb){if(size>4294967295)throw new RangeError("requested too many random bytes");var bytes=Buffer.allocUnsafe(size);if(size>0)if(size>65536)for(var generated=0;generated<size;generated+=65536)crypto.getRandomValues(bytes.slice(generated,generated+65536));else crypto.getRandomValues(bytes);if("function"==typeof cb)return process.nextTick((function(){cb(null,bytes)}));return bytes}:module.exports=function oldBrowser(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js":module=>{"use strict";var codes={};function createErrorType(code,message,Base){Base||(Base=Error);var NodeError=function(_Base){function NodeError(arg1,arg2,arg3){return _Base.call(this,function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3))||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}(NodeError,_Base),NodeError}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map((function(i){return String(i)})),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(String(expected))}createErrorType("ERR_INVALID_OPT_VALUE",(function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(name,expected,actual){var determiner,msg;if("string"==typeof expected&&function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(name){return"The "+name+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(name){return"Cannot call "+name+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(arg){return"Unknown encoding: "+arg}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.F=codes},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_writable.js");__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}})},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_transform.js");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");module.exports=Readable,Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,OurUint8Array=(void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var debug,debugUtil=__webpack_require__("?9bba");debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function debug(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/buffer_list.js"),destroyImpl=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js").F,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/.pnpm/string_decoder@1.3.0/node_modules/string_decoder/lib/string_decoder.js").I),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var er,state=stream._readableState;if(null===chunk)state.reading=!1,function onEofChunk(stream,state){if(debug("onEofChunk"),state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}(stream,state);else if(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk));return er}(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state));return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=__webpack_require__("./node_modules/.pnpm/string_decoder@1.3.0/node_modules/string_decoder/lib/string_decoder.js").I);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};var MAX_HWM=1073741824;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),state.destroyed||!state.length&&!state.ended||(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self.listenerCount("data")>0&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0!==state.highWaterMark?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=this.listenerCount("readable")>0,!1!==state.flowing&&this.resume()):"readable"===ev&&(state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||process.nextTick(nReadingNextTick,this))),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ev&&void 0!==ev||process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/async_iterator.js")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/from-browser.js")),from(Readable,iterable,opts)})},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var _require$codes=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js").F,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js");function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(er,data){done(_this,er,data)}))}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2)}))}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}(_this,state)}}module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__("./node_modules/.pnpm/util-deprecate@1.0.2/node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,OurUint8Array=(void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js").F,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){var isDuplex=this instanceof(Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js"));if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(function prefinish(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js")(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function realHasInstance(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"==typeof chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/async_iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Object$setPrototypeO,process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value,done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(resolve,reject){process.nextTick((function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))}))}));var promise,lastPromise=this[kLastPromise];if(lastPromise)promise=new Promise(function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then((function(){iter[kEnded]?resolve(createIterResult(void 0,!0)):iter[kHandlePromise](resolve,reject)}),reject)}}(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function _return(){var _this2=this;return new Promise((function(resolve,reject){_this2[kStream].destroy(null,(function(err){err?reject(err):resolve(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype);module.exports=function createReadableStreamAsyncIterator(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(_Object$create={},kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,(function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0})),stream.on("readable",onReadable.bind(null,iterator)),iterator}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/buffer_list.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,inspect=__webpack_require__("?b231").inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(0===this.length)return Buffer.alloc(0);for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,Buffer.prototype.copy.call(src,target,offset),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):ret=n===this.head.data.length?this.shift():hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function value(_,options){return inspect(this,_objectSpread(_objectSpread({},options),{},{depth:0,customInspect:!1}))}}]),BufferList}()},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js").F.ERR_STREAM_PREMATURE_CLOSE;function noop(){}module.exports=function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function onlegacyfinish(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function onfinish(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function onend(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function onerror(err){callback.call(stream,err)},onclose=function onclose(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function onrequest(){stream.req.on("finish",onfinish)};return!function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/from-browser.js":module=>{module.exports=function(){throw new Error("Readable.from is not available in the browser")}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/pipeline.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var eos;var _require$codes=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js").F,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}module.exports=function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var error,callback=function popCallback(streams){return streams.length?"function"!=typeof streams[streams.length-1]?noop:streams.pop():noop}(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return function destroyer(stream,reading,writing,callback){callback=function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}(callback);var closed=!1;stream.on("close",(function(){closed=!0})),void 0===eos&&(eos=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/end-of-stream.js")),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe"))}}(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/state.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js").F.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=function highWaterMarkFrom(options,isDuplex,duplexKey){return null!=options.highWaterMark?options.highWaterMark:isDuplex?options[duplexKey]:null}(options,isDuplex,duplexKey);if(null!=hwm){if(!isFinite(hwm)||Math.floor(hwm)!==hwm||hwm<0)throw new ERR_INVALID_OPT_VALUE(isDuplex?duplexKey:"highWaterMark",hwm);return Math.floor(hwm)}return state.objectMode?16:16384}}},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js").EventEmitter},"./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_passthrough.js"),exports.finished=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),exports.pipeline=__webpack_require__("./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/pipeline.js")},"./node_modules/.pnpm/ripemd160@2.0.2/node_modules/ripemd160/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),HashBase=__webpack_require__("./node_modules/.pnpm/hash-base@3.1.0/node_modules/hash-base/index.js"),ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function rotl(x,n){return x<<n|x>>>32-n}function fn1(a,b,c,d,e,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+e|0}function fn2(a,b,c,d,e,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+e|0}function fn3(a,b,c,d,e,m,k,s){return rotl(a+((b|~c)^d)+m+k|0,s)+e|0}function fn4(a,b,c,d,e,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+e|0}function fn5(a,b,c,d,e,m,k,s){return rotl(a+(b^(c|~d))+m+k|0,s)+e|0}inherits(RIPEMD160,HashBase),RIPEMD160.prototype._update=function(){for(var words=ARRAY16,j=0;j<16;++j)words[j]=this._block.readInt32LE(4*j);for(var al=0|this._a,bl=0|this._b,cl=0|this._c,dl=0|this._d,el=0|this._e,ar=0|this._a,br=0|this._b,cr=0|this._c,dr=0|this._d,er=0|this._e,i=0;i<80;i+=1){var tl,tr;i<16?(tl=fn1(al,bl,cl,dl,el,words[zl[i]],hl[0],sl[i]),tr=fn5(ar,br,cr,dr,er,words[zr[i]],hr[0],sr[i])):i<32?(tl=fn2(al,bl,cl,dl,el,words[zl[i]],hl[1],sl[i]),tr=fn4(ar,br,cr,dr,er,words[zr[i]],hr[1],sr[i])):i<48?(tl=fn3(al,bl,cl,dl,el,words[zl[i]],hl[2],sl[i]),tr=fn3(ar,br,cr,dr,er,words[zr[i]],hr[2],sr[i])):i<64?(tl=fn4(al,bl,cl,dl,el,words[zl[i]],hl[3],sl[i]),tr=fn2(ar,br,cr,dr,er,words[zr[i]],hr[3],sr[i])):(tl=fn5(al,bl,cl,dl,el,words[zl[i]],hl[4],sl[i]),tr=fn1(ar,br,cr,dr,er,words[zr[i]],hr[4],sr[i])),al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=tl,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=tr}var t=this._b+cl+dr|0;this._b=this._c+dl+er|0,this._c=this._d+el+ar|0,this._d=this._e+al+br|0,this._e=this._a+bl+cr|0,this._a=t},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer.alloc?Buffer.alloc(20):new Buffer(20);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer.writeInt32LE(this._e,16),buffer},module.exports=RIPEMD160},"./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js":(module,exports,__webpack_require__)=>{var buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js"),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(Buffer.prototype),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer;function Hash(blockSize,finalSize){this._block=Buffer.alloc(blockSize),this._finalSize=finalSize,this._blockSize=blockSize,this._len=0}Hash.prototype.update=function(data,enc){"string"==typeof data&&(enc=enc||"utf8",data=Buffer.from(data,enc));for(var block=this._block,blockSize=this._blockSize,length=data.length,accum=this._len,offset=0;offset<length;){for(var assigned=accum%blockSize,remainder=Math.min(length-offset,blockSize-assigned),i=0;i<remainder;i++)block[assigned+i]=data[offset+i];offset+=remainder,(accum+=remainder)%blockSize==0&&this._update(block)}return this._len+=length,this},Hash.prototype.digest=function(enc){var rem=this._len%this._blockSize;this._block[rem]=128,this._block.fill(0,rem+1),rem>=this._finalSize&&(this._update(this._block),this._block.fill(0));var bits=8*this._len;if(bits<=4294967295)this._block.writeUInt32BE(bits,this._blockSize-4);else{var lowBits=(4294967295&bits)>>>0,highBits=(bits-lowBits)/4294967296;this._block.writeUInt32BE(highBits,this._blockSize-8),this._block.writeUInt32BE(lowBits,this._blockSize-4)}this._update(this._block);var hash=this._hash();return enc?hash.toString(enc):hash},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=Hash},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var exports=module.exports=function SHA(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+" is not supported (we accept pull requests)");return new Algorithm};exports.sha=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha.js"),exports.sha1=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha1.js"),exports.sha224=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha224.js"),exports.sha256=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha256.js"),exports.sha384=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha384.js"),exports.sha512=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha512.js")},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha.js":(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),Hash=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return 0===s?b&c|~b&d:2===s?b&c|b&d|c&d:b^c^d}inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(M){for(var num,W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<80;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];for(var j=0;j<80;++j){var s=~~(j/20),t=0|((num=a)<<5|num>>>27)+ft(s,b,c,d)+e+W[j]+K[s];e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha.prototype._hash=function(){var H=Buffer.allocUnsafe(20);return H.writeInt32BE(0|this._a,0),H.writeInt32BE(0|this._b,4),H.writeInt32BE(0|this._c,8),H.writeInt32BE(0|this._d,12),H.writeInt32BE(0|this._e,16),H},module.exports=Sha},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha1.js":(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),Hash=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return 0===s?b&c|~b&d:2===s?b&c|b&d|c&d:b^c^d}inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(M){for(var num,W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<80;++i)W[i]=(num=W[i-3]^W[i-8]^W[i-14]^W[i-16])<<1|num>>>31;for(var j=0;j<80;++j){var s=~~(j/20),t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha1.prototype._hash=function(){var H=Buffer.allocUnsafe(20);return H.writeInt32BE(0|this._a,0),H.writeInt32BE(0|this._b,4),H.writeInt32BE(0|this._c,8),H.writeInt32BE(0|this._d,12),H.writeInt32BE(0|this._e,16),H},module.exports=Sha1},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha224.js":(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),Sha256=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha256.js"),Hash=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,W=new Array(64);function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var H=Buffer.allocUnsafe(28);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H},module.exports=Sha224},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha256.js":(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),Hash=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(M){for(var x,W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,f=0|this._f,g=0|this._g,h=0|this._h,i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<64;++i)W[i]=0|(((x=W[i-2])>>>17|x<<15)^(x>>>19|x<<13)^x>>>10)+W[i-7]+gamma0(W[i-15])+W[i-16];for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0,T2=sigma0(a)+maj(a,b,c)|0;h=g,g=f,f=e,e=d+T1|0,d=c,c=b,b=a,a=T1+T2|0}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=h+this._h|0},Sha256.prototype._hash=function(){var H=Buffer.allocUnsafe(32);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H.writeInt32BE(this._h,28),H},module.exports=Sha256},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha384.js":(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),SHA512=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha512.js"),Hash=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var H=Buffer.allocUnsafe(48);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),H},module.exports=Sha384},"./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/sha512.js":(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),Hash=__webpack_require__("./node_modules/.pnpm/sha.js@2.4.11/node_modules/sha.js/hash.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return a>>>0<b>>>0?1:0}inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(M){for(var W=this._w,ah=0|this._ah,bh=0|this._bh,ch=0|this._ch,dh=0|this._dh,eh=0|this._eh,fh=0|this._fh,gh=0|this._gh,hh=0|this._hh,al=0|this._al,bl=0|this._bl,cl=0|this._cl,dl=0|this._dl,el=0|this._el,fl=0|this._fl,gl=0|this._gl,hl=0|this._hl,i=0;i<32;i+=2)W[i]=M.readInt32BE(4*i),W[i+1]=M.readInt32BE(4*i+4);for(;i<160;i+=2){var xh=W[i-30],xl=W[i-30+1],gamma0=Gamma0(xh,xl),gamma0l=Gamma0l(xl,xh),gamma1=Gamma1(xh=W[i-4],xl=W[i-4+1]),gamma1l=Gamma1l(xl,xh),Wi7h=W[i-14],Wi7l=W[i-14+1],Wi16h=W[i-32],Wi16l=W[i-32+1],Wil=gamma0l+Wi7l|0,Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wih=(Wih=Wih+gamma1+getCarry(Wil=Wil+gamma1l|0,gamma1l)|0)+Wi16h+getCarry(Wil=Wil+Wi16l|0,Wi16l)|0,W[i]=Wih,W[i+1]=Wil}for(var j=0;j<160;j+=2){Wih=W[j],Wil=W[j+1];var majh=maj(ah,bh,ch),majl=maj(al,bl,cl),sigma0h=sigma0(ah,al),sigma0l=sigma0(al,ah),sigma1h=sigma1(eh,el),sigma1l=sigma1(el,eh),Kih=K[j],Kil=K[j+1],chh=Ch(eh,fh,gh),chl=Ch(el,fl,gl),t1l=hl+sigma1l|0,t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1h=(t1h=(t1h=t1h+chh+getCarry(t1l=t1l+chl|0,chl)|0)+Kih+getCarry(t1l=t1l+Kil|0,Kil)|0)+Wih+getCarry(t1l=t1l+Wil|0,Wil)|0;var t2l=sigma0l+majl|0,t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=dh+t1h+getCarry(el=dl+t1l|0,dl)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=t1h+t2h+getCarry(al=t1l+t2l|0,t1l)|0}this._al=this._al+al|0,this._bl=this._bl+bl|0,this._cl=this._cl+cl|0,this._dl=this._dl+dl|0,this._el=this._el+el|0,this._fl=this._fl+fl|0,this._gl=this._gl+gl|0,this._hl=this._hl+hl|0,this._ah=this._ah+ah+getCarry(this._al,al)|0,this._bh=this._bh+bh+getCarry(this._bl,bl)|0,this._ch=this._ch+ch+getCarry(this._cl,cl)|0,this._dh=this._dh+dh+getCarry(this._dl,dl)|0,this._eh=this._eh+eh+getCarry(this._el,el)|0,this._fh=this._fh+fh+getCarry(this._fl,fl)|0,this._gh=this._gh+gh+getCarry(this._gl,gl)|0,this._hh=this._hh+hh+getCarry(this._hl,hl)|0},Sha512.prototype._hash=function(){var H=Buffer.allocUnsafe(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),H},module.exports=Sha512},"./node_modules/.pnpm/string_decoder@1.3.0/node_modules/string_decoder/lib/string_decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function normalizeEncoding(enc){var nenc=function _normalizeEncoding(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function utf8CheckExtraBytes(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"";if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"";if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,""}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.I=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r},StringDecoder.prototype.text=function utf8Text(buf,i){var total=function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if(nb=utf8CheckByte(buf[j]),nb>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if(nb=utf8CheckByte(buf[j]),nb>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},"./node_modules/.pnpm/tiny-case@1.0.3/node_modules/tiny-case/index.js":module=>{const reWords=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,words=str=>str.match(reWords)||[],upperFirst=str=>str[0].toUpperCase()+str.slice(1),join=(str,d)=>words(str).join(d).toLowerCase(),camelCase=str=>words(str).reduce(((acc,next)=>`${acc}${acc?next[0].toUpperCase()+next.slice(1).toLowerCase():next.toLowerCase()}`),"");module.exports={words,upperFirst,camelCase,pascalCase:str=>upperFirst(camelCase(str)),snakeCase:str=>join(str,"_"),kebabCase:str=>join(str,"-"),sentenceCase:str=>upperFirst(join(str," ")),titleCase:str=>words(str).map(upperFirst).join(" ")}},"./node_modules/.pnpm/toposort@2.0.2/node_modules/toposort/index.js":module=>{function toposort(nodes,edges){var cursor=nodes.length,sorted=new Array(cursor),visited={},i=cursor,outgoingEdges=function makeOutgoingEdges(arr){for(var edges=new Map,i=0,len=arr.length;i<len;i++){var edge=arr[i];edges.has(edge[0])||edges.set(edge[0],new Set),edges.has(edge[1])||edges.set(edge[1],new Set),edges.get(edge[0]).add(edge[1])}return edges}(edges),nodesHash=function makeNodesHash(arr){for(var res=new Map,i=0,len=arr.length;i<len;i++)res.set(arr[i],i);return res}(nodes);for(edges.forEach((function(edge){if(!nodesHash.has(edge[0])||!nodesHash.has(edge[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));i--;)visited[i]||visit(nodes[i],i,new Set);return sorted;function visit(node,i,predecessors){if(predecessors.has(node)){var nodeRep;try{nodeRep=", node was:"+JSON.stringify(node)}catch(e){nodeRep=""}throw new Error("Cyclic dependency"+nodeRep)}if(!nodesHash.has(node))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(node));if(!visited[i]){visited[i]=!0;var outgoing=outgoingEdges.get(node)||new Set;if(i=(outgoing=Array.from(outgoing)).length){predecessors.add(node);do{var child=outgoing[--i];visit(child,nodesHash.get(child),predecessors)}while(i);predecessors.delete(node)}sorted[--cursor]=node}}}module.exports=function(edges){return toposort(function uniqueNodes(arr){for(var res=new Set,i=0,len=arr.length;i<len;i++){var edge=arr[i];res.add(edge[0]),res.add(edge[1])}return Array.from(res)}(edges),edges)},module.exports.array=toposort},"./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/errors.js":(module,__unused_webpack_exports,__webpack_require__)=>{var native=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/native.js");function getTypeName(fn){return fn.name||fn.toString().match(/function (.*?)\s*\(/)[1]}function getValueTypeName(value){return native.Nil(value)?"":getTypeName(value.constructor)}function captureStackTrace(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function tfJSON(type){return native.Function(type)?type.toJSON?type.toJSON():getTypeName(type):native.Array(type)?"Array":type&&native.Object(type)?"Object":void 0!==type?type:""}function tfErrorString(type,value,valueTypeName){var valueJson=function getValue(value){return native.Function(value)?"":native.String(value)?JSON.stringify(value):value&&native.Object(value)?"":value}(value);return"Expected "+tfJSON(type)+", got"+(""!==valueTypeName?" "+valueTypeName:"")+(""!==valueJson?" "+valueJson:"")}function TfTypeError(type,value,valueTypeName){valueTypeName=valueTypeName||getValueTypeName(value),this.message=tfErrorString(type,value,valueTypeName),captureStackTrace(this,TfTypeError),this.__type=type,this.__value=value,this.__valueTypeName=valueTypeName}function TfPropertyTypeError(type,property,label,value,valueTypeName){type?(valueTypeName=valueTypeName||getValueTypeName(value),this.message=function tfPropertyErrorString(type,label,name,value,valueTypeName){var description='" of type ';return"key"===label&&(description='" with key type '),tfErrorString('property "'+tfJSON(name)+description+tfJSON(type),value,valueTypeName)}(type,label,property,value,valueTypeName)):this.message='Unexpected property "'+property+'"',captureStackTrace(this,TfTypeError),this.__label=label,this.__property=property,this.__type=type,this.__value=value,this.__valueTypeName=valueTypeName}TfTypeError.prototype=Object.create(Error.prototype),TfTypeError.prototype.constructor=TfTypeError,TfPropertyTypeError.prototype=Object.create(Error.prototype),TfPropertyTypeError.prototype.constructor=TfTypeError,module.exports={TfTypeError,TfPropertyTypeError,tfCustomError:function tfCustomError(expected,actual){return new TfTypeError(expected,{},actual)},tfSubError:function tfSubError(e,property,label){return e instanceof TfPropertyTypeError?(property=property+"."+e.__property,e=new TfPropertyTypeError(e.__type,property,e.__label,e.__value,e.__valueTypeName)):e instanceof TfTypeError&&(e=new TfPropertyTypeError(e.__type,property,label,e.__value,e.__valueTypeName)),captureStackTrace(e),e},tfJSON,getValueTypeName}},"./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/extra.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,NATIVE=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/native.js"),ERRORS=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/errors.js");function _Buffer(value){return Buffer.isBuffer(value)}function Hex(value){return"string"==typeof value&&/^([0-9a-f]{2})+$/i.test(value)}function _LengthN(type,length){var name=type.toJSON();function Length(value){if(!type(value))return!1;if(value.length===length)return!0;throw ERRORS.tfCustomError(name+"(Length: "+length+")",name+"(Length: "+value.length+")")}return Length.toJSON=function(){return name},Length}var _ArrayN=_LengthN.bind(null,NATIVE.Array),_BufferN=_LengthN.bind(null,_Buffer),_HexN=_LengthN.bind(null,Hex),_StringN=_LengthN.bind(null,NATIVE.String);var INT53_MAX=Math.pow(2,53)-1;var types={ArrayN:_ArrayN,Buffer:_Buffer,BufferN:_BufferN,Finite:function Finite(value){return"number"==typeof value&&isFinite(value)},Hex,HexN:_HexN,Int8:function Int8(value){return value<<24>>24===value},Int16:function Int16(value){return value<<16>>16===value},Int32:function Int32(value){return(0|value)===value},Int53:function Int53(value){return"number"==typeof value&&value>=-INT53_MAX&&value<=INT53_MAX&&Math.floor(value)===value},Range:function Range(a,b,f){function _range(value,strict){return f(value,strict)&&value>a&&value<b}return f=f||NATIVE.Number,_range.toJSON=function(){return`${f.toJSON()} between [${a}, ${b}]`},_range},StringN:_StringN,UInt8:function UInt8(value){return(255&value)===value},UInt16:function UInt16(value){return(65535&value)===value},UInt32:function UInt32(value){return value>>>0===value},UInt53:function UInt53(value){return"number"==typeof value&&value>=0&&value<=INT53_MAX&&Math.floor(value)===value}};for(var typeName in types)types[typeName].toJSON=function(t){return t}.bind(null,typeName);module.exports=types},"./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ERRORS=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/errors.js"),NATIVE=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/native.js"),tfJSON=ERRORS.tfJSON,TfTypeError=ERRORS.TfTypeError,TfPropertyTypeError=ERRORS.TfPropertyTypeError,tfSubError=ERRORS.tfSubError,getValueTypeName=ERRORS.getValueTypeName,TYPES={arrayOf:function arrayOf(type,options){function _arrayOf(array,strict){return!!NATIVE.Array(array)&&(!NATIVE.Nil(array)&&(!(void 0!==options.minLength&&array.length<options.minLength)&&(!(void 0!==options.maxLength&&array.length>options.maxLength)&&((void 0===options.length||array.length===options.length)&&array.every((function(value,i){try{return typeforce(type,value,strict)}catch(e){throw tfSubError(e,i)}}))))))}return type=compile(type),options=options||{},_arrayOf.toJSON=function(){var str="["+tfJSON(type)+"]";return void 0!==options.length?str+="{"+options.length+"}":void 0===options.minLength&&void 0===options.maxLength||(str+="{"+(void 0===options.minLength?0:options.minLength)+","+(void 0===options.maxLength?1/0:options.maxLength)+"}"),str},_arrayOf},maybe:function maybe(type){function _maybe(value,strict){return NATIVE.Nil(value)||type(value,strict,maybe)}return type=compile(type),_maybe.toJSON=function(){return"?"+tfJSON(type)},_maybe},map:function map(propertyType,propertyKeyType){function _map(value,strict){if(!NATIVE.Object(value))return!1;if(NATIVE.Nil(value))return!1;for(var propertyName in value){try{propertyKeyType&&typeforce(propertyKeyType,propertyName,strict)}catch(e){throw tfSubError(e,propertyName,"key")}try{var propertyValue=value[propertyName];typeforce(propertyType,propertyValue,strict)}catch(e){throw tfSubError(e,propertyName)}}return!0}return propertyType=compile(propertyType),propertyKeyType&&(propertyKeyType=compile(propertyKeyType)),_map.toJSON=propertyKeyType?function(){return"{"+tfJSON(propertyKeyType)+": "+tfJSON(propertyType)+"}"}:function(){return"{"+tfJSON(propertyType)+"}"},_map},object:function object(uncompiled){var type={};for(var typePropertyName in uncompiled)type[typePropertyName]=compile(uncompiled[typePropertyName]);function _object(value,strict){if(!NATIVE.Object(value))return!1;if(NATIVE.Nil(value))return!1;var propertyName;try{for(propertyName in type){typeforce(type[propertyName],value[propertyName],strict)}}catch(e){throw tfSubError(e,propertyName)}if(strict)for(propertyName in value)if(!type[propertyName])throw new TfPropertyTypeError(void 0,propertyName);return!0}return _object.toJSON=function(){return tfJSON(type)},_object},anyOf:function anyOf(){var types=[].slice.call(arguments).map(compile);function _anyOf(value,strict){return types.some((function(type){try{return typeforce(type,value,strict)}catch(e){return!1}}))}return _anyOf.toJSON=function(){return types.map(tfJSON).join("|")},_anyOf},allOf:function allOf(){var types=[].slice.call(arguments).map(compile);function _allOf(value,strict){return types.every((function(type){try{return typeforce(type,value,strict)}catch(e){return!1}}))}return _allOf.toJSON=function(){return types.map(tfJSON).join(" & ")},_allOf},quacksLike:function quacksLike(type){function _quacksLike(value){return type===getValueTypeName(value)}return _quacksLike.toJSON=function(){return type},_quacksLike},tuple:function tuple(){var types=[].slice.call(arguments).map(compile);function _tuple(values,strict){return!NATIVE.Nil(values)&&(!NATIVE.Nil(values.length)&&((!strict||values.length===types.length)&&types.every((function(type,i){try{return typeforce(type,values[i],strict)}catch(e){throw tfSubError(e,i)}}))))}return _tuple.toJSON=function(){return"("+types.map(tfJSON).join(", ")+")"},_tuple},value:function value(expected){function _value(actual){return actual===expected}return _value.toJSON=function(){return expected},_value}};function compile(type){if(NATIVE.String(type))return"?"===type[0]?TYPES.maybe(type.slice(1)):NATIVE[type]||TYPES.quacksLike(type);if(type&&NATIVE.Object(type)){if(NATIVE.Array(type)){if(1!==type.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return TYPES.arrayOf(type[0])}return TYPES.object(type)}return NATIVE.Function(type)?type:TYPES.value(type)}function typeforce(type,value,strict,surrogate){if(NATIVE.Function(type)){if(type(value,strict))return!0;throw new TfTypeError(surrogate||type,value)}return typeforce(compile(type),value,strict)}for(var typeName in TYPES.oneOf=TYPES.anyOf,NATIVE)typeforce[typeName]=NATIVE[typeName];for(typeName in TYPES)typeforce[typeName]=TYPES[typeName];var EXTRA=__webpack_require__("./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/extra.js");for(typeName in EXTRA)typeforce[typeName]=EXTRA[typeName];typeforce.compile=compile,typeforce.TfTypeError=TfTypeError,typeforce.TfPropertyTypeError=TfPropertyTypeError,module.exports=typeforce},"./node_modules/.pnpm/typeforce@1.18.0/node_modules/typeforce/native.js":module=>{var types={Array:function(value){return null!=value&&value.constructor===Array},Boolean:function(value){return"boolean"==typeof value},Function:function(value){return"function"==typeof value},Nil:function(value){return null==value},Number:function(value){return"number"==typeof value},Object:function(value){return"object"==typeof value},String:function(value){return"string"==typeof value},"":function(){return!0}};for(var typeName in types.Null=types.Nil,types)types[typeName].toJSON=function(t){return t}.bind(null,typeName);module.exports=types},"./node_modules/.pnpm/util-deprecate@1.0.2/node_modules/util-deprecate/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{function config(name){try{if(!__webpack_require__.g.localStorage)return!1}catch(_){return!1}var val=__webpack_require__.g.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}},"./node_modules/.pnpm/varuint-bitcoin@1.1.2/node_modules/varuint-bitcoin/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer,MAX_SAFE_INTEGER=9007199254740991;function checkUInt53(n){if(n<0||n>MAX_SAFE_INTEGER||n%1!=0)throw new RangeError("value out of range")}function encodingLength(number){return checkUInt53(number),number<253?1:number<=65535?3:number<=4294967295?5:9}module.exports={encode:function encode(number,buffer,offset){if(checkUInt53(number),buffer||(buffer=Buffer.allocUnsafe(encodingLength(number))),!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");return offset||(offset=0),number<253?(buffer.writeUInt8(number,offset),encode.bytes=1):number<=65535?(buffer.writeUInt8(253,offset),buffer.writeUInt16LE(number,offset+1),encode.bytes=3):number<=4294967295?(buffer.writeUInt8(254,offset),buffer.writeUInt32LE(number,offset+1),encode.bytes=5):(buffer.writeUInt8(255,offset),buffer.writeUInt32LE(number>>>0,offset+1),buffer.writeUInt32LE(number/4294967296|0,offset+5),encode.bytes=9),buffer},decode:function decode(buffer,offset){if(!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");offset||(offset=0);var first=buffer.readUInt8(offset);if(first<253)return decode.bytes=1,first;if(253===first)return decode.bytes=3,buffer.readUInt16LE(offset+1);if(254===first)return decode.bytes=5,buffer.readUInt32LE(offset+1);decode.bytes=9;var lo=buffer.readUInt32LE(offset+1),number=4294967296*buffer.readUInt32LE(offset+5)+lo;return checkUInt53(number),number},encodingLength}},"./node_modules/.pnpm/wif@2.0.6/node_modules/wif/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,bs58check=__webpack_require__("./node_modules/.pnpm/bs58check@2.1.2/node_modules/bs58check/index.js");function decodeRaw(buffer,version){if(void 0!==version&&buffer[0]!==version)throw new Error("Invalid network version");if(33===buffer.length)return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:!1};if(34!==buffer.length)throw new Error("Invalid WIF length");if(1!==buffer[33])throw new Error("Invalid compression flag");return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:!0}}function encodeRaw(version,privateKey,compressed){var result=new Buffer(compressed?34:33);return result.writeUInt8(version,0),privateKey.copy(result,1),compressed&&(result[33]=1),result}module.exports={decode:function decode(string,version){return decodeRaw(bs58check.decode(string),version)},decodeRaw,encode:function encode(version,privateKey,compressed){return"number"==typeof version?bs58check.encode(encodeRaw(version,privateKey,compressed)):bs58check.encode(encodeRaw(version.version,version.privateKey,version.compressed))},encodeRaw}}}]);