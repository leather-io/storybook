(self.webpackChunk_leather_io_extension=self.webpackChunk_leather_io_extension||[]).push([[160],{"./src/app/features/asset-list/stacks/stx-crypo-asset-item/stx-crypto-asset-item.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StxCryptoAssetItem:()=>stx_crypto_asset_item_stories_StxCryptoAssetItem,StxCryptoAssetItemWithLockedBalance:()=>StxCryptoAssetItemWithLockedBalance,__namedExportsOrder:()=>__namedExportsOrder,default:()=>stx_crypto_asset_item_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),dist=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-tooltip@1.0.7_@types+react-dom@18.3.0_@types+react@18.3.3_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@radix-ui/react-tooltip/dist/index.mjs"),QueryClientProvider=__webpack_require__("./node_modules/.pnpm/@tanstack+react-query@5.51.23_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),bignumber=__webpack_require__("./node_modules/.pnpm/bignumber.js@9.1.2/node_modules/bignumber.js/bignumber.mjs"),modern=__webpack_require__("./node_modules/.pnpm/@tanstack+query-async-storage-persister@5.51.21/node_modules/@tanstack/query-async-storage-persister/build/modern/index.js"),queryClient=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.51.21/node_modules/@tanstack/query-core/build/modern/queryClient.js"),queryCache=__webpack_require__("./node_modules/.pnpm/@tanstack+query-core@5.51.21/node_modules/@tanstack/query-core/build/modern/queryCache.js"),lib=__webpack_require__("./node_modules/.pnpm/zod@3.23.8/node_modules/zod/lib/index.mjs"),constants_dist=__webpack_require__("./node_modules/.pnpm/@leather.io+constants@0.9.1/node_modules/@leather.io/constants/dist/index.js"),process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");process.env.GITHUB_REF,process.env.GITHUB_HEAD_REF??process.env.BRANCH_NAME,process.env.PR_NUMBER,process.env.COINBASE_APP_ID,process.env.COMMIT_SHA,process.env.WALLET_ENVIRONMENT;const environment_IS_TEST_ENV="testing"===process.env.WALLET_ENVIRONMENT;process.env.MOONPAY_API_KEY,process.env.SEGMENT_WRITE_KEY,process.env.SENTRY_DSN,process.env.TRANSAK_API_KEY,process.env.WALLET_ENVIRONMENT,process.env.SWAP_ENABLED;var browser=__webpack_require__("./node_modules/.pnpm/pino@8.19.0/node_modules/pino/browser.js"),browser_default=__webpack_require__.n(browser),Subject=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Subject.js"),mergeMap=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),defer=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/defer.js"),chrome=__webpack_require__("./tests/mocks/mock-chrome.ts").h;const maxLogLength=2e3,logStorageKey="logs";function getStorageAdapter(){return chrome.storage.local}function truncateLogToMaxSize(logs){return logs.length<=maxLogLength?logs:logs.slice(0,maxLogLength)}async function getLogsFromBrowserStorage(){return new Promise((resolve=>getStorageAdapter().get([logStorageKey],(({logs})=>resolve(Array.isArray(logs)?logs:[])))))}var logger_chrome=__webpack_require__("./tests/mocks/mock-chrome.ts").h;const logs$=new Subject.B;logs$.pipe((0,mergeMap.Z)((log=>(0,defer.v)((()=>async function appendLogToBrowserStorage(logEvent){const logs=await getLogsFromBrowserStorage(),{ts,level,messages}=logEvent,formattedLogItem=[new Date(ts).toISOString(),level.label,...messages];return new Promise((resolve=>getStorageAdapter().set({[logStorageKey]:truncateLogToMaxSize([formattedLogItem,...logs])},(()=>resolve(formattedLogItem)))))}(log)))),1)).subscribe();const pinoLogger=browser_default()({enabled:!environment_IS_TEST_ENV,level:"info",browser:{asObject:!1,transmit:{level:"info",send(_level,logEvent){logger_chrome&&logs$.next(logEvent)}}}}),logger={debug(...args){pinoLogger.debug(...args)},info(...args){pinoLogger.info(...args)},warn(...args){pinoLogger.warn(...args)},error(...args){pinoLogger.error(...args)}};__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");var pkg_browser=__webpack_require__("./node_modules/.pnpm/@segment+analytics-next@1.70.0_encoding@0.1.13/node_modules/@segment/analytics-next/dist/pkg/browser/index.js"),feedbackSync=__webpack_require__("./node_modules/.pnpm/@sentry+browser@8.26.0/node_modules/@sentry/browser/build/npm/esm/feedbackSync.js"),tokens=__webpack_require__("./leather-styles/tokens/index.js");const analytics=new pkg_browser.N;(0,feedbackSync.X)({colorScheme:"system",isEmailRequired:!1,buttonLabel:"Give feedback",formTitle:"Give feedback",autoInject:!1,showEmail:!1,showName:!1,showBranding:!1,messageLabel:"Feedback",submitButtonLabel:"Send feedback",messagePlaceholder:"This is not a support tool. To get help, follow the link in the main menu on the homepage.",successMessageText:"Thanks for helping make Leather better",themeDark:{background:(0,tokens.S)("colors.ink.background-primary"),inputOutlineFocus:(0,tokens.S)("colors.ink.border-transparent"),submitBackground:(0,tokens.S)("colors.ink.component-background-default"),submitBackgroundHover:(0,tokens.S)("colors.ink.component-background-hover"),submitOutlineFocus:(0,tokens.S)("colors.ink.border-transparent"),submitBorder:(0,tokens.S)("colors.ink.component-background-default"),cancelBackground:(0,tokens.S)("colors.colorPalette.action-primary-default"),cancelBackgroundHover:(0,tokens.S)("colors.colorPalette.action-primary-hover")},themeLight:{submitBackground:(0,tokens.S)("colors.ink.text-primary"),submitBackgroundHover:(0,tokens.S)("colors.ink.text-primary"),submitOutlineFocus:(0,tokens.S)("colors.ink.text-primary")}});var persistence_chrome=__webpack_require__("./tests/mocks/mock-chrome.ts").h;const storage={getItem:async key=>(await persistence_chrome.storage.local.get(key))[key],setItem:(key,value)=>persistence_chrome.storage.local.set({[key]:value}),removeItem:key=>persistence_chrome.storage.local.remove([key])};(0,modern.$)({storage});const persistence_queryClient=new queryClient.E({queryCache:new queryCache.$({onError(error,query){if(function isZodError(error){return error instanceof lib.G||"ZodError"===error.name}(error)){const zodErrorReport={query:query.queryKey[0],hash:query.queryHash,error:JSON.stringify(error.issues)};logger.error("schema_fail",zodErrorReport),analytics.track("schema_fail",zodErrorReport)}}}),defaultOptions:{queries:{gcTime:constants_dist.n4,retry:!environment_IS_TEST_ENV&&3}}});var CryptoAssetSelectors,CryptoAssetSelectors2,jsx=__webpack_require__("./leather-styles/jsx/index.js"),query_dist=__webpack_require__("./node_modules/.pnpm/@leather.io+query@2.7.1_@stacks+network@6.13.0_encoding@0.1.13__encoding@0.1.13_react@18.3.1/node_modules/@leather.io/query/dist/index.js"),web=__webpack_require__("./node_modules/.pnpm/@leather.io+ui@1.16.0_@babel+core@7.25.2_@babel+preset-env@7.25.4_@babel+core@7.25.2__@types+_3nuki2tb6pqnrmzgelszk537dq/node_modules/@leather.io/ui/dist-web/web.js"),utils_dist=__webpack_require__("./node_modules/.pnpm/@leather.io+utils@0.13.2/node_modules/@leather.io/utils/dist/index.js"),basic_tooltip=__webpack_require__("./src/app/ui/components/tooltip/basic-tooltip.tsx");(CryptoAssetSelectors2=CryptoAssetSelectors||(CryptoAssetSelectors={})).CryptoAssetList="crypto-asset-list",CryptoAssetSelectors2.CryptoAssetListItem="crypto-asset-list-item-{symbol}";__webpack_require__("./node_modules/.pnpm/punycode@2.3.1/node_modules/punycode/punycode.es6.js"),__webpack_require__("./node_modules/.pnpm/@leather.io+models@0.13.0/node_modules/@leather.io/models/dist/index.js"),__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;const abbreviateNumber=n=>n<1e3?n.toString():n>=1e3&&n<1e6?+(n/1e3).toFixed(2)+"K":n>=1e6&&n<1e9?+(n/1e6).toFixed(2)+"M":n>=1e9&&n<1e12?+(n/1e9).toFixed(2)+"B":n>=1e12?+(n/1e12).toFixed(2)+"T":n.toString();(function isFullPage(){return document.location.pathname.startsWith("/index.html")})();function parseCryptoAssetBalance(availableBalance){const availableBalanceString=(0,utils_dist.gu)(availableBalance);return{availableBalanceString,dataTestId:CryptoAssetSelectors.CryptoAssetListItem.replace("{symbol}",availableBalance.symbol.toLowerCase()),formattedBalance:function formatBalance(amount){const noCommas=function removeCommas(amountWithCommas){return amountWithCommas.replace(/,/g,"")}(amount),number=noCommas.includes(".")?parseFloat(noCommas):parseInt(noCommas);return number>1e4?{isAbbreviated:!0,value:abbreviateNumber(number)}:{isAbbreviated:!1,value:amount}}(availableBalanceString)}}function CryptoAssetItemLayout({availableBalance,balanceSuffix,captionLeft,captionRightBulletInfo,contractId,fiatBalance,icon,isLoading=!1,isLoadingAdditionalData=!1,onSelectAsset,titleLeft,titleRightBulletInfo}){const{availableBalanceString,dataTestId,formattedBalance}=parseCryptoAssetBalance(availableBalance),titleRight=(0,jsx_runtime.jsx)(web.jt,{width:"126px",isLoading,children:(0,jsx_runtime.jsx)(basic_tooltip.G,{asChild:!0,label:formattedBalance.isAbbreviated?availableBalanceString:void 0,side:"left",children:(0,jsx_runtime.jsx)(jsx.so,{alignItems:"center",gap:"space.02",textStyle:"label.02",children:(0,jsx_runtime.jsxs)(web.ay,{children:[(0,jsx_runtime.jsxs)(jsx.I4.span,{"data-state":isLoadingAdditionalData?"loading":void 0,className:web.cC,children:[formattedBalance.value," ",balanceSuffix]}),titleRightBulletInfo]})})})}),captionRight=(0,jsx_runtime.jsx)(web.jt,{width:"78px",isLoading,children:(0,jsx_runtime.jsx)(jsx.so,{alignItems:"center",color:"ink.text-subdued",gap:"space.02",children:(0,jsx_runtime.jsxs)(web.ay,{children:[(0,jsx_runtime.jsx)(web.HL,{"data-state":isLoadingAdditionalData?"loading":void 0,className:web.cC,children:availableBalance.amount.toNumber()>0?fiatBalance:null}),captionRightBulletInfo]})})}),isInteractive=!!onSelectAsset,content=(0,jsx_runtime.jsx)(web.E7,{flagImg:icon,titleLeft:(0,utils_dist.sc)(titleLeft),captionLeft:(0,utils_dist.sc)(captionLeft),titleRight,captionRight});return isInteractive?(0,jsx_runtime.jsx)(web.oz,{"data-testid":dataTestId,onClick:()=>onSelectAsset(availableBalance.symbol,contractId),my:"space.02",children:content}):(0,jsx_runtime.jsx)(jsx.az,{my:"space.02",children:content})}try{CryptoAssetItemLayout.displayName="CryptoAssetItemLayout",CryptoAssetItemLayout.__docgenInfo={description:"",displayName:"CryptoAssetItemLayout",props:{availableBalance:{defaultValue:null,description:"",name:"availableBalance",required:!0,type:{name:"Money"}},balanceSuffix:{defaultValue:null,description:"",name:"balanceSuffix",required:!1,type:{name:"string"}},captionLeft:{defaultValue:null,description:"",name:"captionLeft",required:!0,type:{name:"string"}},captionRightBulletInfo:{defaultValue:null,description:"",name:"captionRightBulletInfo",required:!1,type:{name:"ReactNode"}},contractId:{defaultValue:null,description:"",name:"contractId",required:!1,type:{name:"string"}},fiatBalance:{defaultValue:null,description:"",name:"fiatBalance",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactNode"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isLoadingAdditionalData:{defaultValue:{value:"false"},description:"",name:"isLoadingAdditionalData",required:!1,type:{name:"boolean"}},onSelectAsset:{defaultValue:null,description:"",name:"onSelectAsset",required:!1,type:{name:"((symbol: string, contractId?: string) => void)"}},titleLeft:{defaultValue:null,description:"",name:"titleLeft",required:!0,type:{name:"string"}},titleRightBulletInfo:{defaultValue:null,description:"",name:"titleRightBulletInfo",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/app/components/crypto-asset-item/crypto-asset-item.layout.tsx#CryptoAssetItemLayout"]={docgenInfo:CryptoAssetItemLayout.__docgenInfo,name:"CryptoAssetItemLayout",path:"src/app/components/crypto-asset-item/crypto-asset-item.layout.tsx#CryptoAssetItemLayout"})}catch(__react_docgen_typescript_loader_error){}function StxCryptoAssetItem({balance,isLoading,onSelectAsset}){const marketData=(0,query_dist.UoM)("STX"),{availableBalance,lockedBalance}=balance,showLockedBalance=lockedBalance.amount.isGreaterThan(0),fiatLockedBalance=(0,utils_dist.Lx)((0,utils_dist.uE)(lockedBalance,marketData)),fiatAvailableBalance=(0,utils_dist.Lx)((0,utils_dist.uE)(availableBalance,marketData)),titleRightBulletInfo=(0,jsx_runtime.jsxs)(jsx.I4.span,{children:[(0,utils_dist.gu)(lockedBalance)," locked"]}),captionRightBulletInfo=(0,jsx_runtime.jsxs)(web.HL,{children:[fiatLockedBalance," locked"]});return(0,jsx_runtime.jsx)(CryptoAssetItemLayout,{availableBalance:balance.availableBalance,captionLeft:"STX",captionRightBulletInfo:showLockedBalance&&captionRightBulletInfo,fiatBalance:fiatAvailableBalance,icon:(0,jsx_runtime.jsx)(web.sC,{}),isLoading,onSelectAsset,titleLeft:"Stacks",titleRightBulletInfo:showLockedBalance&&titleRightBulletInfo})}try{StxCryptoAssetItem.displayName="StxCryptoAssetItem",StxCryptoAssetItem.__docgenInfo={description:"",displayName:"StxCryptoAssetItem",props:{balance:{defaultValue:null,description:"",name:"balance",required:!0,type:{name:"StxCryptoAssetBalance"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onSelectAsset:{defaultValue:null,description:"",name:"onSelectAsset",required:!1,type:{name:"((symbol: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/app/features/asset-list/stacks/stx-crypo-asset-item/stx-crypto-asset-item.tsx#StxCryptoAssetItem"]={docgenInfo:StxCryptoAssetItem.__docgenInfo,name:"StxCryptoAssetItem",path:"src/app/features/asset-list/stacks/stx-crypo-asset-item/stx-crypto-asset-item.tsx#StxCryptoAssetItem"})}catch(__react_docgen_typescript_loader_error){}const stx_crypto_asset_item_stories={component:StxCryptoAssetItem,tags:["autodocs"],title:"Feature/StxCryptoAssetItem",argTypes:{},parameters:{},decorators:[Story=>(0,jsx_runtime.jsx)(QueryClientProvider.Ht,{client:persistence_queryClient,children:(0,jsx_runtime.jsx)(dist.Bc,{children:(0,jsx_runtime.jsx)(Story,{})})})]},stxCryptoAssetBalance={availableBalance:{amount:new bignumber.A(1e11),decimals:6,symbol:"STX"},availableUnlockedBalance:{amount:new bignumber.A(1e11),decimals:6,symbol:"STX"},inboundBalance:{amount:new bignumber.A(0),decimals:6,symbol:"STX"},outboundBalance:{amount:new bignumber.A(0),decimals:6,symbol:"STX"},pendingBalance:{amount:new bignumber.A(0),decimals:6,symbol:"STX"},totalBalance:{amount:new bignumber.A(0),decimals:6,symbol:"STX"},unlockedBalance:{amount:new bignumber.A(0),decimals:6,symbol:"STX"}},stx_crypto_asset_item_stories_StxCryptoAssetItem={args:{balance:{...stxCryptoAssetBalance,lockedBalance:{amount:new bignumber.A(0),decimals:6,symbol:"STX"}},isLoading:!1}},StxCryptoAssetItemWithLockedBalance={args:{balance:{...stxCryptoAssetBalance,lockedBalance:{amount:new bignumber.A(1e9),decimals:6,symbol:"STX"}},isLoading:!1}},__namedExportsOrder=["StxCryptoAssetItem","StxCryptoAssetItemWithLockedBalance"]},"./src/app/ui/components/tooltip/basic-tooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>BasicTooltip});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),dist=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-tooltip@1.0.7_@types+react-dom@18.3.0_@types+react@18.3.3_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@radix-ui/react-tooltip/dist/index.mjs"),css=__webpack_require__("./leather-styles/css/index.js");const Tooltip={Root:function Root(props){return(0,jsx_runtime.jsx)(dist.bL,{...props})},Portal:function Portal(props){return(0,jsx_runtime.jsx)(dist.ZL,{...props})},Trigger:(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(dist.l9,{ref,...props}))),Content:(0,react.forwardRef)((({className,...props},ref)=>(0,jsx_runtime.jsx)(dist.UC,{className:`${defaultContentStyles} ${className}`,ref,...props}))),Arrow:(0,react.forwardRef)((({className,...props},ref)=>(0,jsx_runtime.jsx)(dist.i3,{className:`${defaultTooltipArrowStyles} ${className}`,ref,...props})))},defaultContentStyles=(0,css.AH)({bg:"ink.action-primary-default",borderRadius:"xs",px:"space.03",py:"space.02",textStyle:"body.02",animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",willChange:"transform, opacity",maxWidth:"250px",textAlign:"center",wordWrap:"break-word",color:"ink.background-primary",zIndex:4,"&[data-state='delayed-open'][data-side='top']":{animationName:"slideDownAndFade"},"&[data-state='delayed-open'][data-side='right']":{animationName:"slideLeftAndFade"},"&[data-state='delayed-open'][data-side='bottom']":{animationName:"slideUpAndFade"},"&[data-state='delayed-open'][data-side='left']":{animationName:"slideRightAndFade"}}),defaultTooltipArrowStyles=(0,css.AH)({fill:"ink.action-primary-default"});function BasicTooltip({children,label,disabled,side,asChild}){const isDisabled=!label||disabled;return(0,jsx_runtime.jsxs)(Tooltip.Root,{children:[(0,jsx_runtime.jsx)(Tooltip.Trigger,{asChild,children}),(0,jsx_runtime.jsx)(Tooltip.Portal,{children:(0,jsx_runtime.jsxs)(Tooltip.Content,{hidden:isDisabled,side,sideOffset:5,children:[label,(0,jsx_runtime.jsx)(Tooltip.Arrow,{})]})})]})}try{BasicTooltip.displayName="BasicTooltip",BasicTooltip.__docgenInfo={description:"",displayName:"BasicTooltip",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},side:{defaultValue:null,description:"",name:"side",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/app/ui/components/tooltip/basic-tooltip.tsx#BasicTooltip"]={docgenInfo:BasicTooltip.__docgenInfo,name:"BasicTooltip",path:"src/app/ui/components/tooltip/basic-tooltip.tsx#BasicTooltip"})}catch(__react_docgen_typescript_loader_error){}},"./tests/mocks/mock-chrome.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>chrome});const chrome={storage:{local:{clear(){},get(){},getBytesInUse(){},onChanged(){},remove(){},set(){}}},tabs:{sendMessage(){}},runtime:{sendMessage(){}}}},"?c692":()=>{},"?ddd9":()=>{},"?8d76":()=>{},"?b231":()=>{},"?9bba":()=>{}}]);